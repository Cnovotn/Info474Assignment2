!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!0})}function n(e,t){return Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e}var r,i,o,a,s=!1;function u(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function l(){r={},i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,s=u(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))o.call(n,c)&&(s[c]=n[c]);if(i){r=i(n);for(var f=0;f<r.length;f++)a.call(n,r[f])&&(s[r[f]]=n[r[f]])}}return s}}function c(){return s||(s=!0,l()),r}var f,d,h,p,m,g,y,v,b,x,w,_,k,E,S,A,C,D,M,F,N,$,T,O,z,R,P,L,B,I,j,U,q,W,H,V,G,Y,X,Q,J,K,Z,ee,te,ne,re,ie=!1;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ae(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||A}function se(){}function ue(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||A}function le(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)F.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:h,type:e,key:o,ref:a,props:i,_owner:M.current}}function ce(e){return"object"==typeof e&&null!==e&&e.$$typeof===h}function fe(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function de(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case h:case p:a=!0}}if(a)return i=i(a=e),e=""===r?"."+fe(a,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace($,"$&/")+"/"),de(i,t,n,"",(function(e){return e}))):null!=i&&(ce(i)&&(i=function(e,t){return{$$typeof:h,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace($,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=r+fe(o=e[s],s);a+=de(o,t,n,u,i)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=S&&e[S]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),s=0;!(o=e.next()).done;)a+=de(o=o.value,t,n,u=r+fe(o,s++),i);else if("object"===o)throw t=""+e,Error(oe(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function he(e,t,n){if(null==e)return e;var r=[],i=0;return de(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function pe(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}function me(){var e=T.current;if(null===e)throw Error(oe(321));return e}function ge(){return ie||(ie=!0,f={},d=c(),h=60103,p=60106,m=60107,f.Fragment=m,g=60108,f.StrictMode=g,y=60114,f.Profiler=y,v=60109,b=60110,x=60112,w=60113,f.Suspense=w,_=60115,k=60116,"function"==typeof Symbol&&Symbol.for&&(E=Symbol.for,h=E("react.element"),p=E("react.portal"),m=E("react.fragment"),f.Fragment=m,g=E("react.strict_mode"),f.StrictMode=g,y=E("react.profiler"),f.Profiler=y,v=E("react.provider"),b=E("react.context"),x=E("react.forward_ref"),w=E("react.suspense"),f.Suspense=w,_=E("react.memo"),k=E("react.lazy")),S="function"==typeof Symbol&&Symbol.iterator,A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C={},ae.prototype.isReactComponent={},ae.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(oe(85));this.updater.enqueueSetState(this,e,t,"setState")},ae.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},se.prototype=ae.prototype,(D=ue.prototype=new se).constructor=ue,d(D,ae.prototype),D.isPureReactComponent=!0,M={current:null},F=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0},$=/\/+/g,O={ReactCurrentDispatcher:T={current:null},ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:d},z={map:he,forEach:function(e,t,n){he(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return he(e,(function(){t++})),t},toArray:function(e){return he(e,(function(e){return e}))||[]},only:function(e){if(!ce(e))throw Error(oe(143));return e}},f.Children=z,R=ae,f.Component=R,P=ue,f.PureComponent=P,L=O,f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,B=function(e,t,n){if(null==e)throw Error(oe(267,e));var r=d({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=M.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)F.call(t,u)&&!N.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:h,type:e.type,key:i,ref:o,props:r,_owner:a}},f.cloneElement=B,I=function(e,t){return void 0===t&&(t=null),(e={$$typeof:b,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:e},e.Consumer=e},f.createContext=I,j=le,f.createElement=j,U=function(e){var t=le.bind(null,e);return t.type=e,t},f.createFactory=U,q=function(){return{current:null}},f.createRef=q,W=function(e){return{$$typeof:x,render:e}},f.forwardRef=W,H=ce,f.isValidElement=H,V=function(e){return{$$typeof:k,_payload:{_status:-1,_result:e},_init:pe}},f.lazy=V,G=function(e,t){return{$$typeof:_,type:e,compare:void 0===t?null:t}},f.memo=G,Y=function(e,t){return me().useCallback(e,t)},f.useCallback=Y,X=function(e,t){return me().useContext(e,t)},f.useContext=X,Q=function(){},f.useDebugValue=Q,J=function(e,t){return me().useEffect(e,t)},f.useEffect=J,K=function(e,t,n){return me().useImperativeHandle(e,t,n)},f.useImperativeHandle=K,Z=function(e,t){return me().useLayoutEffect(e,t)},f.useLayoutEffect=Z,ee=function(e,t){return me().useMemo(e,t)},f.useMemo=ee,te=function(e,t,n){return me().useReducer(e,t,n)},f.useReducer=te,ne=function(e){return me().useRef(e)},f.useRef=ne,re=function(e){return me().useState(e)},f.useState=re,"17.0.2",f.version="17.0.2"),f}var ye,ve,be=!1;function xe(){return be||(be=!0,ye={},ye=ge(),ve=e(ye)),ye}xe();var we,_e,ke,Ee,Se,Ae,Ce,De,Me,Fe,Ne,$e,Te,Oe,ze,Re,Pe,Le,Be,Ie,je,Ue,qe,We,He,Ve,Ge,Ye,Xe,Qe,Je,Ke,Ze,et,tt,nt,rt,it,ot,at,st,ut,lt,ct=!1;function ft(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<pt(i,t)))break e;e[r]=t,e[n]=i,n=r}}function dt(e){return void 0===(e=e[0])?null:e}function ht(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>pt(a,n))void 0!==u&&0>pt(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>pt(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function pt(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}function mt(e){for(var t=dt(Ve);null!==t;){if(null===t.callback)ht(Ve);else{if(!(t.startTime<=e))break;ht(Ve),t.sortIndex=t.expirationTime,ft(He,t)}t=dt(Ve)}}function gt(e){if(Ke=!1,mt(e),!Je)if(null!==dt(He))Je=!0,Se(yt);else{var t=dt(Ve);null!==t&&Ae(gt,t.startTime-e)}}function yt(e,t){Je=!1,Ke&&(Ke=!1,Ce()),Qe=!0;var n=Xe;try{for(mt(t),Ye=dt(He);null!==Ye&&(!(Ye.expirationTime>t)||e&&!_e());){var r=Ye.callback;if("function"==typeof r){Ye.callback=null,Xe=Ye.priorityLevel;var i=r(Ye.expirationTime<=t);t=we(),"function"==typeof i?Ye.callback=i:Ye===dt(He)&&ht(He),mt(t)}else ht(He);Ye=dt(He)}if(null!==Ye)var o=!0;else{var a=dt(Ve);null!==a&&Ae(gt,a.startTime-t),o=!1}return o}finally{Ye=null,Xe=n,Qe=!1}}function vt(){return ct||(ct=!0,Ee={},"object"==typeof performance&&"function"==typeof performance.now?(Me=performance,we=function(){return Me.now()},Ee.unstable_now=we):(Fe=Date,Ne=Fe.now(),we=function(){return Fe.now()-Ne},Ee.unstable_now=we),"undefined"==typeof window||"function"!=typeof MessageChannel?($e=null,Te=null,Oe=function(){if(null!==$e)try{var e=we();$e(!0,e),$e=null}catch(e){throw setTimeout(Oe,0),e}},Se=function(e){null!==$e?setTimeout(Se,0,e):($e=e,setTimeout(Oe,0))},Ae=function(e,t){Te=setTimeout(e,t)},Ce=function(){clearTimeout(Te)},_e=function(){return!1},Ee.unstable_shouldYield=_e,ke=function(){},De=Ee.unstable_forceFrameRate=ke):(ze=window.setTimeout,Re=window.clearTimeout,"undefined"!=typeof console&&(Pe=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof Pe&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Le=!1,Be=null,Ie=-1,je=5,Ue=0,_e=function(){return we()>=Ue},Ee.unstable_shouldYield=_e,De=function(){},ke=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):je=0<e?Math.floor(1e3/e):5},Ee.unstable_forceFrameRate=ke,qe=new MessageChannel,We=qe.port2,qe.port1.onmessage=function(){if(null!==Be){var e=we();Ue=e+je;try{Be(!0,e)?We.postMessage(null):(Le=!1,Be=null)}catch(e){throw We.postMessage(null),e}}else Le=!1},Se=function(e){Be=e,Le||(Le=!0,We.postMessage(null))},Ae=function(e,t){Ie=ze((function(){e(we())}),t)},Ce=function(){Re(Ie),Ie=-1}),He=[],Ve=[],Ge=1,Ye=null,Xe=3,Qe=!1,Je=!1,Ke=!1,Ze=De,5,Ee.unstable_IdlePriority=5,1,Ee.unstable_ImmediatePriority=1,4,Ee.unstable_LowPriority=4,3,Ee.unstable_NormalPriority=3,null,Ee.unstable_Profiling=null,2,Ee.unstable_UserBlockingPriority=2,et=function(e){e.callback=null},Ee.unstable_cancelCallback=et,tt=function(){Je||Qe||(Je=!0,Se(yt))},Ee.unstable_continueExecution=tt,nt=function(){return Xe},Ee.unstable_getCurrentPriorityLevel=nt,rt=function(){return dt(He)},Ee.unstable_getFirstCallbackNode=rt,it=function(e){switch(Xe){case 1:case 2:case 3:var t=3;break;default:t=Xe}var n=Xe;Xe=t;try{return e()}finally{Xe=n}},Ee.unstable_next=it,ot=function(){},Ee.unstable_pauseExecution=ot,at=Ze,Ee.unstable_requestPaint=at,st=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=Xe;Xe=e;try{return t()}finally{Xe=n}},Ee.unstable_runWithPriority=st,ut=function(e,t,n){var r=we();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?r+n:r,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:Ge++,callback:t,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>r?(e.sortIndex=n,ft(Ve,e),null===dt(He)&&e===dt(Ve)&&(Ke?Ce():Ke=!0,Ae(gt,n-r))):(e.sortIndex=i,ft(He,e),Je||Qe||(Je=!0,Se(yt))),e},Ee.unstable_scheduleCallback=ut,lt=function(e){var t=Xe;return function(){var n=Xe;Xe=t;try{return e.apply(this,arguments)}finally{Xe=n}}},Ee.unstable_wrapCallback=lt),Ee}var bt,xt=!1;function wt(){return xt||(xt=!0,bt={},bt=vt()),bt}var _t,kt,Et,St,At,Ct,Dt,Mt,Ft,Nt,$t,Tt,Ot,zt,Rt,Pt,Lt,Bt,It,jt,Ut,qt,Wt,Ht,Vt,Gt,Yt,Xt,Qt,Jt,Kt,Zt,en,tn,nn,rn,on,an,sn,un,ln,cn,fn,dn,hn,pn,mn,gn,yn,vn,bn,xn,wn,_n,kn,En,Sn,An,Cn,Dn,Mn,Fn,Nn,$n,Tn,On,zn,Rn,Pn,Ln,Bn,In,jn,Un,qn,Wn,Hn,Vn,Gn,Yn,Xn,Qn,Jn,Kn,Zn,er,tr,nr,rr,ir,or,ar,sr,ur,lr,cr,fr,dr,hr,pr,mr,gr,yr,vr,br,xr,wr,_r,kr,Er,Sr,Ar,Cr,Dr,Mr,Fr,Nr,$r,Tr,Or,zr,Rr,Pr,Lr,Br,Ir,jr,Ur,qr,Wr,Hr,Vr,Gr,Yr,Xr,Qr,Jr,Kr,Zr,ei,ti,ni,ri,ii,oi,ai,si,ui,li,ci,fi,di,hi,pi,mi,gi,yi,vi,bi,xi,wi,_i,ki,Ei,Si,Ai,Ci,Di,Mi,Fi,Ni,$i,Ti,Oi,zi,Ri,Pi,Li,Bi,Ii,ji,Ui,qi,Wi,Hi,Vi,Gi,Yi,Xi,Qi,Ji,Ki,Zi,eo,to,no,ro,io,oo,ao,so,uo,lo,co,fo,ho,po,mo,go,yo,vo,bo,xo,wo,_o,ko,Eo,So,Ao,Co,Do,Mo,Fo,No,$o,To,Oo,zo,Ro,Po,Lo,Bo,Io,jo,Uo,qo,Wo,Ho,Vo,Go,Yo,Xo,Qo,Jo,Ko,Zo,ea,ta,na,ra,ia,oa,aa,sa,ua,la,ca,fa,da,ha,pa,ma,ga,ya,va,ba,xa,wa,_a,ka,Ea,Sa,Aa,Ca=!1;function Da(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ma(e,t){Fa(e,t),Fa(e+"Capture",t)}function Fa(e,t){for(At[e]=t,e=0;e<t.length;e++)St.add(t[e])}function Na(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}function $a(e){return e[1].toUpperCase()}function Ta(e,t,n,r){var i=$t.hasOwnProperty(t)?$t[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!Mt.call(Nt,e)||!Mt.call(Ft,e)&&(Dt.test(e)?Nt[e]=!0:(Ft[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Oa(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Zt&&e[Zt]||e["@@iterator"])?e:null}function za(e){if(void 0===en)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);en=t&&t[1]||""}return"\n"+en+e}function Ra(e,t){if(!e||tn)return"";tn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{tn=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?za(e):""}function Pa(e){switch(e.tag){case 5:return za(e.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return e=Ra(e.type,!1);case 11:return e=Ra(e.type.render,!1);case 22:return e=Ra(e.type._render,!1);case 1:return e=Ra(e.type,!0);default:return""}}function La(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Pt:return"Fragment";case Rt:return"Portal";case Bt:return"Profiler";case Lt:return"StrictMode";case qt:return"Suspense";case Wt:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case jt:return(e.displayName||"Context")+".Consumer";case It:return(e._context.displayName||"Context")+".Provider";case Ut:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Ht:return La(e.type);case Gt:return La(e._render);case Vt:t=e._payload,e=e._init;try{return La(e(t))}catch(e){}}return null}function Ba(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ia(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ja(e){e._valueTracker||(e._valueTracker=function(e){var t=Ia(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ua(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ia(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function qa(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Wa(e,t){var n=t.checked;return Et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ha(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ba(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Va(e,t){null!=(t=t.checked)&&Ta(e,"checked",t,!1)}function Ga(e,t){Va(e,t);var n=Ba(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Xa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xa(e,t.type,Ba(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ya(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Xa(e,t,n){"number"===t&&qa(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Qa(e,t){return e=Et({children:void 0},t),(t=function(e){var t="";return kt.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ja(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ba(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ka(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Da(91));return Et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Za(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Da(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Da(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ba(n)}}function es(e,t){var n=Ba(t.value),r=Ba(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ts(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ns(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rs(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ns(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function is(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function os(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||an.hasOwnProperty(e)&&an[e]?(""+t).trim():t+"px"}function as(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=os(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function ss(e,t){if(t){if(un[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Da(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Da(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Da(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Da(62))}}function us(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ls(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function cs(e){if(e=ju(e)){if("function"!=typeof ln)throw Error(Da(280));var t=e.stateNode;t&&(t=qu(t),ln(e.stateNode,e.type,t))}}function fs(e){cn?fn?fn.push(e):fn=[e]:cn=e}function ds(){if(cn){var e=cn,t=fn;if(fn=cn=null,cs(e),t)for(e=0;e<t.length;e++)cs(t[e])}}function hs(e,t){return e(t)}function ps(e,t,n,r,i){return e(t,n,r,i)}function ms(){}function gs(){null===cn&&null===fn||(ms(),ds())}function ys(e,t){var n=e.stateNode;if(null===n)return null;var r=qu(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Da(231,t,typeof n));return n}function vs(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}function bs(e,t,n,r,i,o,a,s,u){yn=!1,vn=null,vs.apply(wn,arguments)}function xs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ws(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function _s(e){if(xs(e)!==e)throw Error(Da(188))}function ks(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=xs(e)))throw Error(Da(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return _s(i),e;if(o===r)return _s(i),t;o=o.sibling}throw Error(Da(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(Da(189))}}if(n.alternate!==r)throw Error(Da(190))}if(3!==n.tag)throw Error(Da(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Es(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}function Ss(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function As(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":Nn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(t.pointerId)}}function Cs(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=Ss(t,n,r,i,o),null!==t&&(null!==(t=ju(t))&&kn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ds(e){var t=Iu(e.target);if(null!==t){var n=xs(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ws(n)))return e.blockedOn=t,void Sn(e.lanePriority,(function(){wt().unstable_runWithPriority(e.priority,(function(){En(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ms(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ys(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ju(n))&&kn(t),e.blockedOn=n,!1;t.shift()}return!0}function Fs(e,t,n){Ms(e)&&n.delete(t)}function Ns(){for(An=!1;0<Cn.length;){var e=Cn[0];if(null!==e.blockedOn){null!==(e=ju(e.blockedOn))&&_n(e);break}for(var t=e.targetContainers;0<t.length;){var n=Ys(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&Cn.shift()}null!==Dn&&Ms(Dn)&&(Dn=null),null!==Mn&&Ms(Mn)&&(Mn=null),null!==Fn&&Ms(Fn)&&(Fn=null),Nn.forEach(Fs),$n.forEach(Fs)}function $s(e,t){e.blockedOn===t&&(e.blockedOn=null,An||(An=!0,wt().unstable_scheduleCallback(wt().unstable_NormalPriority,Ns)))}function Ts(e){function t(t){return $s(t,e)}if(0<Cn.length){$s(Cn[0],e);for(var n=1;n<Cn.length;n++){var r=Cn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Dn&&$s(Dn,e),null!==Mn&&$s(Mn,e),null!==Fn&&$s(Fn,e),Nn.forEach(t),$n.forEach(t),n=0;n<Tn.length;n++)(r=Tn[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tn.length&&null===(n=Tn[0]).blockedOn;)Ds(n),null===n.blockedOn&&Tn.shift()}function Os(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function zs(e){if(Rn[e])return Rn[e];if(!zn[e])return e;var t,n=zn[e];for(t in n)if(n.hasOwnProperty(t)&&t in Pn)return Rn[e]=n[t];return e}function Rs(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),qn.set(r,t),Un.set(r,i),Ma(i,[r])}}function Ps(e){if(0!=(1&e))return Hn=15,1;if(0!=(2&e))return Hn=14,2;if(0!=(4&e))return Hn=13,4;var t=24&e;return 0!==t?(Hn=12,t):0!=(32&e)?(Hn=11,32):0!==(t=192&e)?(Hn=10,t):0!=(256&e)?(Hn=9,256):0!==(t=3584&e)?(Hn=8,t):0!=(4096&e)?(Hn=7,4096):0!==(t=4186112&e)?(Hn=6,t):0!==(t=62914560&e)?(Hn=5,t):67108864&e?(Hn=4,67108864):0!=(134217728&e)?(Hn=3,134217728):0!==(t=805306368&e)?(Hn=2,t):0!=(1073741824&e)?(Hn=1,1073741824):(Hn=8,e)}function Ls(e,t){var n=e.pendingLanes;if(0===n)return Hn=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Hn=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Ps(u),i=Hn):0!==(s&=o)&&(r=Ps(s),i=Hn)}else 0!==(o=n&~a)?(r=Ps(o),i=Hn):0!==s&&(r=Ps(s),i=Hn);if(0===r)return 0;if(r=n&((0>(r=31-Vn(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(Ps(t),i<=Hn)return t;Hn=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Vn(t)),r|=e[n],t&=~i;return r}function Bs(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Is(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=js(24&~t))?Is(10,t):e;case 10:return 0===(e=js(192&~t))?Is(8,t):e;case 8:return 0===(e=js(3584&~t))&&(0===(e=js(4186112&~t))&&(e=512)),e;case 2:return 0===(t=js(805306368&~t))&&(t=268435456),t}throw Error(Da(358,e))}function js(e){return e&-e}function Us(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qs(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Vn(t)]=n}function Ws(e){return 0===e?32:31-(Gn(e)/Yn|0)|0}function Hs(e,t,n,r){hn||ms();var i=Gs,o=hn;hn=!0;try{ps(i,e,t,n,r)}finally{(hn=o)||gs()}}function Vs(e,t,n,r){Qn(Xn,Gs.bind(null,e,t,n,r))}function Gs(e,t,n,r){var i;if(Jn)if((i=0==(4&t))&&0<Cn.length&&-1<On.indexOf(e))e=Ss(null,e,t,n,r),Cn.push(e);else{var o=Ys(e,t,n,r);if(null===o)i&&As(e,r);else{if(i){if(-1<On.indexOf(e))return e=Ss(o,e,t,n,r),void Cn.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return Dn=Cs(Dn,e,t,n,r,i),!0;case"dragenter":return Mn=Cs(Mn,e,t,n,r,i),!0;case"mouseover":return Fn=Cs(Fn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nn.set(o,Cs(Nn.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,$n.set(o,Cs($n.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;As(e,r)}Mu(e,t,r,null,n)}}}function Ys(e,t,n,r){var i=ls(r);if(null!==(i=Iu(i))){var o=xs(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=ws(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Mu(e,t,r,i,n),null}function Xs(){if(er)return er;var e,t,n=Zn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return er=i.slice(e,1<t?1-t:void 0)}function Qs(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Js(){return!0}function Ks(){return!1}function Zs(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Js:Ks,this.isPropagationStopped=Ks,this}return Et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}function eu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function tu(){return eu}function nu(e,t){switch(e){case"keyup":return-1!==Tr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ru(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}function iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jr[e.type]:"textarea"===t}function ou(e,t,n,r){fs(r),0<(t=Nu(t,"onChange")).length&&(n=new nr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}function au(e){Eu(e,0)}function su(e){if(Ua(Uu(e)))return e}function uu(e,t){if("change"===e)return t}function lu(){Ur&&(Ur.detachEvent("onpropertychange",cu),qr=Ur=null)}function cu(e){if("value"===e.propertyName&&su(qr)){var t=[];if(ou(t,qr,e,ls(e)),e=au,hn)e(t);else{hn=!0;try{hs(e,t)}finally{hn=!1,gs()}}}}function fu(e,t,n){"focusin"===e?(lu(),qr=n,(Ur=t).attachEvent("onpropertychange",cu)):"focusout"===e&&lu()}function du(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return su(qr)}function hu(e,t){if("click"===e)return su(t)}function pu(e,t){if("input"===e||"change"===e)return su(t)}function mu(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}function gu(e,t){if(Yr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Xr.call(t,n[r])||!Yr(e[n[r]],t[n[r]]))return!1;return!0}function yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vu(e,t){var n,r=yu(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yu(r)}}function bu(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?bu(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function xu(){for(var e=window,t=qa();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=qa((e=t.contentWindow).document)}return t}function wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function _u(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ei||null==Jr||Jr!==qa(r)||("selectionStart"in(r=Jr)&&wu(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Zr&&gu(Zr,r)||(Zr=r,0<(r=Nu(Kr,"onSelect")).length&&(t=new nr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jr)))}function ku(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,u){if(bs.apply(this,arguments),yn){if(!yn)throw Error(Da(198));var l=vn;yn=!1,vn=null,bn||(bn=!0,xn=l)}}(r,t,void 0,e),e.currentTarget=null}function Eu(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;ku(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;ku(i,s,l),o=u}}}if(bn)throw e=xn,bn=!1,xn=null,e}function Su(e,t){var n=Wu(t),r=e+"__bubble";n.has(r)||(Du(t,e,2,!1),n.add(r))}function Au(e){e[oi]||(e[oi]=!0,St.forEach((function(t){ii.has(t)||Cu(t,!1,e,null),Cu(t,!0,e,null)})))}function Cu(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&ii.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=Wu(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Du(o,e,i,t),a.add(s))}function Du(e,t,n,r){var i=qn.get(t);switch(void 0===i?2:i){case 0:i=Hs;break;case 1:i=Vs;break;default:i=Gs}n=i.bind(null,t,n,e),i=void 0,!mn||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mu(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Iu(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(pn)return e(t,n);pn=!0;try{dn(e,t,n)}finally{pn=!1,gs()}}((function(){var r=o,i=ls(n),a=[];e:{var s=Un.get(e);if(void 0!==s){var u=nr,l=e;switch(e){case"keypress":if(0===Qs(n))break e;case"keydown":case"keyup":u=Er;break;case"focusin":l="focus",u=hr;break;case"focusout":l="blur",u=hr;break;case"beforeblur":case"afterblur":u=hr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Dr;break;case Ln:case Bn:case In:u=mr;break;case jn:u=Fr;break;case"scroll":u=ir;break;case"wheel":u=$r;break;case"copy":case"cut":case"paste":u=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Ar}var c=0!=(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=ys(p,d))&&c.push(Fu(p,m,h)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!Iu(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?Iu(l):null)&&(l!==(f=xs(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=lr,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ar,m="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==u?s:Uu(u),h=null==l?s:Uu(l),(s=new c(m,p+"leave",u,n,i)).target=f,s.relatedTarget=h,m=null,Iu(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=h,c.relatedTarget=f,m=c),f=m,u&&l)e:{for(d=l,p=0,h=c=u;h;h=$u(h))p++;for(h=0,m=d;m;m=$u(m))h++;for(;0<p-h;)c=$u(c),p--;for(;0<h-p;)d=$u(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=$u(c),d=$u(d)}c=null}else c=null;null!==u&&Tu(a,s,u,c,!1),null!==l&&null!==f&&Tu(a,f,l,c,!0)}if("select"===(u=(s=r?Uu(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=uu;else if(iu(s))if(Wr)g=pu;else{g=du;var y=fu}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=hu);switch(g&&(g=g(e,r))?ou(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&Xa(s,"number",s.value)),y=r?Uu(r):window,e){case"focusin":(iu(y)||"true"===y.contentEditable)&&(Jr=y,Kr=r,Zr=null);break;case"focusout":Zr=Kr=Jr=null;break;case"mousedown":ei=!0;break;case"contextmenu":case"mouseup":case"dragend":ei=!1,_u(a,n,i);break;case"selectionchange":if(Qr)break;case"keydown":case"keyup":_u(a,n,i)}var v;if(Or)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ir?nu(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Pr&&"ko"!==n.locale&&(Ir||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ir&&(v=Xs()):(Zn="value"in(Kn=i)?Kn.value:Kn.textContent,Ir=!0)),0<(y=Nu(r,b)).length&&(b=new br(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=ru(n))&&(b.data=v))),(v=Rr?function(e,t){switch(e){case"compositionend":return ru(t);case"keypress":return 32!==t.which?null:(Br=!0,Lr);case"textInput":return(e=t.data)===Lr&&Br?null:e;default:return null}}(e,n):function(e,t){if(Ir)return"compositionend"===e||!Or&&nu(e,t)?(e=Xs(),er=Zn=Kn=null,Ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Nu(r,"onBeforeInput")).length&&(i=new br("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Eu(a,t)}))}function Fu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=ys(e,n))&&r.unshift(Fu(e,o,i)),null!=(o=ys(e,t))&&r.push(Fu(e,o,i))),e=e.return}return r}function $u(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Tu(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=ys(n,o))&&a.unshift(Fu(n,u,s)):i||null!=(u=ys(n,o))&&a.push(Fu(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Ou(){}function zu(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ru(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function Pu(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Lu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Bu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Iu(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Bu(e);null!==e;){if(n=e[di])return n;e=Bu(e)}return t}n=(e=n).parentNode}return null}function ju(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Uu(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Da(33))}function qu(e){return e[hi]||null}function Wu(e){var t=e[mi];return void 0===t&&(t=e[mi]=new Set),t}function Hu(e){return{current:e}}function Vu(e){0>yi||(e.current=gi[yi],gi[yi]=null,yi--)}function Gu(e,t){yi++,gi[yi]=e.current,e.current=t}function Yu(e,t){var n=e.type.contextTypes;if(!n)return vi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Xu(e){return null!=(e=e.childContextTypes)}function Qu(){Vu(xi),Vu(bi)}function Ju(e,t,n){if(bi.current!==vi)throw Error(Da(168));Gu(bi,t),Gu(xi,n)}function Ku(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(Da(108,La(t)||"Unknown",i));return Et({},n,r)}function Zu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vi,wi=bi.current,Gu(bi,e),Gu(xi,xi.current),!0}function el(e,t,n){var r=e.stateNode;if(!r)throw Error(Da(169));n?(e=Ku(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,Vu(xi),Vu(bi),Gu(bi,e)):Vu(xi),Gu(xi,n)}function tl(){switch(Fi()){case Ni:return 99;case $i:return 98;case Ti:return 97;case Oi:return 96;case zi:return 95;default:throw Error(Da(332))}}function nl(e){switch(e){case 99:return Ni;case 98:return $i;case 97:return Ti;case 96:return Oi;case 95:return zi;default:throw Error(Da(332))}}function rl(e,t){return e=nl(e),Ei(e,t)}function il(e,t,n){return e=nl(e),Si(e,t,n)}function ol(){if(null!==Bi){var e=Bi;Bi=null,Ai(e)}al()}function al(){if(!Ii&&null!==Li){Ii=!0;var e=0;try{var t=Li;rl(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Li=null}catch(t){throw null!==Li&&(Li=Li.slice(e+1)),Si(Ni,ol),t}finally{Ii=!1}}}function sl(e,t){if(e&&e.defaultProps){for(var n in t=Et({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ul(){Gi=Vi=Hi=null}function ll(e){var t=Wi.current;Vu(Wi),e.type._context._currentValue=t}function cl(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function fl(e,t){Hi=e,Gi=Vi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ko=!0),e.firstContext=null)}function dl(e,t){if(Gi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Gi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Vi){if(null===Hi)throw Error(Da(308));Vi=t,Hi.dependencies={lanes:0,firstContext:t,responders:null}}else Vi=Vi.next=t;return e._currentValue}function hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function pl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ml(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gl(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function yl(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vl(e,t,n,r){var i=e.updateQueue;Yi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;if(null!==c){var f=(c=c.updateQueue).lastBaseUpdate;f!==a&&(null===f?c.firstBaseUpdate=l:f.next=l,c.lastBaseUpdate=u)}}if(null!==o){for(f=i.baseState,a=0,c=l=u=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==c&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,p=o;switch(s=t,d=n,p.tag){case 1:if("function"==typeof(h=p.payload)){f=h.call(d,f,s);break e}f=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(s="function"==typeof(h=p.payload)?h.call(d,f,s):h))break e;f=Et({},f,s);break e;case 2:Yi=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(l=c=d,u=f):c=c.next=d,a|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,qo|=a,e.lanes=a,e.memoizedState=f}}function bl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(Da(191,i));i.call(r)}}}function xl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Et({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function wl(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!gu(n,r)||!gu(i,o))}function _l(e,t,n){var r=!1,i=vi,o=t.contextType;return"object"==typeof o&&null!==o?o=dl(o):(i=Xu(t)?wi:bi.current,o=(r=null!=(r=t.contextTypes))?Yu(e,i):vi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Qi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function kl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Qi.enqueueReplaceState(t,t.state,null)}function El(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Xi,hl(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=dl(o):(o=Xu(t)?wi:bi.current,i.context=Yu(e,o)),vl(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(xl(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Qi.enqueueReplaceState(i,i.state,null),vl(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}function Sl(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Da(309));var r=n.stateNode}if(!r)throw Error(Da(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===Xi&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(Da(284));if(!n._owner)throw Error(Da(290,e))}return e}function Al(e,t){if("textarea"!==e.type)throw Error(Da(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Cl(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zf(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Bf(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Sl(e,t,n),r.return=e,r):((r=Rf(n.type,n.key,n.props,null,e.mode,r)).ref=Sl(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=If(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=Pf(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Bf(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case zt:return(n=Rf(t.type,t.key,t.props,null,e.mode,n)).ref=Sl(e,null,t),n.return=e,n;case Rt:return(t=If(t,e.mode,n)).return=e,t}if(Ji(t)||Oa(t))return(t=Pf(t,e.mode,n,null)).return=e,t;Al(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case zt:return n.key===i?n.type===Pt?c(e,t,n.props.children,r,i):u(e,t,n,r):null;case Rt:return n.key===i?l(e,t,n,r):null}if(Ji(n)||Oa(n))return null!==i?null:c(e,t,n,r,null);Al(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case zt:return e=e.get(null===r.key?n:r.key)||null,r.type===Pt?c(t,e,r.props.children,i,r.key):u(t,e,r,i);case Rt:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ji(r)||Oa(r))return c(t,e=e.get(n)||null,r,i,null);Al(t,r)}return null}function p(i,a,s,u){for(var l=null,c=null,p=a,m=a=0,g=null;null!==p&&m<s.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=d(i,p,s[m],u);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y,p=g}if(m===s.length)return n(i,p),l;if(null===p){for(;m<s.length;m++)null!==(p=f(i,s[m],u))&&(a=o(p,a,m),null===c?l=p:c.sibling=p,c=p);return l}for(p=r(i,p);m<s.length;m++)null!==(g=h(p,i,m,s[m],u))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),l}function m(i,a,s,u){var l=Oa(s);if("function"!=typeof l)throw Error(Da(150));if(null==(s=l.call(s)))throw Error(Da(151));for(var c=l=null,p=a,m=a=0,g=null,y=s.next();null!==p&&!y.done;m++,y=s.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=d(i,p,y.value,u);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),a=o(v,a,m),null===c?l=v:c.sibling=v,c=v,p=g}if(y.done)return n(i,p),l;if(null===p){for(;!y.done;m++,y=s.next())null!==(y=f(i,y.value,u))&&(a=o(y,a,m),null===c?l=y:c.sibling=y,c=y);return l}for(p=r(i,p);!y.done;m++,y=s.next())null!==(y=h(p,i,m,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y);return e&&p.forEach((function(e){return t(i,e)})),l}return function(e,r,o,s){var u="object"==typeof o&&null!==o&&o.type===Pt&&null===o.key;u&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case zt:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){switch(u.tag){case 7:if(o.type===Pt){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=Sl(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===Pt?((r=Pf(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=Rf(o.type,o.key,o.props,null,e.mode,s)).ref=Sl(e,r,o),s.return=e,e=s)}return a(e);case Rt:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=If(o,e.mode,s)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Bf(o,e.mode,s)).return=e,e=r),a(e);if(Ji(o))return p(e,r,o,s);if(Oa(o))return m(e,r,o,s);if(l&&Al(e,o),void 0===o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Da(152,La(e.type)||"Component"))}return n(e,r)}}function Dl(e){if(e===eo)throw Error(Da(174));return e}function Ml(e,t){switch(Gu(ro,t),Gu(no,e),Gu(to,eo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:rs(null,"");break;default:t=rs(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Vu(to),Gu(to,t)}function Fl(){Vu(to),Vu(no),Vu(ro)}function Nl(e){Dl(ro.current);var t=Dl(to.current),n=rs(t,e.type);t!==n&&(Gu(no,e),Gu(to,n))}function $l(e){no.current===e&&(Vu(to),Vu(no))}function Tl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ol(e,t){var n=Tf(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zl(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Rl(e){if(so){var t=ao;if(t){var n=t;if(!zl(e,t)){if(!(t=Lu(n.nextSibling))||!zl(e,t))return e.flags=-1025&e.flags|2,so=!1,void(oo=e);Ol(oo,n)}oo=e,ao=Lu(t.firstChild)}else e.flags=-1025&e.flags|2,so=!1,oo=e}}function Pl(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oo=e}function Ll(e){if(e!==oo)return!1;if(!so)return Pl(e),so=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ru(t,e.memoizedProps))for(t=ao;t;)Ol(e,t),t=Lu(t.nextSibling);if(Pl(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Da(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=Lu(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=oo?Lu(e.stateNode.nextSibling):null;return!0}function Bl(){ao=oo=null,so=!1}function Il(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}function jl(){throw Error(Da(321))}function Ul(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yr(e[n],t[n]))return!1;return!0}function ql(e,t,n,r,i,o){if(fo=o,ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?bo:xo,e=n(r,i),yo){o=0;do{if(yo=!1,!(25>o))throw Error(Da(301));o+=1,mo=po=null,t.updateQueue=null,lo.current=wo,e=n(r,i)}while(yo)}if(lo.current=vo,t=null!==po&&null!==po.next,fo=0,mo=po=ho=null,go=!1,t)throw Error(Da(300));return e}function Wl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?ho.memoizedState=mo=e:mo=mo.next=e,mo}function Hl(){if(null===po){var e=ho.alternate;e=null!==e?e.memoizedState:null}else e=po.next;var t=null===mo?ho.memoizedState:mo.next;if(null!==t)mo=t,po=e;else{if(null===e)throw Error(Da(310));e={memoizedState:(po=e).memoizedState,baseState:po.baseState,baseQueue:po.baseQueue,queue:po.queue,next:null},null===mo?ho.memoizedState=mo=e:mo=mo.next=e}return mo}function Vl(e,t){return"function"==typeof t?t(e):t}function Gl(e){var t=Hl(),n=t.queue;if(null===n)throw Error(Da(311));n.lastRenderedReducer=e;var r=po,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=a=o=null,u=i;do{var l=u.lane;if((fo&l)===l)null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var c={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(a=s=c,o=r):s=s.next=c,ho.lanes|=l,qo|=l}u=u.next}while(null!==u&&u!==i);null===s?o=r:s.next=a,Yr(r,t.memoizedState)||(ko=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Yl(e){var t=Hl(),n=t.queue;if(null===n)throw Error(Da(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Yr(o,t.memoizedState)||(ko=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Xl(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(fo&e)===e)&&(t._workInProgressVersionPrimary=r,uo.push(t))),e)return n(t._source);throw uo.push(t),Error(Da(350))}function Ql(e,t,n,r){var i=zo;if(null===i)throw Error(Da(349));var o=t._getVersion,a=o(t._source),s=lo.current,u=s.useState((function(){return Xl(i,t,n)})),l=u[1],c=u[0];u=mo;var f=e.memoizedState,d=f.refs,h=d.getSnapshot,p=f.source;f=f.subscribe;var m=ho;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=o(t._source);if(!Yr(a,e)){e=n(t._source),Yr(c,e)||(l(e),e=tf(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var u=31-Vn(s),f=1<<u;r[u]|=e,s&=~f}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=tf(m);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),Yr(h,n)&&Yr(p,t)&&Yr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:c}).dispatch=l=hc.bind(null,ho,e),u.queue=e,u.baseQueue=null,c=Xl(i,t,n),u.memoizedState=u.baseState=c),c}function Jl(e,t,n){return Ql(Hl(),e,t,n)}function Kl(e){var t=Wl();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:e}).dispatch=hc.bind(null,ho,e),[t.memoizedState,e]}function Zl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ho.updateQueue)?(t={lastEffect:null},ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ec(e){return e={current:e},Wl().memoizedState=e}function tc(){return Hl().memoizedState}function nc(e,t,n,r){var i=Wl();ho.flags|=e,i.memoizedState=Zl(1|t,n,void 0,void 0===r?null:r)}function rc(e,t,n,r){var i=Hl();r=void 0===r?null:r;var o=void 0;if(null!==po){var a=po.memoizedState;if(o=a.destroy,null!==r&&Ul(r,a.deps))return void Zl(t,n,o,r)}ho.flags|=e,i.memoizedState=Zl(1|t,n,o,r)}function ic(e,t){return nc(516,4,e,t)}function oc(e,t){return rc(516,4,e,t)}function ac(e,t){return rc(4,2,e,t)}function sc(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function uc(e,t,n){return n=null!=n?n.concat([e]):null,rc(4,2,sc.bind(null,t,e),n)}function lc(){}function cc(e,t){var n=Hl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ul(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fc(e,t){var n=Hl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ul(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dc(e,t){var n=tl();rl(98>n?98:n,(function(){e(!0)})),rl(97<n?97:n,(function(){var n=co.transition;co.transition=1;try{e(!1),t()}finally{co.transition=n}}))}function hc(e,t,n){var r=ef(),i=tf(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ho||null!==a&&a===ho)yo=go=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,Yr(u,s))return}catch(e){}nf(e,i,r)}}function pc(e,t,n,r){t.child=null===e?Zi(t,null,n,r):Ki(t,e.child,n,r)}function mc(e,t,n,r,i){n=n.render;var o=t.ref;return fl(t,i),r=ql(e,t,n,r,o,i),null===e||ko?(t.flags|=1,pc(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Nc(e,t,i))}function gc(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Of(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rf(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,yc(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:gu)(i,r)&&e.ref===t.ref)?Nc(e,t,o):(t.flags|=1,(e=zf(a,r)).ref=t.ref,e.return=t,t.child=e)}function yc(e,t,n,r,i,o){if(null!==e&&gu(e.memoizedProps,r)&&e.ref===t.ref){if(ko=!1,0==(o&i))return t.lanes=e.lanes,Nc(e,t,o);0!=(16384&e.flags)&&(ko=!0)}return xc(e,t,n,r,o)}function vc(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},ff(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ff(t,e),null;t.memoizedState={baseLanes:0},ff(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ff(t,r);return pc(e,t,i,n),t.child}function bc(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function xc(e,t,n,r,i){var o=Xu(n)?wi:bi.current;return o=Yu(t,o),fl(t,i),n=ql(e,t,n,r,o,i),null===e||ko?(t.flags|=1,pc(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Nc(e,t,i))}function wc(e,t,n,r,i){if(Xu(n)){var o=!0;Zu(t)}else o=!1;if(fl(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),_l(t,n,r),El(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=dl(l):l=Yu(t,l=Xu(n)?wi:bi.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&kl(t,a,r,l),Yi=!1;var d=t.memoizedState;a.state=d,vl(t,r,a,i),u=t.memoizedState,s!==r||d!==u||xi.current||Yi?("function"==typeof c&&(xl(t,n,c,r),u=t.memoizedState),(s=Yi||wl(t,n,s,r,d,u,l))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,pl(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:sl(t.type,s),a.props=l,f=t.pendingProps,d=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=dl(u):u=Yu(t,u=Xu(n)?wi:bi.current);var h=n.getDerivedStateFromProps;(c="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||d!==u)&&kl(t,a,r,u),Yi=!1,d=t.memoizedState,a.state=d,vl(t,r,a,i);var p=t.memoizedState;s!==f||d!==p||xi.current||Yi?("function"==typeof h&&(xl(t,n,h,r),p=t.memoizedState),(l=Yi||wl(t,n,l,r,d,p,u))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return _c(e,t,n,r,o,i)}function _c(e,t,n,r,i,o){bc(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&el(t,n,!1),Nc(e,t,o);r=t.stateNode,_o.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ki(t,e.child,null,o),t.child=Ki(t,null,s,o)):pc(e,t,s,o),t.memoizedState=r.state,i&&el(t,n,!0),t.child}function kc(e){var t=e.stateNode;t.pendingContext?Ju(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ju(0,t.context,!1),Ml(e,t.containerInfo)}function Ec(e,t,n){var r,i=t.pendingProps,o=io.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),Gu(io,1&o),null===e?(void 0!==i.fallback&&Rl(t),e=i.children,o=i.fallback,a?(e=Sc(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Eo,e):"number"==typeof i.unstable_expectedLoadTime?(e=Sc(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Eo,t.lanes=33554432,e):((n=Lf({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Cc(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Eo,i):(n=Ac(e,t,i.children,n),t.memoizedState=null,n))}function Sc(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Lf(t,i,0,null),n=Pf(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Ac(e,t,n,r){var i=e.child;return e=i.sibling,n=zf(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Cc(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=zf(a,s),null!==e?r=zf(e,r):(r=Pf(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Dc(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),cl(e.return,t)}function Mc(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Fc(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(pc(e,t,r.children,n),0!=(2&(r=io.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Dc(e,n);else if(19===e.tag)Dc(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gu(io,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Tl(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Mc(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Tl(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Mc(t,!0,n,null,o,t.lastEffect);break;case"together":Mc(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Nc(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qo|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(Da(153));if(null!==t.child){for(n=zf(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zf(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function $c(e,t){if(!so)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Tc(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Xu(t.type)&&Qu(),null;case 3:return Fl(),Vu(xi),Vu(bi),Il(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ll(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Ao(t),null;case 5:$l(t);var i=Dl(ro.current);if(n=t.type,null!==e&&null!=t.stateNode)Co(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(Da(166));return null}if(e=Dl(to.current),Ll(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[hi]=o,n){case"dialog":Su("cancel",r),Su("close",r);break;case"iframe":case"object":case"embed":Su("load",r);break;case"video":case"audio":for(e=0;e<ri.length;e++)Su(ri[e],r);break;case"source":Su("error",r);break;case"img":case"image":case"link":Su("error",r),Su("load",r);break;case"details":Su("toggle",r);break;case"input":Ha(r,o),Su("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Su("invalid",r);break;case"textarea":Za(r,o),Su("invalid",r)}for(var a in ss(n,o),e=null,o)o.hasOwnProperty(a)&&(i=o[a],"children"===a?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):At.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&Su("scroll",r));switch(n){case"input":ja(r),Ya(r,o,!0);break;case"textarea":ja(r),ts(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Ou)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(a=9===i.nodeType?i:i.ownerDocument,e===nn.html&&(e=ns(n)),e===nn.html?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[di]=t,e[hi]=r,So(e,t,!1,!1),t.stateNode=e,a=us(n,r),n){case"dialog":Su("cancel",e),Su("close",e),i=r;break;case"iframe":case"object":case"embed":Su("load",e),i=r;break;case"video":case"audio":for(i=0;i<ri.length;i++)Su(ri[i],e);i=r;break;case"source":Su("error",e),i=r;break;case"img":case"image":case"link":Su("error",e),Su("load",e),i=r;break;case"details":Su("toggle",e),i=r;break;case"input":Ha(e,r),i=Wa(e,r),Su("invalid",e);break;case"option":i=Qa(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Et({},r,{value:void 0}),Su("invalid",e);break;case"textarea":Za(e,r),i=Ka(e,r),Su("invalid",e);break;default:i=r}ss(n,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];"style"===o?as(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&on(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&is(e,u):"number"==typeof u&&is(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(At.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Su("scroll",e):null!=u&&Ta(e,o,u,a))}switch(n){case"input":ja(e),Ya(e,r,!1);break;case"textarea":ja(e),ts(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ba(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?Ja(e,!!r.multiple,o,!1):null!=r.defaultValue&&Ja(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Ou)}zu(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(Da(166));n=Dl(ro.current),Dl(to.current),Ll(t)?(r=t.stateNode,n=t.memoizedProps,r[di]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r)}return null;case 13:return Vu(io),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ll(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&io.current)?0===Io&&(Io=3):(0!==Io&&3!==Io||(Io=4),null===zo||0==(134217727&qo)&&0==(134217727&Wo)||sf(zo,Po))),(r||n)&&(t.flags|=4),null);case 4:return Fl(),Ao(t),null===e&&Au(t.stateNode.containerInfo),null;case 10:return ll(t),null;case 17:return Xu(t.type)&&Qu(),null;case 19:if(Vu(io),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(a=r.rendering))if(o)$c(r,!1);else{if(0!==Io||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=Tl(e))){for(t.flags|=64,$c(r,!1),null!==(o=a.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Gu(io,1&io.current|2),t.child}e=e.sibling}null!==r.tail&&Ui()>Yo&&(t.flags|=64,o=!0,$c(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=Tl(a))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$c(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!so)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>Yo&&1073741824!==n&&(t.flags|=64,o=!0,$c(r,!1),t.lanes=33554432);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,t=io.current,Gu(io,o?1&t|2:1&t),n):null;case 23:case 24:return df(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(Da(156,t.tag))}function Oc(e){switch(e.tag){case 1:Xu(e.type)&&Qu();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Fl(),Vu(xi),Vu(bi),Il(),0!=(64&(t=e.flags)))throw Error(Da(285));return e.flags=-4097&t|64,e;case 5:return $l(e),null;case 13:return Vu(io),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Vu(io),null;case 4:return Fl(),null;case 10:return ll(e),null;case 23:case 24:return df(),null;default:return null}}function zc(e,t){try{var n="",r=t;do{n+=Pa(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function Rc(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}function Pc(e,t,n){(n=ml(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qo||(Qo=!0,Jo=r),Rc(0,t)},n}function Lc(e,t,n){(n=ml(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return Rc(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ko?Ko=new Set([this]):Ko.add(this),Rc(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Bc(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Mf(e,t)}else t.current=null}function Ic(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:sl(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Pu(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(Da(163))}function jc(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Af(n,e),Sf(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:sl(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&bl(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}bl(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zu(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ts(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Da(163))}function Uc(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=os("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function qc(e,t){if(ki&&"function"==typeof ki.onCommitFiberUnmount)try{ki.onCommitFiberUnmount(_i,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Af(t,n);else{r=t;try{i()}catch(e){Mf(r,e)}}n=n.next}while(n!==e)}break;case 1:if(Bc(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Mf(t,e)}break;case 5:Bc(t);break;case 4:Xc(e,t)}}function Wc(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Hc(e){return 5===e.tag||3===e.tag||4===e.tag}function Vc(e){e:{for(var t=e.return;null!==t;){if(Hc(t))break e;t=t.return}throw Error(Da(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(Da(161))}16&n.flags&&(is(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Hc(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Gc(e,n,t):Yc(e,n,t)}function Gc(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ou));else if(4!==r&&null!==(e=e.child))for(Gc(e,t,n),e=e.sibling;null!==e;)Gc(e,t,n),e=e.sibling}function Yc(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Yc(e,t,n),e=e.sibling;null!==e;)Yc(e,t,n),e=e.sibling}function Xc(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(Da(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,s=i,u=s;;)if(qc(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break e;for(;null===u.sibling;){if(null===u.return||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,s=i.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(qc(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Qc(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[hi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Va(n,r),us(e,i),t=us(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?as(n,s):"dangerouslySetInnerHTML"===a?on(n,s):"children"===a?is(n,s):Ta(n,a,s,t)}switch(e){case"input":Ga(n,r);break;case"textarea":es(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?Ja(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?Ja(n,!!r.multiple,r.defaultValue,!0):Ja(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(Da(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,Ts(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Go=Ui(),Uc(t.child,!0)),void Jc(t);case 19:return void Jc(t);case 17:return;case 23:case 24:return void Uc(t,null!==t.memoizedState)}throw Error(Da(163))}function Jc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Fo),t.forEach((function(t){var r=Nf.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Kc(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}function Zc(){Yo=Ui()+500}function ef(){return 0!=(48&Oo)?Ui():-1!==sa?sa:sa=Ui()}function tf(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===tl()?1:2;if(0===ua&&(ua=Uo),0!==qi.transition){0!==la&&(la=null!==Vo?Vo.pendingLanes:0),e=ua;var t=4186112&~la;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=tl(),0!=(4&Oo)&&98===e?e=Is(12,ua):e=Is(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ua),e}function nf(e,t,n){if(50<oa)throw oa=0,aa=null,Error(Da(185));if(null===(e=rf(e,t)))return null;qs(e,t,n),e===zo&&(Wo|=t,4===Io&&sf(e,Po));var r=tl();1===t?0!=(8&Oo)&&0==(48&Oo)?uf(e):(of(e,n),0===Oo&&(Zc(),ol())):(0==(4&Oo)||98!==r&&99!==r||(null===ia?ia=new Set([e]):ia.add(e)),of(e,n)),Vo=e}function rf(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function of(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Vn(a),u=1<<s,l=o[s];if(-1===l){if(0==(u&r)||0!=(u&i)){l=t,Ps(u);var c=Hn;o[s]=10<=c?l+250:6<=c?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);a&=~u}if(r=Ls(e,e===zo?Po:0),t=Hn,0===r)null!==n&&(n!==Ri&&Ai(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ri&&Ai(n)}15===t?(n=uf.bind(null,e),null===Li?(Li=[n],Bi=Si(Ni,al)):Li.push(n),n=Ri):14===t?n=il(99,uf.bind(null,e)):n=il(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Da(358,e))}}(t),af.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function af(e){if(sa=-1,la=ua=0,0!=(48&Oo))throw Error(Da(327));var t=e.callbackNode;if(Ef()&&e.callbackNode!==t)return null;var n=Ls(e,e===zo?Po:0);if(0===n)return null;var r=n,i=Oo;Oo|=16;var o=mf();for(zo===e&&Po===r||(Zc(),hf(e,r));;)try{vf();break}catch(t){pf(e,t)}if(ul(),$o.current=o,Oo=i,null!==Ro?r=0:(zo=null,Po=0,r=Io),0!=(Uo&Wo))hf(e,0);else if(0!==r){if(2===r&&(Oo|=64,e.hydrate&&(e.hydrate=!1,Pu(e.containerInfo)),0!==(n=Bs(e))&&(r=gf(e,n))),1===r)throw t=jo,hf(e,0),sf(e,n),of(e,Ui()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(Da(345));case 2:wf(e);break;case 3:if(sf(e,n),(62914560&n)===n&&10<(r=Go+500-Ui())){if(0!==Ls(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ef(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ui(wf.bind(null,e),r);break}wf(e);break;case 4:if(sf(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Vn(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Ui()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*No(n/1960))-n)){e.timeoutHandle=ui(wf.bind(null,e),n);break}wf(e);break;case 5:wf(e);break;default:throw Error(Da(329))}}return of(e,Ui()),e.callbackNode===t?af.bind(null,e):null}function sf(e,t){for(t&=~Ho,t&=~Wo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vn(t),r=1<<n;e[n]=-1,t&=~r}}function uf(e){if(0!=(48&Oo))throw Error(Da(327));if(Ef(),e===zo&&0!=(e.expiredLanes&Po)){var t=Po,n=gf(e,t);0!=(Uo&Wo)&&(n=gf(e,t=Ls(e,t)))}else n=gf(e,t=Ls(e,0));if(0!==e.tag&&2===n&&(Oo|=64,e.hydrate&&(e.hydrate=!1,Pu(e.containerInfo)),0!==(t=Bs(e))&&(n=gf(e,t))),1===n)throw n=jo,hf(e,0),sf(e,t),of(e,Ui()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,wf(e),of(e,Ui()),null}function lf(e,t){var n=Oo;Oo|=1;try{return e(t)}finally{0===(Oo=n)&&(Zc(),ol())}}function cf(e,t){var n=Oo;Oo&=-2,Oo|=8;try{return e(t)}finally{0===(Oo=n)&&(Zc(),ol())}}function ff(e,t){Gu(Bo,Lo),Lo|=t,Uo|=t}function df(){Lo=Bo.current,Vu(Bo)}function hf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,li(n)),null!==Ro)for(n=Ro.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Qu();break;case 3:Fl(),Vu(xi),Vu(bi),Il();break;case 5:$l(r);break;case 4:Fl();break;case 13:case 19:Vu(io);break;case 10:ll(r);break;case 23:case 24:df()}n=n.return}zo=e,Ro=zf(e.current,null),Po=Lo=Uo=t,Io=0,jo=null,Ho=Wo=qo=0}function pf(e,t){for(;;){var n=Ro;try{if(ul(),lo.current=vo,go){for(var r=ho.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(fo=0,mo=po=ho=null,yo=!1,To.current=null,null===n||null===n.return){Io=1,jo=t,Ro=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Po,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&io.current),d=a;do{var h;if(h=13===d.tag){var p=d.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var m=d.memoizedProps;h=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(h){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=ml(-1,1);v.tag=2,gl(s,v)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new Mo,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var x=Ff.bind(null,o,l,s);l.then(x,x)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);u=Error((La(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Io&&(Io=2),u=zc(u,s),d=a;do{switch(d.tag){case 3:o=u,d.flags|=4096,t&=-t,d.lanes|=t,yl(d,Pc(0,o,t));break e;case 1:o=u;var w=d.type,_=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===Ko||!Ko.has(_)))){d.flags|=4096,t&=-t,d.lanes|=t,yl(d,Lc(d,o,t));break e}}d=d.return}while(null!==d)}xf(n)}catch(e){t=e,Ro===n&&null!==n&&(Ro=n=n.return);continue}break}}function mf(){var e=$o.current;return $o.current=vo,null===e?vo:e}function gf(e,t){var n=Oo;Oo|=16;var r=mf();for(zo===e&&Po===t||hf(e,t);;)try{yf();break}catch(t){pf(e,t)}if(ul(),Oo=n,$o.current=r,null!==Ro)throw Error(Da(261));return zo=null,Po=0,Io}function yf(){for(;null!==Ro;)bf(Ro)}function vf(){for(;null!==Ro&&!Ci();)bf(Ro)}function bf(e){var t=da(e.alternate,e,Lo);e.memoizedProps=e.pendingProps,null===t?xf(e):Ro=t,To.current=null}function xf(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=Tc(n,t,Lo)))return void(Ro=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Lo)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=Oc(t)))return n.flags&=2047,void(Ro=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ro=t);Ro=t=e}while(null!==t);0===Io&&(Io=5)}function wf(e){var t=tl();return rl(99,_f.bind(null,e,t)),null}function _f(e,t){do{Ef()}while(null!==ea);if(0!=(48&Oo))throw Error(Da(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Da(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,s=e.expirationTimes;0<o;){var u=31-Vn(o),l=1<<u;i[u]=0,a[u]=-1,s[u]=-1,o&=~l}if(null!==ia&&0==(24&r)&&ia.has(e)&&ia.delete(e),e===zo&&(Ro=zo=null,Po=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Oo,Oo|=32,To.current=null,ai=Jn,wu(a=xu())){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else e:if(s=(s=a.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{s.nodeType,u.nodeType}catch(e){s=null;break e}var c=0,f=-1,d=-1,h=0,p=0,m=a,g=null;t:for(;;){for(var y;m!==s||0!==o&&3!==m.nodeType||(f=c+o),m!==u||0!==l&&3!==m.nodeType||(d=c+l),3===m.nodeType&&(c+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===a)break t;if(g===s&&++h===o&&(f=c),g===u&&++p===l&&(d=c),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}s=-1===f||-1===d?null:{start:f,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;si={focusedElem:a,selectionRange:s},Jn=!1,ca=null,fa=!1,Xo=r;do{try{kf()}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);ca=null,Xo=r;do{try{for(a=e;null!==Xo;){var v=Xo.flags;if(16&v&&is(Xo.stateNode,""),128&v){var b=Xo.alternate;if(null!==b){var x=b.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&v){case 2:Vc(Xo),Xo.flags&=-3;break;case 6:Vc(Xo),Xo.flags&=-3,Qc(Xo.alternate,Xo);break;case 1024:Xo.flags&=-1025;break;case 1028:Xo.flags&=-1025,Qc(Xo.alternate,Xo);break;case 4:Qc(Xo.alternate,Xo);break;case 8:Xc(a,s=Xo);var w=s.alternate;Wc(s),null!==w&&Wc(w)}Xo=Xo.nextEffect}}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);if(x=si,b=xu(),v=x.focusedElem,a=x.selectionRange,b!==v&&v&&v.ownerDocument&&bu(v.ownerDocument.documentElement,v)){null!==a&&wu(v)&&(b=a.start,void 0===(x=a.end)&&(x=b),"selectionStart"in v?(v.selectionStart=b,v.selectionEnd=Math.min(x,v.value.length)):(x=(b=v.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),s=v.textContent.length,w=Math.min(a.start,s),a=void 0===a.end?w:Math.min(a.end,s),!x.extend&&w>a&&(s=a,a=w,w=s),s=vu(v,w),o=vu(v,a),s&&o&&(1!==x.rangeCount||x.anchorNode!==s.node||x.anchorOffset!==s.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(s.node,s.offset),x.removeAllRanges(),w>a?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=v;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<b.length;v++)(x=b[v]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Jn=!!ai,si=ai=null,e.current=n,Xo=r;do{try{for(v=e;null!==Xo;){var _=Xo.flags;if(36&_&&jc(v,Xo.alternate,Xo),128&_){b=void 0;var k=Xo.ref;if(null!==k){var E=Xo.stateNode;switch(Xo.tag){case 5:b=E;break;default:b=E}"function"==typeof k?k(b):k.current=b}}Xo=Xo.nextEffect}}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);Xo=null,Pi(),Oo=i}else e.current=n;if(Zo)Zo=!1,ea=e,ta=t;else for(Xo=r;null!==Xo;)t=Xo.nextEffect,Xo.nextEffect=null,8&Xo.flags&&((_=Xo).sibling=null,_.stateNode=null),Xo=t;if(0===(r=e.pendingLanes)&&(Ko=null),1===r?e===aa?oa++:(oa=0,aa=e):oa=0,n=n.stateNode,ki&&"function"==typeof ki.onCommitFiberRoot)try{ki.onCommitFiberRoot(_i,n,void 0,64==(64&n.current.flags))}catch(e){}if(of(e,Ui()),Qo)throw Qo=!1,e=Jo,Jo=null,e;return 0!=(8&Oo)||ol(),null}function kf(){for(;null!==Xo;){var e=Xo.alternate;fa||null===ca||(0!=(8&Xo.flags)?Es(Xo,ca)&&(fa=!0):13===Xo.tag&&Kc(e,Xo)&&Es(Xo,ca)&&(fa=!0));var t=Xo.flags;0!=(256&t)&&Ic(e,Xo),0==(512&t)||Zo||(Zo=!0,il(97,(function(){return Ef(),null}))),Xo=Xo.nextEffect}}function Ef(){if(90!==ta){var e=97<ta?97:ta;return ta=90,rl(e,Cf)}return!1}function Sf(e,t){na.push(t,e),Zo||(Zo=!0,il(97,(function(){return Ef(),null})))}function Af(e,t){ra.push(t,e),Zo||(Zo=!0,il(97,(function(){return Ef(),null})))}function Cf(){if(null===ea)return!1;var e=ea;if(ea=null,0!=(48&Oo))throw Error(Da(331));var t=Oo;Oo|=32;var n=ra;ra=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===o)throw Error(Da(330));Mf(o,e)}}for(n=na,na=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var s=i.create;i.destroy=s()}catch(e){if(null===o)throw Error(Da(330));Mf(o,e)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Oo=t,ol(),!0}function Df(e,t,n){gl(e,t=Pc(0,t=zc(n,t),1)),t=ef(),null!==(e=rf(e,1))&&(qs(e,1,t),of(e,t))}function Mf(e,t){if(3===e.tag)Df(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Df(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ko||!Ko.has(r))){var i=Lc(n,e=zc(t,e),1);if(gl(n,i),i=ef(),null!==(n=rf(n,1)))qs(n,1,i),of(n,i);else if("function"==typeof r.componentDidCatch&&(null===Ko||!Ko.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ff(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ef(),e.pingedLanes|=e.suspendedLanes&n,zo===e&&(Po&n)===n&&(4===Io||3===Io&&(62914560&Po)===Po&&500>Ui()-Go?hf(e,0):Ho|=n),of(e,t)}function Nf(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===tl()?1:2:(0===ua&&(ua=Uo),0===(t=js(62914560&~ua))&&(t=4194304))),n=ef(),null!==(e=rf(e,t))&&(qs(e,t,n),of(e,n))}function $f(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Tf(e,t,n,r){return new $f(e,t,n,r)}function Of(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zf(e,t){var n=e.alternate;return null===n?((n=Tf(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rf(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Of(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Pt:return Pf(n.children,i,o,t);case Xt:a=8,i|=16;break;case Lt:a=8,i|=1;break;case Bt:return(e=Tf(12,n,t,8|i)).elementType=Bt,e.type=Bt,e.lanes=o,e;case qt:return(e=Tf(13,n,t,i)).type=qt,e.elementType=qt,e.lanes=o,e;case Wt:return(e=Tf(19,n,t,i)).elementType=Wt,e.lanes=o,e;case Qt:return Lf(n,i,o,t);case Jt:return(e=Tf(24,n,t,i)).elementType=Jt,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case It:a=10;break e;case jt:a=9;break e;case Ut:a=11;break e;case Ht:a=14;break e;case Vt:a=16,r=null;break e;case Gt:a=22;break e}throw Error(Da(130,null==e?e:typeof e,""))}return(t=Tf(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Pf(e,t,n,r){return(e=Tf(7,e,r,t)).lanes=n,e}function Lf(e,t,n,r){return(e=Tf(23,e,r,t)).elementType=Qt,e.lanes=n,e}function Bf(e,t,n){return(e=Tf(6,e,null,t)).lanes=n,e}function If(e,t,n){return(t=Tf(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jf(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Us(0),this.expirationTimes=Us(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.mutableSourceEagerHydrationData=null}function Uf(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Rt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qf(e,t,n,r){var i=t.current,o=ef(),a=tf(i);e:if(n){t:{if(xs(n=n._reactInternals)!==n||1!==n.tag)throw Error(Da(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Xu(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(Da(171))}if(1===n.tag){var u=n.type;if(Xu(u)){n=Ku(n,u,s);break e}}n=s}else n=vi;return null===t.context?t.context=n:t.pendingContext=n,(t=ml(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),gl(i,t),nf(i,a,o),a}function Wf(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Hf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vf(e,t){Hf(e,t),(e=e.alternate)&&Hf(e,t)}function Gf(){return null}function Yf(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new jf(e,t,null!=n&&!0===n.hydrate),t=Tf(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,hl(t),e[pi]=n.current,Au(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Xf(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qf(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Wf(a);s.call(e)}}qf(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Yf(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Wf(a);u.call(e)}}cf((function(){qf(t,a,e,i)}))}return Wf(a)}function Jf(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xf(t))throw Error(Da(200));return Uf(e,t,null,n)}function Kf(){if(_t={},kt=xe(),Et=c(),wt(),!kt)throw Error(Da(227));var e;if(St=new Set,At={},Ct=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Dt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mt=Object.prototype.hasOwnProperty,Ft={},Nt={},$t={},"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){$t[e]=new Na(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];$t[t]=new Na(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){$t[e]=new Na(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){$t[e]=new Na(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){$t[e]=new Na(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){$t[e]=new Na(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){$t[e]=new Na(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){$t[e]=new Na(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){$t[e]=new Na(e,5,!1,e.toLowerCase(),null,!1,!1)})),Tt=/[\-:]([a-z])/g,"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Tt,$a);$t[t]=new Na(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Tt,$a);$t[t]=new Na(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Tt,$a);$t[t]=new Na(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){$t[e]=new Na(e,1,!1,e.toLowerCase(),null,!1,!1)})),$t.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){$t[e]=new Na(e,1,!1,e.toLowerCase(),null,!0,!0)})),Ot=kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zt=60103,Rt=60106,Pt=60107,Lt=60108,Bt=60114,It=60109,jt=60110,Ut=60112,qt=60113,Wt=60120,Ht=60115,Vt=60116,Gt=60121,Yt=60128,Xt=60129,Qt=60130,Jt=60131,"function"==typeof Symbol&&Symbol.for&&(Kt=Symbol.for,zt=Kt("react.element"),Rt=Kt("react.portal"),Pt=Kt("react.fragment"),Lt=Kt("react.strict_mode"),Bt=Kt("react.profiler"),It=Kt("react.provider"),jt=Kt("react.context"),Ut=Kt("react.forward_ref"),qt=Kt("react.suspense"),Wt=Kt("react.suspense_list"),Ht=Kt("react.memo"),Vt=Kt("react.lazy"),Gt=Kt("react.block"),Kt("react.scope"),Yt=Kt("react.opaque.id"),Xt=Kt("react.debug_trace_mode"),Qt=Kt("react.offscreen"),Jt=Kt("react.legacy_hidden")),Zt="function"==typeof Symbol&&Symbol.iterator,tn=!1,nn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},e=function(e,t){if(e.namespaceURI!==nn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rn=rn||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},on="undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e,an={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sn=["Webkit","ms","Moz","O"],Object.keys(an).forEach((function(e){sn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),an[t]=an[e]}))})),un=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ln=null,cn=null,fn=null,dn=hs,hn=!1,pn=!1,mn=!1,Ct)try{gn={},Object.defineProperty(gn,"passive",{get:function(){mn=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch(e){mn=!1}yn=!1,vn=null,bn=!1,xn=null,wn={onError:function(e){yn=!0,vn=e}},An=!1,Cn=[],Dn=null,Mn=null,Fn=null,Nn=new Map,$n=new Map,Tn=[],On="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "),zn={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionend:Os("Transition","TransitionEnd")},Rn={},Pn={},Ct&&(Pn=document.createElement("div").style,"AnimationEvent"in window||(delete zn.animationend.animation,delete zn.animationiteration.animation,delete zn.animationstart.animation),"TransitionEvent"in window||delete zn.transitionend.transition),Ln=zs("animationend"),Bn=zs("animationiteration"),In=zs("animationstart"),jn=zs("transitionend"),Un=new Map,qn=new Map,Wn=["abort","abort",Ln,"animationEnd",Bn,"animationIteration",In,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",jn,"transitionEnd","waiting","waiting"],(0,wt().unstable_now)(),Hn=8,Vn=Math.clz32?Math.clz32:Ws,Gn=Math.log,Yn=Math.LN2,Xn=wt().unstable_UserBlockingPriority,Qn=wt().unstable_runWithPriority,Jn=!0,Kn=null,Zn=null,er=null,nr=Zs(tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0}),rr=Et({},tr,{view:0,detail:0}),ir=Zs(rr),ur=Et({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tu,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(or=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=or=0,sr=e),or)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),lr=Zs(ur),cr=Et({},ur,{dataTransfer:0}),fr=Zs(cr),dr=Et({},rr,{relatedTarget:0}),hr=Zs(dr),pr=Et({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),mr=Zs(pr),gr=Et({},tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=Zs(gr),vr=Et({},tr,{data:0}),br=Zs(vr),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},kr=Et({},rr,{key:function(e){if(e.key){var t=xr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qs(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tu,charCode:function(e){return"keypress"===e.type?Qs(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qs(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Er=Zs(kr),Sr=Et({},ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ar=Zs(Sr),Cr=Et({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tu}),Dr=Zs(Cr),Mr=Et({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fr=Zs(Mr),Nr=Et({},ur,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$r=Zs(Nr),Tr=[9,13,27,32],Or=Ct&&"CompositionEvent"in window,zr=null,Ct&&"documentMode"in document&&(zr=document.documentMode),Rr=Ct&&"TextEvent"in window&&!zr,Pr=Ct&&(!Or||zr&&8<zr&&11>=zr),Lr=String.fromCharCode(32),Br=!1,Ir=!1,jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ur=null,qr=null,Wr=!1,Ct&&(Ct?((Vr="oninput"in document)||((Gr=document.createElement("div")).setAttribute("oninput","return;"),Vr="function"==typeof Gr.oninput),Hr=Vr):Hr=!1,Wr=Hr&&(!document.documentMode||9<document.documentMode)),Yr="function"==typeof Object.is?Object.is:mu,Xr=Object.prototype.hasOwnProperty,Qr=Ct&&"documentMode"in document&&11>=document.documentMode,Jr=null,Kr=null,Zr=null,ei=!1,Rs("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rs("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rs(Wn,2);for(ti="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ni=0;ni<ti.length;ni++)qn.set(ti[ni],0);if(Fa("onMouseEnter",["mouseout","mouseover"]),Fa("onMouseLeave",["mouseout","mouseover"]),Fa("onPointerEnter",["pointerout","pointerover"]),Fa("onPointerLeave",["pointerout","pointerover"]),Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" ")),ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ii=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri)),oi="_reactListening"+Math.random().toString(36).slice(2),ai=null,si=null,ui="function"==typeof setTimeout?setTimeout:void 0,li="function"==typeof clearTimeout?clearTimeout:void 0,ci=0,fi=Math.random().toString(36).slice(2),di="__reactFiber$"+fi,hi="__reactProps$"+fi,pi="__reactContainer$"+fi,mi="__reactEvents$"+fi,gi=[],yi=-1,bi=Hu(vi={}),xi=Hu(!1),wi=vi,_i=null,ki=null,Ei=wt().unstable_runWithPriority,Si=wt().unstable_scheduleCallback,Ai=wt().unstable_cancelCallback,Ci=wt().unstable_shouldYield,Di=wt().unstable_requestPaint,Mi=wt().unstable_now,Fi=wt().unstable_getCurrentPriorityLevel,Ni=wt().unstable_ImmediatePriority,$i=wt().unstable_UserBlockingPriority,Ti=wt().unstable_NormalPriority,Oi=wt().unstable_LowPriority,zi=wt().unstable_IdlePriority,Ri={},Pi=void 0!==Di?Di:function(){},Li=null,Bi=null,Ii=!1,ji=Mi(),Ui=1e4>ji?Mi:function(){return Mi()-ji},qi=Ot.ReactCurrentBatchConfig,Wi=Hu(null),Hi=null,Vi=null,Gi=null,Yi=!1,Xi=(new kt.Component).refs,Qi={isMounted:function(e){return!!(e=e._reactInternals)&&xs(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ef(),i=tf(e),o=ml(r,i);o.payload=t,null!=n&&(o.callback=n),gl(e,o),nf(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ef(),i=tf(e),o=ml(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),gl(e,o),nf(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ef(),r=tf(e),i=ml(n,r);i.tag=2,null!=t&&(i.callback=t),gl(e,i),nf(e,r,n)}},Ji=Array.isArray,Ki=Cl(!0),Zi=Cl(!1),to=Hu(eo={}),no=Hu(eo),ro=Hu(eo),io=Hu(0),oo=null,ao=null,so=!1,uo=[],lo=Ot.ReactCurrentDispatcher,co=Ot.ReactCurrentBatchConfig,fo=0,ho=null,po=null,mo=null,go=!1,yo=!1,vo={readContext:dl,useCallback:jl,useContext:jl,useEffect:jl,useImperativeHandle:jl,useLayoutEffect:jl,useMemo:jl,useReducer:jl,useRef:jl,useState:jl,useDebugValue:jl,useDeferredValue:jl,useTransition:jl,useMutableSource:jl,useOpaqueIdentifier:jl,unstable_isNewReconciler:!1},bo={readContext:dl,useCallback:function(e,t){return Wl().memoizedState=[e,void 0===t?null:t],e},useContext:dl,useEffect:ic,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,nc(4,2,sc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nc(4,2,e,t)},useMemo:function(e,t){var n=Wl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wl();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=hc.bind(null,ho,e),[r.memoizedState,e]},useRef:ec,useState:Kl,useDebugValue:lc,useDeferredValue:function(e){var t=Kl(e),n=t[0],r=t[1];return ic((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Kl(!1),t=e[0];return ec(e=dc.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Wl();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Ql(r,e,t,n)},useOpaqueIdentifier:function(){if(so){var e=!1,t=function(e){return{$$typeof:Yt,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(ci++).toString(36))),Error(Da(355))})),n=Kl(t)[1];return 0==(2&ho.mode)&&(ho.flags|=516,Zl(5,(function(){n("r:"+(ci++).toString(36))}),void 0,null)),t}return Kl(t="r:"+(ci++).toString(36)),t},unstable_isNewReconciler:!1},xo={readContext:dl,useCallback:cc,useContext:dl,useEffect:oc,useImperativeHandle:uc,useLayoutEffect:ac,useMemo:fc,useReducer:Gl,useRef:tc,useState:function(){return Gl(Vl)},useDebugValue:lc,useDeferredValue:function(e){var t=Gl(Vl),n=t[0],r=t[1];return oc((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Gl(Vl)[0];return[tc().current,e]},useMutableSource:Jl,useOpaqueIdentifier:function(){return Gl(Vl)[0]},unstable_isNewReconciler:!1},wo={readContext:dl,useCallback:cc,useContext:dl,useEffect:oc,useImperativeHandle:uc,useLayoutEffect:ac,useMemo:fc,useReducer:Yl,useRef:tc,useState:function(){return Yl(Vl)},useDebugValue:lc,useDeferredValue:function(e){var t=Yl(Vl),n=t[0],r=t[1];return oc((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Yl(Vl)[0];return[tc().current,e]},useMutableSource:Jl,useOpaqueIdentifier:function(){return Yl(Vl)[0]},unstable_isNewReconciler:!1},_o=Ot.ReactCurrentOwner,ko=!1,Eo={dehydrated:null,retryLane:0},So=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Co=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Dl(to.current);var o,a=null;switch(n){case"input":i=Wa(e,i),r=Wa(e,r),a=[];break;case"option":i=Qa(e,i),r=Qa(e,r),a=[];break;case"select":i=Et({},i,{value:void 0}),r=Et({},r,{value:void 0}),a=[];break;case"textarea":i=Ka(e,i),r=Ka(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Ou)}for(l in ss(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(At.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(null!=u||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(At.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Su("scroll",e),a||s===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===Yt?u.toString():(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)},Mo="function"==typeof WeakMap?WeakMap:Map,Fo="function"==typeof WeakSet?WeakSet:Set,No=Math.ceil,$o=Ot.ReactCurrentDispatcher,To=Ot.ReactCurrentOwner,Oo=0,zo=null,Ro=null,Po=0,Lo=0,Bo=Hu(0),Io=0,jo=null,Uo=0,qo=0,Wo=0,Ho=0,Vo=null,Go=0,Yo=1/0,Xo=null,Qo=!1,Jo=null,Ko=null,Zo=!1,ea=null,ta=90,na=[],ra=[],ia=null,oa=0,aa=null,sa=-1,ua=0,la=0,ca=null,fa=!1,da=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)ko=!0;else{if(0==(n&r)){switch(ko=!1,t.tag){case 3:kc(t),Bl();break;case 5:Nl(t);break;case 1:Xu(t.type)&&Zu(t);break;case 4:Ml(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;Gu(Wi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ec(e,t,n):(Gu(io,1&io.current),null!==(t=Nc(e,t,n))?t.sibling:null);Gu(io,1&io.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Fc(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Gu(io,io.current),r)break;return null;case 23:case 24:return t.lanes=0,vc(e,t,n)}return Nc(e,t,n)}ko=0!=(16384&e.flags)}else ko=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Yu(t,bi.current),fl(t,n),i=ql(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xu(r)){var o=!0;Zu(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,hl(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&xl(t,r,a,e),i.updater=Qi,t.stateNode=i,i._reactInternals=t,El(t,r,e,n),t=_c(null,t,r,!0,o,n)}else t.tag=0,pc(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Of(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ut)return 11;if(e===Ht)return 14}return 2}(i),e=sl(i,e),o){case 0:t=xc(null,t,i,e,n);break e;case 1:t=wc(null,t,i,e,n);break e;case 11:t=mc(null,t,i,e,n);break e;case 14:t=gc(null,t,i,sl(i.type,e),r,n);break e}throw Error(Da(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,xc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 1:return r=t.type,i=t.pendingProps,wc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 3:if(kc(t),r=t.updateQueue,null===e||null===r)throw Error(Da(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,pl(e,t),vl(t,r,null,n),(r=t.memoizedState.element)===i)Bl(),t=Nc(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(ao=Lu(t.stateNode.containerInfo.firstChild),oo=t,o=so=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],uo.push(o);for(n=Zi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else pc(e,t,r,n),Bl();t=t.child}return t;case 5:return Nl(t),null===e&&Rl(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Ru(r,i)?a=null:null!==o&&Ru(r,o)&&(t.flags|=16),bc(e,t),pc(e,t,a,n),t.child;case 6:return null===e&&Rl(t),null;case 13:return Ec(e,t,n);case 4:return Ml(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ki(t,null,r,n):pc(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,mc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 7:return pc(e,t,t.pendingProps,n),t.child;case 8:case 12:return pc(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var s=t.type._context;if(Gu(Wi,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=Yr(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!xi.current){t=Nc(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===s.tag&&((l=ml(-1,n&-n)).tag=2,gl(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),cl(s.return,n),u.lanes|=n;break}l=l.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}pc(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,fl(t,n),r=r(i=dl(i,o.unstable_observedBits)),t.flags|=1,pc(e,t,r,n),t.child;case 14:return o=sl(i=t.type,t.pendingProps),gc(e,t,i,o=sl(i.type,o),r,n);case 15:return yc(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sl(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Xu(r)?(e=!0,Zu(t)):e=!1,fl(t,n),_l(t,r,i),El(t,r,i,n),_c(null,t,r,!0,e,n);case 19:return Fc(e,t,n);case 23:case 24:return vc(e,t,n)}throw Error(Da(156,t.tag))},Yf.prototype.render=function(e){qf(e,this._internalRoot,null,null)},Yf.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;qf(null,e,null,(function(){t[pi]=null}))},_n=function(e){13===e.tag&&(nf(e,4,ef()),Vf(e,4))},kn=function(e){13===e.tag&&(nf(e,67108864,ef()),Vf(e,67108864))},En=function(e){if(13===e.tag){var t=ef(),n=tf(e);nf(e,n,t),Vf(e,n)}},Sn=function(e,t){return t()},ln=function(e,t,n){switch(t){case"input":if(Ga(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=qu(r);if(!i)throw Error(Da(90));Ua(r),Ga(r,i)}}}break;case"textarea":es(e,n);break;case"select":null!=(t=n.value)&&Ja(e,!!n.multiple,t,!1)}},hs=lf,ps=function(e,t,n,r,i){var o=Oo;Oo|=4;try{return rl(98,e.bind(null,t,n,r,i))}finally{0===(Oo=o)&&(Zc(),ol())}},ms=function(){0==(49&Oo)&&(function(){if(null!==ia){var e=ia;ia=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,of(e,Ui())}))}ol()}(),Ef())},dn=function(e,t){var n=Oo;Oo|=2;try{return e(t)}finally{0===(Oo=n)&&(Zc(),ol())}},ha={Events:[ju,Uu,qu,fs,ds,Ef,{current:!1}]},ma={bundleType:(pa={findFiberByHostInstance:Iu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"}).bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ot.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ks(e))?null:e.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||Gf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&!(ga=__REACT_DEVTOOLS_GLOBAL_HOOK__).isDisabled&&ga.supportsFiber)try{_i=ga.inject(ma),ki=ga}catch(e){}ya=ha,_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ya,va=Jf,_t.createPortal=va,ba=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Da(188));throw Error(Da(268,Object.keys(e)))}return e=null===(e=ks(t))?null:e.stateNode},_t.findDOMNode=ba,xa=function(e,t){var n=Oo;if(0!=(48&n))return e(t);Oo|=1;try{if(e)return rl(99,e.bind(null,t))}finally{Oo=n,ol()}},_t.flushSync=xa,wa=function(e,t,n){if(!Xf(t))throw Error(Da(200));return Qf(null,e,t,!0,n)},_t.hydrate=wa,_a=function(e,t,n){if(!Xf(t))throw Error(Da(200));return Qf(null,e,t,!1,n)},_t.render=_a,ka=function(e){if(!Xf(e))throw Error(Da(40));return!!e._reactRootContainer&&(cf((function(){Qf(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},_t.unmountComponentAtNode=ka,Ea=lf,_t.unstable_batchedUpdates=Ea,Sa=function(e,t){return Jf(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},_t.unstable_createPortal=Sa,Aa=function(e,t,n,r){if(!Xf(n))throw Error(Da(200));if(null==e||void 0===e._reactInternals)throw Error(Da(38));return Qf(e,t,n,!1,r)},_t.unstable_renderSubtreeIntoContainer=Aa,"17.0.2",_t.version="17.0.2"}!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),Ca||(Ca=!0,Kf());var Zf=e(_t);xe();var ed=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},td=function(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>ed(e(t),n)}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}};var nd=function(e){return null===e?NaN:+e};const rd=td(ed),id=rd.right,od=rd.left;td(nd).center;var ad=function(e,t){let n,r;if(void 0===t)for(const t of e)null!=t&&(void 0===n?t>=t&&(n=r=t):(n>t&&(n=t),r<t&&(r=t)));else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]};class sd{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],o=e+i,a=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,o=0;if(i>0){for(o=e[--i];i>0&&(t=o,n=e[--i],o=t+n,r=n-(o-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=o+n,n==t-o&&(o=t))}return o}}var ud=Array.prototype,ld=ud.slice,cd=(ud.map,function(e){return function(){return e}}),fd=function(e){return e},dd=Math.sqrt(50),hd=Math.sqrt(10),pd=Math.sqrt(2),md=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=gd(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),r=Math.round(t/a);for(n*a<e&&++n,r*a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(e*a),r=Math.round(t*a);for(n/a<e&&++n,r/a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o};function gd(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=dd?10:o>=hd?5:o>=pd?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=dd?10:o>=hd?5:o>=pd?2:1)}function yd(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=dd?i*=10:o>=hd?i*=5:o>=pd&&(i*=2),t<e?-i:i}var vd=function(e){return Math.ceil(Math.log(function(e,t){let n=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&++n;else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(i=+i)>=i&&++n}return n}(e))/Math.LN2)+1},bd=function(){var e=fd,t=ad,n=vd;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=e(r[i],i,r);var u=t(s),l=u[0],c=u[1],f=n(s,l,c);if(!Array.isArray(f)){const e=c,n=+f;if(t===ad&&([l,c]=function(e,t,n){let r;for(;;){const i=gd(e,t,n);if(i===r||0===i||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}(l,c,n)),(f=md(l,c,n))[f.length-1]>=c)if(e>=c&&t===ad){const e=gd(l,c,n);isFinite(e)&&(e>0?c=(Math.floor(c/e)+1)*e:e<0&&(c=(Math.ceil(c*-e)+1)/-e))}else f.pop()}for(var d=f.length;f[0]<=l;)f.shift(),--d;for(;f[d-1]>c;)f.pop(),--d;var h,p=new Array(d+1);for(i=0;i<=d;++i)(h=p[i]=[]).x0=i>0?f[i-1]:l,h.x1=i<d?f[i]:c;for(i=0;i<a;++i)l<=(o=s[i])&&o<=c&&p[id(f,o,0,d)].push(r[i]);return p}return r.value=function(t){return arguments.length?(e="function"==typeof t?t:cd(t),r):e},r.domain=function(e){return arguments.length?(t="function"==typeof e?e:cd([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?cd(ld.call(e)):cd(e),r):n},r};function xd(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function wd(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function _d(e,t,n=0,r=e.length-1,i=ed){for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);_d(e,t,Math.max(n,Math.floor(t-a*u/o+l)),Math.min(r,Math.floor(t+(o-a)*u/o+l)),i)}const o=e[t];let a=n,s=r;for(kd(e,n,t),i(e[r],o)>0&&kd(e,n,r);a<s;){for(kd(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?kd(e,n,s):(++s,kd(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function kd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ed(e,t,n){if(r=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n))).length){if((t=+t)<=0||r<2)return wd(e);if(t>=1)return xd(e);var r,i=(r-1)*t,o=Math.floor(i),a=xd(_d(e,o).subarray(0,o+1));return a+(wd(e.subarray(o+1))-a)*(i-o)}}function Sd(e,t,n=nd){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}var Ad=function(e,t){return Ed(e,.5,t)};function Cd(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}var Dd=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o};function Md(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}var Fd={},Nd=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function $d(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Td(){}var Od=.7,zd=1.4285714285714286,Rd="\\s*([+-]?\\d+)\\s*",Pd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ld="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bd=/^#([0-9a-f]{3,8})$/,Id=new RegExp("^rgb\\("+[Rd,Rd,Rd]+"\\)$"),jd=new RegExp("^rgb\\("+[Ld,Ld,Ld]+"\\)$"),Ud=new RegExp("^rgba\\("+[Rd,Rd,Rd,Pd]+"\\)$"),qd=new RegExp("^rgba\\("+[Ld,Ld,Ld,Pd]+"\\)$"),Wd=new RegExp("^hsl\\("+[Pd,Ld,Ld]+"\\)$"),Hd=new RegExp("^hsla\\("+[Pd,Ld,Ld,Pd]+"\\)$"),Vd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Gd(){return this.rgb().formatHex()}function Yd(){return this.rgb().formatRgb()}function Xd(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Bd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Qd(t):3===n?new eh(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Jd(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Jd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Id.exec(e))?new eh(t[1],t[2],t[3],1):(t=jd.exec(e))?new eh(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ud.exec(e))?Jd(t[1],t[2],t[3],t[4]):(t=qd.exec(e))?Jd(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Wd.exec(e))?ih(t[1],t[2]/100,t[3]/100,1):(t=Hd.exec(e))?ih(t[1],t[2]/100,t[3]/100,t[4]):Vd.hasOwnProperty(e)?Qd(Vd[e]):"transparent"===e?new eh(NaN,NaN,NaN,0):null}function Qd(e){return new eh(e>>16&255,e>>8&255,255&e,1)}function Jd(e,t,n,r){return r<=0&&(e=t=n=NaN),new eh(e,t,n,r)}function Kd(e){return e instanceof Td||(e=Xd(e)),e?new eh((e=e.rgb()).r,e.g,e.b,e.opacity):new eh}function Zd(e,t,n,r){return 1===arguments.length?Kd(e):new eh(e,t,n,null==r?1:r)}function eh(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function th(){return"#"+rh(this.r)+rh(this.g)+rh(this.b)}function nh(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function rh(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ih(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new sh(e,t,n,r)}function oh(e){if(e instanceof sh)return new sh(e.h,e.s,e.l,e.opacity);if(e instanceof Td||(e=Xd(e)),!e)return new sh;if(e instanceof sh)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new sh(a,s,u,e.opacity)}function ah(e,t,n,r){return 1===arguments.length?oh(e):new sh(e,t,n,null==r?1:r)}function sh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function uh(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Nd(Td,Xd,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Gd,formatHex:Gd,formatHsl:function(){return oh(this).formatHsl()},formatRgb:Yd,toString:Yd}),Nd(eh,Zd,$d(Td,{brighter:function(e){return e=null==e?zd:Math.pow(zd,e),new eh(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Od:Math.pow(Od,e),new eh(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:th,formatHex:th,formatRgb:nh,toString:nh})),Nd(sh,ah,$d(Td,{brighter:function(e){return e=null==e?zd:Math.pow(zd,e),new sh(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Od:Math.pow(Od,e),new sh(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new eh(uh(e>=240?e-240:e+120,i,r),uh(e,i,r),uh(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const lh=Math.PI/180,ch=180/Math.PI,fh=.96422,dh=.82521,hh=4/29,ph=6/29,mh=.12841854934601665;function gh(e){if(e instanceof vh)return new vh(e.l,e.a,e.b,e.opacity);if(e instanceof Sh)return Ah(e);e instanceof eh||(e=Kd(e));var t,n,r=_h(e.r),i=_h(e.g),o=_h(e.b),a=bh((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=n=a:(t=bh((.4360747*r+.3850649*i+.1430804*o)/fh),n=bh((.0139322*r+.0971045*i+.7141733*o)/dh)),new vh(116*a-16,500*(t-a),200*(a-n),e.opacity)}function yh(e,t,n,r){return 1===arguments.length?gh(e):new vh(e,t,n,null==r?1:r)}function vh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function bh(e){return e>.008856451679035631?Math.pow(e,1/3):e/mh+hh}function xh(e){return e>ph?e*e*e:mh*(e-hh)}function wh(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function _h(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function kh(e){if(e instanceof Sh)return new Sh(e.h,e.c,e.l,e.opacity);if(e instanceof vh||(e=gh(e)),0===e.a&&0===e.b)return new Sh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*ch;return new Sh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Eh(e,t,n,r){return 1===arguments.length?kh(e):new Sh(e,t,n,null==r?1:r)}function Sh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Ah(e){if(isNaN(e.h))return new vh(e.l,0,0,e.opacity);var t=e.h*lh;return new vh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Nd(vh,yh,$d(Td,{brighter:function(e){return new vh(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new vh(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new eh(wh(3.1338561*(t=fh*xh(t))-1.6168667*(e=1*xh(e))-.4906146*(n=dh*xh(n))),wh(-.9787684*t+1.9161415*e+.033454*n),wh(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Nd(Sh,Eh,$d(Td,{brighter:function(e){return new Sh(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Sh(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Ah(this).rgb()}}));var Ch=-.14861,Dh=1.78277,Mh=-.29227,Fh=-.90649,Nh=1.97294,$h=-1.7884503806,Th=3.5172982438,Oh=-.6557636667999999;function zh(e){if(e instanceof Ph)return new Ph(e.h,e.s,e.l,e.opacity);e instanceof eh||(e=Kd(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Oh*r+$h*t-Th*n)/-5.9615122912,o=r-i,a=(Nh*(n-i)-Mh*o)/Fh,s=Math.sqrt(a*a+o*o)/(Nh*i*(1-i)),u=s?Math.atan2(a,o)*ch-120:NaN;return new Ph(u<0?u+360:u,s,i,e.opacity)}function Rh(e,t,n,r){return 1===arguments.length?zh(e):new Ph(e,t,n,null==r?1:r)}function Ph(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Lh(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}Nd(Ph,Rh,$d(Td,{brighter:function(e){return e=null==e?zd:Math.pow(zd,e),new Ph(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Od:Math.pow(Od,e),new Ph(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*lh,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new eh(255*(t+n*(Ch*r+Dh*i)),255*(t+n*(Mh*r+Fh*i)),255*(t+n*(Nh*r)),this.opacity)}}));var Bh=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Lh((n-r/t)*t,a,i,o,s)}},Ih=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Lh((n-r/t)*t,i,o,a,s)}},jh=e=>()=>e;function Uh(e,t){return function(n){return e+n*t}}function qh(e,t){var n=t-e;return n?Uh(e,n>180||n<-180?n-360*Math.round(n/360):n):jh(isNaN(e)?t:e)}function Wh(e){return 1==(e=+e)?Hh:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):jh(isNaN(t)?n:t)}}function Hh(e,t){var n=t-e;return n?Uh(e,n):jh(isNaN(e)?t:e)}var Vh=function e(t){var n=Wh(t);function r(e,t){var r=n((e=Zd(e)).r,(t=Zd(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Hh(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Gh(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Zd(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}var Yh=Gh(Bh),Xh=Gh(Ih),Qh=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}};function Jh(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var Kh=function(e,t){return(Jh(t)?Qh:Zh)(e,t)};function Zh(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=sp(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}var ep=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},tp=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},np=function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=sp(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},rp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ip=new RegExp(rp.source,"g");var op,ap=function(e,t){var n,r,i,o=rp.lastIndex=ip.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=rp.exec(e))&&(r=ip.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:tp(n,r)})),o=ip.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})},sp=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?jh(t):("number"===r?tp:"string"===r?(n=Xd(t))?(t=n,Vh):ap:t instanceof Xd?Vh:t instanceof Date?ep:Jh(t)?Qh:Array.isArray(t)?Zh:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?np:tp)(e,t)},up=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},lp=function(e,t){var n=qh(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},cp=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},fp=180/Math.PI,dp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},hp=function(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*fp,skewX:Math.atan(u)*fp,scaleX:a,scaleY:s}};function pp(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],u=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:tp(e,i)},{i:u-2,x:tp(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:tp(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,u),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:tp(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,u),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:tp(e,n)},{i:s-2,x:tp(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var mp=pp((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dp:hp(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),gp=pp((function(e){return null==e?dp:(op||(op=document.createElementNS("http://www.w3.org/2000/svg","g")),op.setAttribute("transform",e),(e=op.transform.baseVal.consolidate())?(e=e.matrix,hp(e.a,e.b,e.c,e.d,e.e,e.f)):dp)}),", ",")",")");function yp(e){return((e=Math.exp(e))+1/e)/2}var vp=function e(t,n,r){function i(e,i){var o,a,s=e[0],u=e[1],l=e[2],c=i[0],f=i[1],d=i[2],h=c-s,p=f-u,m=h*h+p*p;if(m<1e-12)a=Math.log(d/l)/t,o=function(e){return[s+e*h,u+e*p,l*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),y=(d*d-l*l+r*m)/(2*l*n*g),v=(d*d-l*l-r*m)/(2*d*n*g),b=Math.log(Math.sqrt(y*y+1)-y),x=Math.log(Math.sqrt(v*v+1)-v);a=(x-b)/t,o=function(e){var r,i=e*a,o=yp(b),c=l/(n*g)*(o*(r=t*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+c*h,u+c*p,l*o/yp(t*i+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function bp(e){return function(t,n){var r=e((t=ah(t)).h,(n=ah(n)).h),i=Hh(t.s,n.s),o=Hh(t.l,n.l),a=Hh(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var xp=bp(qh),wp=bp(Hh);function _p(e,t){var n=Hh((e=yh(e)).l,(t=yh(t)).l),r=Hh(e.a,t.a),i=Hh(e.b,t.b),o=Hh(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=o(t),e+""}}function kp(e){return function(t,n){var r=e((t=Eh(t)).h,(n=Eh(n)).h),i=Hh(t.c,n.c),o=Hh(t.l,n.l),a=Hh(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var Ep=kp(qh),Sp=kp(Hh);function Ap(e){return function t(n){function r(t,r){var i=e((t=Rh(t)).h,(r=Rh(r)).h),o=Hh(t.s,r.s),a=Hh(t.l,r.l),s=Hh(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}var Cp=Ap(qh),Dp=Ap(Hh);function Mp(e,t){void 0===t&&(t=e,e=sp);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}var Fp=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};function Np(e){return+e}t(Fd,"interpolate",(function(){return sp})),t(Fd,"interpolateArray",(function(){return Kh})),t(Fd,"interpolateBasis",(function(){return Bh})),t(Fd,"interpolateBasisClosed",(function(){return Ih})),t(Fd,"interpolateDate",(function(){return ep})),t(Fd,"interpolateDiscrete",(function(){return up})),t(Fd,"interpolateHue",(function(){return lp})),t(Fd,"interpolateNumber",(function(){return tp})),t(Fd,"interpolateNumberArray",(function(){return Qh})),t(Fd,"interpolateObject",(function(){return np})),t(Fd,"interpolateRound",(function(){return cp})),t(Fd,"interpolateString",(function(){return ap})),t(Fd,"interpolateTransformSvg",(function(){return gp})),t(Fd,"interpolateTransformCss",(function(){return mp})),t(Fd,"interpolateZoom",(function(){return vp})),t(Fd,"interpolateRgbBasisClosed",(function(){return Xh})),t(Fd,"interpolateRgbBasis",(function(){return Yh})),t(Fd,"interpolateRgb",(function(){return Vh})),t(Fd,"interpolateHslLong",(function(){return wp})),t(Fd,"interpolateHsl",(function(){return xp})),t(Fd,"interpolateLab",(function(){return _p})),t(Fd,"interpolateHclLong",(function(){return Sp})),t(Fd,"interpolateHcl",(function(){return Ep})),t(Fd,"interpolateCubehelixLong",(function(){return Dp})),t(Fd,"interpolateCubehelix",(function(){return Cp})),t(Fd,"piecewise",(function(){return Mp})),t(Fd,"quantize",(function(){return Fp}));var $p=[0,1];function Tp(e){return e}function Op(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function zp(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Op(i,r),o=n(a,o)):(r=Op(r,i),o=n(o,a)),function(e){return o(r(e))}}function Rp(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Op(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=id(e,t,1,r)-1;return o[n](i[n](t))}}function Pp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Lp(){var e,t,n,r,i,o,a=$p,s=$p,u=sp,l=Tp;function c(){var e,t,n,u=Math.min(a.length,s.length);return l!==Tp&&(e=a[0],t=a[u-1],e>t&&(n=e,e=t,t=n),l=function(n){return Math.max(e,Math.min(t,n))}),r=u>2?Rp:zp,i=o=null,f}function f(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,u)))(e(l(t)))}return f.invert=function(n){return l(t((o||(o=r(s,a.map(e),tp)))(n)))},f.domain=function(e){return arguments.length?(a=Array.from(e,Np),c()):a.slice()},f.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},f.rangeRound=function(e){return s=Array.from(e),u=cp,c()},f.clamp=function(e){return arguments.length?(l=!!e||Tp,c()):l!==Tp},f.interpolate=function(e){return arguments.length?(u=e,c()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,c()}}function Bp(){return Lp()(Tp,Tp)}function Ip(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function jp(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function Up(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}var qp=function(e){return(e=Up(Math.abs(e)))?e[1]:NaN},Wp=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hp(e){if(!(t=Wp.exec(e)))throw new Error("invalid format: "+e);var t;return new Vp({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Vp(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}Hp.prototype=Vp.prototype,Vp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Gp,Yp,Xp,Qp,Jp=function(e,t){var n=Up(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Kp={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Jp(100*e,t),r:Jp,s:function(e,t){var n=Up(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Gp=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Up(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)},Zp=function(e){return e},em=Array.prototype.map,tm=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],nm=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Zp:(t=em.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Zp:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(em.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"−":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=Hp(e)).fill,n=e.align,f=e.sign,d=e.symbol,h=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):Kp[v]||(void 0===g&&(g=12),y=!0,v="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?o:/[%p]/.test(v)?u:"",w=Kp[v],_=/[defgprs%]/.test(v);function k(e){var i,o,u,d=b,k=x;if("c"===v)k=w(e)+k,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==f&&(E=!1),d=(E?"("===f?f:l:"-"===f||"("===f?"":f)+d,k=("s"===v?tm[8+Gp/3]:"")+k+(E&&"("===f?")":""),_)for(i=-1,o=e.length;++i<o;)if(48>(u=e.charCodeAt(i))||u>57){k=(46===u?a+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}m&&!h&&(e=r(e,1/0));var S=d.length+e.length+k.length,A=S<p?new Array(p-S+1).join(t):"";switch(m&&h&&(e=r(A+e,A.length?p-k.length:1/0),A=""),n){case"<":e=d+e+k+A;break;case"=":e=d+A+e+k;break;case"^":e=A.slice(0,S=A.length>>1)+d+e+k+A.slice(S);break;default:e=A+d+e+k}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return e+""},k}return{format:f,formatPrefix:function(e,t){var n=f(((e=Hp(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(qp(t)/3))),i=Math.pow(10,-r),o=tm[8+r/3];return function(e){return n(i*e)+o}}}};Yp=nm({thousands:",",grouping:[3],currency:["$",""]}),Xp=Yp.format,Qp=Yp.formatPrefix;var rm=function(e){return Math.max(0,-qp(Math.abs(e)))},im=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(qp(t)/3)))-qp(Math.abs(e)))},om=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,qp(t)-qp(e))+1};function am(e,t,n,r){var i,o=yd(e,t,n);switch((r=Hp(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=im(o,a))||(r.precision=i),Qp(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=om(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=rm(o))||(r.precision=i-2*("%"===r.type))}return Xp(r)}function sm(e){var t=e.domain;return e.ticks=function(e){var n=t();return md(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return am(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=gd(u,l,n))===r)return o[a]=u,o[s]=l,t(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function um(){var e=Bp();return e.copy=function(){return Pp(e,um())},Ip.apply(e,arguments),sm(e)}function lm(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function cm(e){return Math.log(e)}function fm(e){return Math.exp(e)}function dm(e){return-Math.log(-e)}function hm(e){return-Math.exp(-e)}function pm(e){return isFinite(e)?+("1e"+e):e<0?0:e}function mm(e){return function(t){return-e(-t)}}function gm(e){var t,n,r=e(cm,fm),i=r.domain,o=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(o),n=function(e){return 10===e?pm:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(o),i()[0]<0?(t=mm(t),n=mm(n),e(dm,hm)):e(cm,fm),r}return r.base=function(e){return arguments.length?(o=+e,a()):o},r.domain=function(e){return arguments.length?(i(e),a()):i()},r.ticks=function(e){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(d=s,s=u,u=d);var l,c,f,d=t(s),h=t(u),p=null==e?10:+e,m=[];if(!(o%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1,l=n(d);c<o;++c)if(!((f=l*c)<s)){if(f>u)break;m.push(f)}}else for(;d<=h;++d)for(c=o-1,l=n(d);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;m.push(f)}2*m.length<p&&(m=md(s,u,p))}else m=md(d,h,Math.min(h-d,p)).map(n);return r?m.reverse():m},r.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=Xp(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=a?i(e):""}},r.nice=function(){return i(lm(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function ym(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function vm(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function bm(e){var t=1,n=e(ym(t),vm(t));return n.constant=function(n){return arguments.length?e(ym(t=+n),vm(t)):t},sm(n)}const xm=Symbol("implicit");function wm(){var e=new Map,t=[],n=[],r=xm;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==xm)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;for(const r of n){const n=r+"";e.has(n)||e.set(n,t.push(r))}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return wm(t,n).unknown(r)},Ip.apply(i,arguments),i}function _m(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function km(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Em(e){return e<0?-e*e:e*e}function Sm(e){var t=e(Tp,Tp),n=1;function r(){return 1===n?e(Tp,Tp):.5===n?e(km,Em):e(_m(n),_m(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},sm(t)}function Am(){var e=Sm(Lp());return e.copy=function(){return Pp(e,Am()).exponent(e.exponent())},Ip.apply(e,arguments),e}var Cm=new Date,Dm=new Date;function Mm(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return Mm((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return Cm.setTime(+t),Dm.setTime(+r),e(Cm),e(Dm),Math.floor(n(Cm,Dm))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var Fm=Mm((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Fm.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Mm((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Fm:null};Fm.range;const Nm=1e3,$m=6e4,Tm=36e5,Om=864e5,zm=6048e5,Rm=2592e6,Pm=31536e6;var Lm=Mm((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Nm)}),(function(e,t){return(t-e)/Nm}),(function(e){return e.getUTCSeconds()})),Bm=(Lm.range,Mm((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nm)}),(function(e,t){e.setTime(+e+t*$m)}),(function(e,t){return(t-e)/$m}),(function(e){return e.getMinutes()}))),Im=(Bm.range,Mm((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nm-e.getMinutes()*$m)}),(function(e,t){e.setTime(+e+t*Tm)}),(function(e,t){return(t-e)/Tm}),(function(e){return e.getHours()}))),jm=(Im.range,Mm((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*$m)/Om),(e=>e.getDate()-1)));jm.range;function Um(e){return Mm((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*$m)/zm}))}var qm=Um(0),Wm=Um(1),Hm=Um(2),Vm=Um(3),Gm=Um(4),Ym=Um(5),Xm=Um(6),Qm=(qm.range,Wm.range,Hm.range,Vm.range,Gm.range,Ym.range,Xm.range,Mm((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),Jm=(Qm.range,Mm((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));Jm.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Mm((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};Jm.range;var Km=Mm((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*$m)}),(function(e,t){return(t-e)/$m}),(function(e){return e.getUTCMinutes()})),Zm=(Km.range,Mm((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Tm)}),(function(e,t){return(t-e)/Tm}),(function(e){return e.getUTCHours()}))),eg=(Zm.range,Mm((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Om}),(function(e){return e.getUTCDate()-1})));eg.range;function tg(e){return Mm((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/zm}))}var ng=tg(0),rg=tg(1),ig=tg(2),og=tg(3),ag=tg(4),sg=tg(5),ug=tg(6),lg=(ng.range,rg.range,ig.range,og.range,ag.range,sg.range,ug.range,Mm((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),cg=(lg.range,Mm((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));cg.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Mm((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};cg.range;function fg(e,t,n,r,i,o){const a=[[Lm,1,Nm],[Lm,5,5e3],[Lm,15,15e3],[Lm,30,3e4],[o,1,$m],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,Tm],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Om],[r,2,1728e5],[n,1,zm],[t,1,Rm],[t,3,7776e6],[e,1,Pm]];function s(t,n,r){const i=Math.abs(n-t)/r,o=td((([,,e])=>e)).right(a,i);if(o===a.length)return e.every(yd(t/Pm,n/Pm,r));if(0===o)return Fm.every(Math.max(yd(t,n,r),1));const[s,u]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(u)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}const[dg,hg]=fg(cg,lg,ng,eg,Zm,Km),[pg,mg]=fg(Jm,Qm,qm,jm,Im,Bm);function gg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function yg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function vg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function bg(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,u=e.shortMonths,l=Ng(i),c=$g(i),f=Ng(o),d=$g(o),h=Ng(a),p=$g(a),m=Ng(s),g=$g(s),y=Ng(u),v=$g(u),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Zg,e:Zg,f:iy,g:my,G:yy,H:ey,I:ty,j:ny,L:ry,m:oy,M:ay,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Iy,s:jy,S:sy,u:uy,U:ly,V:fy,w:dy,W:hy,x:null,X:null,y:py,Y:gy,Z:vy,"%":By},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:by,e:by,f:Ey,g:zy,G:Py,H:xy,I:wy,j:_y,L:ky,m:Sy,M:Ay,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Iy,s:jy,S:Cy,u:Dy,U:My,V:Ny,w:$y,W:Ty,x:null,X:null,y:Oy,Y:Ry,Z:Ly,"%":By},w={a:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:qg,e:qg,f:Xg,g:Bg,G:Lg,H:Hg,I:Hg,j:Wg,L:Yg,m:Ug,M:Vg,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:jg,Q:Jg,s:Kg,S:Gg,u:Og,U:zg,V:Rg,w:Tg,W:Pg,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:Bg,Y:Lg,Z:Ig,"%":Qg};function _(e,t){return function(n){var r,i,o,a=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=Sg[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(e.slice(u,s)),a.join("")}}function k(e,t){return function(n){var r,i,o=vg(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=yg(vg(o.y,0,1))).getUTCDay(),r=i>4||0===i?rg.ceil(r):rg(r),r=eg.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=gg(vg(o.y,0,1))).getDay(),r=i>4||0===i?Wm.ceil(r):Wm(r),r=jm.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?yg(vg(o.y,0,1)).getUTCDay():gg(vg(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,yg(o)):gg(o)}}function E(e,t,n,r){for(var i,o,a=0,s=t.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in Sg?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x),{format:function(e){var t=_(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}var xg,wg,_g,kg,Eg,Sg={"-":"",_:" ",0:"0"},Ag=/^\s*\d+/,Cg=/^%/,Dg=/[\\^$*+?|[\]().{}]/g;function Mg(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Fg(e){return e.replace(Dg,"\\$&")}function Ng(e){return new RegExp("^(?:"+e.map(Fg).join("|")+")","i")}function $g(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Tg(e,t,n){var r=Ag.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Og(e,t,n){var r=Ag.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function zg(e,t,n){var r=Ag.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Rg(e,t,n){var r=Ag.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Pg(e,t,n){var r=Ag.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Lg(e,t,n){var r=Ag.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Bg(e,t,n){var r=Ag.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ig(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jg(e,t,n){var r=Ag.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Ug(e,t,n){var r=Ag.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function qg(e,t,n){var r=Ag.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Wg(e,t,n){var r=Ag.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Hg(e,t,n){var r=Ag.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Vg(e,t,n){var r=Ag.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Gg(e,t,n){var r=Ag.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Yg(e,t,n){var r=Ag.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Xg(e,t,n){var r=Ag.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Qg(e,t,n){var r=Cg.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Jg(e,t,n){var r=Ag.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Kg(e,t,n){var r=Ag.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Zg(e,t){return Mg(e.getDate(),t,2)}function ey(e,t){return Mg(e.getHours(),t,2)}function ty(e,t){return Mg(e.getHours()%12||12,t,2)}function ny(e,t){return Mg(1+jm.count(Jm(e),e),t,3)}function ry(e,t){return Mg(e.getMilliseconds(),t,3)}function iy(e,t){return ry(e,t)+"000"}function oy(e,t){return Mg(e.getMonth()+1,t,2)}function ay(e,t){return Mg(e.getMinutes(),t,2)}function sy(e,t){return Mg(e.getSeconds(),t,2)}function uy(e){var t=e.getDay();return 0===t?7:t}function ly(e,t){return Mg(qm.count(Jm(e)-1,e),t,2)}function cy(e){var t=e.getDay();return t>=4||0===t?Gm(e):Gm.ceil(e)}function fy(e,t){return e=cy(e),Mg(Gm.count(Jm(e),e)+(4===Jm(e).getDay()),t,2)}function dy(e){return e.getDay()}function hy(e,t){return Mg(Wm.count(Jm(e)-1,e),t,2)}function py(e,t){return Mg(e.getFullYear()%100,t,2)}function my(e,t){return Mg((e=cy(e)).getFullYear()%100,t,2)}function gy(e,t){return Mg(e.getFullYear()%1e4,t,4)}function yy(e,t){var n=e.getDay();return Mg((e=n>=4||0===n?Gm(e):Gm.ceil(e)).getFullYear()%1e4,t,4)}function vy(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Mg(t/60|0,"0",2)+Mg(t%60,"0",2)}function by(e,t){return Mg(e.getUTCDate(),t,2)}function xy(e,t){return Mg(e.getUTCHours(),t,2)}function wy(e,t){return Mg(e.getUTCHours()%12||12,t,2)}function _y(e,t){return Mg(1+eg.count(cg(e),e),t,3)}function ky(e,t){return Mg(e.getUTCMilliseconds(),t,3)}function Ey(e,t){return ky(e,t)+"000"}function Sy(e,t){return Mg(e.getUTCMonth()+1,t,2)}function Ay(e,t){return Mg(e.getUTCMinutes(),t,2)}function Cy(e,t){return Mg(e.getUTCSeconds(),t,2)}function Dy(e){var t=e.getUTCDay();return 0===t?7:t}function My(e,t){return Mg(ng.count(cg(e)-1,e),t,2)}function Fy(e){var t=e.getUTCDay();return t>=4||0===t?ag(e):ag.ceil(e)}function Ny(e,t){return e=Fy(e),Mg(ag.count(cg(e),e)+(4===cg(e).getUTCDay()),t,2)}function $y(e){return e.getUTCDay()}function Ty(e,t){return Mg(rg.count(cg(e)-1,e),t,2)}function Oy(e,t){return Mg(e.getUTCFullYear()%100,t,2)}function zy(e,t){return Mg((e=Fy(e)).getUTCFullYear()%100,t,2)}function Ry(e,t){return Mg(e.getUTCFullYear()%1e4,t,4)}function Py(e,t){var n=e.getUTCDay();return Mg((e=n>=4||0===n?ag(e):ag.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ly(){return"+0000"}function By(){return"%"}function Iy(e){return+e}function jy(e){return Math.floor(+e/1e3)}function Uy(e){return new Date(e)}function qy(e){return e instanceof Date?+e:+new Date(+e)}function Wy(e,t,n,r,i,o,a,s,u,l){var c=Bp(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function w(e){return(u(e)<e?h:s(e)<e?p:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:x)(e)}return c.invert=function(e){return new Date(f(e))},c.domain=function(e){return arguments.length?d(Array.from(e,qy)):d().map(Uy)},c.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?w:l(t)},c.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(lm(n,e)):c},c.copy=function(){return Pp(c,Wy(e,t,n,r,i,o,a,s,u,l))},c}function Hy(){var e,t,n,r,i,o=0,a=1,s=Tp,u=!1;function l(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),l):[o,a]},l.clamp=function(e){return arguments.length?(u=!!e,l):u},l.interpolator=function(e){return arguments.length?(s=e,l):s},l.range=c(sp),l.rangeRound=c(cp),l.unknown=function(e){return arguments.length?(i=e,l):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),l}}function Vy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Gy(){var e=sm(Hy()(Tp));return e.copy=function(){return Vy(e,Gy())},jp.apply(e,arguments)}function Yy(){var e=Sm(Hy());return e.copy=function(){return Vy(e,Yy()).exponent(e.exponent())},jp.apply(e,arguments)}function Xy(){var e,t,n,r,i,o,a,s=0,u=.5,l=1,c=1,f=Tp,d=!1;function h(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(c*e<c*t?r:i),f(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,f=Mp(e,[n,r,i]),h):[f(0),f(.5),f(1)]}}return h.domain=function(a){return arguments.length?([s,u,l]=a,e=o(s=+s),t=o(u=+u),n=o(l=+l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,h):[s,u,l]},h.clamp=function(e){return arguments.length?(d=!!e,h):d},h.interpolator=function(e){return arguments.length?(f=e,h):f},h.range=p(sp),h.rangeRound=p(cp),h.unknown=function(e){return arguments.length?(a=e,h):a},function(a){return o=a,e=a(s),t=a(u),n=a(l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,h}}function Qy(){var e=Sm(Xy());return e.copy=function(){return Vy(e,Qy()).exponent(e.exponent())},jp.apply(e,arguments)}!function(e){xg=bg(e),wg=xg.format,_g=xg.parse,kg=xg.utcFormat,Eg=xg.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Jy={},Ky={};function Zy(e,t,n){return e.fields=t||[],e.fname=n,e}function ev(e){return null==e?null:e.fname}function tv(e){return null==e?null:e.fields}function nv(e){return 1===e.length?rv(e[0]):iv(e)}const rv=e=>function(t){return t[e]},iv=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ov(e){throw Error(e)}function av(e){const t=[],n=e.length;let r,i,o,a=null,s=0,u="";function l(){t.push(u+e.substring(r,i)),u="",r=i+1}for(e+="",r=i=0;i<n;++i)if(o=e[i],"\\"===o)u+=e.substring(r,i),u+=e.substring(++i,++i),r=i;else if(o===a)l(),a=null,s=-1;else{if(a)continue;r===s&&'"'===o||r===s&&"'"===o?(r=i+1,a=o):"."!==o||s?"["===o?(i>r&&l(),s=r=i+1):"]"===o&&(s||ov("Access path missing open bracket: "+e),s>0&&l(),s=0,r=i+1):i>r?l():r=i+1}return s&&ov("Access path missing closing bracket: "+e),a&&ov("Access path missing closing quote: "+e),i>r&&(i++,l()),t}function sv(e,t,n){const r=av(e);return e=1===r.length?r[0]:e,Zy((n&&n.get||nv)(r),[e],t||e)}const uv=sv("id"),lv=Zy((e=>e),[],"identity"),cv=Zy((()=>0),[],"zero"),fv=Zy((()=>1),[],"one"),dv=Zy((()=>!0),[],"true"),hv=Zy((()=>!1),[],"false");function pv(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}function mv(e,t){let n=e||0;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=1&&pv(t||"error","ERROR",arguments),this},warn:function(){return n>=2&&pv(t||"warn","WARN",arguments),this},info:function(){return n>=3&&pv(t||"log","INFO",arguments),this},debug:function(){return n>=4&&pv(t||"log","DEBUG",arguments),this}}}var gv=Array.isArray;function yv(e){return e===Object(e)}const vv=e=>"__proto__"!==e;function bv(...e){return e.reduce(((e,t)=>{for(const n in t)if("signals"===n)e.signals=wv(e.signals,t.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;xv(e,n,t[n],r)}return e}),{})}function xv(e,t,n,r){if(!vv(t))return;let i,o;if(yv(n)&&!gv(n))for(i in o=yv(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?xv(o,i,n[i]):vv(i)&&(o[i]=n[i]);else e[t]=n}function wv(e,t){if(null==e)return t;const n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}function _v(e){return e[e.length-1]}function kv(e){return null==e||""===e?null:+e}const Ev=e=>t=>e*Math.exp(t),Sv=e=>t=>Math.log(e*t),Av=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Cv=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Dv=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Mv(e,t,n,r){const i=n(e[0]),o=n(_v(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function Fv(e,t){return Mv(e,t,kv,lv)}function Nv(e,t){var n=Math.sign(e[0]);return Mv(e,t,Sv(n),Ev(n))}function $v(e,t,n){return Mv(e,t,Dv(n),Dv(1/n))}function Tv(e,t,n){return Mv(e,t,Av(n),Cv(n))}function Ov(e,t,n,r,i){const o=r(e[0]),a=r(_v(e)),s=null!=t?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function zv(e,t,n){return Ov(e,t,n,kv,lv)}function Rv(e,t,n){const r=Math.sign(e[0]);return Ov(e,t,n,Sv(r),Ev(r))}function Pv(e,t,n,r){return Ov(e,t,n,Dv(r),Dv(1/r))}function Lv(e,t,n,r){return Ov(e,t,n,Av(r),Cv(r))}function Bv(e){return 1+~~(new Date(e).getMonth()/3)}function Iv(e){return 1+~~(new Date(e).getUTCMonth()/3)}function jv(e){return null!=e?gv(e)?e:[e]:[]}function Uv(e,t,n){let r,i=e[0],o=e[1];return o<i&&(r=o,o=i,i=r),r=o-i,r>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]}function qv(e){return"function"==typeof e}function Wv(e,t,n){n=n||{},t=jv(t)||[];const r=[],i=[],o={},a=n.comparator||Vv;return jv(e).forEach(((e,a)=>{null!=e&&(r.push("descending"===t[a]?-1:1),i.push(e=qv(e)?e:sv(e,null,n)),(tv(e)||[]).forEach((e=>o[e]=1)))})),0===i.length?null:Zy(a(i,r),Object.keys(o))}const Hv=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),Vv=(e,t)=>1===e.length?Gv(e[0],t[0]):Yv(e,t,e.length),Gv=(e,t)=>function(n,r){return Hv(e(n),e(r))*t},Yv=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;0===a&&++s<n;)o=e[s],a=Hv(o(r),o(i));return a*t[s]});function Xv(e){return qv(e)?e:()=>e}function Qv(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout((()=>(t(r),n=null)),e)}}function Jv(e){for(let t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r],t)e[n]=t[n];return e}function Kv(e,t){let n,r,i,o,a=0;if(e&&(n=e.length))if(null==t){for(r=e[a];a<n&&(null==r||r!=r);r=e[++a]);for(i=o=r;a<n;++a)r=e[a],null!=r&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=t(e[a]);a<n&&(null==r||r!=r);r=t(e[++a]));for(i=o=r;a<n;++a)r=t(e[a]),null!=r&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]}function Zv(e,t){const n=e.length;let r,i,o,a,s,u=-1;if(null==t){for(;++u<n;)if(i=e[u],null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=e[u],null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}else{for(;++u<n;)if(i=t(e[u],u,e),null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=t(e[u],u,e),null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}return[a,s]}const eb=Object.prototype.hasOwnProperty;function tb(e,t){return eb.call(e,t)}const nb={};function rb(e){let t,n={};function r(e){return tb(n,e)&&n[e]!==nb}const i={size:0,empty:0,object:n,has:r,get:function(e){return r(e)?n[e]:void 0},set:function(e,t){return r(e)||(++i.size,n[e]===nb&&--i.empty),n[e]=t,this},delete:function(e){return r(e)&&(--i.size,++i.empty,n[e]=nb),this},clear:function(){i.size=i.empty=0,i.object=n={}},test:function(e){return arguments.length?(t=e,i):t},clean:function(){const e={};let r=0;for(const i in n){const o=n[i];o===nb||t&&t(o)||(e[i]=o,++r)}i.size=r,i.empty=0,i.object=n=e}};return e&&Object.keys(e).forEach((t=>{i.set(t,e[t])})),i}function ib(e,t,n,r,i,o){if(!n&&0!==n)return o;const a=+n;let s,u=e[0],l=_v(e);l<u&&(s=u,u=l,l=s),s=Math.abs(t-u);const c=Math.abs(l-t);return s<c&&s<=a?r:c<=a?i:o}function ob(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Jv(r,n)}function ab(e,t,n,r){let i,o=t[0],a=t[t.length-1];return o>a&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=e:o<e)&&(r?e<=a:e<a)}function sb(e){return"boolean"==typeof e}function ub(e){return"[object Date]"===Object.prototype.toString.call(e)}function lb(e){return e&&qv(e[Symbol.iterator])}function cb(e){return"number"==typeof e}function fb(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function db(e){return"string"==typeof e}function hb(e,t,n){e&&(e=t?jv(e).map((e=>e.replace(/\\(.)/g,"$1"))):jv(e));const r=e&&e.length,i=n&&n.get||nv,o=e=>i(t?[e]:av(e));let a;if(r)if(1===r){const t=o(e[0]);a=function(e){return""+t(e)}}else{const t=e.map(o);a=function(e){let n=""+t[0](e),i=0;for(;++i<r;)n+="|"+t[i](e);return n}}else a=function(){return""};return Zy(a,e,"key")}function pb(e,t){const n=e[0],r=_v(e),i=+t;return i?1===i?r:n+i*(r-n):n}function mb(e){let t,n,r;e=+e||1e4;const i=()=>{t={},n={},r=0},o=(i,o)=>(++r>e&&(n=t,t={},r=1),t[i]=o);return i(),{clear:i,has:e=>tb(t,e)||tb(n,e),get:e=>tb(t,e)?t[e]:tb(n,e)?o(e,n[e]):void 0,set:(e,n)=>tb(t,e)?t[e]=n:o(e,n)}}function gb(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,u=0,l=0;for(;s<i&&u<o;++l)a[l]=e(t[s],n[u])>0?n[u++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;u<o;++u,++l)a[l]=n[u];return a}function yb(e,t){let n="";for(;--t>=0;)n+=e;return n}function vb(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:"left"===r?yb(i,a)+o:"center"===r?yb(i,~~(a/2))+o+yb(i,Math.ceil(a/2)):o+yb(i,a)}function bb(e){return e&&_v(e)-e[0]||0}function xb(e){return gv(e)?"["+e.map(xb)+"]":yv(e)||db(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function wb(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}const _b=e=>cb(e)||ub(e)?e:Date.parse(e);function kb(e,t){return t=t||_b,null==e||""===e?null:t(e)}function Eb(e){return null==e||""===e?null:e+""}function Sb(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Ab(e,t,n,r){const i=null!=r?r:"…",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function Cb(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const r=t(e[i]);r&&n(r,i,e)}}else e.forEach(n)}t(Ky,"zoomSymlog",(function(){return Lv})),t(Ky,"zoomPow",(function(){return Pv})),t(Ky,"zoomLog",(function(){return Rv})),t(Ky,"zoomLinear",(function(){return zv})),t(Ky,"zero",(function(){return cv})),t(Ky,"writeConfig",(function(){return xv})),t(Ky,"visitArray",(function(){return Cb})),t(Ky,"utcquarter",(function(){return Iv})),t(Ky,"truthy",(function(){return dv})),t(Ky,"truncate",(function(){return Ab})),t(Ky,"toString",(function(){return Eb})),t(Ky,"toSet",(function(){return Sb})),t(Ky,"toNumber",(function(){return kv})),t(Ky,"toDate",(function(){return kb})),t(Ky,"toBoolean",(function(){return wb})),t(Ky,"stringValue",(function(){return xb})),t(Ky,"splitAccessPath",(function(){return av})),t(Ky,"span",(function(){return bb})),t(Ky,"repeat",(function(){return yb})),t(Ky,"quarter",(function(){return Bv})),t(Ky,"peek",(function(){return _v})),t(Ky,"panSymlog",(function(){return Tv})),t(Ky,"panPow",(function(){return $v})),t(Ky,"panLog",(function(){return Nv})),t(Ky,"panLinear",(function(){return Fv})),t(Ky,"pad",(function(){return vb})),t(Ky,"one",(function(){return fv})),t(Ky,"mergeConfig",(function(){return bv})),t(Ky,"merge",(function(){return gb})),t(Ky,"lruCache",(function(){return mb})),t(Ky,"logger",(function(){return mv})),t(Ky,"lerp",(function(){return pb})),t(Ky,"key",(function(){return hb})),t(Ky,"isString",(function(){return db})),t(Ky,"isRegExp",(function(){return fb})),t(Ky,"isObject",(function(){return yv})),t(Ky,"isNumber",(function(){return cb})),t(Ky,"isIterable",(function(){return lb})),t(Ky,"isFunction",(function(){return qv})),t(Ky,"isDate",(function(){return ub})),t(Ky,"isBoolean",(function(){return sb})),t(Ky,"isArray",(function(){return gv})),t(Ky,"inrange",(function(){return ab})),t(Ky,"inherits",(function(){return ob})),t(Ky,"identity",(function(){return lv})),t(Ky,"id",(function(){return uv})),t(Ky,"hasOwnProperty",(function(){return tb})),t(Ky,"flush",(function(){return ib})),t(Ky,"field",(function(){return sv})),t(Ky,"fastmap",(function(){return rb})),t(Ky,"falsy",(function(){return hv})),t(Ky,"extentIndex",(function(){return Zv})),t(Ky,"extent",(function(){return Kv})),t(Ky,"extend",(function(){return Jv})),t(Ky,"error",(function(){return ov})),t(Ky,"debounce",(function(){return Qv})),t(Ky,"constant",(function(){return Xv})),t(Ky,"compare",(function(){return Wv})),t(Ky,"clampRange",(function(){return Uv})),t(Ky,"ascending",(function(){return Hv})),t(Ky,"array",(function(){return jv})),t(Ky,"accessorName",(function(){return ev})),t(Ky,"accessorFields",(function(){return tv})),t(Ky,"accessor",(function(){return Zy})),t(Ky,"Warn",(function(){return 2})),t(Ky,"None",(function(){return 0})),t(Ky,"Info",(function(){return 3})),t(Ky,"Error",(function(){return 1})),t(Ky,"Debug",(function(){return 4})),n(Jy,Ky);var Db={};const Mb=/^([A-Za-z]+:)?\/\//,Fb=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Nb=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,$b="file://";async function Tb(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Ob(e,t){t=Jv({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=Fb.test(e.replace(Nb,""));null!=e&&"string"==typeof e&&s||ov("Sanitize failure, invalid URI: "+xb(e));const u=Mb.test(e);return(a=t.baseURL)&&!u&&(e.startsWith("/")||"/"===a[a.length-1]||(e="/"+e),e=a+e),o=(i=e.startsWith($b))||"file"===t.mode||"http"!==t.mode&&!u&&n,i?e=e.slice($b.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function zb(e){return e?t=>new Promise(((n,r)=>{e.readFile(t,((e,t)=>{e?r(e):n(t)}))})):Rb}async function Rb(){ov("No file system access.")}function Pb(e){return e?async function(t,n){const r=Jv({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?qv(o[i])?o[i]():o.text():ov(o.status+""+o.statusText)}:Lb}async function Lb(){ov("No HTTP fetch method available.")}const Bb=e=>!(Number.isNaN(+e)||e instanceof Date),Ib={boolean:wb,integer:kv,number:kv,date:kb,string:Eb,unknown:lv},jb=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>Bb(e)&&Number.isInteger(+e),Bb,e=>!Number.isNaN(Date.parse(e))],Ub=["boolean","integer","number","date"];function qb(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=jb.length,i=jb.map(((e,t)=>t+1));for(let a,s,u=0,l=0;u<n;++u)for(s=t?e[u][t]:e[u],a=0;a<r;++a)if(i[a]&&(null!=(o=s)&&o==o)&&!jb[a](s)&&(i[a]=0,++l,l===jb.length))return"string";var o;return Ub[i.reduce(((e,t)=>0===e?t:e),0)-1]}function Wb(e,t){return t.reduce(((t,n)=>(t[n]=qb(e,n),t)),{})}var Hb={},Vb={};function Gb(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Yb(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function Xb(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Qb(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Xb(-t,6):t>9999?"+"+Xb(t,6):Xb(t,4))+"-"+Xb(e.getUTCMonth()+1,2)+"-"+Xb(e.getUTCDate(),2)+(o?"T"+Xb(n,2)+":"+Xb(r,2)+":"+Xb(i,2)+"."+Xb(o,3)+"Z":i?"T"+Xb(n,2)+":"+Xb(r,2)+":"+Xb(i,2)+"Z":r||n?"T"+Xb(n,2)+":"+Xb(r,2)+"Z":"")}var Jb=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return Vb;if(l)return l=!1,Hb;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?u=!0:10===(r=e.charCodeAt(a++))?l=!0:13===r&&(l=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))l=!0;else if(13===r)l=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=c())!==Vb;){for(var f=[];r!==Hb&&r!==Vb;)f.push(r),r=c();t&&null==(f=t(f,s++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?Qb(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=Gb(e);return function(r,i){return t(n(r),i,e)}}(e,t):Gb(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=Yb(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Yb(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}},Kb=Jb(","),Zb=Kb.parse,ex=(Kb.parseRows,Kb.format,Kb.formatBody,Kb.formatRows,Kb.formatRow,Kb.formatValue,Jb("\t")),tx=ex.parse;ex.parseRows,ex.format,ex.formatBody,ex.formatRows,ex.formatRow,ex.formatValue;function nx(e){const t=function(t,n){const r={delimiter:e};return rx(t,n?Jv(n,r):r)};return t.responseType="text",t}function rx(e,t){return t.header&&(e=t.header.map(xb).join(t.delimiter)+"\n"+e),Jb(t.delimiter).parse(e+"")}rx.responseType="text";for(var ix=function(e){var t,n,r=dx(e),i=r[0],o=r[1],a=new ux(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=sx[e.charCodeAt(n)]<<18|sx[e.charCodeAt(n+1)]<<12|sx[e.charCodeAt(n+2)]<<6|sx[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=sx[e.charCodeAt(n)]<<2|sx[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=sx[e.charCodeAt(n)]<<10|sx[e.charCodeAt(n+1)]<<4|sx[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},ox=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(hx(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(ax[t>>2]+ax[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(ax[t>>10]+ax[t>>4&63]+ax[t<<2&63]+"="));return i.join("")},ax=[],sx=[],ux="undefined"!=typeof Uint8Array?Uint8Array:Array,lx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cx=0,fx=lx.length;cx<fx;++cx)ax[cx]=lx[cx],sx[lx.charCodeAt(cx)]=cx;function dx(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function hx(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(ax[(i=r)>>18&63]+ax[i>>12&63]+ax[i>>6&63]+ax[63&i]);return o.join("")}sx["-".charCodeAt(0)]=62,sx["_".charCodeAt(0)]=63;var px=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},mx=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*m},gx="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,yx=xx,vx=2147483647;function bx(e){if(e>vx)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,xx.prototype),t}function xx(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return kx(e)}return wx(e,t,n)}function wx(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!xx.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|Cx(e,t),r=bx(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Zx(e,Uint8Array)){var t=new Uint8Array(e);return Sx(t.buffer,t.byteOffset,t.byteLength)}return Ex(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Zx(e,ArrayBuffer)||e&&Zx(e.buffer,ArrayBuffer))return Sx(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Zx(e,SharedArrayBuffer)||e&&Zx(e.buffer,SharedArrayBuffer)))return Sx(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return xx.from(r,t,n);var i=function(e){if(xx.isBuffer(e)){var t=0|Ax(e.length),n=bx(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||ew(e.length)?bx(0):Ex(e);if("Buffer"===e.type&&Array.isArray(e.data))return Ex(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return xx.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function _x(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function kx(e){return _x(e),bx(e<0?0:0|Ax(e))}function Ex(e){for(var t=e.length<0?0:0|Ax(e.length),n=bx(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function Sx(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,xx.prototype),r}function Ax(e){if(e>=vx)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+vx.toString(16)+" bytes");return 0|e}function Cx(e,t){if(xx.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Zx(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Qx(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Jx(e).length;default:if(i)return r?-1:Qx(e).length;t=(""+t).toLowerCase(),i=!0}}function Dx(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Ux(this,t,n);case"utf8":case"utf-8":return Lx(this,t,n);case"ascii":return Ix(this,t,n);case"latin1":case"binary":return jx(this,t,n);case"base64":return Px(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qx(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Mx(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Fx(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),ew(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=xx.from(t,r)),xx.isBuffer(t))return 0===t.length?-1:Nx(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Nx(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Nx(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(l(e,o+d)!==l(t,d)){f=!1;break}if(f)return o}return-1}function $x(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(ew(s))return a;e[n+a]=s}return a}function Tx(e,t,n,r){return Kx(Qx(t,e.length-n),e,n,r)}function Ox(e,t,n,r){return Kx(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function zx(e,t,n,r){return Kx(Jx(t),e,n,r)}function Rx(e,t,n,r){return Kx(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function Px(e,t,n){return 0===t&&n===e.length?ox(e):ox(e.slice(t,n))}function Lx(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=Bx)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Bx));return n}(r)}xx.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),xx.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(xx.prototype,"parent",{enumerable:!0,get:function(){if(xx.isBuffer(this))return this.buffer}}),Object.defineProperty(xx.prototype,"offset",{enumerable:!0,get:function(){if(xx.isBuffer(this))return this.byteOffset}}),xx.poolSize=8192,xx.from=function(e,t,n){return wx(e,t,n)},Object.setPrototypeOf(xx.prototype,Uint8Array.prototype),Object.setPrototypeOf(xx,Uint8Array),xx.alloc=function(e,t,n){return function(e,t,n){return _x(e),e<=0?bx(e):void 0!==t?"string"==typeof n?bx(e).fill(t,n):bx(e).fill(t):bx(e)}(e,t,n)},xx.allocUnsafe=function(e){return kx(e)},xx.allocUnsafeSlow=function(e){return kx(e)},xx.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==xx.prototype},xx.compare=function(e,t){if(Zx(e,Uint8Array)&&(e=xx.from(e,e.offset,e.byteLength)),Zx(t,Uint8Array)&&(t=xx.from(t,t.offset,t.byteLength)),!xx.isBuffer(e)||!xx.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},xx.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},xx.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return xx.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=xx.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(Zx(o,Uint8Array))i+o.length>r.length?xx.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!xx.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},xx.byteLength=Cx,xx.prototype._isBuffer=!0,xx.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Mx(this,t,t+1);return this},xx.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Mx(this,t,t+3),Mx(this,t+1,t+2);return this},xx.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Mx(this,t,t+7),Mx(this,t+1,t+6),Mx(this,t+2,t+5),Mx(this,t+3,t+4);return this},xx.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?Lx(this,0,e):Dx.apply(this,arguments)},xx.prototype.toLocaleString=xx.prototype.toString,xx.prototype.equals=function(e){if(!xx.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===xx.compare(this,e)},xx.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},gx&&(xx.prototype[gx]=xx.prototype.inspect),xx.prototype.compare=function(e,t,n,r,i){if(Zx(e,Uint8Array)&&(e=xx.from(e,e.offset,e.byteLength)),!xx.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},xx.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},xx.prototype.indexOf=function(e,t,n){return Fx(this,e,t,n,!0)},xx.prototype.lastIndexOf=function(e,t,n){return Fx(this,e,t,n,!1)},xx.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return $x(this,e,t,n);case"utf8":case"utf-8":return Tx(this,e,t,n);case"ascii":case"latin1":case"binary":return Ox(this,e,t,n);case"base64":return zx(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Rx(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},xx.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Bx=4096;function Ix(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function jx(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Ux(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=tw[e[o]];return i}function qx(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function Wx(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Hx(e,t,n,r,i,o){if(!xx.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Vx(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Gx(e,t,n,r,i){return t=+t,n>>>=0,i||Vx(e,0,n,4),mx(e,t,n,r,23,4),n+4}function Yx(e,t,n,r,i){return t=+t,n>>>=0,i||Vx(e,0,n,8),mx(e,t,n,r,52,8),n+8}xx.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,xx.prototype),r},xx.prototype.readUintLE=xx.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||Wx(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},xx.prototype.readUintBE=xx.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||Wx(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},xx.prototype.readUint8=xx.prototype.readUInt8=function(e,t){return e>>>=0,t||Wx(e,1,this.length),this[e]},xx.prototype.readUint16LE=xx.prototype.readUInt16LE=function(e,t){return e>>>=0,t||Wx(e,2,this.length),this[e]|this[e+1]<<8},xx.prototype.readUint16BE=xx.prototype.readUInt16BE=function(e,t){return e>>>=0,t||Wx(e,2,this.length),this[e]<<8|this[e+1]},xx.prototype.readUint32LE=xx.prototype.readUInt32LE=function(e,t){return e>>>=0,t||Wx(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},xx.prototype.readUint32BE=xx.prototype.readUInt32BE=function(e,t){return e>>>=0,t||Wx(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},xx.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||Wx(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},xx.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||Wx(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},xx.prototype.readInt8=function(e,t){return e>>>=0,t||Wx(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},xx.prototype.readInt16LE=function(e,t){e>>>=0,t||Wx(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},xx.prototype.readInt16BE=function(e,t){e>>>=0,t||Wx(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},xx.prototype.readInt32LE=function(e,t){return e>>>=0,t||Wx(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},xx.prototype.readInt32BE=function(e,t){return e>>>=0,t||Wx(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},xx.prototype.readFloatLE=function(e,t){return e>>>=0,t||Wx(e,4,this.length),px(this,e,!0,23,4)},xx.prototype.readFloatBE=function(e,t){return e>>>=0,t||Wx(e,4,this.length),px(this,e,!1,23,4)},xx.prototype.readDoubleLE=function(e,t){return e>>>=0,t||Wx(e,8,this.length),px(this,e,!0,52,8)},xx.prototype.readDoubleBE=function(e,t){return e>>>=0,t||Wx(e,8,this.length),px(this,e,!1,52,8)},xx.prototype.writeUintLE=xx.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Hx(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},xx.prototype.writeUintBE=xx.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Hx(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},xx.prototype.writeUint8=xx.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Hx(this,e,t,1,255,0),this[t]=255&e,t+1},xx.prototype.writeUint16LE=xx.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Hx(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},xx.prototype.writeUint16BE=xx.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Hx(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},xx.prototype.writeUint32LE=xx.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Hx(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},xx.prototype.writeUint32BE=xx.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Hx(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},xx.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Hx(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},xx.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Hx(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},xx.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Hx(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},xx.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Hx(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},xx.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Hx(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},xx.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Hx(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},xx.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Hx(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},xx.prototype.writeFloatLE=function(e,t,n){return Gx(this,e,t,!0,n)},xx.prototype.writeFloatBE=function(e,t,n){return Gx(this,e,t,!1,n)},xx.prototype.writeDoubleLE=function(e,t,n){return Yx(this,e,t,!0,n)},xx.prototype.writeDoubleBE=function(e,t,n){return Yx(this,e,t,!1,n)},xx.prototype.copy=function(e,t,n,r){if(!xx.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},xx.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!xx.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=xx.isBuffer(e)?e:xx.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var Xx=/[^+/0-9A-Za-z-_]/g;function Qx(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Jx(e){return ix(function(e){if((e=(e=e.split("=")[0]).trim().replace(Xx,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Kx(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Zx(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ew(e){return e!=e}var tw=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}(),nw=yx;function rw(e,t){const n=t&&t.property?sv(t.property):lv;return!yv(e)||(r=e,"function"==typeof nw&&qv(nw.isBuffer)&&nw.isBuffer(r))?n(JSON.parse(e)):function(e,t){!gv(e)&&lb(e)&&(e=[...e]);return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t);var r}rw.responseType="json";var iw=function(e){return e},ow=function(e){if(null==e)return iw;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,s){s||(t=n=0);var u=2,l=e.length,c=new Array(l);for(c[0]=(t+=e[0])*r+o,c[1]=(n+=e[1])*i+a;u<l;)c[u]=e[u],++u;return c}},aw=function(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return sw(e,t)}))}:sw(e,t)};function sw(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=uw(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function uw(e,t){var n=ow(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],o=0,a=i.length;o<a;++o)t.push(n(i[o],o));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,a)}function o(e){return n(e)}function a(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function u(e){return e.map(s)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=a(t.arcs);break;case"MultiLineString":n=t.arcs.map(a);break;case"Polygon":n=u(t.arcs);break;case"MultiPolygon":n=t.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(t)}var lw=function(e,t){var n={},r={},i={},o=[],a=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),o.push(i)}}return t.forEach((function(n,r){var i,o=e.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=n,t[r]=i)})),t.forEach((function(t){var n,o,a=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(t),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),t.forEach((function(e){n[e<0?~e:e]||o.push([e])})),o},cw=function(e){return uw(e,fw.apply(this,arguments))};function fw(e,t,n){var r,i,o;if(arguments.length>1)r=dw(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:lw(e,r)}}function dw(e,t,n){var r,i=[],o=[];function a(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:r})}function s(e){e.forEach(a)}function u(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(u)}(t.arcs)}}(t),o.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}const hw={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function pw(e,t){let n,r,i,o;return e=rw(e,t),t&&t.feature?(n=aw,i=t.feature):t&&t.mesh?(n=cw,i=t.mesh,o=hw[t.filter]):ov("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):ov("Invalid TopoJSON object: "+i),r&&r.features||[r]}pw.responseType="json";const mw={dsv:rx,csv:nx(","),tsv:nx("\t"),json:rw,topojson:pw};function gw(e,t){return arguments.length>1?(mw[e]=t,this):tb(mw,e)?mw[e]:null}function yw(e){const t=gw(e);return t&&t.responseType||"text"}var vw={};const bw="year",xw="quarter",ww="month",_w="week",kw="date",Ew="day",Sw="dayofyear",Aw="hours",Cw="minutes",Dw="seconds",Mw="milliseconds",Fw=[bw,xw,ww,_w,kw,Ew,Sw,Aw,Cw,Dw,Mw],Nw=Fw.reduce(((e,t,n)=>(e[t]=1+n,e)),{});function $w(e){const t=jv(e).slice(),n={};t.length||ov("Missing time unit."),t.forEach((e=>{tb(Nw,e)?n[e]=1:ov("Invalid time unit: ".concat(e,"."))}));return(n.week||n.day?1:0)+(n.quarter||n.month||n.date?1:0)+(n.dayofyear?1:0)>1&&ov("Incompatible time units: ".concat(e)),t.sort(((e,t)=>Nw[e]-Nw[t])),t}const Tw={[bw]:"%Y ",[xw]:"Q%q ",[ww]:"%b ",[kw]:"%d ",[_w]:"W%U ",[Ew]:"%a ",[Sw]:"%j ",[Aw]:"%H:00",[Cw]:"00:%M",[Dw]:":%S",[Mw]:".%L",["".concat(bw,"-").concat(ww)]:"%Y-%m ",["".concat(bw,"-").concat(ww,"-").concat(kw)]:"%Y-%m-%d ",["".concat(Aw,"-").concat(Cw)]:"%H:%M"};function Ow(e,t){const n=Jv({},Tw,t),r=$w(e),i=r.length;let o,a,s="",u=0;for(u=0;u<i;)for(o=r.length;o>u;--o)if(a=r.slice(u,o).join("-"),null!=n[a]){s+=n[a],u=o;break}return s.trim()}const zw=new Date;function Rw(e){return zw.setFullYear(e),zw.setMonth(0),zw.setDate(1),zw.setHours(0,0,0,0),zw}function Pw(e){return Bw(new Date(e))}function Lw(e){return Iw(new Date(e))}function Bw(e){return jm.count(Rw(e.getFullYear())-1,e)}function Iw(e){return qm.count(Rw(e.getFullYear())-1,e)}function jw(e){return Rw(e).getDay()}function Uw(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function qw(e){return Hw(new Date(e))}function Ww(e){return Vw(new Date(e))}function Hw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return eg.count(t-1,e)}function Vw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ng.count(t-1,e)}function Gw(e){return zw.setTime(Date.UTC(e,0,1)),zw.getUTCDay()}function Yw(e,t,n,r,i,o,a){if(0<=e&&e<100){const e=new Date(Date.UTC(-1,t,n,r,i,o,a));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(e,t,n,r,i,o,a))}function Xw(e,t,n,r,i){const o=t||1,a=_v(e),s=(e,t,i)=>function(e,t,n,r){const i=n<=1?e:r?(t,i)=>r+n*Math.floor((e(t,i)-r)/n):(t,r)=>n*Math.floor(e(t,r)/n);return t?(e,n)=>t(i(e,n),n):i}(n[i=i||e],r[i],e===a&&o,t),u=new Date,l=Sb(e),c=l.year?s(bw):Xv(2012),f=l.month?s(ww):l.quarter?s(xw):cv,d=l.week&&l.day?s(Ew,1,"weekday"):l.week?s(_w,1):l.day?s(Ew,1):l.date?s(kw,1):l.dayofyear?s(Sw,1):fv,h=l.hours?s(Aw):cv,p=l.minutes?s(Cw):cv,m=l.seconds?s(Dw):cv,g=l.milliseconds?s(Mw):cv;return function(e){u.setTime(+e);const t=c(u);return i(t,f(u),d(u,t),h(u),p(u),m(u),g(u))}}function Qw(e,t,n){return t+7*e-(n+6)%7}const Jw={[bw]:e=>e.getFullYear(),[xw]:e=>Math.floor(e.getMonth()/3),[ww]:e=>e.getMonth(),[kw]:e=>e.getDate(),[Aw]:e=>e.getHours(),[Cw]:e=>e.getMinutes(),[Dw]:e=>e.getSeconds(),[Mw]:e=>e.getMilliseconds(),[Sw]:e=>Bw(e),[_w]:e=>Iw(e),weekday:(e,t)=>Qw(Iw(e),e.getDay(),jw(t)),[Ew]:(e,t)=>Qw(1,e.getDay(),jw(t))},Kw={[xw]:e=>3*e,[_w]:(e,t)=>Qw(e,0,jw(t))};function Zw(e,t){return Xw(e,t||1,Jw,Kw,Uw)}const e_={[bw]:e=>e.getUTCFullYear(),[xw]:e=>Math.floor(e.getUTCMonth()/3),[ww]:e=>e.getUTCMonth(),[kw]:e=>e.getUTCDate(),[Aw]:e=>e.getUTCHours(),[Cw]:e=>e.getUTCMinutes(),[Dw]:e=>e.getUTCSeconds(),[Mw]:e=>e.getUTCMilliseconds(),[Sw]:e=>Hw(e),[_w]:e=>Vw(e),[Ew]:(e,t)=>Qw(1,e.getUTCDay(),Gw(t)),weekday:(e,t)=>Qw(Vw(e),e.getUTCDay(),Gw(t))},t_={[xw]:e=>3*e,[_w]:(e,t)=>Qw(e,0,Gw(t))};function n_(e,t){return Xw(e,t||1,e_,t_,Yw)}const r_={[bw]:Jm,[xw]:Qm.every(3),[ww]:Qm,[_w]:qm,[kw]:jm,[Ew]:jm,[Sw]:jm,[Aw]:Im,[Cw]:Bm,[Dw]:Lm,[Mw]:Fm},i_={[bw]:cg,[xw]:lg.every(3),[ww]:lg,[_w]:ng,[kw]:eg,[Ew]:eg,[Sw]:eg,[Aw]:Zm,[Cw]:Km,[Dw]:Lm,[Mw]:Fm};function o_(e){return r_[e]}function a_(e){return i_[e]}function s_(e,t,n){return e?e.offset(t,n):void 0}function u_(e,t,n){return s_(o_(e),t,n)}function l_(e,t,n){return s_(a_(e),t,n)}function c_(e,t,n,r){return e?e.range(t,n,r):void 0}function f_(e,t,n,r){return c_(o_(e),t,n,r)}function d_(e,t,n,r){return c_(a_(e),t,n,r)}const h_=1e3,p_=6e4,m_=36e5,g_=864e5,y_=2592e6,v_=31536e6,b_=[bw,ww,kw,Aw,Cw,Dw,Mw],x_=b_.slice(0,-1),w_=x_.slice(0,-1),__=w_.slice(0,-1),k_=__.slice(0,-1),E_=[bw,ww],S_=[bw],A_=[[x_,1,h_],[x_,5,5e3],[x_,15,15e3],[x_,30,3e4],[w_,1,p_],[w_,5,3e5],[w_,15,9e5],[w_,30,18e5],[__,1,m_],[__,3,108e5],[__,6,216e5],[__,12,432e5],[k_,1,g_],[[bw,_w],1,6048e5],[E_,1,y_],[E_,3,7776e6],[S_,1,v_]];function C_(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(bb(t))/n;let i,o,a=td((e=>e[2])).right(A_,r);return a===A_.length?(i=S_,o=yd(t[0]/v_,t[1]/v_,n)):a?(a=A_[r/A_[a-1][2]<A_[a][2]/r?a-1:a],i=a[0],o=a[1]):(i=b_,o=Math.max(yd(t[0],t[1],n),1)),{units:i,step:o}}function D_(e){const t={};return n=>t[n]||(t[n]=e(n))}function M_(e){const t=D_(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){const n=Hp(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return r=t(n),i=t(".1f")(1)[1],e=>{const t=r(e),n=t.indexOf(i);if(n<0)return t;let o=function(e,t){let n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}(t,n);const a=o<t.length?t.slice(o):"";for(;--o>n;)if("0"!==t[o]){++o;break}return t.slice(0,o)+a}}return t(n);var r,i},formatSpan:function(e,r,i,o){o=Hp(null==o?",f":o);const a=yd(e,r,i),s=Math.max(Math.abs(e),Math.abs(r));let u;if(null==o.precision)switch(o.type){case"s":return isNaN(u=im(a,s))||(o.precision=u),n(o,s);case"":case"e":case"g":case"p":case"r":isNaN(u=om(a,s))||(o.precision=u-("e"===o.type));break;case"f":case"%":isNaN(u=rm(a))||(o.precision=u-2*("%"===o.type))}return t(o)}}}let F_,N_;function $_(){return F_=M_({format:Xp,formatPrefix:Qp})}function T_(e){return M_(nm(e))}function O_(e){return arguments.length?F_=T_(e):F_}function z_(e,t,n){yv(n=n||{})||ov("Invalid time multi-format specifier: ".concat(n));const r=t(Dw),i=t(Cw),o=t(Aw),a=t(kw),s=t(_w),u=t(ww),l=t(xw),c=t(bw),f=e(n.milliseconds||".%L"),d=e(n.seconds||":%S"),h=e(n.minutes||"%I:%M"),p=e(n.hours||"%I %p"),m=e(n.date||n.day||"%a %d"),g=e(n.week||"%b %d"),y=e(n.month||"%B"),v=e(n.quarter||"%B"),b=e(n.year||"%Y");return e=>(r(e)<e?f:i(e)<e?d:o(e)<e?h:a(e)<e?p:u(e)<e?s(e)<e?m:g:c(e)<e?l(e)<e?y:v:b)(e)}function R_(e){const t=D_(e.format),n=D_(e.utcFormat);return{timeFormat:e=>db(e)?t(e):z_(t,o_,e),utcFormat:e=>db(e)?n(e):z_(n,a_,e),timeParse:D_(e.parse),utcParse:D_(e.utcParse)}}function P_(){return N_=R_({format:wg,parse:_g,utcFormat:kg,utcParse:Eg})}function L_(e){return R_(bg(e))}function B_(e){return arguments.length?N_=L_(e):N_}t(vw,"week",(function(){return Lw})),t(vw,"utcweek",(function(){return Ww})),t(vw,"utcdayofyear",(function(){return qw})),t(vw,"utcSequence",(function(){return d_})),t(vw,"utcOffset",(function(){return l_})),t(vw,"utcInterval",(function(){return a_})),t(vw,"utcFloor",(function(){return n_})),t(vw,"timeUnits",(function(){return $w})),t(vw,"timeUnitSpecifier",(function(){return Ow})),t(vw,"timeSequence",(function(){return f_})),t(vw,"timeOffset",(function(){return u_})),t(vw,"timeInterval",(function(){return o_})),t(vw,"timeFloor",(function(){return Zw})),t(vw,"timeBin",(function(){return C_})),t(vw,"dayofyear",(function(){return Pw})),t(vw,"YEAR",(function(){return bw})),t(vw,"WEEK",(function(){return _w})),t(vw,"TIME_UNITS",(function(){return Fw})),t(vw,"SECONDS",(function(){return Dw})),t(vw,"QUARTER",(function(){return xw})),t(vw,"MONTH",(function(){return ww})),t(vw,"MINUTES",(function(){return Cw})),t(vw,"MILLISECONDS",(function(){return Mw})),t(vw,"HOURS",(function(){return Aw})),t(vw,"DAYOFYEAR",(function(){return Sw})),t(vw,"DAY",(function(){return Ew})),t(vw,"DATE",(function(){return kw})),$_(),P_();const I_=(e,t)=>Jv({},e,t);function j_(e,t){const n=e?T_(e):O_(),r=t?L_(t):B_();return I_(n,r)}function U_(e,t){const n=arguments.length;return n&&2!==n&&ov("defaultLocale expects either zero or two arguments."),n?I_(O_(e),B_(t)):I_(O_(),B_())}function q_(){return $_(),P_(),U_()}var W_=function(e,t,n,r){const i=gw((t=t||{}).type||"json");return i||ov("Unknown data format type: "+t.type),e=i(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;const i=B_();n=n||i.timeParse,r=r||i.utcParse;let o,a,s,u,l,c,f=e.columns||Object.keys(e[0]);"auto"===t&&(t=Wb(e,f));f=Object.keys(t);const d=f.map((e=>{const i=t[e];let o,a;if(i&&(i.startsWith("date:")||i.startsWith("utc:"))){o=i.split(/:(.+)?/,2),a=o[1],("'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1));return("utc"===o[0]?r:n)(a)}if(!Ib[i])throw Error("Illegal format pattern: "+e+":"+i);return Ib[i]}));for(s=0,l=e.length,c=f.length;s<l;++s)for(o=e[s],u=0;u<c;++u)a=f[u],o[a]=d[u](o[a])}(e,t.parse,n,r),tb(e,"columns")&&delete e.columns,e};const H_=function(e,t){return n=>({options:n||{},sanitize:Ob,load:Tb,fileAccess:!!t,file:zb(t),http:Pb(e)})}("undefined"!=typeof fetch&&fetch,null);function V_(e){const t=e||lv,n=[],r={};return n.add=e=>{const i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=e=>{const i=t(e);if(r[i]){r[i]=0;const t=n.indexOf(e);t>=0&&n.splice(t,1)}return n},n}async function G_(e,t){try{await t(e)}catch(t){e.error(t)}}t(Db,"loader",(function(){return H_})),t(Db,"read",(function(){return W_})),t(Db,"typeParsers",(function(){return Ib})),t(Db,"inferTypes",(function(){return Wb})),t(Db,"inferType",(function(){return qb})),t(Db,"responseType",(function(){return yw})),t(Db,"formats",(function(){return gw})),t(Db,"format",(function(){return mw}));const Y_=Symbol("vega_id");let X_=1;function Q_(e){return!(!e||!J_(e))}function J_(e){return e[Y_]}function K_(e,t){return e[Y_]=t,e}function Z_(e){const t=e===Object(e)?e:{data:e};return J_(t)?t:K_(t,X_++)}function ek(e){return tk(e,Z_({}))}function tk(e,t){for(const n in e)t[n]=e[n];return t}function nk(e,t){return K_(t,J_(e))}function rk(e,t){return e?t?(n,r)=>e(n,r)||J_(t(n))-J_(t(r)):(t,n)=>e(t,n)||J_(t)-J_(n):null}function ik(e){return e&&e.constructor===ok}function ok(){const e=[],t=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:ok,insert:function(t){const n=jv(t),r=n.length;for(let t=0;t<r;++t)e.push(n[t]);return this},remove:function(e){const n=qv(e)?r:t,i=jv(e),o=i.length;for(let e=0;e<o;++e)n.push(i[e]);return this},modify:function(e,t,r){const o={field:t,value:Xv(r)};return qv(e)?(o.filter=e,i.push(o)):(o.tuple=e,n.push(o)),this},encode:function(e,t){return qv(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},clean:function(e){return o=e,this},reflow:function(){return a=!0,this},pulse:function(s,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[J_(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[J_(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach((e=>{p(e)&&(l[J_(e)]=-1)}));for(f=0,d=e.length;f<d;++f)m=e[f],g=J_(m),l[g]?l[g]=1:s.add.push(Z_(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[J_(m)]<0&&s.rem.push(m);function y(e,t,n){n?e[t]=n(e):s.encode=t,a||(c[J_(e)]=e)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[J_(m)],g>0&&(y(m,p,h.value),s.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach((e=>{p(e)&&l[J_(e)]>0&&y(e,h.field,h.value)})),s.modifies(h.field);if(a)s.mod=t.length||r.length?u.filter((e=>l[J_(e)]>0)):u.slice();else for(g in c)s.mod.push(c[g]);return(o||null==o&&(t.length||r.length))&&s.clean(!0),s}}}const ak="_:mod:_";function sk(){Object.defineProperty(this,ak,{writable:!0,value:{}})}sk.prototype={set:function(e,t,n,r){const i=this,o=i[e],a=i["_:mod:_"];return null!=t&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=gv(n)?1+n.length:-1),i},modified:function(e,t){const n=this["_:mod:_"];if(!arguments.length){for(const e in n)if(n[e])return!0;return!1}if(gv(e)){for(let t=0;t<e.length;++t)if(n[e[t]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear:function(){return this["_:mod:_"]={},this}};let uk=0;const lk=new sk;function ck(e,t,n,r){this.id=++uk,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function fk(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}ck.prototype={targets:function(){return this._targets||(this._targets=V_(uv))},set:function(e){return this.value!==e?(this.value=e,1):0},skip:fk(1),modified:fk(2),parameters:function(e,t,n){t=!1!==t;const r=this._argval=this._argval||new sk,i=this._argops=this._argops||[],o=[];let a,s,u,l;const c=(e,n,a)=>{a instanceof ck?(a!==this&&(t&&a.targets().add(this),o.push(a)),i.push({op:a,name:e,index:n})):r.set(e,n,a)};for(a in e)if(s=e[a],"pulse"===a)jv(s).forEach((e=>{e instanceof ck?e!==this&&(e.targets().add(this),o.push(e)):ov("Pulse parameters must be operator instances.")})),this.source=s;else if(gv(s))for(r.set(a,-1,Array(u=s.length)),l=0;l<u;++l)c(a,l,s[l]);else c(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall:function(e){const t=this._argval||lk,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach:function(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate:function(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run:function(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let dk=0;function hk(e,t,n){this.id=++dk,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function pk(e,t,n){return new hk(e,t,n)}hk.prototype={_filter:dv,_apply:lv,targets:function(){return this._targets||(this._targets=V_(uv))},consume:function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive:function(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let e=0;e<r;++e)n[e].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter:function(e){const t=pk(e);return this.targets().add(t),t},apply:function(e){const t=pk(null,e);return this.targets().add(t),t},merge:function(){const e=pk();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle:function(e){let t=-1;return this.filter((()=>{const n=Date.now();return n-t>e?(t=n,1):0}))},debounce:function(e){const t=pk();return this.targets().add(pk(null,null,Qv(e,(e=>{const n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},between:function(e,t){let n=!1;return e.targets().add(pk(null,null,(()=>n=!0))),t.targets().add(pk(null,null,(()=>n=!1))),this.filter((()=>n))},detach:function(){this._filter=dv,this._targets=null}};const mk={skip:!0};function gk(e,t,n,r,i,o){const a=Jv({},o,mk);let s,u;qv(n)||(n=Xv(n)),void 0===r?s=t=>e.touch(n(t)):qv(r)?(u=new ck(null,r,i,!1),s=t=>{u.evaluate(t);const r=n(t),i=u.value;ik(i)?e.pulse(r,i,o):e.update(r,i,a)}):s=t=>e.update(n(t),r,a),t.apply(s)}function yk(e,t,n,r,i,o){if(void 0===r)t.targets().add(n);else{const a=o||{},s=new ck(null,function(e,t){return t=qv(t)?t:Xv(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}const vk={};function bk(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function xk(e,t){const n=[];return Cb(e,t,(e=>n.push(e))),n}function wk(e,t){const n={};return e.visit(t,(e=>{n[J_(e)]=1})),e=>n[J_(e)]?null:e}function _k(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}function kk(e,t,n,r){const i=this,o=n.length;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let e=0;e<o;++e){const r=n[e];if(r.stamp===t){if(r.fields){const e=i.fields||(i.fields={});for(const t in r.fields)e[t]=1}r.changed(i.ADD)&&(a|=i.ADD),r.changed(i.REM)&&(a|=i.REM),r.changed(i.MOD)&&(a|=i.MOD)}}this.changes=a}function Ek(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}bk.prototype={StopPropagation:vk,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function(e){return new bk(this.dataflow).init(this,e)},clone:function(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll:function(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new bk(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init:function(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter:function(e){this.dataflow.runAfter(e)},changed:function(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow:function(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,wk(this,1))),this},clean:function(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies:function(e){const t=this.fields||(this.fields={});return gv(e)?e.forEach((e=>t[e]=!0)):t[e]=!0,this},modified:function(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?gv(e)?e.some((e=>n[e])):n[e]:!!n)},filter:function(e,t){const n=this;return 1&e&&(n.addF=_k(n.addF,t)),2&e&&(n.remF=_k(n.remF,t)),4&e&&(n.modF=_k(n.modF,t)),16&e&&(n.srcF=_k(n.srcF,t)),n},materialize:function(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=xk(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=xk(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=xk(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit:function(e,t){const n=this,r=t;if(16&e)return Cb(n.source,n.srcF,r),n;1&e&&Cb(n.add,n.addF,r),2&e&&Cb(n.rem,n.remF,r),4&e&&Cb(n.mod,n.modF,r);const i=n.source;if(8&e&&i){const e=n.add.length+n.mod.length;e===i.length||Cb(i,e?wk(n,5):n.srcF,r)}return n}},ob(kk,bk,{fork:function(e){const t=new bk(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(e=>t.add.push(e))),e&t.REM&&this.visit(t.REM,(e=>t.rem.push(e))),e&t.MOD&&this.visit(t.MOD,(e=>t.mod.push(e)))),t},changed:function(e){return this.changes&e},modified:function(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?gv(e)?e.some((e=>n[e])):n[e]:0},filter:function(){ov("MultiPulse does not support filtering.")},materialize:function(){ov("MultiPulse does not support materialization.")},visit:function(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});const Sk={skip:!1,force:!1};function Ak(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Ck(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,function(e,t,n){const r=t,i=e.length,o=e[t];let a,s=1+(t<<1);for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);e[t]=o,Ck(e,r,t,n)}(t,0,e)):r=n,r}}}function Ck(e,t,n,r){let i,o;const a=e[n];for(;n>t&&(o=n-1>>1,i=e[o],r(a,i)<0);)e[n]=i,n=o;return e[n]=a}function Dk(){this.logger(mv()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=U_();try{this._loader=H_()}catch(e){}this._touched=V_(uv),this._input={},this._pulse=null,this._heap=Ak(((e,t)=>e.qrank-t.qrank)),this._postrun=[]}function Mk(e){return function(){return this._log[e].apply(this,arguments)}}function Fk(e,t){ck.call(this,e,null,t)}Dk.prototype={stamp:function(){return this._clock},loader:function(e){return arguments.length?(this._loader=e,this):this._loader},locale:function(e){return arguments.length?(this._locale=e,this):this._locale},logger:function(e){return arguments.length?(this._log=e,this):this._log},error:Mk("error"),warn:Mk("warn"),info:Mk("info"),debug:Mk("debug"),logLevel:Mk("level"),cleanThreshold:1e4,add:function(e,t,n,r){let i,o=1;return e instanceof ck?i=e:e&&e.prototype instanceof ck?i=new e:qv(e)?i=new ck(null,e):(o=0,i=new ck(e,t)),this.rank(i),o&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},connect:function(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank)return void this.rerank(e)},rank:function(e){e.rank=++this._rank},rerank:function(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&ov("Cycle detected in dataflow graph.")},pulse:function(e,t,n){this.touch(e,n||Sk);const r=new bk(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},touch:function(e,t){const n=t||Sk;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function(e,t,n){const r=n||Sk;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:ok,ingest:function(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function(e,t){const n=this.locale();return W_(e,t,n.timeParse,n.utcParse)},preload:async function(e,t,n){const r=this,i=r._pending||function(e){let t;const n=new Promise((e=>t=e));return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(dv).insert(o.data||[])),i.done(),o},request:async function(e,t){const n=this;let r,i=0;try{r=await n.loader().load(e,{context:"dataflow",response:yw(t&&t.type)});try{r=n.parse(r,t)}catch(t){i=-2,n.warn("Data ingestion failed",e,t)}}catch(t){i=-1,n.warn("Loading failed",e,t)}return{data:r,status:i}},events:function(e,t,n,r){const i=this,o=pk(n,r),a=function(e){e.dataflow=i;try{o.receive(e)}catch(e){i.error(e)}finally{i.run()}};let s;s="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):jv(e);const u=s.length;for(let e=0;e<u;++e)s[e].addEventListener(t,a);return o},on:function(e,t,n,r,i){return(e instanceof ck?yk:gk)(this,e,t,n,r,i),this},evaluate:async function(e,t,n){const r=this,i=[];if(r._pulse)return Ek(r);if(r._pending&&await r._pending,t&&await G_(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new bk(r,o,e),r._touched.forEach((e=>r._enqueue(e,!0))),r._touched=V_(uv);let a,s,u,l=0;try{for(;r._heap.size()>0;)a=r._heap.pop(),a.rank===a.qrank?(s=a.run(r._getPulse(a,e)),s.then?s=await s:s.async&&(i.push(s.async),s=vk),s!==vk&&a._targets&&a._targets.forEach((e=>r._enqueue(e))),++l):r._enqueue(a,!0)}catch(e){r._heap.clear(),u=e}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${l} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const e=r._postrun.sort(((e,t)=>t.priority-e.priority));r._postrun=[];for(let t=0;t<e.length;++t)await G_(r,e[t].callback)}return n&&await G_(r,n),i.length&&Promise.all(i).then((e=>r.runAsync(null,(()=>{e.forEach((e=>{try{e(r)}catch(e){r.error(e)}}))})))),r},run:function(e,t,n){return this._pulse?Ek(this):(this.evaluate(e,t,n),this)},runAsync:async function(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running},runAfter:function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(e){this.error(e)}},_enqueue:function(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function(e,t){const n=e.source,r=this._clock;return n&&gv(n)?new kk(this,r,n.map((e=>e.pulse)),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==vk&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)}},ob(Fk,ck,{run:function(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then((e=>this.pulse=e)):t!==e.StopPropagation&&(this.pulse=t),t},evaluate:function(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform:function(){}});const Nk={};function $k(e){const t=Tk(e);return t&&t.Definition||null}function Tk(e){return e=e&&e.toLowerCase(),tb(Nk,e)?Nk[e]:null}var Ok={},zk={};function*Rk(e,t){if(null==t)for(let t of e)null!=t&&""!==t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)r=t(r,++n,e),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function Pk(e,t,n){const r=Float64Array.from(Rk(e,n));return r.sort(ed),t.map((e=>Sd(r,e)))}function Lk(e,t){return Pk(e,[.25,.5,.75],t)}function Bk(e,t){const n=e.length,r=function(e,t){const n=function(e,t){let n,r=0,i=0,o=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(n=t-i,i+=n/++r,o+=n*(t-i));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}(e,t);return n?Math.sqrt(n):n}(e,t),i=Lk(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Ik(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o,a,s,u,l,c,f=e.extent[0],d=e.extent[1];const h=e.span||d-f||Math.abs(f)||1;if(e.step)o=e.step;else if(e.steps){for(u=h/t,l=0,c=e.steps.length;l<c&&e.steps[l]<u;++l);o=e.steps[Math.max(0,l-1)]}else{for(a=Math.ceil(Math.log(t)/r),s=e.minstep||0,o=Math.max(s,Math.pow(n,Math.round(Math.log(h)/r)-a));Math.ceil(h/o)>t;)o*=n;for(l=0,c=i.length;l<c;++l)u=o/i[l],u>=s&&h/u<=t&&(o=u)}u=Math.log(o);const p=u>=0?0:1+~~(-u/r),m=Math.pow(n,-p-1);return(e.nice||void 0===e.nice)&&(u=Math.floor(f/o+m)*o,f=f<u?u-o:u,d=Math.ceil(d/o)*o),{start:f,stop:d===f?f+o:d,step:o}}var jk=Math.random;function Uk(e){jk=e}function qk(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(Rk(e,r)),o=i.length,a=t;let s,u,l,c;for(l=0,c=Array(a);l<a;++l){for(s=0,u=0;u<o;++u)s+=i[~~(jk()*o)];c[l]=s/o}return c.sort(ed),[Ed(c,n/2),Ed(c,1-n/2)]}function Wk(e,t,n,r){r=r||(e=>e);const i=e.length,o=new Float64Array(i);let a,s=0,u=1,l=r(e[0]),c=l,f=l+t;for(;u<i;++u){if(a=r(e[u]),a>=f){for(c=(l+c)/2;s<u;++s)o[s]=c;f=a+t,l=a}c=a}for(c=(l+c)/2;s<u;++s)o[s]=c;return n?function(e,t){const n=e.length;let r,i,o=0,a=1;for(;e[o]===e[a];)++a;for(;a<n;){for(r=a+1;e[a]===e[r];)++r;if(e[a]-e[a-1]<t){for(i=a+(o+r-a-a>>1);i<a;)e[i++]=e[a];for(;i>a;)e[i--]=e[o]}o=a,a=r}return e}(o,t+t/4):o}function Hk(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function Vk(e,t){let n,r,i;null==t&&(t=e,e=0);const o={min:function(e){return arguments.length?(n=e||0,i=r-n,o):n},max:function(e){return arguments.length?(r=e||0,i=r-n,o):r},sample:function(){return n+Math.floor(i*jk())},pdf:function(e){return e===Math.floor(e)&&e>=n&&e<r?1/i:0},cdf:function(e){const t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/i},icdf:function(e){return e>=0&&e<=1?n-1+Math.floor(e*i):NaN}};return o.min(e).max(t)}const Gk=Math.sqrt(2*Math.PI),Yk=Math.SQRT2;let Xk=NaN;function Qk(e,t){e=e||0,t=null==t?1:t;let n,r,i=0,o=0;if(Xk==Xk)i=Xk,Xk=NaN;else{do{i=2*jk()-1,o=2*jk()-1,n=i*i+o*o}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,Xk=o*r}return e+i*t}function Jk(e,t,n){const r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*Gk)}function Kk(e,t,n){const r=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(r);let o;if(i>37)o=0;else{const e=Math.exp(-i*i/2);let t;i<7.07106781186547?(t=.0352624965998911*i+.700383064443688,t=t*i+6.37396220353165,t=t*i+33.912866078383,t=t*i+112.079291497871,t=t*i+221.213596169931,t=t*i+220.206867912376,o=e*t,t=.0883883476483184*i+1.75566716318264,t=t*i+16.064177579207,t=t*i+86.7807322029461,t=t*i+296.564248779674,t=t*i+637.333633378831,t=t*i+793.826512519948,t=t*i+440.413735824752,o/=t):(t=i+.65,t=i+4/t,t=i+3/t,t=i+2/t,t=i+1/t,o=e/t/2.506628274631)}return r>0?1-o:o}function Zk(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*Yk*function(e){let t,n=-Math.log((1-e)*(1+e));n<6.25?(n-=3.125,t=-364441206401782e-35,t=t*n-16850591381820166e-35,t=128584807152564e-32+t*n,t=11157877678025181e-33+t*n,t=t*n-1333171662854621e-31,t=20972767875968562e-33+t*n,t=6637638134358324e-30+t*n,t=t*n-4054566272975207e-29,t=t*n-8151934197605472e-29,t=26335093153082323e-28+t*n,t=t*n-12975133253453532e-27,t=t*n-5415412054294628e-26,t=1.0512122733215323e-9+t*n,t=t*n-4.112633980346984e-9,t=t*n-2.9070369957882005e-8,t=4.2347877827932404e-7+t*n,t=t*n-13654692000834679e-22,t=t*n-13882523362786469e-21,t=.00018673420803405714+t*n,t=t*n-.000740702534166267,t=t*n-.006033670871430149,t=.24015818242558962+t*n,t=1.6536545626831027+t*n):n<16?(n=Math.sqrt(n)-3.25,t=2.2137376921775787e-9,t=9.075656193888539e-8+t*n,t=t*n-2.7517406297064545e-7,t=1.8239629214389228e-8+t*n,t=15027403968909828e-22+t*n,t=t*n-4013867526981546e-21,t=29234449089955446e-22+t*n,t=12475304481671779e-21+t*n,t=t*n-47318229009055734e-21,t=6828485145957318e-20+t*n,t=24031110387097894e-21+t*n,t=t*n-.0003550375203628475,t=.0009532893797373805+t*n,t=t*n-.0016882755560235047,t=.002491442096107851+t*n,t=t*n-.003751208507569241,t=.005370914553590064+t*n,t=1.0052589676941592+t*n,t=3.0838856104922208+t*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=-27109920616438573e-27,t=t*n-2.555641816996525e-10,t=1.5076572693500548e-9+t*n,t=t*n-3.789465440126737e-9,t=7.61570120807834e-9+t*n,t=t*n-1.496002662714924e-8,t=2.914795345090108e-8+t*n,t=t*n-6.771199775845234e-8,t=2.2900482228026655e-7+t*n,t=t*n-9.9298272942317e-7,t=4526062597223154e-21+t*n,t=t*n-1968177810553167e-20,t=7599527703001776e-20+t*n,t=t*n-.00021503011930044477,t=t*n-.00013871931833623122,t=1.0103004648645344+t*n,t=4.849906401408584+t*n):t=1/0;return t*e}(2*e-1)}function eE(e,t){let n,r;const i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>Qk(n,r),pdf:e=>Jk(e,n,r),cdf:e=>Kk(e,n,r),icdf:e=>Zk(e,n,r)};return i.mean(e).stdev(t)}function tE(e,t){const n=eE();let r=0;const i={data:function(n){return arguments.length?(e=n,r=n?n.length:0,i.bandwidth(t)):e},bandwidth:function(n){return arguments.length?(!(t=n)&&e&&(t=Bk(e)),i):t},sample:function(){return e[~~(jk()*r)]+t*n.sample()},pdf:function(i){let o=0,a=0;for(;a<r;++a)o+=n.pdf((i-e[a])/t);return o/t/r},cdf:function(i){let o=0,a=0;for(;a<r;++a)o+=n.cdf((i-e[a])/t);return o/r},icdf:function(){throw Error("KDE icdf not supported.")}};return i.data(e)}function nE(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+Qk()*t)}function rE(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Gk*e)}function iE(e,t,n){return Kk(Math.log(e),t,n)}function oE(e,t,n){return Math.exp(Zk(e,t,n))}function aE(e,t){let n,r;const i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>nE(n,r),pdf:e=>rE(e,n,r),cdf:e=>iE(e,n,r),icdf:e=>oE(e,n,r)};return i.mean(e).stdev(t)}function sE(e,t){let n,r=0;function i(e){const t=[];let n,i=0;for(n=0;n<r;++n)i+=t[n]=null==e[n]?1:+e[n];for(n=0;n<r;++n)t[n]/=i;return t}const o={weights:function(e){return arguments.length?(n=i(t=e||[]),o):t},distributions:function(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),o.weights(t)):e},sample:function(){const t=jk();let i=e[r-1],o=n[0],a=0;for(;a<r-1;o+=n[++a])if(t<o){i=e[a];break}return i.sample()},pdf:function(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].pdf(t);return i},cdf:function(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].cdf(t);return i},icdf:function(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function uE(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*jk()}function lE(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function cE(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function fE(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function dE(e,t){let n,r;const i={min:function(e){return arguments.length?(n=e||0,i):n},max:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>uE(n,r),pdf:e=>lE(e,n,r),cdf:e=>cE(e,n,r),icdf:e=>fE(e,n,r)};return null==t&&(t=null==e?1:e,e=0),i.min(e).max(t)}function hE(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function pE(e,t,n,r){e=e.filter((e=>{let r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&e.sort(((e,n)=>t(e)-t(n)));const i=e.length,o=new Float64Array(i),a=new Float64Array(i);let s,u,l,c=0,f=0,d=0;for(l of e)o[c]=s=+t(l),a[c]=u=+n(l),++c,f+=(s-f)/c,d+=(u-d)/c;for(c=0;c<i;++c)o[c]-=f,a[c]-=d;return[o,a,f,d]}function mE(e,t,n,r){let i,o,a=-1;for(const s of e)i=t(s),o=n(s),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++a)}function gE(e,t,n,r,i){let o=0,a=0;return mE(e,t,n,((e,t)=>{const n=t-i(e),s=t-r;o+=n*n,a+=s*s})),1-o/a}function yE(e,t,n){let r=0,i=0,o=0,a=0,s=0;mE(e,t,n,((e,t)=>{++s,r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=hE(r,i,o,a),l=e=>u[0]+u[1]*e;return{coef:u,predict:l,rSquared:gE(e,t,n,i,l)}}function vE(e,t,n){let r=0,i=0,o=0,a=0,s=0;mE(e,t,n,((e,t)=>{++s,e=Math.log(e),r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=hE(r,i,o,a),l=e=>u[0]+u[1]*Math.log(e);return{coef:u,predict:l,rSquared:gE(e,t,n,i,l)}}function bE(e,t,n){const[r,i,o,a]=pE(e,t,n);let s,u,l,c=0,f=0,d=0,h=0,p=0;mE(e,t,n,((e,t)=>{s=r[p++],u=Math.log(t),l=s*t,c+=(t*u-c)/p,f+=(l-f)/p,d+=(l*u-d)/p,h+=(s*l-h)/p}));const[m,g]=hE(f/a,c/a,d/a,h/a),y=e=>Math.exp(m+g*(e-o));return{coef:[Math.exp(m-g*o),g],predict:y,rSquared:gE(e,t,n,a,y)}}function xE(e,t,n){let r=0,i=0,o=0,a=0,s=0,u=0;mE(e,t,n,((e,t)=>{const n=Math.log(e),l=Math.log(t);++u,r+=(n-r)/u,i+=(l-i)/u,o+=(n*l-o)/u,a+=(n*n-a)/u,s+=(t-s)/u}));const l=hE(r,i,o,a),c=e=>l[0]*Math.pow(e,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:gE(e,t,n,s,c)}}function wE(e,t,n){const[r,i,o,a]=pE(e,t,n),s=r.length;let u,l,c,f,d=0,h=0,p=0,m=0,g=0;for(u=0;u<s;)l=r[u],c=i[u++],f=l*l,d+=(f-d)/u,h+=(f*l-h)/u,p+=(f*f-p)/u,m+=(l*c-m)/u,g+=(f*c-g)/u;const y=p-d*d,v=d*y-h*h,b=(g*d-m*h)/v,x=(m*y-g*h)/v,w=-b*d,_=e=>b*(e-=o)*e+x*e+w+a;return{coef:[w-x*o+b*o*o+a,x-2*b*o,b],predict:_,rSquared:gE(e,t,n,a,_)}}function _E(e,t,n,r){if(1===r)return yE(e,t,n);if(2===r)return wE(e,t,n);const[i,o,a,s]=pE(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*o[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=function(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}(c),v=e=>{e-=a;let t=s+y[0]+y[1]*e+y[2]*e*e;for(d=3;d<f;++d)t+=y[d]*Math.pow(e,d);return t};return{coef:kE(f,y,-a,s),predict:v,rSquared:gE(e,t,n,s,v)}}function kE(e,t,n,r){const i=Array(e);let o,a,s,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],u=1,i[o]+=s,a=1;a<=o;++a)u*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*u;return i[0]+=r,i}function EE(e,t,n,r){const[i,o,a,s]=pE(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let e=-1;++e<=2;){const t=[0,l-1];for(let e=0;e<u;++e){const n=i[e],r=t[0],a=t[1],s=n-i[r]>i[a]-n?r:a;let u=0,l=0,h=0,p=0,m=0;const g=1/Math.abs(i[s]-n||1);for(let e=r;e<=a;++e){const t=i[e],r=o[e],a=SE(Math.abs(n-t)*g)*d[e],s=t*a;u+=a,l+=s,h+=r*a,p+=r*s,m+=t*s}const[y,v]=hE(l/u,h/u,p/u,m/u);c[e]=y+v*n,f[e]=Math.abs(o[e]-c[e]),AE(i,e+1,t)}if(2===e)break;const n=Ad(f);if(Math.abs(n)<1e-12)break;for(let e,t,r=0;r<u;++r)e=f[r]/(6*n),d[r]=e>=1?1e-12:(t=1-e*e)*t}return function(e,t,n,r){const i=e.length,o=[];let a,s=0,u=0,l=[];for(;s<i;++s)a=e[s]+n,l[0]===a?l[1]+=(t[s]-l[1])/++u:(u=0,l[1]+=r,l=[a,t[s]],o.push(l));return l[1]+=r,o}(i,c,a,s)}function SE(e){return(e=1-e*e*e)*e*e}function AE(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}const CE=.1*Math.PI/180;function DE(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=t=>[t,e(t)],o=t[0],a=t[1],s=a-o,u=s/r,l=[i(o)],c=[];if(n===r){for(let e=1;e<r;++e)l.push(i(o+e/n*s));return l.push(i(a)),l}c.push(i(a));for(let e=n;--e>0;)c.push(i(o+e/n*s));let f=l[0],d=c[c.length-1];for(;d;){const e=i((f[0]+d[0])/2);e[0]-f[0]>=u&&ME(f,e,d)>CE?c.push(e):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function ME(e,t,n){const r=Math.atan2(n[1]-e[1],n[0]-e[0]),i=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-i)}function FE(e){return e&&e.length?1===e.length?e[0]:(t=e,e=>{const n=t.length;let r=1,i=String(t[0](e));for(;r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function NE(e,t,n){return n||e+(t?"_"+t:"")}t(zk,"setRandom",(function(){return Uk})),t(zk,"sampleUniform",(function(){return uE})),t(zk,"sampleNormal",(function(){return Qk})),t(zk,"sampleLogNormal",(function(){return nE})),t(zk,"sampleCurve",(function(){return DE})),t(zk,"regressionQuad",(function(){return wE})),t(zk,"regressionPow",(function(){return xE})),t(zk,"regressionPoly",(function(){return _E})),t(zk,"regressionLog",(function(){return vE})),t(zk,"regressionLoess",(function(){return EE})),t(zk,"regressionLinear",(function(){return yE})),t(zk,"regressionExp",(function(){return bE})),t(zk,"randomUniform",(function(){return dE})),t(zk,"randomNormal",(function(){return eE})),t(zk,"randomMixture",(function(){return sE})),t(zk,"randomLogNormal",(function(){return aE})),t(zk,"randomLCG",(function(){return Hk})),t(zk,"randomKDE",(function(){return tE})),t(zk,"randomInteger",(function(){return Vk})),t(zk,"random",(function(){return jk})),t(zk,"quartiles",(function(){return Lk})),t(zk,"quantiles",(function(){return Pk})),t(zk,"quantileUniform",(function(){return fE})),t(zk,"quantileNormal",(function(){return Zk})),t(zk,"quantileLogNormal",(function(){return oE})),t(zk,"dotbin",(function(){return Wk})),t(zk,"densityUniform",(function(){return lE})),t(zk,"densityNormal",(function(){return Jk})),t(zk,"densityLogNormal",(function(){return rE})),t(zk,"cumulativeUniform",(function(){return cE})),t(zk,"cumulativeNormal",(function(){return Kk})),t(zk,"cumulativeLogNormal",(function(){return iE})),t(zk,"bootstrapCI",(function(){return qk})),t(zk,"bin",(function(){return Ik})),t(zk,"bandwidthNRD",(function(){return Bk}));const $E=()=>{},TE={init:$E,add:$E,rem:$E,idx:0},OE={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},zE=Object.keys(OE);function RE(e,t){return OE[e](t)}function PE(e,t){return e.idx-t.idx}function LE(){this.valid=0,this.missing=0,this._ops.forEach((e=>e.init(this)))}function BE(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach((n=>n.add(this,e,t)))):++this.missing}function IE(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach((n=>n.rem(this,e,t)))):--this.missing}function jE(e){return this._out.forEach((t=>e[t.out]=t.value(this))),e}function UE(e,t){const n=t||lv,r=function(e){const t={};e.forEach((e=>t[e.name]=e));const n=e=>{e.req&&e.req.forEach((e=>{t[e]||n(t[e]=OE[e]())}))};return e.forEach(n),Object.values(t).sort(PE)}(e),i=e.slice().sort(PE);function o(e){this._ops=r,this._out=i,this.cell=e,this.init()}return o.prototype.init=LE,o.prototype.add=BE,o.prototype.rem=IE,o.prototype.set=jE,o.prototype.get=n,o.fields=e.map((e=>e.out)),o}function qE(e){this._key=e?sv(e):J_,this.reset()}zE.forEach((e=>{OE[e]=function(e,t){return n=>Jv({name:e,out:n||e},TE,t)}(e,OE[e])}));const WE=qE.prototype;function HE(e){Fk.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}WE.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},WE.add=function(e){this._add.push(e)},WE.rem=function(e){this._rem.push(e)},WE.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,u,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,u=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o},WE.distinct=function(e){const t=this.values(),n={};let r,i=t.length,o=0;for(;--i>=0;)r=e(t[i])+"",tb(n,r)||(n[r]=1,++o);return o},WE.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=Zv(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},WE.argmin=function(e){return this.extent(e)[0]||{}},WE.argmax=function(e){return this.extent(e)[1]||{}},WE.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},WE.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},WE.quartile=function(e){return this._get===e&&this._q||(this._q=Lk(this.values(),e),this._get=e),this._q},WE.q1=function(e){return this.quartile(e)[0]},WE.q2=function(e){return this.quartile(e)[1]},WE.q3=function(e){return this.quartile(e)[2]},WE.ci=function(e){return this._get===e&&this._ci||(this._ci=qk(this.values(),1e3,.05,e),this._get=e),this._ci},WE.ci0=function(e){return this.ci(e)[0]},WE.ci1=function(e){return this.ci(e)[1]},HE.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:zE},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},ob(HE,Fk,{transform:function(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(n.value=n.value||n.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter((()=>this.clean())),n.changes(r)},cross:function(){const e=this,t=e.value,n=e._dnames,r=n.map((()=>({}))),i=n.length;function o(e){let t,o,a,s;for(t in e)for(a=e[t].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}o(e._prev),o(t),function o(a,s,u){const l=n[u],c=r[u++];for(const n in c){const r=a?a+"|"+n:n;s[l]=c[n],u<i?o(r,s,u):t[r]||e.cell(r,s)}}("",{},0)},init:function(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(e){const n=jv(tv(e)),i=n.length;let o,a=0;for(;a<i;++a)r[o=n[a]]||(r[o]=1,t.push(o))}this._dims=jv(e.groupby),this._dnames=this._dims.map((e=>{const t=ev(e);return i(e),n.push(t),t})),this.cellkey=e.key?e.key:FE(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.as||[],u=o.length,l={};let c,f,d,h,p,m;for(u!==a.length&&ov("Unmatched number of fields and aggregate ops."),m=0;m<u;++m)c=o[m],f=a[m],null==c&&"count"!==f&&ov("Null aggregate field specified."),h=ev(c),p=NE(f,h,s[m]),n.push(p),"count"!==f?(d=l[h],d||(i(c),d=l[h]=[],d.field=c,this._measures.push(d)),"count"!==f&&(this._countOnly=!1),d.push(RE(f,p))):this._counts.push(p);return this._measures=this._measures.map((e=>UE(e,e.field))),{}},cellkey:FE(),cell:function(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell:function(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const e=this._measures,t=e.length;n.agg=Array(t);for(let r=0;r<t;++r)n.agg[r]=new e[r](n)}return n.store&&(n.data=new qE),n},newtuple:function(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let t=0;t<i;++t)o[n[t]]=r[t](e);return t?nk(t.tuple,o):Z_(o)},clean:function(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add:function(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].add(r[t].get(e),e)},rem:function(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].rem(r[t].get(e),e)},celltuple:function(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const n=e.agg;for(let e=0,r=n.length;e<r;++e)n[e].set(t)}return t},changes:function(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],i&&!u.num||a.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(0===u.num&&i?a:s).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});function VE(e){Fk.call(this,null,e)}function GE(e,t,n){const r=e;let i=t||[],o=n||[],a={},s=0;return{add:e=>o.push(e),remove:e=>a[r(e)]=++s,size:()=>i.length,data:(e,t)=>(s&&(i=i.filter((e=>!a[r(e)])),a={},s=0),t&&e&&i.sort(e),o.length&&(i=e?gb(e,i,o.sort(e)):i.concat(o),o=[]),i)}}function YE(e){Fk.call(this,[],e)}function XE(e){ck.call(this,null,QE,e)}function QE(e){return this.value&&!e.modified()?this.value:Wv(e.fields,e.orders)}function JE(e){Fk.call(this,null,e)}function KE(e){Fk.call(this,null,e)}VE.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},ob(VE,Fk,{transform:function(e,t){const n=!1!==e.interval,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],u=a[1];let l;return l=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(tv(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?e=>{const t=r(e);e[s]=t,e[u]=null==t?null:i+o*(1+(t-i)/o)}:e=>e[s]=r(e)),t.modifies(n?a:s)},_bins:function(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Ik(e),r=n.step;let i,o,a=n.start,s=a+Math.ceil((n.stop-a)/r)*r;null!=(i=e.anchor)&&(o=i-(a+r*Math.floor((i-a)/r)),a+=o,s+=o);const u=function(e){let n=kv(t(e));return null==n?null:n<a?-1/0:n>s?1/0:(n=Math.max(a,Math.min(n,s-r)),a+r*Math.floor(1e-14+(n-a)/r))};return u.start=a,u.stop=n.stop,u.step=r,this.value=Zy(u,tv(t),e.name||"bin_"+ev(t))}}),YE.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},ob(YE,Fk,{transform:function(e,t){const n=t.fork(t.ALL),r=GE(J_,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(rk(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),ob(XE,ck),JE.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},ob(JE,Fk,{transform:function(e,t){const n=t=>n=>{for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(s(n),e.case,o)||[],u=0,l=i.length;u<l;++u)a.test(r=i[u])||t(r)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,u=e.as||["text","count"],l=n((e=>i[e]=1+(i[e]||0))),c=n((e=>i[e]-=1));return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck:function(e,t){let n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish:function(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,u,l;for(s in n)u=r[s],l=n[s]||0,!u&&l?(r[s]=u=Z_({}),u[i]=s,u[o]=l,a.add.push(u)):0===l?(u&&a.rem.push(u),n[s]=null,r[s]=null):u[o]!==l&&(u[o]=l,a.mod.push(u));return a.modifies(t)}}),KE.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},ob(KE,Fk,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,o,a=[],s={},u=e.length,l=0;l<u;++l)for(s[t]=o=e[l],i=0;i<u;++i)s[n]=e[i],r(s)&&(a.push(Z_(s)),(s={})[t]=o);return a}(s,i,o,e.filter||dv)):n.mod=s,n.source=this.value,n.modifies(r)}});const ZE={kde:tE,mixture:sE,normal:eE,lognormal:aE,uniform:dE},eS="function";function tS(e,t){const n=e.function;tb(ZE,n)||ov("Unknown distribution function: "+n);const r=ZE[n]();for(const n in e)"field"===n?r.data((e.from||t()).map(e[n])):"distributions"===n?r[n](e[n].map((e=>tS(e,t)))):typeof r[n]===eS&&r[n](e[n]);return r}function nS(e){Fk.call(this,null,e)}const rS=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],iS={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:rS},{name:"weights",type:"number",array:!0}]};function oS(e,t){return e?e.map(((e,n)=>t[n]||ev(e))):null}function aS(e,t,n){const r=[],i=e=>e(u);let o,a,s,u,l,c;if(null==t)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)u=e[a],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}nS.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:rS.concat(iS)},{name:"as",type:"string",array:!0,default:["value","density"]}]},ob(nS,Fk,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=tS(e.distribution,function(e){return()=>e.materialize(e.SOURCE).source}(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";"pdf"!==a&&"cdf"!==a&&ov("Invalid density method: "+a),e.extent||r.data||ov("Missing density extent parameter."),a=r[a];const s=e.as||["value","density"],u=DE(a,e.extent||Kv(r.data()),i,o).map((e=>{const t={};return t[s[0]]=e[0],t[s[1]]=e[1],Z_(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function sS(e){Fk.call(this,null,e)}sS.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function uS(e){ck.call(this,null,lS,e),this.modified(!0)}function lS(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Zy((n=>t(n,e)),tv(t),ev(t))}function cS(e){Fk.call(this,[void 0,void 0],e)}function fS(e,t){ck.call(this,e),this.parent=t,this.count=0}function dS(e){Fk.call(this,{},e),this._keys=rb();const t=this._targets=[];t.active=0,t.forEach=e=>{for(let n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function hS(e){ck.call(this,null,pS,e)}function pS(e){return this.value&&!e.modified()?this.value:gv(e.name)?jv(e.name).map((e=>sv(e))):sv(e.name,e.as)}function mS(e){Fk.call(this,rb(),e)}function gS(e){Fk.call(this,[],e)}function yS(e){Fk.call(this,[],e)}function vS(e){Fk.call(this,null,e)}function bS(e){Fk.call(this,[],e)}ob(sS,Fk,{transform:function(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,r=aS(t.source,e.groupby,lv),i=e.smooth||!1,o=e.field,a=e.step||((e,t)=>bb(Kv(e,t))/30)(n,o),s=rk(((e,t)=>o(e)-o(t))),u=e.as||"bin",l=r.length;let c,f=1/0,d=-1/0,h=0;for(;h<l;++h){const e=r[h].sort(s);c=-1;for(const t of Wk(e,a,i,o))t<f&&(f=t),t>d&&(d=t),e[++c][u]=t}return this.value={start:f,stop:d,step:a},t.reflow(!0).modifies(u)}}),ob(uS,ck),cS.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},ob(cS,Fk,{transform:function(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],a=n[1];if((i||null==o)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,(e=>{const t=kv(r(e));null!=t&&(t<o&&(o=t),t>a&&(a=t))})),!Number.isFinite(o)||!Number.isFinite(a)){let e=ev(r);e&&(e=` for field "${e}"`),t.dataflow.warn(`Infinite extent${e}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}}),ob(fS,ck,{connect:function(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add:function(e){this.count+=1,this.value.add.push(e)},rem:function(e){this.count-=1,this.value.rem.push(e)},mod:function(e){this.value.mod.push(e)},init:function(e){this.value.init(e,e.NO_SOURCE)},evaluate:function(){return this.value}}),ob(dS,Fk,{activate:function(e){this._targets[this._targets.active++]=e},subflow:function(e,t,n,r){const i=this.value;let o,a,s=tb(i,e)&&i[e];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new fS(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean:function(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const e=this._targets.filter((e=>e&&e.count>0));this.initTargets(e)}},initTargets:function(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&null!=t[i];++i)t[i]=null;t.active=r},transform:function(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=e=>this.subflow(e,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,(e=>{const t=J_(e),n=o.get(t);void 0!==n&&(o.delete(t),s(n).rem(e))})),t.visit(t.ADD,(e=>{const t=r(e);o.set(J_(e),t),s(t).add(e)})),a||t.modified(r.fields)?t.visit(t.MOD,(e=>{const t=J_(e),n=o.get(t),i=r(e);n===i?s(i).mod(e):(o.set(t,i),s(n).rem(e),s(i).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(e=>{s(o.get(J_(e))).mod(e)})),a&&t.visit(t.REFLOW,(e=>{const t=J_(e),n=o.get(t),i=r(e);n!==i&&(o.set(t,i),s(n).rem(e),s(i).add(e))})),t.clean()?n.runAfter((()=>{this.clean(),o.clean()})):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}}),ob(hS,ck),mS.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},ob(mS,Fk,{transform:function(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,u=e.expr;let l=!0;function c(t){const n=J_(t),i=u(t,e),c=r.get(n);i&&c?(r.delete(n),o.push(t)):i||c?l&&i&&!c&&s.push(t):(r.set(n,1),a.push(t))}return t.visit(t.REM,(e=>{const t=J_(e);r.has(t)?r.delete(t):a.push(e)})),t.visit(t.ADD,(t=>{u(t,e)?o.push(t):r.set(J_(t),1)})),t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),gS.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},ob(gS,Fk,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=oS(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{const t=r.map((t=>t(e))),s=t.reduce(((e,t)=>Math.max(e,t.length)),0);let u,l,c,f=0;for(;f<s;++f){for(l=ek(e),u=0;u<a;++u)l[i[u]]=null==(c=t[u][f])?null:c;o&&(l[o]=f),n.add.push(l)}})),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}}),yS.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},ob(yS,Fk,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(ev),o=e.as||["key","value"],a=o[0],s=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{for(let t,o=0;o<u;++o)t=ek(e),t[a]=i[o],t[s]=r[o](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(o)}}),vS.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},ob(vS,Fk,{transform:function(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,(t=>t[r]=n(t,e)))}}),ob(bS,Fk,{transform:function(e,t){const n=t.fork(t.ALL),r=e.generator;let i,o,a,s=this.value,u=e.size-s.length;if(u>0){for(i=[];--u>=0;)i.push(a=Z_(r(e))),s.push(a);n.add=n.add.length?n.materialize(n.ADD).add.concat(i):i}else o=s.slice(0,-u),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,s=s.slice(-u);return n.source=this.value=s,n}});const xS={value:"value",median:Ad,mean:function(e,t){let n=0,r=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},min:wd,max:xd},wS=[];function _S(e){Fk.call(this,[],e)}function kS(e){HE.call(this,e)}function ES(e){Fk.call(this,null,e)}function SS(e){ck.call(this,null,AS,e)}function AS(e){return this.value&&!e.modified()?this.value:hb(e.fields,e.flat)}function CS(e){Fk.call(this,[],e),this._pending=null}function DS(e,t,n){n.forEach(Z_);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function MS(e){Fk.call(this,{},e)}function FS(e){ck.call(this,null,NS,e)}function NS(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r,i,o=1/0,a=-1/0;for(r=0;r<n;++r)i=t[r],i[0]<o&&(o=i[0]),i[1]>a&&(a=i[1]);return[o,a]}function $S(e){ck.call(this,null,TS,e)}function TS(e){return this.value&&!e.modified()?this.value:e.values.reduce(((e,t)=>e.concat(t)),[])}function OS(e){Fk.call(this,null,e)}function zS(e){HE.call(this,e)}function RS(e){dS.call(this,e)}function PS(e){Fk.call(this,null,e)}function LS(e){Fk.call(this,null,e)}function BS(e){Fk.call(this,null,e)}_S.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},ob(_S,Fk,{transform:function(e,t){var n,r,i,o,a,s,u,l,c,f,d=t.fork(t.ALL),h=function(e){var t,n=e.method||xS.value;if(null!=xS[n])return n===xS.value?(t=void 0!==e.value?e.value:0,()=>t):xS[n];ov("Unrecognized imputation method: "+n)}(e),p=function(e){const t=e.field;return e=>e?t(e):NaN}(e),m=ev(e.field),g=ev(e.key),y=(e.groupby||[]).map(ev),v=function(e,t,n,r){var i,o,a,s,u,l,c,f,d=e=>e(f),h=[],p=r?r.slice():[],m={},g={};for(p.forEach(((e,t)=>m[e]=t+1)),s=0,c=e.length;s<c;++s)l=n(f=e[s]),u=m[l]||(m[l]=p.push(l)),(a=g[o=(i=t?t.map(d):wS)+""])||(a=g[o]=[],h.push(a),a.values=i),a[u-1]=f;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),b=[],x=this.value,w=v.domain.length;for(a=0,l=v.length;a<l;++a)for(i=(n=v[a]).values,r=NaN,u=0;u<w;++u)if(null==n[u]){for(o=v.domain[u],f={_impute:!0},s=0,c=i.length;s<c;++s)f[y[s]]=i[s];f[g]=o,f[m]=Number.isNaN(r)?r=h(n,p):r,b.push(Z_(f))}return b.length&&(d.add=d.materialize(d.ADD).add.concat(b)),x.length&&(d.rem=d.materialize(d.REM).rem.concat(x)),this.value=b,d}}),kS.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:zE},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},ob(kS,HE,{transform:function(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(i=n.value=n.value||this.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),n.changes(),t.visit(t.SOURCE,(e=>{Jv(e,i[n.cellkey(e)].tuple)})),t.reflow(r).modifies(this._outputs)},changes:function(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),ES.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},ob(ES,Fk,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=aS(r,e.groupby,e.field),o=(e.groupby||[]).map(ev),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==s&&"cdf"!==s&&ov("Invalid density method: "+s),"shared"===e.resolve&&(c||(c=Kv(r,e.field)),f=d=e.steps||d),i.forEach((t=>{const n=tE(t,a)[s],r=e.counts?t.length:1;DE(n,c||Kv(t),f,d).forEach((e=>{const n={};for(let e=0;e<o.length;++e)n[o[e]]=t.dims[e];n[u[0]]=e[0],n[u[1]]=e[1]*r,l.push(Z_(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}}),ob(SS,ck),ob(CS,Fk,{transform:function(e,t){const n=t.dataflow;if(this._pending)return DS(this,t,this._pending);if(function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e))return t.StopPropagation;if(e.values)return DS(this,t,n.parse(e.values,e.format));if(e.async){return{async:n.request(e.url,e.format).then((e=>(this._pending=jv(e.data),e=>e.touch(this))))}}return n.request(e.url,e.format).then((e=>DS(this,t,jv(e.data))))}}),MS.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},ob(MS,Fk,{transform:function(e,t){const n=e.fields,r=e.index,i=e.values,o=null==e.default?null:e.default,a=e.modified(),s=n.length;let u,l,c,f=a?t.SOURCE:t.ADD,d=t,h=e.as;return i?(l=i.length,s>1&&!h&&ov('Multi-field lookup requires explicit "as" parameter.'),h&&h.length!==s*l&&ov('The "as" parameter has too few output field names.'),h=h||i.map(ev),u=function(e){for(var t,a,u=0,c=0;u<s;++u)if(null==(a=r.get(n[u](e))))for(t=0;t<l;++t,++c)e[h[c]]=o;else for(t=0;t<l;++t,++c)e[h[c]]=i[t](a)}):(h||ov("Missing output field names."),u=function(e){for(var t,i=0;i<s;++i)t=r.get(n[i](e)),e[h[i]]=null==t?o:t}),a?d=t.reflow(!0):(c=n.some((e=>t.modified(e.fields))),f|=c?t.MOD:0),t.visit(f,u),d.modifies(h)}}),ob(FS,ck),ob($S,ck),ob(OS,Fk,{transform:function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),zS.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:zE,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},ob(zS,HE,{_transform:HE.prototype.transform,transform:function(e,t){return this._transform(function(e,t){const n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",o=tv(n).concat(tv(r)),a=function(e,t,n){const r={},i=[];return n.visit(n.SOURCE,(t=>{const n=e(t);r[n]||(r[n]=1,i.push(n))})),i.sort(Hv),t?i.slice(0,t):i}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:a.map((()=>i)),fields:a.map((e=>function(e,t,n,r){return Zy((r=>t(r)===e?n(r):NaN),r,e+"")}(e,n,r,o))),as:a.map((e=>e+"")),modified:e.modified.bind(e)}}(e,t),t)}}),ob(RS,dS,{transform:function(e,t){const n=e.subflow,r=e.field,i=e=>this.subflow(J_(e),n,t,e);return(e.modified("field")||r&&t.modified(tv(r)))&&ov("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,(e=>{const t=i(e);r(e).forEach((e=>t.mod(e)))})),t.visit(t.ADD,(e=>{const t=i(e);r(e).forEach((e=>t.add(Z_(e))))})),t.visit(t.REM,(e=>{const t=i(e);r(e).forEach((e=>t.rem(e)))}))):(t.visit(t.MOD,(e=>i(e).mod(e))),t.visit(t.ADD,(e=>i(e).add(e))),t.visit(t.REM,(e=>i(e).rem(e)))),t.clean()&&t.runAfter((()=>this.clean())),t}}),PS.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},ob(PS,Fk,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=oS(e.fields,e.as||[]),o=r?(e,t)=>function(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}(e,t,r,i):tk;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,(e=>{const t=J_(e);n.rem.push(a[t]),a[t]=null})),t.visit(t.ADD,(e=>{const t=o(e,Z_({}));a[J_(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{n.mod.push(o(e,a[J_(e)]))})),n}}),ob(LS,Fk,{transform:function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),BS.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function IS(e){Fk.call(this,null,e)}function jS(e){Fk.call(this,[],e),this.count=0}function US(e){Fk.call(this,null,e)}function qS(e){Fk.call(this,null,e),this.modified(!0)}function WS(e){Fk.call(this,null,e)}ob(BS,Fk,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=aS(t.materialize(t.SOURCE).source,e.groupby,e.field),o=(e.groupby||[]).map(ev),a=[],s=e.step||.01,u=e.probs||Dd(s/2,1-1e-14,s),l=u.length;return i.forEach((e=>{const t=Pk(e,u);for(let n=0;n<l;++n){const i={};for(let t=0;t<o.length;++t)i[o[t]]=e.dims[t];i[r[0]]=u[n],i[r[1]]=t[n],a.push(Z_(i))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}}),ob(IS,Fk,{transform:function(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(e=>{const t=J_(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(e=>{const t=ek(e);r[J_(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{const t=r[J_(e)];for(const r in e)t[r]=e[r],n.modifies(r);n.mod.push(t)}))),n}}),jS.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},ob(jS,Fk,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce(((e,t)=>(e[J_(t)]=1,e)),{});let a=this.value,s=this.count,u=0;function l(e){let t,r;a.length<i?a.push(e):(r=~~((s+1)*jk()),r<a.length&&r>=u&&(t=a[r],o[J_(t)]&&n.rem.push(t),a[r]=e)),++s}if(t.rem.length&&(t.visit(t.REM,(e=>{const t=J_(e);o[t]&&(o[t]=-1,n.rem.push(e)),--s})),a=a.filter((e=>-1!==o[J_(e)]))),(t.rem.length||r)&&a.length<i&&t.source&&(u=s=a.length,t.visit(t.SOURCE,(e=>{o[J_(e)]||l(e)})),u=-1),r&&a.length>i){const e=a.length-i;for(let t=0;t<e;++t)o[J_(a[t])]=-1,n.rem.push(a[t]);a=a.slice(e)}return t.mod.length&&t.visit(t.MOD,(e=>{o[J_(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=a.filter((e=>!o[J_(e)]))),this.count=s,this.value=n.source=a,n}}),US.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},ob(US,Fk,{transform:function(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Dd(e.start,e.stop,e.step||1).map((e=>{const t={};return t[r]=e,Z_(t)})),n.add=t.add.concat(this.value),n}}),ob(qS,Fk,{transform:function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const HS=["unit0","unit1"];function VS(e){Fk.call(this,rb(),e)}function GS(e){Fk.call(this,null,e)}WS.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Fw,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:HS}]},ob(WS,Fk,{transform:function(e,t){const n=e.field,r=!1!==e.interval,i="utc"===e.timezone,o=this._floor(e,t),a=(i?a_:o_)(o.unit).offset,s=e.as||HS,u=s[0],l=s[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(tv(n)))&&(h=(t=t.reflow(!0)).SOURCE,f=1/0,d=-1/0),t.visit(h,(e=>{const t=n(e);let i,s;null==t?(e[u]=null,r&&(e[l]=null)):(e[u]=i=s=o(t),r&&(e[l]=s=a(i,c)),i<f&&(f=i),s>d&&(d=s))})),o.start=f,o.stop=d,t.modifies(r?s:u)},_floor:function(e,t){const n="utc"===e.timezone,{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:C_({extent:e.extent||Kv(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=$w(r),a=this.value||{},s=(n?n_:Zw)(o,i);return s.unit=_v(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}}),ob(VS,Fk,{transform:function(e,t){const n=t.dataflow,r=e.field,i=this.value,o=e=>i.set(r(e),e);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,(e=>i.delete(r(e)))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}}),ob(GS,Fk,{transform:function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(rk(e.sort)):t.source).map(e.field))}});const YS={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=YS.rank(),t=e.next;return{init:e.init,next:e=>(t(e)-1)/(e.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||ov("ntile num must be greater than zero.");const n=YS.cume_dist(),r=n.next;return{init:n.init,next:e=>Math.ceil(t*r(e))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||ov("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=function(e,t,n){for(let r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};const XS=Object.keys(YS);function QS(e){const t=jv(e.ops),n=jv(e.fields),r=jv(e.params),i=jv(e.as),o=this.outputs=[],a=this.windows=[],s={},u={},l=[],c=[];let f=!0;function d(e){jv(tv(e)).forEach((e=>s[e]=1))}d(e.sort),t.forEach(((e,t)=>{const s=n[t],h=ev(s),p=NE(e,h,i[t]);if(d(s),o.push(p),tb(YS,e))a.push(function(e,t,n,r){const i=YS[e](t,n);return{init:i.init||cv,update:function(e,t){t[r]=i.next(e)}}}(e,n[t],r[t],p));else{if(null==s&&"count"!==e&&ov("Null aggregate field specified."),"count"===e)return void l.push(p);f=!1;let t=u[h];t||(t=u[h]=[],t.field=s,c.push(t)),t.push(RE(e,p))}})),(l.length||c.length)&&(this.cell=function(e,t,n){e=e.map((e=>UE(e,e.field)));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new qE;return r.add=function(e){if(r.num+=1,!n){s&&s.add(e);for(let t=0;t<i;++t)o[t].add(o[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){s&&s.rem(e);for(let t=0;t<i;++t)o[t].rem(o[t].get(e),e)}},r.set=function(e){let i,a;for(s&&s.values(),i=0,a=t.length;i<a;++i)e[t[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(e)},r.init=function(){r.num=0,s&&s.reset();for(let e=0;e<i;++e)o[e].init()},r}(c,l,f)),this.inputs=Object.keys(s)}const JS=QS.prototype;function KS(e){Fk.call(this,{},e),this._mlen=0,this._mods=[]}function ZS(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),u=s.length,l=o?td(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||Xv(-1)};t.init();for(let e=0;e<u;++e)eA(c,a,e,u),o&&tA(c,l),t.update(c,s[e])}function eA(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function tA(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}JS.init=function(){this.windows.forEach((e=>e.init())),this.cell&&this.cell.init()},JS.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)},KS.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:XS.concat(zE)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},ob(KS,Fk,{transform:function(e,t){this.stamp=t.stamp;const n=e.modified(),r=rk(e.sort),i=FE(e.groupby),o=e=>this.group(i(e));let a=this.state;a&&!n||(a=this.state=new QS(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,(e=>o(e).add(e)))):(t.visit(t.REM,(e=>o(e).remove(e))),t.visit(t.ADD,(e=>o(e).add(e))));for(let t=0,n=this._mlen;t<n;++t)ZS(this._mods[t],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group:function(e){let t=this.value[e];return t||(t=this.value[e]=GE(J_),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),t(Ok,"window",(function(){return KS})),t(Ok,"values",(function(){return GS})),t(Ok,"tupleindex",(function(){return VS})),t(Ok,"timeunit",(function(){return WS})),t(Ok,"subflow",(function(){return fS})),t(Ok,"sieve",(function(){return qS})),t(Ok,"sequence",(function(){return US})),t(Ok,"sample",(function(){return jS})),t(Ok,"relay",(function(){return IS})),t(Ok,"quantile",(function(){return BS})),t(Ok,"proxy",(function(){return LS})),t(Ok,"project",(function(){return PS})),t(Ok,"prefacet",(function(){return RS})),t(Ok,"pivot",(function(){return zS})),t(Ok,"params",(function(){return OS})),t(Ok,"multivalues",(function(){return $S})),t(Ok,"multiextent",(function(){return FS})),t(Ok,"lookup",(function(){return MS})),t(Ok,"load",(function(){return CS})),t(Ok,"key",(function(){return SS})),t(Ok,"kde",(function(){return ES})),t(Ok,"joinaggregate",(function(){return kS})),t(Ok,"impute",(function(){return _S})),t(Ok,"generate",(function(){return bS})),t(Ok,"formula",(function(){return vS})),t(Ok,"fold",(function(){return yS})),t(Ok,"flatten",(function(){return gS})),t(Ok,"filter",(function(){return mS})),t(Ok,"field",(function(){return hS})),t(Ok,"facet",(function(){return dS})),t(Ok,"extent",(function(){return cS})),t(Ok,"expression",(function(){return uS})),t(Ok,"dotbin",(function(){return sS})),t(Ok,"density",(function(){return nS})),t(Ok,"cross",(function(){return KE})),t(Ok,"countpattern",(function(){return JE})),t(Ok,"compare",(function(){return XE})),t(Ok,"collect",(function(){return YE})),t(Ok,"bin",(function(){return VE})),t(Ok,"aggregate",(function(){return HE}));var nA={},rA={};const iA=Math.PI,oA=2*iA,aA=1e-6,sA=oA-aA;function uA(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function lA(){return new uA}uA.prototype=lA.prototype={constructor:uA,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,u=r-t,l=o-e,c=a-t,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>aA)if(Math.abs(c*s-u*l)>aA&&i){var d=n-o,h=r-a,p=s*s+u*u,m=d*d+h*h,g=Math.sqrt(p),y=Math.sqrt(f),v=i*Math.tan((iA-Math.acos((p+f-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>aA&&(this._+="L"+(e+b*l)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+a,l=t+s,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>aA||Math.abs(this._y1-l)>aA)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%oA+oA),f>sA?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>aA&&(this._+="A"+n+","+n+",0,"+ +(f>=iA)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var cA=function(e){return function(){return e}},fA=Math.abs,dA=Math.atan2,hA=Math.cos,pA=Math.max,mA=Math.min,gA=Math.sin,yA=Math.sqrt,vA=1e-12,bA=Math.PI,xA=bA/2,wA=2*bA;function _A(e){return e>1?0:e<-1?bA:Math.acos(e)}function kA(e){return e>=1?xA:e<=-1?-xA:Math.asin(e)}function EA(e){return e.innerRadius}function SA(e){return e.outerRadius}function AA(e){return e.startAngle}function CA(e){return e.endAngle}function DA(e){return e&&e.padAngle}function MA(e,t,n,r,i,o,a,s){var u=n-e,l=r-t,c=a-i,f=s-o,d=f*u-c*l;if(!(d*d<vA))return[e+(d=(c*(t-o)-f*(e-i))/d)*u,t+d*l]}function FA(e,t,n,r,i,o,a){var s=e-n,u=t-r,l=(a?o:-o)/yA(s*s+u*u),c=l*u,f=-l*s,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,x=v*v+b*b,w=i-o,_=d*m-p*h,k=(b<0?-1:1)*yA(pA(0,w*w*x-_*_)),E=(_*b-v*k)/x,S=(-_*v-b*k)/x,A=(_*b+v*k)/x,C=(-_*v+b*k)/x,D=E-g,M=S-y,F=A-g,N=C-y;return D*D+M*M>F*F+N*N&&(E=A,S=C),{cx:E,cy:S,x01:-c,y01:-f,x11:E*(i/w-1),y11:S*(i/w-1)}}Array.prototype.slice;var NA=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function $A(e){this._context=e}$A.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var TA=function(e){return new $A(e)};function OA(e){return e[0]}function zA(e){return e[1]}var RA=function(e,t){var n=cA(!0),r=null,i=TA,o=null;function a(a){var s,u,l,c=(a=NA(a)).length,f=!1;for(null==r&&(o=i(l=lA())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(u,s,a),+t(u,s,a));if(l)return o=null,l+""||null}return e="function"==typeof e?e:void 0===e?OA:cA(e),t="function"==typeof t?t:void 0===t?zA:cA(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:cA(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:cA(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:cA(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a},PA=function(e,t,n){var r=null,i=cA(!0),o=null,a=TA,s=null;function u(u){var l,c,f,d,h,p=(u=NA(u)).length,m=!1,g=new Array(p),y=new Array(p);for(null==o&&(s=a(h=lA())),l=0;l<=p;++l){if(!(l<p&&i(d=u[l],l,u))===m)if(m=!m)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=c;--f)s.point(g[f],y[f]);s.lineEnd(),s.areaEnd()}m&&(g[l]=+e(d,l,u),y[l]=+t(d,l,u),s.point(r?+r(d,l,u):g[l],n?+n(d,l,u):y[l]))}if(h)return s=null,h+""||null}function l(){return RA().defined(i).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?OA:cA(+e),t="function"==typeof t?t:cA(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?zA:cA(+n),u.x=function(t){return arguments.length?(e="function"==typeof t?t:cA(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:cA(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:cA(+e),u):r},u.y=function(e){return arguments.length?(t="function"==typeof e?e:cA(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t="function"==typeof e?e:cA(+e),u):t},u.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:cA(+e),u):n},u.lineX0=u.lineY0=function(){return l().x(e).y(t)},u.lineY1=function(){return l().x(e).y(n)},u.lineX1=function(){return l().x(r).y(t)},u.defined=function(e){return arguments.length?(i="function"==typeof e?e:cA(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),u):a},u.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),u):o},u},LA={draw:function(e,t){var n=Math.sqrt(t/bA);e.moveTo(n,0),e.arc(0,0,n,0,wA)}},BA=(Math.sqrt(1/3),Math.sin(bA/10)/Math.sin(7*bA/10)),IA=(Math.sin(wA/10),Math.cos(wA/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function jA(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function UA(e){this._context=e}UA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jA(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qA(e){this._context=e}qA.prototype={areaStart:IA,areaEnd:IA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:jA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function WA(e){this._context=e}WA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:jA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HA(e,t){this._basis=new UA(e),this._beta=t}HA.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+r*a),this._beta*t[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var VA=function e(t){function n(e){return 1===t?new UA(e):new HA(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function GA(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function YA(e,t){this._context=e,this._k=(1-t)/6}YA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:GA(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:GA(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var XA=function e(t){function n(e){return new YA(e,t)}return n.tension=function(t){return e(+t)},n}(0);function QA(e,t){this._context=e,this._k=(1-t)/6}QA.prototype={areaStart:IA,areaEnd:IA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:GA(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var JA=function e(t){function n(e){return new QA(e,t)}return n.tension=function(t){return e(+t)},n}(0);function KA(e,t){this._context=e,this._k=(1-t)/6}KA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:GA(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ZA=function e(t){function n(e){return new KA(e,t)}return n.tension=function(t){return e(+t)},n}(0);function eC(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>vA){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>vA){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function tC(e,t){this._context=e,this._alpha=t}tC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:eC(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var nC=function e(t){function n(e){return t?new tC(e,t):new YA(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function rC(e,t){this._context=e,this._alpha=t}rC.prototype={areaStart:IA,areaEnd:IA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:eC(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var iC=function e(t){function n(e){return t?new rC(e,t):new QA(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function oC(e,t){this._context=e,this._alpha=t}oC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:eC(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var aC=function e(t){function n(e){return t?new oC(e,t):new KA(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function sC(e){this._context=e}sC.prototype={areaStart:IA,areaEnd:IA,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uC(e){return e<0?-1:1}function lC(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(uC(o)+uC(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function cC(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function fC(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function dC(e){this._context=e}function hC(e){this._context=new pC(e)}function pC(e){this._context=e}function mC(e){this._context=e}function gC(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}dC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fC(this,this._t0,cC(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,fC(this,cC(this,n=lC(this,e,t)),n);break;default:fC(this,this._t0,n=lC(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(hC.prototype=Object.create(dC.prototype)).point=function(e,t){dC.prototype.point.call(this,t,e)},pC.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},mC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=gC(e),i=gC(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yC(e,t){this._context=e,this._t=t}yC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};function vC(e,t){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const bC=()=>"undefined"!=typeof Image?Image:null;function xC(e,t,n){const r=e-t+2*n;return e?r>0?r:1:0}const wC="linear",_C="log",kC="pow",EC="sqrt",SC="symlog",AC="time",CC="utc",DC="sequential",MC="diverging",FC="quantile",NC="quantize",$C="threshold",TC="ordinal",OC="point",zC="band",RC="bin-ordinal",PC="continuous",LC="discrete",BC="discretizing",IC="interpolating",jC="temporal";function UC(){const e=wm().unknown(void 0),t=e.domain,n=e.range;let r,i,o=[0,1],a=!1,s=0,u=0,l=.5;function c(){const e=t().length,c=o[1]<o[0],f=o[1-c],d=xC(e,s,u);let h=o[c-0];r=(f-h)/(d||1),a&&(r=Math.floor(r)),h+=(f-h-r*(e-s))*l,i=r*(1-s),a&&(h=Math.round(h),i=Math.round(i));const p=Dd(e).map((e=>h+r*e));return n(c?p.reverse():p)}return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),c()):t()},e.range=function(e){return arguments.length?(o=[+e[0],+e[1]],c()):o.slice()},e.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,c()},e.bandwidth=function(){return i},e.step=function(){return r},e.round=function(e){return arguments.length?(a=!!e,c()):a},e.padding=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),s=u,c()):s},e.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),c()):s},e.paddingOuter=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),c()):u},e.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),c()):l},e.invertRange=function(e){if(null==e[0]||null==e[1])return;const r=o[1]<o[0],a=r?n().reverse():n(),s=a.length-1;let u,l,c,f=+e[0],d=+e[1];return f!=f||d!=d||(d<f&&(c=f,f=d,d=c),d<a[0]||f>o[1-r])?void 0:(u=Math.max(0,id(a,f)-1),l=f===d?u:id(a,d)-1,f-a[u]>i+1e-10&&++u,r&&(c=u,u=s-l,l=s-c),u>l?void 0:t().slice(u,l+1))},e.invert=function(t){const n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return UC().domain(t()).range(o).round(a).paddingInner(s).paddingOuter(u).align(l)},c()}function qC(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return qC(t())},e}var WC=Array.prototype.map;function HC(e){return WC.call(e,kv)}const VC=Array.prototype.slice;const GC={};function YC(e,t,n){const r=function(){const n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){let n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}(n):n.invertExtent?function(e){return function(t){const n=e.range();let r,i,o,a,s=t[0],u=t[1],l=-1;for(u<s&&(i=s,s=u,u=i),o=0,a=n.length;o<a;++o)n[o]>=s&&n[o]<=u&&(l<0&&(l=o),r=o);if(!(l<0))return s=e.invertExtent(n[l]),u=e.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}(n):void 0),n.type=e,n};return r.metadata=Sb(jv(n)),r}function XC(e,t,n){return arguments.length>1?(GC[e]=YC(e,t,n),this):QC(e)?GC[e]:void 0}function QC(e){return tb(GC,e)}function JC(e,t){const n=GC[e];return n&&n.metadata[t]}function KC(e){return JC(e,PC)}function ZC(e){return JC(e,LC)}function eD(e){return JC(e,BC)}function tD(e){return JC(e,_C)}function nD(e){return JC(e,IC)}function rD(e){return JC(e,FC)}XC("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,Np),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,Np):[0,1],sm(r)})),XC(wC,um,PC),XC(_C,(function e(){var t=gm(Lp()).domain([1,10]);return t.copy=function(){return Pp(t,e()).base(t.base())},Ip.apply(t,arguments),t}),[PC,_C]),XC(kC,Am,PC),XC(EC,(function(){return Am.apply(null,arguments).exponent(.5)}),PC),XC(SC,(function e(){var t=bm(Lp());return t.copy=function(){return Pp(t,e()).constant(t.constant())},Ip.apply(t,arguments)}),PC),XC(AC,(function(){return Ip.apply(Wy(pg,mg,Jm,Qm,qm,jm,Im,Bm,Lm,wg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[PC,jC]),XC(CC,(function(){return Ip.apply(Wy(dg,hg,cg,lg,ng,eg,Zm,Km,Lm,kg).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[PC,jC]),XC(DC,Gy,[PC,IC]),XC("".concat(DC,"-").concat(wC),Gy,[PC,IC]),XC("".concat(DC,"-").concat(_C),(function e(){var t=gm(Hy()).domain([1,10]);return t.copy=function(){return Vy(t,e()).base(t.base())},jp.apply(t,arguments)}),[PC,IC,_C]),XC("".concat(DC,"-").concat(kC),Yy,[PC,IC]),XC("".concat(DC,"-").concat(EC),(function(){return Yy.apply(null,arguments).exponent(.5)}),[PC,IC]),XC("".concat(DC,"-").concat(SC),(function e(){var t=bm(Hy());return t.copy=function(){return Vy(t,e()).constant(t.constant())},jp.apply(t,arguments)}),[PC,IC]),XC("".concat(MC,"-").concat(wC),(function e(){var t=sm(Xy()(Tp));return t.copy=function(){return Vy(t,e())},jp.apply(t,arguments)}),[PC,IC]),XC("".concat(MC,"-").concat(_C),(function e(){var t=gm(Xy()).domain([.1,1,10]);return t.copy=function(){return Vy(t,e()).base(t.base())},jp.apply(t,arguments)}),[PC,IC,_C]),XC("".concat(MC,"-").concat(kC),Qy,[PC,IC]),XC("".concat(MC,"-").concat(EC),(function(){return Qy.apply(null,arguments).exponent(.5)}),[PC,IC]),XC("".concat(MC,"-").concat(SC),(function e(){var t=bm(Xy());return t.copy=function(){return Vy(t,e()).constant(t.constant())},jp.apply(t,arguments)}),[PC,IC]),XC(FC,(function e(){var t,n=[],r=[],i=[];function o(){var e=0,t=Math.max(1,r.length);for(i=new Array(t-1);++e<t;)i[e-1]=Sd(n,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:r[id(i,e)]}return a.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(ed),o()},a.range=function(e){return arguments.length?(r=Array.from(e),o()):r.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return e().domain(n).range(r).unknown(t)},Ip.apply(a,arguments)}),[BC,FC]),XC(NC,(function e(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[id(o,e,0,i)]:t}function u(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,u()):[n,r]},s.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,u()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return e().domain([n,r]).range(a).unknown(t)},Ip.apply(sm(s),arguments)}),BC),XC($C,(function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return null!=e&&e<=e?r[id(n,e,0,i)]:t}return o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(r).unknown(t)},Ip.apply(o,arguments)}),BC),XC(RC,(function e(){let t=[],n=[];function r(e){return null==e||e!=e?void 0:n[(id(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=HC(e),r):t.slice()},r.range=function(e){return arguments.length?(n=VC.call(e),r):n.slice()},r.tickFormat=function(e,n){return am(t[0],_v(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[LC,BC]),XC(TC,wm,LC),XC(zC,UC,LC),XC(OC,(function(){return qC(UC().paddingInner(1))}),LC);const iD=["clamp","base","constant","exponent"];function oD(e,t){const n=t[0],r=_v(t)-n;return function(t){return e(n+t*r)}}function aD(e,t,n){return Mp(lD(t||"rgb",n),e)}function sD(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function uD(e,t,n){const r=n-t;let i,o,a;return r&&Number.isFinite(r)?(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=XC(o)().domain([t,n]).range([0,1]),iD.forEach((t=>e[t]?a[t](e[t]()):0)),a):Xv(.5)}function lD(e,t){const n=Fd[function(e){return"interpolate"+e.toLowerCase().split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function cD(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function fD(e,t){for(const n in e)hD(n,t(e[n]))}const dD={};function hD(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(dD[e]=t,this):dD[e]}fD({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},cD),fD({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(e=>aD(cD(e))));const pD="symbol",mD=e=>gv(e)?e.map((e=>String(e))):String(e),gD=(e,t)=>e[1]-t[1],yD=(e,t)=>t[1]-e[1];function vD(e,t,n){let r;return cb(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(bb(e.domain())/n||1)))),yv(t)&&(r=t.step,t=t.interval),db(t)&&(t=e.type===AC?o_(t):e.type==CC?a_(t):ov("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function bD(e,t,n){let r=e.range(),i=r[0],o=_v(r),a=gD;if(i>o&&(r=o,o=i,i=r,a=yD),i=Math.floor(i),o=Math.ceil(o),t=t.map((t=>[t,e(t)])).filter((e=>i<=e[1]&&e[1]<=o)).sort(a).map((e=>e[0])),n>0&&t.length>1){const e=[t[0],_v(t)];for(;t.length>n&&t.length>=3;)t=t.filter(((e,t)=>!(t%2)));t.length<3&&(t=e)}return t}function xD(e,t){return e.bins?bD(e,e.bins):e.ticks?e.ticks(t):e.domain()}function wD(e,t,n,r,i,o){const a=t.type;let s=mD;if(a===AC||i===AC)s=e.timeFormat(r);else if(a===CC||i===CC)s=e.utcFormat(r);else if(tD(a)){const i=e.formatFloat(r);if(o||t.bins)s=i;else{const e=_D(t,n,!1);s=t=>e(t)?i(t):""}}else if(t.tickFormat){const i=t.domain();s=e.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=e.format(r));return s}function _D(e,t,n){const r=xD(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=e=>{let t=e/Math.pow(i,Math.round(Math.log(e)/o));return t*i<i-.5&&(t*=i),t<=a};return n?r.filter(s):s}const kD={[FC]:"quantiles",[NC]:"thresholds",[$C]:"domain"},ED={[FC]:"quantiles",[NC]:"domain"};function SD(e,t){return e.bins?function(e){const t=e.slice(0,-1);return t.max=_v(e),t}(e.bins):e.type===_C?_D(e,t,!0):kD[e.type]?function(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[kD[e.type]]()):xD(e,t)}function AD(e,t,n,r,i,o,a){const s=ED[t.type]&&o!==AC&&o!==CC?function(e,t,n){const r=t[ED[t.type]](),i=r.length;let o,a=i>1?r[1]-r[0]:r[0];for(o=1;o<i;++o)a=Math.min(a,r[o]-r[o-1]);return e.formatSpan(0,a,30,n)}(e,t,i):wD(e,t,n,i,o,a);return r===pD&&(e=>kD[e.type]||e.bins)(t)?CD(s):"discrete"===r?MD(s):FD(s)}const CD=e=>(t,n,r)=>{const i=DD(r[n+1],DD(r.max,1/0)),o=ND(t,e),a=ND(i,e);return o&&a?o+" – "+a:a?"< "+a:"≥ "+o},DD=(e,t)=>null!=e?e:t,MD=e=>(t,n)=>n?e(t):null,FD=e=>t=>e(t),ND=(e,t)=>Number.isFinite(e)?t(e):null;function $D(e,t,n,r){const i=r||t.type;return db(n)&&JC(i,jC)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==AC?n||i!==CC?AD(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function TD(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=$D(e,t,n.format,n.formatType);if(eD(t.type)){const e=SD(t).slice(1).map(i),n=e.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(e.join(", "))}if(ZC(t.type)){const e=t.domain(),n=e.length,o=n>r?e.slice(0,r-2).map(i).join(", ")+", ending with "+e.slice(-1).map(i):e.map(i).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(o)}{const e=t.domain();return"values from ".concat(i(e[0])," to ").concat(i(_v(e)))}}let OD=0;const zD="p_";function RD(e){return e&&e.gradient}function PD(e,t,n){const r=e.gradient;let i=e.id,o="radial"===r?zD:"";return i||(i=e.id="gradient_"+OD++,"radial"===r?(e.x1=LD(e.x1,.5),e.y1=LD(e.y1,.5),e.r1=LD(e.r1,0),e.x2=LD(e.x2,.5),e.y2=LD(e.y2,.5),e.r2=LD(e.r2,.5),o=zD):(e.x1=LD(e.x1,0),e.y1=LD(e.y1,0),e.x2=LD(e.x2,1),e.y2=LD(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function LD(e,t){return null!=e?e:t}function BD(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}const ID={basis:{curve:function(e){return new UA(e)}},"basis-closed":{curve:function(e){return new qA(e)}},"basis-open":{curve:function(e){return new WA(e)}},bundle:{curve:VA,tension:"beta",value:.85},cardinal:{curve:XA,tension:"tension",value:0},"cardinal-open":{curve:ZA,tension:"tension",value:0},"cardinal-closed":{curve:JA,tension:"tension",value:0},"catmull-rom":{curve:nC,tension:"alpha",value:.5},"catmull-rom-closed":{curve:iC,tension:"alpha",value:.5},"catmull-rom-open":{curve:aC,tension:"alpha",value:.5},linear:{curve:TA},"linear-closed":{curve:function(e){return new sC(e)}},monotone:{horizontal:function(e){return new hC(e)},vertical:function(e){return new dC(e)}},natural:{curve:function(e){return new mC(e)}},step:{curve:function(e){return new yC(e,.5)}},"step-after":{curve:function(e){return new yC(e,1)}},"step-before":{curve:function(e){return new yC(e,0)}}};function jD(e,t,n){var r=tb(ID,e)&&ID[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const UD={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},qD=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function WD(e){const t=[];let n,r,i,o,a,s,u,l,c,f;const d=e.slice().replace(qD[0],"###$1").split(qD[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=d[u],r=n.slice(1).trim().replace(qD[2],"$1###$2").replace(qD[3],"$1###$2").split(qD[4]),a=n.charAt(0),i=[a],l=0,f=r.length;l<f;++l)(o=+r[l])===o&&i.push(o);if(s=UD[a.toLowerCase()],i.length-1>s){const e=i.length;for(l=1,t.push([a].concat(i.slice(l,l+=s))),a="M"===a?"L":"m"===a?"l":a;l<e;l+=s)t.push([a].concat(i.slice(l,l+s)))}else t.push(i)}return t}const HD=Math.PI/180,VD=Math.PI/2,GD=2*Math.PI,YD=Math.sqrt(3)/2;var XD={},QD={},JD=[].join;function KD(e){const t=JD.call(e);if(QD[t])return QD[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7];const c=l*a,f=-u*s,d=u*a,h=l*s,p=Math.cos(i),m=Math.sin(i),g=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(.5*v),x=8/3*b*b/Math.sin(v),w=n+p-x*m,_=r+m+x*p,k=n+g,E=r+y,S=k+x*y,A=E-x*g;return QD[t]=[c*w+f*_,d*w+h*_,c*S+f*A,d*S+h*A,c*k+f*E,d*k+h*E]}const ZD=["l",0,0,0,0,0,0,0];function eM(e,t,n){const r=ZD[0]=e[0];if("a"===r||"A"===r)ZD[1]=t*e[1],ZD[2]=n*e[2],ZD[3]=e[3],ZD[4]=e[4],ZD[5]=e[5],ZD[6]=t*e[6],ZD[7]=n*e[7];else if("h"===r||"H"===r)ZD[1]=t*e[1];else if("v"===r||"V"===r)ZD[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)ZD[i]=(i%2==1?t:n)*e[i];return ZD}function tM(e,t,n,r,i,o){var a,s,u,l,c,f=null,d=0,h=0,p=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),e.beginPath&&e.beginPath();for(var g=0,y=t.length;g<y;++g){switch(a=t[g],1===i&&1===o||(a=eM(a,i,o)),a[0]){case"l":d+=a[1],h+=a[2],e.lineTo(d+n,h+r);break;case"L":d=a[1],h=a[2],e.lineTo(d+n,h+r);break;case"h":d+=a[1],e.lineTo(d+n,h+r);break;case"H":d=a[1],e.lineTo(d+n,h+r);break;case"v":h+=a[1],e.lineTo(d+n,h+r);break;case"V":h=a[1],e.lineTo(d+n,h+r);break;case"m":d+=a[1],h+=a[2],e.moveTo(d+n,h+r);break;case"M":d=a[1],h=a[2],e.moveTo(d+n,h+r);break;case"c":s=d+a[5],u=h+a[6],p=d+a[3],m=h+a[4],e.bezierCurveTo(d+a[1]+n,h+a[2]+r,p+n,m+r,s+n,u+r),d=s,h=u;break;case"C":d=a[5],h=a[6],p=a[3],m=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,p+n,m+r,d+n,h+r);break;case"s":s=d+a[3],u=h+a[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,d+a[1]+n,h+a[2]+r,s+n,u+r),p=d+a[1],m=h+a[2],d=s,h=u;break;case"S":s=a[3],u=a[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],m=a[2];break;case"q":s=d+a[3],u=h+a[4],p=d+a[1],m=h+a[2],e.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"Q":s=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],m=a[2];break;case"t":s=d+a[1],u=h+a[2],null===f[0].match(/[QqTt]/)?(p=d,m=h):"t"===f[0]?(p=2*d-l,m=2*h-c):"q"===f[0]&&(p=2*d-p,m=2*h-m),l=p,c=m,e.quadraticCurveTo(p+n,m+r,s+n,u+r),h=u,p=(d=s)+a[1],m=h+a[2];break;case"T":s=a[1],u=a[2],p=2*d-p,m=2*h-m,e.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"a":nM(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+d+n,a[7]+h+r]),d+=a[6],h+=a[7];break;case"A":nM(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),d=a[6],h=a[7];break;case"z":case"Z":e.closePath()}f=a}}function nM(e,t,n,r){const i=function(e,t,n,r,i,o,a,s,u){const l=JD.call(arguments);if(XD[l])return XD[l];const c=a*HD,f=Math.sin(c),d=Math.cos(c),h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5;let m=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,x=g*s+y*u,w=v*s+b*u,_=g*e+y*t,k=v*e+b*t;let E=1/((_-x)*(_-x)+(k-w)*(k-w))-.25;E<0&&(E=0);let S=Math.sqrt(E);o==i&&(S=-S);const A=.5*(x+_)-S*(k-w),C=.5*(w+k)+S*(_-x),D=Math.atan2(w-C,x-A);let M=Math.atan2(k-C,_-A)-D;M<0&&1===o?M+=GD:M>0&&0===o&&(M-=GD);const F=Math.ceil(Math.abs(M/(VD+.001))),N=[];for(let e=0;e<F;++e){const t=D+e*M/F,i=D+(e+1)*M/F;N[e]=[A,C,t,i,n,r,f,d]}return XD[l]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let t=0;t<i.length;++t){const n=KD(i[t]);e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}}const rM=.5773502691896257,iM={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,GD)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=YD*n,i=r-n*rM,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=YD*n,i=r-n*rM;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=YD*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=YD*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=YD*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=YD*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function oM(e){return tb(iM,e)?iM[e]:function(e){if(!tb(aM,e)){const t=WD(e);aM[e]={draw:function(e,n){tM(e,t,0,0,Math.sqrt(n)/2)}}}return aM[e]}(e)}var aM={};const sM=.448084975506;function uM(e){return e.x}function lM(e){return e.y}function cM(e){return e.width}function fM(e){return e.height}function dM(e){return"function"==typeof e?e:()=>+e}function hM(e,t,n){return Math.max(t,Math.min(e,n))}function pM(){var e=uM,t=lM,n=cM,r=fM,i=dM(0),o=i,a=i,s=i,u=null;function l(l,c,f){var d,h=null!=c?c:+e.call(this,l),p=null!=f?f:+t.call(this,l),m=+n.call(this,l),g=+r.call(this,l),y=Math.min(m,g)/2,v=hM(+i.call(this,l),0,y),b=hM(+o.call(this,l),0,y),x=hM(+a.call(this,l),0,y),w=hM(+s.call(this,l),0,y);if(u||(u=d=lA()),v<=0&&b<=0&&x<=0&&w<=0)u.rect(h,p,m,g);else{var _=h+m,k=p+g;u.moveTo(h+v,p),u.lineTo(_-b,p),u.bezierCurveTo(_-sM*b,p,_,p+sM*b,_,p+b),u.lineTo(_,k-w),u.bezierCurveTo(_,k-sM*w,_-sM*w,k,_-w,k),u.lineTo(h+x,k),u.bezierCurveTo(h+sM*x,k,h,k-sM*x,h,k-x),u.lineTo(h,p+v),u.bezierCurveTo(h,p+sM*v,h+sM*v,p,h+v,p),u.closePath()}if(d)return u=null,d+""||null}return l.x=function(t){return arguments.length?(e=dM(t),l):e},l.y=function(e){return arguments.length?(t=dM(e),l):t},l.width=function(e){return arguments.length?(n=dM(e),l):n},l.height=function(e){return arguments.length?(r=dM(e),l):r},l.cornerRadius=function(e,t,n,r){return arguments.length?(i=dM(e),o=null!=t?dM(t):i,s=null!=n?dM(n):i,a=null!=r?dM(r):o,l):i},l.context=function(e){return arguments.length?(u=null==e?null:e,l):u},l}function mM(){var e,t,n,r,i,o,a,s,u=null;function l(e,t,n){const r=n/2;if(i){var l=a-t,c=e-o;if(l||c){var f=Math.sqrt(l*l+c*c),d=(l/=f)*s,h=(c/=f)*s,p=Math.atan2(c,l);u.moveTo(o-d,a-h),u.lineTo(e-l*r,t-c*r),u.arc(e,t,r,p-Math.PI,p),u.lineTo(o+d,a+h),u.arc(o,a,s,p,p+Math.PI)}else u.arc(e,t,r,0,GD);u.closePath()}else i=1;o=e,a=t,s=r}function c(o){var a,s,c,f=o.length,d=!1;for(null==u&&(u=c=lA()),a=0;a<=f;++a)!(a<f&&r(s=o[a],a,o))===d&&(d=!d)&&(i=0),d&&l(+e(s,a,o),+t(s,a,o),+n(s,a,o));if(c)return u=null,c+""||null}return c.x=function(t){return arguments.length?(e=t,c):e},c.y=function(e){return arguments.length?(t=e,c):t},c.size=function(e){return arguments.length?(n=e,c):n},c.defined=function(e){return arguments.length?(r=e,c):r},c.context=function(e){return arguments.length?(u=null==e?null:e,c):u},c}function gM(e,t){return null!=e?e:t}const yM=e=>e.x||0,vM=e=>e.y||0,bM=e=>!(!1===e.defined),xM=function(){var e=EA,t=SA,n=cA(0),r=null,i=AA,o=CA,a=DA,s=null;function u(){var u,l,c=+e.apply(this,arguments),f=+t.apply(this,arguments),d=i.apply(this,arguments)-xA,h=o.apply(this,arguments)-xA,p=fA(h-d),m=h>d;if(s||(s=u=lA()),f<c&&(l=f,f=c,c=l),f>vA)if(p>wA-vA)s.moveTo(f*hA(d),f*gA(d)),s.arc(0,0,f,d,h,!m),c>vA&&(s.moveTo(c*hA(h),c*gA(h)),s.arc(0,0,c,h,d,m));else{var g,y,v=d,b=h,x=d,w=h,_=p,k=p,E=a.apply(this,arguments)/2,S=E>vA&&(r?+r.apply(this,arguments):yA(c*c+f*f)),A=mA(fA(f-c)/2,+n.apply(this,arguments)),C=A,D=A;if(S>vA){var M=kA(S/c*gA(E)),F=kA(S/f*gA(E));(_-=2*M)>vA?(x+=M*=m?1:-1,w-=M):(_=0,x=w=(d+h)/2),(k-=2*F)>vA?(v+=F*=m?1:-1,b-=F):(k=0,v=b=(d+h)/2)}var N=f*hA(v),$=f*gA(v),T=c*hA(w),O=c*gA(w);if(A>vA){var z,R=f*hA(b),P=f*gA(b),L=c*hA(x),B=c*gA(x);if(p<bA&&(z=MA(N,$,L,B,R,P,T,O))){var I=N-z[0],j=$-z[1],U=R-z[0],q=P-z[1],W=1/gA(_A((I*U+j*q)/(yA(I*I+j*j)*yA(U*U+q*q)))/2),H=yA(z[0]*z[0]+z[1]*z[1]);C=mA(A,(c-H)/(W-1)),D=mA(A,(f-H)/(W+1))}}k>vA?D>vA?(g=FA(L,B,N,$,f,D,m),y=FA(R,P,T,O,f,D,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),D<A?s.arc(g.cx,g.cy,D,dA(g.y01,g.x01),dA(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,D,dA(g.y01,g.x01),dA(g.y11,g.x11),!m),s.arc(0,0,f,dA(g.cy+g.y11,g.cx+g.x11),dA(y.cy+y.y11,y.cx+y.x11),!m),s.arc(y.cx,y.cy,D,dA(y.y11,y.x11),dA(y.y01,y.x01),!m))):(s.moveTo(N,$),s.arc(0,0,f,v,b,!m)):s.moveTo(N,$),c>vA&&_>vA?C>vA?(g=FA(T,O,R,P,c,-C,m),y=FA(N,$,L,B,c,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<A?s.arc(g.cx,g.cy,C,dA(g.y01,g.x01),dA(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,C,dA(g.y01,g.x01),dA(g.y11,g.x11),!m),s.arc(0,0,c,dA(g.cy+g.y11,g.cx+g.x11),dA(y.cy+y.y11,y.cx+y.x11),m),s.arc(y.cx,y.cy,C,dA(y.y11,y.x11),dA(y.y01,y.x01),!m))):s.arc(0,0,c,w,x,m):s.lineTo(T,O)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-bA/2;return[hA(r)*n,gA(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:cA(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:cA(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:cA(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:cA(+e),u):r},u.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:cA(+e),u):i},u.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:cA(+e),u):o},u.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:cA(+e),u):a},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u}().startAngle((e=>e.startAngle||0)).endAngle((e=>e.endAngle||0)).padAngle((e=>e.padAngle||0)).innerRadius((e=>e.innerRadius||0)).outerRadius((e=>e.outerRadius||0)).cornerRadius((e=>e.cornerRadius||0)),wM=PA().x(yM).y1(vM).y0((e=>(e.y||0)+(e.height||0))).defined(bM),_M=PA().y(vM).x1(yM).x0((e=>(e.x||0)+(e.width||0))).defined(bM),kM=RA().x(yM).y(vM).defined(bM),EM=pM().x(yM).y(vM).width((e=>e.width||0)).height((e=>e.height||0)).cornerRadius((e=>gM(e.cornerRadiusTopLeft,e.cornerRadius)||0),(e=>gM(e.cornerRadiusTopRight,e.cornerRadius)||0),(e=>gM(e.cornerRadiusBottomRight,e.cornerRadius)||0),(e=>gM(e.cornerRadiusBottomLeft,e.cornerRadius)||0)),SM=function(e,t){var n=null;function r(){var r;if(n||(n=r=lA()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:cA(e||LA),t="function"==typeof t?t:cA(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:cA(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:cA(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((e=>oM(e.shape||"circle"))).size((e=>gM(e.size,64))),AM=mM().x(yM).y(vM).defined(bM).size((e=>e.size||1));function CM(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function DM(e,t,n,r){return EM.context(e)(t,n,r)}var MM=1;function FM(){MM=1}function NM(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+MM++),a=i.clipping[o]||(i.clipping[o]={id:o});return qv(r)?a.path=r(null):CM(n)?a.path=DM(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function $M(e){this.clear(),e&&this.union(e)}function TM(e){this.mark=e,this.bounds=this.bounds||new $M}function OM(e){TM.call(this,e),this.items=this.items||[]}function zM(e){this._pending=0,this._loader=e||H_()}function RM(e){e._pending+=1}function PM(e){e._pending-=1}function LM(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}$M.prototype={clone:function(){return new $M(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*a+l,u*r+s*a+c,s*o-u*i+l,u*o+s*i+c,s*o-u*a+l,u*o+s*a+c]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},ob(OM,TM),zM.prototype={pending:function(){return this._pending},sanitizeURL:function(e){const t=this;return RM(t),t._loader.sanitize(e,{context:"href"}).then((e=>(PM(t),e))).catch((()=>(PM(t),null)))},loadImage:function(e){const t=this,n=bC();return RM(t),t._loader.sanitize(e,{context:"image"}).then((e=>{const r=e.href;if(!r||!n)throw{url:r};const i=new n,o=tb(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=o&&(i.crossOrigin=o),i.onload=()=>PM(t),i.onerror=()=>PM(t),i.src=r,i})).catch((e=>(PM(t),{complete:!1,width:0,height:0,src:e&&e.url||""})))},ready:function(){const e=this;return new Promise((t=>{!function n(r){e.pending()?setTimeout((()=>{n(!0)}),10):t(r)}(!1)}))}};const BM=GD-1e-8;let IM,jM,UM,qM,WM,HM,VM,GM;const YM=(e,t)=>IM.add(e,t),XM=(e,t)=>YM(jM=e,UM=t),QM=e=>YM(e,IM.y1),JM=e=>YM(IM.x1,e),KM=(e,t)=>WM*e+VM*t,ZM=(e,t)=>HM*e+GM*t,eF=(e,t)=>YM(KM(e,t),ZM(e,t)),tF=(e,t)=>XM(KM(e,t),ZM(e,t));function nF(e,t){return IM=e,t?(qM=t*HD,WM=GM=Math.cos(qM),HM=Math.sin(qM),VM=-HM):(WM=GM=1,qM=HM=VM=0),rF}const rF={beginPath:function(){},closePath:function(){},moveTo:tF,lineTo:tF,rect:function(e,t,n,r){qM?(eF(e+n,t),eF(e+n,t+r),eF(e,t+r),tF(e,t)):(YM(e+n,t+r),XM(e,t))},quadraticCurveTo:function(e,t,n,r){const i=KM(e,t),o=ZM(e,t),a=KM(n,r),s=ZM(n,r);iF(jM,i,a,QM),iF(UM,o,s,JM),XM(a,s)},bezierCurveTo:function(e,t,n,r,i,o){const a=KM(e,t),s=ZM(e,t),u=KM(n,r),l=ZM(n,r),c=KM(i,o),f=ZM(i,o);oF(jM,a,u,c,QM),oF(UM,s,l,f,JM),XM(c,f)},arc:function(e,t,n,r,i,o){if(r+=qM,i+=qM,jM=n*Math.cos(i)+e,UM=n*Math.sin(i)+t,Math.abs(i-r)>BM)YM(e-n,t-n),YM(e+n,t+n);else{const a=r=>YM(n*Math.cos(r)+e,n*Math.sin(r)+t);let s,u;if(a(r),a(i),i!==r)if((r%=GD)<0&&(r+=GD),(i%=GD)<0&&(i+=GD),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=GD,s=r-r%VD,u=0;u<4&&s>i;++u,s-=VD)a(s);else for(s=r-r%VD+VD,u=0;u<4&&s<i;++u,s+=VD)a(s)}}};function iF(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function oF(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let u,l=0,c=0;Math.abs(o)>1e-14?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),l=(-a+u)/o,c=(-a-u)/o)):l=.5*s/a,0<l&&l<1&&i(aF(l,e,t,n,r)),0<c&&c<1&&i(aF(c,e,t,n,r))}function aF(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var sF=(sF=vC(1,1))?sF.getContext("2d"):null;const uF=new $M;function lF(e){return function(t,n){if(!sF)return!0;e(sF,t),uF.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=uF;for(let e=i;e<=a;++e)for(let t=r;t<=o;++t)if(sF.isPointInPath(t,e))return!0;return!1}}function cF(e,t){return t.contains(e.x||0,e.y||0)}function fF(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(uF.set(n,r,n+i,r+o))}function dF(e,t){const n=e.x||0,r=e.y||0;return hF(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function hF(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:u}=e,l=r-t,c=i-n;let f,d,h,p,m=0,g=1;for(p=0;p<4;++p){if(0===p&&(f=-l,d=-(o-t)),1===p&&(f=l,d=s-t),2===p&&(f=-c,d=-(a-n)),3===p&&(f=c,d=u-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>g)return!1;h>m&&(m=h)}else if(f>0){if(h<m)return!1;h<g&&(g=h)}}return!0}function pF(e,t){e.globalCompositeOperation=t.blend||"source-over"}function mF(e,t){return null==e?t:e}function gF(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function yF(e,t,n){return RD(n)?function(e,t,n){const r=n.width(),i=n.height();let o;if("radial"===t.gradient)o=e.createRadialGradient(n.x1+mF(t.x1,.5)*r,n.y1+mF(t.y1,.5)*i,Math.max(r,i)*mF(t.r1,0),n.x1+mF(t.x2,.5)*r,n.y1+mF(t.y2,.5)*i,Math.max(r,i)*mF(t.r2,.5));else{const a=mF(t.x1,0),s=mF(t.y1,0),u=mF(t.x2,1),l=mF(t.y2,0);if(a!==u&&s!==l&&r!==i){const n=vC(Math.ceil(r),Math.ceil(i)),o=n.getContext("2d");return o.scale(r,i),o.fillStyle=gF(o.createLinearGradient(a,s,u,l),t.stops),o.fillRect(0,0,r,i),e.createPattern(n,"no-repeat")}o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+u*r,n.y1+l*i)}return gF(o,t.stops)}(e,n,t.bounds):n}function vF(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=yF(e,t,t.fill),!0)}var bF=[];function xF(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=yF(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||bF),e.lineDashOffset=t.strokeDashOffset||0),!0))}function wF(e,t){return e.zindex-t.zindex||e.index-t.index}function _F(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,o=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&o.push(t);return e.zdirty=!1,e.zitems=o.sort(wF)}function kF(e,t){var n,r,i=e.items;if(!i||!i.length)return;const o=_F(e);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=o}for(n=0,r=i.length;n<r;++n)t(i[n])}function EF(e,t){var n,r,i=e.items;if(!i||!i.length)return null;const o=_F(e);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===o)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function SF(e){return function(t,n,r){kF(n,(n=>{r&&!r.intersects(n.bounds)||AF(e,t,n,n)}))}}function AF(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(pF(t,n),n.fill&&vF(t,n,i)&&t.fill(),n.stroke&&xF(t,n,i)&&t.stroke()))}function CF(e){return e=e||dv,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,EF(n,(n=>{const s=n.bounds;if((!s||s.contains(o,a))&&s)return e(t,n,r,i,o,a)?n:void 0}))}}function DF(e,t){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(a=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(l&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o))}}function MF(e){return CF(DF(e))}function FF(e,t){return"translate("+e+","+t+")"}function NF(e){return"rotate("+e+")"}function $F(e){return FF(e.x||0,e.y||0)}function TF(e,t,n){function r(e,n){var r=n.x||0,i=n.y||0,o=n.angle||0;e.translate(r,i),o&&e.rotate(o*=HD),e.beginPath(),t(e,n),o&&e.rotate(-o),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return FF(e.x||0,e.y||0)+(e.angle?" "+NF(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(nF(e,n.angle),n),LM(e,n).translate(n.x||0,n.y||0)},draw:SF(r),pick:MF(r),isect:n||lF(r)}}var OF=TF("arc",(function(e,t){return xM.context(e)(t)}));function zF(e,t,n){function r(e,n){e.beginPath(),t(e,n)}const i=DF(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(nF(e),r),LM(e,r[0]))},draw:(o=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||AF(o,e,t.items[0],t.items)}),pick:function(e,t,n,r,o,a){var s=t.items,u=t.bounds;return!s||!s.length||u&&!u.contains(o,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:cF,tip:n};var o}var RF=zF("area",(function(e,t){const n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?_M:wM).curve(jD(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],o="horizontal"===e[0].orient?"y":"x",a=e.length,s=1/0;--a>=0;)!1!==e[a].defined&&(r=Math.abs(e[a][o]-i))<s&&(s=r,n=e[a]);return n}));function PF(e,t){e.beginPath(),CM(t)?DM(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function LF(e){const t=mF(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function BF(e,t){const n=LF(t);e("d",DM(null,t,n,n))}function IF(e,t,n,r){const i=LF(t);e.beginPath(),DM(e,t,(n||0)+i,(r||0)+i)}const jF=DF(IF),UF=DF(IF,!1),qF=DF(IF,!0);var WF={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",$F(t))},bound:function(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let t=0;t<r;++t)e.union(n[t].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),LM(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){kF(t,(t=>{const r=t.x||0,i=t.y||0,o=t.strokeForeground,a=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&a&&(IF(e,t,r,i),pF(e,t),t.fill&&vF(e,t,a)&&e.fill(),t.stroke&&!o&&xF(e,t,a)&&e.stroke()),e.save(),e.translate(r,i),t.clip&&PF(e,t),n&&n.translate(-r,-i),kF(t,(t=>{this.draw(e,t,n)})),n&&n.translate(r,i),e.restore(),o&&t.stroke&&a&&(IF(e,t,r,i),pF(e,t),xF(e,t,a)&&e.stroke())}))},pick:function(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return EF(t,(u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,m&&CM(u)&&!qF(e,u,a,s))return e.restore(),null;const g=u.strokeForeground,y=!1!==t.interactive;return y&&g&&u.stroke&&UF(e,u,a,s)?(e.restore(),u):(l=EF(u,(e=>function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,c,f)?this.pick(e,n,r,c,f):null)),!l&&y&&(u.fill||!g&&u.stroke)&&jF(e,u,a,s)&&(l=u),e.restore(),l||null)}))},isect:fF,content:function(e,t,n){e("clip-path",t.clip?NM(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),BF(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?BF(e,t):e("d","")}},HF={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function VF(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((t=>{e.image=t,e.image.url=e.url}))),n}function GF(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function YF(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function XF(e,t){return"center"===e?t/2:"right"===e?t:0}function QF(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var JF={type:"image",tag:"image",nested:!1,attr:function(e,t,n){const r=VF(t,n),i=GF(t,r),o=YF(t,r),a=(t.x||0)-XF(t.align,i),s=(t.y||0)-QF(t.baseline,o);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",HF["xmlns:xlink"],"xlink:href"),e("transform",FF(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){const n=t.image,r=GF(t,n),i=YF(t,n),o=(t.x||0)-XF(t.align,r),a=(t.y||0)-QF(t.baseline,i);return e.set(o,a,o+r,a+i)},draw:function(e,t,n){kF(t,(t=>{if(n&&!n.intersects(t.bounds))return;const r=VF(t,this);let i=GF(t,r),o=YF(t,r);if(0===i||0===o)return;let a,s,u,l,c=(t.x||0)-XF(t.align,i),f=(t.y||0)-QF(t.baseline,o);!1!==t.aspect&&(s=r.width/r.height,u=t.width/t.height,s==s&&u==u&&s!==u&&(u<s?(l=i/s,f+=(o-l)/2,o=l):(l=o*s,c+=(i-l)/2,i=l))),(r.complete||r.toDataURL)&&(pF(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(r,c,f,i,o))}))},pick:CF(),isect:dv,get:VF,xOffset:XF,yOffset:QF},KF=zF("line",(function(e,t){const n=t[0],r=n.interpolate||"linear";return kM.curve(jD(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(!1!==e[o].defined&&(n=e[o].x-t[0])*n+(r=e[o].y-t[1])*r<i)return e[o];return null}));function ZF(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*HD,u=t.pathCache;u&&u.path===n||((t.pathCache=u=WD(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),tM(e,u,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):tM(e,u,r,i,o,a)}var eN={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return FF(e.x||0,e.y||0)+(e.angle?" "+NF(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return ZF(nF(e,t.angle),t)?e.set(0,0,0,0):LM(e,t,!0)},draw:SF(ZF),pick:MF(ZF),isect:lF(ZF)};function tN(e,t){e.beginPath(),DM(e,t)}var nN={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",DM(null,t))},bound:function(e,t){var n,r;return LM(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:SF(tN),pick:MF(tN),isect:fF};function rN(e,t,n){var r,i,o,a;return!(!t.stroke||!xF(e,t,n))&&(r=t.x||0,i=t.y||0,o=null!=t.x2?t.x2:r,a=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0)}var iN={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",$F(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return LM(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){kF(t,(t=>{if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&rN(e,t,r)&&(pF(e,t),e.stroke())}}))},pick:CF((function(e,t,n,r){return!!e.isPointInStroke&&(rN(e,t,1)&&e.isPointInStroke(n,r))})),isect:dF},oN=TF("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),aN=TF("symbol",(function(e,t){return SM.context(e)(t)}),cF);const sN=mb();var uN={height:pN,measureWidth:dN,estimateWidth:cN,width:cN,canvas:lN};function lN(e){uN.width=e&&sF?dN:cN}function cN(e,t){return fN(vN(e,t),pN(e))}function fN(e,t){return~~(.8*e.length*t)}function dN(e,t){return pN(e)<=0||!(t=vN(e,t))?0:hN(t,xN(e))}function hN(e,t){const n=`(${t}) ${e}`;let r=sN.get(n);return void 0===r&&(sF.font=t,r=sF.measureText(e).width,sN.set(n,r)),r}function pN(e){return null!=e.fontSize?+e.fontSize||0:11}function mN(e){return null!=e.lineHeight?e.lineHeight:pN(e)+2}function gN(e){return t=e.lineBreak&&e.text&&!gv(e.text)?e.text.split(e.lineBreak):e.text,gv(t)?t.length>1?t:t[0]:t;var t}function yN(e){const t=gN(e);return(gv(t)?t.length-1:0)*mN(e)}function vN(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(uN.width===dN){const t=xN(e);return e=>hN(e,t)}{const t=pN(e);return e=>fN(e,t)}}(e);if(r(t)<n)return t;var i,o=e.ellipsis||"…",a="rtl"===e.dir,s=0,u=t.length;if(n-=r(o),a){for(;s<u;)i=s+u>>>1,r(t.slice(i))>n?s=i+1:u=i;return o+t.slice(s)}for(;s<u;)i=1+(s+u>>>1),r(t.slice(0,i))<n?s=i:u=i-1;return t.slice(0,s)+o}(e,n):n}function bN(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function xN(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+pN(e)+"px "+bN(e,t)}function wN(e){var t=e.baseline,n=pN(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*mN(e):"line-bottom"===t?.29*n-.5*mN(e):0)}lN(!0);const _N={left:"start",center:"middle",right:"end"},kN=new $M;function EN(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-VD,n+=i*Math.cos(t),r+=i*Math.sin(t)),kN.x1=n,kN.y1=r,kN}function SN(e,t,n){var r,i=uN.height(t),o=t.align,a=EN(t),s=a.x1,u=a.y1,l=t.dx||0,c=(t.dy||0)+wN(t)-Math.round(.8*i),f=gN(t);if(gv(f)?(i+=mN(t)*(f.length-1),r=f.reduce(((e,n)=>Math.max(e,uN.width(t,n))),0)):r=uN.width(t,f),"center"===o?l-=r/2:"right"===o&&(l-=r),e.set(l+=s,c+=u,l+r,c+i),t.angle&&!n)e.rotate(t.angle*HD,s,u);else if(2===n)return e.rotatedPoints(t.angle*HD,s,u);return e}var AN={arc:OF,area:RF,group:WF,image:JF,line:KF,path:eN,rect:nN,rule:iN,shape:oN,symbol:aN,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+wN(t),o=EN(t),a=o.x1,s=o.y1,u=t.angle||0;e("text-anchor",_N[t.align]||"start"),u?(n=FF(a,s)+" "+NF(u),(r||i)&&(n+=" "+FF(r,i))):n=FF(a+r,s+i),e("transform",n)},bound:SN,draw:function(e,t,n){kF(t,(t=>{var r,i,o,a,s,u,l,c=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===c||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=xN(t),e.textAlign=t.align||"left",i=(r=EN(t)).x1,o=r.y1,t.angle&&(e.save(),e.translate(i,o),e.rotate(t.angle*HD),i=o=0),i+=t.dx||0,o+=(t.dy||0)+wN(t),u=gN(t),pF(e,t),gv(u))for(s=mN(t),a=0;a<u.length;++a)l=vN(t,u[a]),t.fill&&vF(e,t,c)&&e.fillText(l,i,o),t.stroke&&xF(e,t,c)&&e.strokeText(l,i,o),o+=s;else l=vN(t,u),t.fill&&vF(e,t,c)&&e.fillText(l,i,o),t.stroke&&xF(e,t,c)&&e.strokeText(l,i,o);t.angle&&e.restore()}}))},pick:CF((function(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=EN(t),s=a.x1,u=a.y1,l=SN(kN,t,1),c=-t.angle*HD,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(s-f*s+d*u),p=d*i+f*o+(u-d*s-f*u);return l.contains(h,p)})),isect:function(e,t){const n=SN(kN,e,2);return hF(t,n[0],n[1],n[2],n[3])||hF(t,n[0],n[1],n[4],n[5])||hF(t,n[4],n[5],n[6],n[7])||hF(t,n[2],n[3],n[6],n[7])}},trail:zF("trail",(function(e,t){return AM.context(e)(t)}),(function(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))};function CN(e,t,n){var r=AN[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new $M),e,n)}var DN={mark:null};function MN(e,t,n){var r,i,o,a,s=AN[e.marktype],u=s.bound,l=e.items,c=l&&l.length;if(s.nested)return c?o=l[0]:(DN.mark=e,o=DN),a=CN(o,u,n),t=t&&t.union(a)||a;if(t=t||e.bounds&&e.bounds.clear()||new $M,c)for(r=0,i=l.length;r<i;++r)t.union(CN(l[r],u,n));return e.bounds=t}const FN=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function NN(e,t){return JSON.stringify(e,FN,t)}function $N(e){return TN("string"==typeof e?JSON.parse(e):e)}function TN(e){var t,n,r,i=e.marktype,o=e.items;if(o)for(n=0,r=o.length;n<r;++n)t=i?"mark":"group",o[n][t]=e,o[n].zindex&&(o[n][t].zdirty=!0),"group"===(i||t)&&TN(o[n]);return i&&MN(e),e}function ON(e){arguments.length?this.root=$N(e):(this.root=zN({marktype:"group",name:"root",role:"frame"}),this.root.items=[new OM(this.root)])}function zN(e,t){const n={bounds:new $M,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function RN(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function PN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function LN(e,t,n,r){var i,o=e.childNodes[t];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=RN(e.ownerDocument,n,r),e.insertBefore(o,i)),o}function BN(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function IN(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function jN(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function UN(e,t){this._active=null,this._handlers={},this._loader=e||H_(),this._tooltip=t||qN}function qN(e,t,n,r){e.element().setAttribute("title",r||"")}function WN(e){this._el=null,this._bgcolor=null,this._loader=new zM(e)}ON.prototype={toJSON:function(e){return NN(this.root,e||0)},mark:function(e,t,n){const r=zN(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},UN.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const e in t)n.push(...t[e]);return n},eventName:function(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((t=>{const n=new MouseEvent(e.type,e),r=RN(null,"a");for(const e in t)r.setAttribute(e,t[e]);r.dispatchEvent(n)})).catch((()=>{}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,o,a=e&&e.mark;if(a&&(i=AN[a.marktype]).tip){for((o=jN(t,n))[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=i.tip(a.items,o)}return e}(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,u+=e.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}}},WN.prototype={initialize:function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render:function(){},renderAsync:function(e){const t=this.render(e);return this._ready?this._ready.then((()=>t)):Promise.resolve(t)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const e=n._call;n._ready=n._loader.ready().then((t=>{t&&e(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};const HN="dragenter",VN="dragleave",GN="dragover",YN="mousedown",XN="mousemove",QN="mouseout",JN="mouseover",KN="click",ZN="mousewheel",e$="touchstart",t$="touchmove",n$="touchend",r$=XN,i$=QN,o$=KN;function a$(e,t){UN.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function s$(e,t){(e=>e===e$||e===t$||e===n$?[e$,t$,n$]:[e])(t).forEach((t=>function(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?n=>e[t](n):n=>e.fire(t,n)))}(e,t)))}function u$(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(t,r)),this.fire(e,r)}}function l$(e){return function(t){this.fire(e,t),this._active=null}}ob(a$,UN,{initialize:function(e,t,n){return this._canvas=e&&PN(e,"canvas"),[KN,YN,XN,QN,VN].forEach((e=>s$(this,e))),UN.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",HN,VN,GN,YN,"mouseup",XN,QN,JN,KN,"dblclick","wheel",ZN,e$,t$,n$],DOMMouseScroll:function(e){this.fire(ZN,e)},mousemove:u$(XN,JN,QN),dragover:u$(GN,HN,VN),mouseout:l$(QN),dragleave:l$(VN),mousedown:function(e){this._down=this._active,this.fire(YN,e)},click:function(e){this._down===this._active&&(this.fire(KN,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(e$,e,!0)},touchmove:function(e){this.fire(t$,e,!0)},touchend:function(e){this.fire(n$,e,!0),this._touch=null},fire:function(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===o$&&r&&r.href?this.handleHref(t,r,r.href):e!==r$&&e!==i$||this.handleTooltip(t,r,e!==i$),i)for(let e=0,n=i.length;e<n;++e)i[e].handler.call(this._obj,t,r)},on:function(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(s$(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent:function(e){const t=jN(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,i){const o=this.context();return AN[e.marktype].pick.call(this,o,e,t,n,r,i)}});var c$="undefined"!=typeof window&&window.devicePixelRatio||1;function f$(e){WN.call(this,e),this._options={},this._redraw=!1,this._dirty=new $M,this._tempb=new $M}const d$=WN.prototype;function h$(e,t){UN.call(this,e,t);const n=this;n._hrefHandler=p$(n,((e,t)=>{t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=p$(n,((e,t)=>{n.handleTooltip(e,t,e.type!==i$)}))}ob(f$,WN,{initialize:function(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:vC(1,1,this._options.type),e&&this._canvas&&(BN(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),d$.initialize.call(this,e,t,n,r,i)},resize:function(e,t,n,r){if(d$.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,i,o){const a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,s=e.getContext("2d"),u=a?c$:i;e.width=t*u,e.height=n*u;for(const e in o)s[e]=o[e];a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const e=this._options.externalContext;e||ov("CanvasRenderer is missing a valid canvas or context"),e.scale(this._scale,this._scale),e.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,a=(s=n,u=r,l=i,(new $M).set(0,0,u,l).translate(-s[0],-s[1]));var s,u,l;t.save();const c=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,c),t.restore(),o.clear(),this},draw:function(e,t,n){const r=AN[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),qv(n)?(e.beginPath(),n(e),e.clip()):PF(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear:function(e,t,n,r){const i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(e,t,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});const p$=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};ob(h$,UN,{initialize:function(e,t,n){let r=this._svg;return r&&(r.removeEventListener(o$,this._hrefHandler),r.removeEventListener(r$,this._tooltipHandler),r.removeEventListener(i$,this._tooltipHandler)),this._svg=r=e&&PN(e,"svg"),r&&(r.addEventListener(o$,this._hrefHandler),r.addEventListener(r$,this._tooltipHandler),r.addEventListener(i$,this._tooltipHandler)),UN.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const i={type:e,handler:t,listener:p$(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off:function(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const m$="aria-hidden",g$="aria-label",y$="role",v$="aria-roledescription",b$="graphics-object",x$="graphics-symbol",w$=(e,t,n)=>({[y$]:e,[v$]:t,[g$]:n||void 0}),_$=Sb(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),k$={axis:{desc:"axis",caption:function(e){const t=e.datum,n=e.orient,r=t.title?D$(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(r?` titled '${r}'`:"")+` for a ${ZC(s)?"discrete":s} scale`+` with ${TD(a,o,e)}`}},legend:{desc:"legend",caption:function(e){const t=e.datum,n=t.title?D$(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,u=a.dataflow.locale();return l=r,(l.length?l[0].toUpperCase()+l.slice(1):l)+(n?` titled '${n}'`:"")+` for ${function(e){return(e=e.map((e=>e+("fill"===e||"stroke"===e?" color":"")))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+_v(e)}(o)}`+` with ${TD(u,s,e)}`;var l}},"title-text":{desc:"title",caption:e=>`Title text '${C$(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${C$(e)}'`}},E$={ariaRole:y$,ariaRoleDescription:v$,description:g$};function S$(e,t){const n=!1===t.aria;if(e(m$,n||void 0),n||null==t.description)for(const t in E$)e(E$[t],void 0);else{const n=t.mark.marktype;e(g$,t.description),e(y$,t.ariaRole||("group"===n?b$:x$)),e(v$,t.ariaRoleDescription||`${n} mark`)}}function A$(e){return!1===e.aria?{[m$]:!0}:_$[e.role]?null:k$[e.role]?function(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return w$(t.role||x$,t.desc,n.description||r(n))}catch(e){return null}}(e,k$[e.role]):function(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some((e=>null!=e.description&&!1!==e.aria));return w$(n?b$:x$,`${t} mark container`,e.description)}(e)}function C$(e){return jv(e.text).join(" ")}function D$(e){try{return jv(_v(e.items).items[0].text).join(" ")}catch(e){return null}}const M$=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function F$(){let e="",t="",n="";const r=[],i=()=>t=n="",o=(e,n)=>{var r;return null!=n&&(t+=` ${e}="${r=n,M$(r).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}"`),a},a={open:function(s,...u){(o=>{t&&(e+=`${t}>${n}`,i()),r.push(o)})(s),t="<"+s;for(const e of u)for(const t in e)o(t,e[t]);return a},close:function(){const o=r.pop();return e+=t?t+(n?`>${n}</${o}>`:"/>"):`</${o}>`,i(),a},attr:o,text:e=>(n+=M$(e),a),toString:()=>e};return a}const N$=e=>$$(F$(),e)+"";function $$(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let t=0;t<r;++t)e.attr(n[t].name,n[t].value)}if(t.hasChildNodes()){const n=t.childNodes,r=n.length;for(let t=0;t<r;t++){const r=n[t];3===r.nodeType?e.text(r.nodeValue):$$(e,r)}}return e.close()}const T$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},O$={fill:"none","stroke-miterlimit":10},z$="http://www.w3.org/2000/xmlns/",R$=HF.xmlns;function P$(e){WN.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const L$=WN.prototype;function B$(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function I$(e,t,n){let r,i,o;if("radial"===t.gradient){let r=LN(e,n++,"pattern",R$);Y$(r,{id:zD+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=LN(r,0,"rect",R$),Y$(r,{width:1,height:1,fill:`url(${Q$()}#${t.id})`}),Y$(e=LN(e,n++,"radialGradient",R$),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else Y$(e=LN(e,n++,"linearGradient",R$),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=LN(e,r,"stop",R$),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return BN(e,r),n}function j$(e,t,n){let r;return(e=LN(e,n,"clipPath",R$)).setAttribute("id",t.id),t.path?(r=LN(e,0,"path",R$),r.setAttribute("d",t.path)):(r=LN(e,0,"rect",R$),Y$(r,{x:0,y:0,width:t.width,height:t.height})),BN(e,1),n+1}function U$(e,t,n,r,i){let o,a=e._svg;if(!a&&(o=t.ownerDocument,a=RN(o,r,R$),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===r))){const t=RN(o,"path",R$);a.appendChild(t),t.__data__=e;const n=RN(o,"g",R$);a.appendChild(n),n.__data__=e;const r=RN(o,"path",R$);a.appendChild(r),r.__data__=e,r.__values__={fill:"default"}}return(a.ownerSVGElement!==i||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}ob(P$,WN,{initialize:function(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=LN(e,0,"svg",R$),this._svg.setAttributeNS(z$,"xmlns",R$),this._svg.setAttributeNS(z$,"xmlns:xlink",HF["xmlns:xlink"]),this._svg.setAttribute("version",HF.version),this._svg.setAttribute("class","marks"),BN(e,1),this._root=LN(this._svg,0,"g",R$),Y$(this._root,O$),BN(this._svg,1)),this.background(this._bgcolor),L$.initialize.call(this,e,t,n,r,i)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),L$.background.apply(this,arguments)},resize:function(e,t,n,r){return L$.resize.call(this,e,t,n,r),this._svg&&(Y$(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=LN(e,0,"rect",R$),Y$(n,{width:this._width,height:this._height,fill:t}));const r=N$(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render:function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),BN(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,a,s,u;for(a=0,s=e.length;a<s;++a)n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=AN[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,B$(n,t),r.items.forEach((e=>{e.dirty=t}))),r.zdirty||(n.exit?(o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null):(n=o.nested?r.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,B$(n,t)),n._update=t)));return!this._dirtyAll},mark:function(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=AN[t.marktype],o=!1===t.interactive?"none":null,a="g"===i.tag;let s=null,u=0;const l=U$(t,e,n,"g",r);l.setAttribute("class",IN(t));const c=A$(t);for(const e in c)X$(l,e,c[e]);a||X$(l,"pointer-events",o),X$(l,"clip-path",t.clip?NM(this,t,t.group):null);const f=e=>{const t=this.isDirty(e),n=U$(e,l,s,i.tag,r);t&&(this._update(i,n,e),a&&function(e,t,n){t=t.lastChild.previousSibling;let r,i=0;kF(n,(n=>{r=e.mark(t,n,r),++i})),BN(t,1+i)}(this,n,e)),s=n,++u};return i.nested?t.items.length&&f(t.items[0]):kF(t,f),BN(l,u),l},_update:function(e,t,n){q$=t,W$=t.__values__,S$(V$,n),e.attr(V$,n,this);const r=H$[e.type];r&&r.call(this,e,t,n),q$&&this.style(q$,n)},style:function(e,t){if(null!=t)for(const n in T$){let r="font"===n?bN(t):t[n];if(r===W$[n])continue;const i=T$[n];null==r?e.removeAttribute(i):(RD(r)&&(r=PD(r,this._defs.gradient,Q$())),e.setAttribute(i,r+"")),W$[n]=r}},defs:function(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=LN(e,1,"defs",R$)),r=I$(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=LN(e,1,"defs",R$)),r=j$(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):BN(n,r))},_clearDefs:function(){const e=this._defs;e.gradient={},e.clipping={}}});let q$=null,W$=null;const H$={group:function(e,t,n){const r=q$=t.childNodes[2];W$=r.__values__,e.foreground(V$,n,this),W$=t.__values__,q$=t.childNodes[1],e.content(V$,n,this);const i=q$=t.childNodes[0];e.background(V$,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==W$.events&&(X$(r,"pointer-events",o),X$(i,"pointer-events",o),W$.events=o),n.strokeForeground&&n.stroke){const e=n.fill;X$(r,"display",null),this.style(i,n),X$(i,"stroke",null),e&&(n.fill=null),W$=r.__values__,this.style(r,n),e&&(n.fill=e),q$=null}else X$(r,"display","none")},image:function(e,t,n){!1===n.smooth?(G$(t,"image-rendering","optimizeSpeed"),G$(t,"image-rendering","pixelated")):G$(t,"image-rendering",null)},text:function(e,t,n){const r=gN(n);let i,o,a,s;gv(r)?(o=r.map((e=>vN(n,e))),i=o.join("\n"),i!==W$.text&&(BN(t,0),a=t.ownerDocument,s=mN(n),o.forEach(((e,r)=>{const i=RN(a,"tspan",R$);i.__data__=n,i.textContent=e,r&&(i.setAttribute("x",0),i.setAttribute("dy",s)),t.appendChild(i)})),W$.text=i)):(o=vN(n,r),o!==W$.text&&(t.textContent=o,W$.text=o)),X$(t,"font-family",bN(n)),X$(t,"font-size",pN(n)+"px"),X$(t,"font-style",n.fontStyle),X$(t,"font-variant",n.fontVariant),X$(t,"font-weight",n.fontWeight)}};function V$(e,t,n){t!==W$[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(q$,e,t,n):X$(q$,e,t),W$[e]=t)}function G$(e,t,n){n!==W$[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),W$[t]=n)}function Y$(e,t){for(const n in t)X$(e,n,t[n])}function X$(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function Q$(){let e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function J$(e){WN.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}ob(J$,WN,{svg:function(){return this._text},_render:function(e){const t=F$();t.open("svg",Jv({},HF,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",O$,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){const n=AN[t.marktype],r=n.tag,i=[S$,n.attr];e.open("g",{class:IN(t),"clip-path":t.clip?NM(this,t,t.group):null},A$(t),{"pointer-events":"g"!==r&&!1===t.interactive?"none":null});const o=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,"g"!==r?r:null)),"text"===r){const t=gN(o);if(gv(t)){const n={x:0,dy:mN(o)};for(let r=0;r<t.length;++r)e.open("tspan",r?n:null).text(vN(o,t[r])).close()}else e.text(vN(o,t))}else if("g"===r){const r=o.strokeForeground,i=o.fill,a=o.stroke;r&&a&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),kF(o,(t=>this.mark(e,t))),e.close(),r&&a?(i&&(o.fill=null),o.stroke=a,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),i&&(o.fill=i)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):kF(t,o),e.close()},href:function(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then((e=>{e["xlink:href"]=e.href,e.href=null,(this._hrefs||(this._hrefs={}))[t]=e}))}return null},attr:function(e,t,n,r){const i={},o=(e,t,n,r)=>{i[r||e]=t};return Array.isArray(n)?n.forEach((e=>e(o,t,this))):n(o,t,this),r&&function(e,t,n,r,i){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=bN(t),e["font-size"]=pN(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const n in T$){let r=t[n];const o=T$[n];("transparent"!==r||"fill"!==o&&"stroke"!==o)&&null!=r&&(RD(r)&&(r=PD(r,i.gradient,"")),e[o]=r)}}(i,t,e,r,this._defs),i},defs:function(e){const t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){e.open("defs");for(const n in t){const r=t[n],i=r.stops;"radial"===r.gradient?(e.open("pattern",{id:zD+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),e.close(),e.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let t=0;t<i.length;++t)e.open("stop",{offset:i[t].offset,"stop-color":i[t].color}).close();e.close()}for(const t in n){const r=n[t];e.open("clipPath",{id:t}),r.path?e.open("path",{d:r.path}).close():e.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),e.close()}e.close()}}});const K$="canvas",Z$="none",eT={Canvas:K$,PNG:"png",SVG:"svg",None:Z$},tT={};function nT(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(tT[e]=t,this):tT[e]}function rT(e,t,n){const r=[],i=(new $M).union(t),o=e.marktype;return o?iT(e,i,n,r):"group"===o?oT(e,i,n,r):ov("Intersect scene must be mark node or group item.")}function iT(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if("group"===o)for(;s<a;++s)oT(i[s],t,n,r);else for(const e=AN[o].isect;s<a;++s){const n=i[s];aT(n,t,e)&&r.push(n)}}return r}function oT(e,t,n,r){n&&n(e.mark)&&aT(e,t,AN.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let e=0;e<o;++e)iT(i[e],t,n,r);t.translate(a,s)}return r}function aT(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}tT.canvas=tT.png={renderer:f$,headless:f$,handler:a$},tT.svg={renderer:P$,headless:J$,handler:h$},tT.none={};const sT=new $M;function uT(e){const t=e.clip;if(qv(t))t(nF(sT.clear()));else{if(!t)return;sT.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(sT)}function lT(e,t,n){return e===t||("path"===n?cT(e,t):e instanceof Date&&t instanceof Date?+e==+t:cb(e)&&cb(t)?Math.abs(e-t)<=1e-9:e&&t&&(yv(e)||yv(t))?function(e,t){var n,r,i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(!lT(e[n=i[r]],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function cT(e,t){return lT(WD(e),WD(t))}function fT(){FM(),OD=0}t(rA,"textMetrics",(function(){return uN})),t(rA,"serializeXML",(function(){return N$})),t(rA,"sceneZOrder",(function(){return _F})),t(rA,"sceneVisit",(function(){return kF})),t(rA,"sceneToJSON",(function(){return NN})),t(rA,"scenePickVisit",(function(){return EF})),t(rA,"sceneFromJSON",(function(){return $N})),t(rA,"sceneEqual",(function(){return lT})),t(rA,"resetSVGDefIds",(function(){return fT})),t(rA,"resetSVGClipId",(function(){return FM})),t(rA,"renderModule",(function(){return nT})),t(rA,"point",(function(){return jN})),t(rA,"pathTrail",(function(){return mM})),t(rA,"pathSymbols",(function(){return oM})),t(rA,"pathRender",(function(){return tM})),t(rA,"pathRectangle",(function(){return pM})),t(rA,"pathParse",(function(){return WD})),t(rA,"pathEqual",(function(){return cT})),t(rA,"pathCurves",(function(){return jD})),t(rA,"multiLineOffset",(function(){return yN})),t(rA,"markup",(function(){return F$})),t(rA,"lineHeight",(function(){return mN})),t(rA,"intersectRule",(function(){return dF})),t(rA,"intersectPoint",(function(){return cF})),t(rA,"intersectPath",(function(){return lF})),t(rA,"intersectBoxLine",(function(){return hF})),t(rA,"intersect",(function(){return rT})),t(rA,"fontSize",(function(){return pN})),t(rA,"fontFamily",(function(){return bN})),t(rA,"font",(function(){return xN})),t(rA,"domFind",(function(){return PN})),t(rA,"domCreate",(function(){return RN})),t(rA,"domClear",(function(){return BN})),t(rA,"domChild",(function(){return LN})),t(rA,"boundStroke",(function(){return LM})),t(rA,"boundMark",(function(){return MN})),t(rA,"boundItem",(function(){return CN})),t(rA,"boundContext",(function(){return nF})),t(rA,"boundClip",(function(){return uT})),t(rA,"Scenegraph",(function(){return ON})),t(rA,"SVGStringRenderer",(function(){return J$})),t(rA,"SVGRenderer",(function(){return P$})),t(rA,"SVGHandler",(function(){return h$})),t(rA,"ResourceLoader",(function(){return zM})),t(rA,"Renderer",(function(){return WN})),t(rA,"RenderType",(function(){return eT})),t(rA,"Marks",(function(){return AN})),t(rA,"Item",(function(){return TM})),t(rA,"Handler",(function(){return UN})),t(rA,"GroupItem",(function(){return OM})),t(rA,"Gradient",(function(){return BD})),t(rA,"CanvasRenderer",(function(){return f$})),t(rA,"CanvasHandler",(function(){return a$})),t(rA,"Bounds",(function(){return $M}));const dT="top",hT="left",pT="right",mT="bottom",gT="start",yT="middle",vT="end",bT="group",xT="axis",wT="title",_T="frame",kT="scope",ET="legend",ST="row-header",AT="row-footer",CT="row-title",DT="column-header",MT="column-footer",FT="column-title",NT="padding",$T="fit",TT="fit-x",OT="fit-y",zT="none",RT="all",PT="each",LT="flush",BT="column",IT="row";function jT(e){Fk.call(this,null,e)}function UT(e,t,n){return t(e.bounds.clear(),e,n)}ob(jT,Fk,{transform:function(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=AN[i],a=o.bound;let s,u=r.bounds;if(o.nested)r.items.length&&n.dirty(r.items[0]),u=UT(r,a),r.items.forEach((e=>{e.bounds.clear().union(u)}));else if(i===bT||e.modified())switch(t.visit(t.MOD,(e=>n.dirty(e))),u.clear(),r.items.forEach((e=>u.union(UT(e,a)))),r.role){case xT:case ET:case wT:t.reflow()}else s=t.changed(t.REM),t.visit(t.ADD,(e=>{u.union(UT(e,a))})),t.visit(t.MOD,(e=>{s=s||u.alignsWith(e.bounds),n.dirty(e),u.union(UT(e,a))})),s&&(u.clear(),r.items.forEach((e=>u.union(e.bounds))));return uT(r),t.modifies("bounds")}});function qT(e){Fk.call(this,0,e)}function WT(e){Fk.call(this,null,e)}function HT(e){Fk.call(this,null,e)}qT.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},ob(qT,Fk,{transform:function(e,t){const n=(i=t.dataflow)._signals[":vega_identifier:"]||(i._signals[":vega_identifier:"]=i.add(0)),r=e.as;var i;let o=n.value;return t.visit(t.ADD,(e=>e[r]=e[r]||++o)),n.set(this.value=o),t}}),ob(WT,Fk,{transform:function(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===bT?OM:TM;return t.visit(t.ADD,(e=>r.call(e,n))),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const VT={parity:e=>e.filter(((e,t)=>t%2?e.opacity=0:1)),greedy:(e,t)=>{let n;return e.filter(((e,r)=>r&&GT(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)))}},GT=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),YT=(e,t)=>{for(var n,r=1,i=e.length,o=e[0].bounds;r<i;o=n,++r)if(GT(o,n=e[r].bounds,t))return!0},XT=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},QT=e=>(e.forEach((e=>e.opacity=1)),e),JT=(e,t)=>e.reflow(t.modified()).modifies("opacity");function KT(e){Fk.call(this,null,e)}ob(HT,Fk,{transform:function(e,t){const n=VT[e.method]||VT.parity,r=e.separation||0;let i,o,a=t.materialize(t.SOURCE).source;if(!a||!a.length)return;if(!e.method)return e.modified("method")&&(QT(a),t=JT(t,e)),t;if(a=a.filter(XT),!a.length)return;if(e.sort&&(a=a.slice().sort(e.sort)),i=QT(a),t=JT(t,e),i.length>=3&&YT(i,r)){do{i=n(i,r)}while(i.length>=3&&YT(i,r));i.length<3&&!_v(a).opacity&&(i.length>1&&(_v(i).opacity=0),_v(a).opacity=1)}var s,u,l,c,f;e.boundScale&&e.boundTolerance>=0&&(s=e.boundScale,u=e.boundOrient,l=+e.boundTolerance,c=s.range(),f=new $M,u===dT||u===mT?f.set(c[0],-1/0,c[1],1/0):f.set(-1/0,c[0],1/0,c[1]),f.expand(l||1),o=e=>f.encloses(e.bounds),a.forEach((e=>{o(e)||(e.opacity=0)})));const d=i[0].mark.bounds.clear();return a.forEach((e=>{e.opacity&&d.union(e.bounds)})),t}}),ob(KT,Fk,{transform:function(e,t){const n=t.dataflow;if(t.visit(t.ALL,(e=>n.dirty(e))),t.fields&&t.fields.zindex){const e=t.source&&t.source[0];e&&(e.mark.zdirty=!0)}}});const ZT=new $M;function eO(e,t,n){return e[t]===n?0:(e[t]=n,1)}function tO(e){var t=e.items[0].orient;return t===hT||t===pT}function nO(e,t,n,r){var i,o,a=t.items[0],s=a.datum,u=null!=a.translate?a.translate:.5,l=a.orient,c=function(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(s),f=a.range,d=a.offset,h=a.position,p=a.minExtent,m=a.maxExtent,g=s.title&&a.items[c[2]].items[0],y=a.titlePadding,v=a.bounds,b=g&&yN(g),x=0,w=0;switch(ZT.clear().union(v),v.clear(),(i=c[0])>-1&&v.union(a.items[i].bounds),(i=c[1])>-1&&v.union(a.items[i].bounds),l){case dT:x=h||0,w=-d,o=Math.max(p,Math.min(m,-v.y1)),v.add(0,-o).add(f,0),g&&rO(e,g,o,y,b,0,-1,v);break;case hT:x=-d,w=h||0,o=Math.max(p,Math.min(m,-v.x1)),v.add(-o,0).add(0,f),g&&rO(e,g,o,y,b,1,-1,v);break;case pT:x=n+d,w=h||0,o=Math.max(p,Math.min(m,v.x2)),v.add(0,0).add(o,f),g&&rO(e,g,o,y,b,1,1,v);break;case mT:x=h||0,w=r+d,o=Math.max(p,Math.min(m,v.y2)),v.add(0,0).add(f,o),g&&rO(e,g,o,y,0,0,1,v);break;default:x=a.x,w=a.y}return LM(v.translate(x,w),a),eO(a,"x",x+u)|eO(a,"y",w+u)&&(a.bounds=ZT,e.dirty(a),a.bounds=v,e.dirty(a)),a.mark.bounds.clear().union(v)}function rO(e,t,n,r,i,o,a,s){const u=t.bounds;if(t.auto){const s=a*(n+i+r);let l=0,c=0;e.dirty(t),o?l=(t.x||0)-(t.x=s):c=(t.y||0)-(t.y=s),t.mark.bounds.clear().union(u.translate(-l,-c)),e.dirty(t)}s.union(u)}const iO=(e,t)=>Math.floor(Math.min(e,t)),oO=(e,t)=>Math.ceil(Math.max(e,t));function aO(e){return(new $M).set(0,0,e.width||0,e.height||0)}function sO(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function uO(e,t,n){const r=yv(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function lO(e){return e<0?Math.ceil(-e):0}function cO(e,t,n){var r,i,o,a,s,u,l,c,f,d,h,p=!n.nodirty,m=n.bounds===LT?aO:sO,g=ZT.set(0,0,0,0),y=uO(n.align,BT),v=uO(n.align,IT),b=uO(n.padding,BT),x=uO(n.padding,IT),w=n.columns||t.length,_=w<=0?1:Math.ceil(t.length/w),k=t.length,E=Array(k),S=Array(w),A=0,C=Array(k),D=Array(_),M=0,F=Array(k),N=Array(k),$=Array(k);for(i=0;i<w;++i)S[i]=0;for(i=0;i<_;++i)D[i]=0;for(i=0;i<k;++i)u=t[i],s=$[i]=m(u),u.x=u.x||0,F[i]=0,u.y=u.y||0,N[i]=0,o=i%w,a=~~(i/w),A=Math.max(A,l=Math.ceil(s.x2)),M=Math.max(M,c=Math.ceil(s.y2)),S[o]=Math.max(S[o],l),D[a]=Math.max(D[a],c),E[i]=b+lO(s.x1),C[i]=x+lO(s.y1),p&&e.dirty(t[i]);for(i=0;i<k;++i)i%w==0&&(E[i]=0),i<w&&(C[i]=0);if(y===PT)for(o=1;o<w;++o){for(h=0,i=o;i<k;i+=w)h<E[i]&&(h=E[i]);for(i=o;i<k;i+=w)E[i]=h+S[o-1]}else if(y===RT){for(h=0,i=0;i<k;++i)i%w&&h<E[i]&&(h=E[i]);for(i=0;i<k;++i)i%w&&(E[i]=h+A)}else for(y=!1,o=1;o<w;++o)for(i=o;i<k;i+=w)E[i]+=S[o-1];if(v===PT)for(a=1;a<_;++a){for(h=0,r=(i=a*w)+w;i<r;++i)h<C[i]&&(h=C[i]);for(i=a*w;i<r;++i)C[i]=h+D[a-1]}else if(v===RT){for(h=0,i=w;i<k;++i)h<C[i]&&(h=C[i]);for(i=w;i<k;++i)C[i]=h+M}else for(v=!1,a=1;a<_;++a)for(r=(i=a*w)+w;i<r;++i)C[i]+=D[a-1];for(f=0,i=0;i<k;++i)f=E[i]+(i%w?f:0),F[i]+=f-t[i].x;for(o=0;o<w;++o)for(d=0,i=o;i<k;i+=w)d+=C[i],N[i]+=d-t[i].y;if(y&&uO(n.center,BT)&&_>1)for(i=0;i<k;++i)(f=(s=y===RT?A:S[i%w])-$[i].x2-t[i].x-F[i])>0&&(F[i]+=f/2);if(v&&uO(n.center,IT)&&1!==w)for(i=0;i<k;++i)(d=(s=v===RT?M:D[~~(i/w)])-$[i].y2-t[i].y-N[i])>0&&(N[i]+=d/2);for(i=0;i<k;++i)g.union($[i].translate(F[i],N[i]));switch(f=uO(n.anchor,"x"),d=uO(n.anchor,"y"),uO(n.anchor,BT)){case vT:f-=g.width();break;case yT:f-=g.width()/2}switch(uO(n.anchor,IT)){case vT:d-=g.height();break;case yT:d-=g.height()/2}for(f=Math.round(f),d=Math.round(d),g.clear(),i=0;i<k;++i)t[i].mark.bounds.clear();for(i=0;i<k;++i)(u=t[i]).x+=F[i]+=f,u.y+=N[i]+=d,g.union(u.mark.bounds.union(u.bounds.translate(F[i],N[i]))),p&&e.dirty(u);return g}function fO(e,t,n){var r,i,o,a,s,u,l,c=function(e){var t,n,r=e.items,i=r.length,o=0;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<i;++o)if(n=(t=r[o]).items,t.marktype===bT)switch(t.role){case xT:case ET:case wT:break;case ST:a.rowheaders.push(...n);break;case AT:a.rowfooters.push(...n);break;case DT:a.colheaders.push(...n);break;case MT:a.colfooters.push(...n);break;case CT:a.rowtitle=n[0];break;case FT:a.coltitle=n[0];break;default:a.marks.push(...n)}return a}(t),f=c.marks,d=n.bounds===LT?dO:hO,h=n.offset,p=n.columns||f.length,m=p<=0?1:Math.ceil(f.length/p),g=m*p;const y=cO(e,f,n);y.empty()&&y.set(0,0,0,0),c.rowheaders&&(u=uO(n.headerBand,IT,null),r=pO(e,c.rowheaders,f,p,m,-uO(h,"rowHeader"),iO,0,d,"x1",0,p,1,u)),c.colheaders&&(u=uO(n.headerBand,BT,null),i=pO(e,c.colheaders,f,p,p,-uO(h,"columnHeader"),iO,1,d,"y1",0,1,p,u)),c.rowfooters&&(u=uO(n.footerBand,IT,null),o=pO(e,c.rowfooters,f,p,m,uO(h,"rowFooter"),oO,0,d,"x2",p-1,p,1,u)),c.colfooters&&(u=uO(n.footerBand,BT,null),a=pO(e,c.colfooters,f,p,p,uO(h,"columnFooter"),oO,1,d,"y2",g-p,1,p,u)),c.rowtitle&&(s=uO(n.titleAnchor,IT),l=uO(h,"rowTitle"),l=s===vT?o+l:r-l,u=uO(n.titleBand,IT,.5),mO(e,c.rowtitle,l,0,y,u)),c.coltitle&&(s=uO(n.titleAnchor,BT),l=uO(h,"columnTitle"),l=s===vT?a+l:i-l,u=uO(n.titleBand,BT,.5),mO(e,c.coltitle,l,1,y,u))}function dO(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function hO(e,t){return e.bounds[t]}function pO(e,t,n,r,i,o,a,s,u,l,c,f,d,h){var p,m,g,y,v,b,x,w,_,k=n.length,E=0,S=0;if(!k)return E;for(p=c;p<k;p+=f)n[p]&&(E=a(E,u(n[p],l)));if(!t.length)return E;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),E+=o,m=0,y=t.length;m<y;++m)e.dirty(t[m]),t[m].mark.bounds.clear();for(p=c,m=0,y=t.length;m<y;++m,p+=f){for(v=(b=t[m]).mark.bounds,g=p;g>=0&&null==(x=n[g]);g-=d);s?(w=null==h?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),_=E):(w=E,_=null==h?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),v.union(b.bounds.translate(w-(b.x||0),_-(b.y||0))),b.x=w,b.y=_,e.dirty(b),S=a(S,v[l])}return S}function mO(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function gO(e,t,n,r,i,o,a){const s=function(e,t){const n=e[t]||{};return(t,r)=>null!=n[t]?n[t]:null!=e[t]?e[t]:r}(n,t),u=function(e,t){let n=-1/0;return e.forEach((e=>{null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,s("offset",0)),l=s("anchor",gT),c=l===vT?1:l===yT?.5:0,f={align:PT,bounds:s("bounds",LT),columns:"vertical"===s("direction")?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case hT:f.anchor={x:Math.floor(r.x1)-u,column:vT,y:c*(a||r.height()+2*r.y1),row:l};break;case pT:f.anchor={x:Math.ceil(r.x2)+u,y:c*(a||r.height()+2*r.y1),row:l};break;case dT:f.anchor={y:Math.floor(i.y1)-u,row:vT,x:c*(o||i.width()+2*i.x1),column:l};break;case mT:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case"top-left":f.anchor={x:u,y:u};break;case"top-right":f.anchor={x:o-u,y:u,column:vT};break;case"bottom-left":f.anchor={x:u,y:a-u,row:vT};break;case"bottom-right":f.anchor={x:o-u,y:a-u,column:vT,row:vT}}return f}function yO(e,t){var n,r,i=t.items[0],o=i.datum,a=i.orient,s=i.bounds,u=i.x,l=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),function(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(t.datum.title){var a=t.items[1].items[0],s=a.anchor,u=t.titlePadding||0,l=r-a.x,c=r-a.y;switch(a.orient){case hT:i+=Math.ceil(a.bounds.width())+u;break;case pT:case mT:break;default:o+=a.bounds.height()+u}switch((i||o)&&bO(e,n,i,o),a.orient){case hT:c+=vO(t,n,a,s,1,1);break;case pT:l+=vO(t,n,a,vT,0,0)+u,c+=vO(t,n,a,s,1,1);break;case mT:l+=vO(t,n,a,s,0,0),c+=vO(t,n,a,vT,-1,0,1)+u;break;default:l+=vO(t,n,a,s,0,0)}(l||c)&&bO(e,a,l,c),(l=Math.round(a.bounds.x1-r))<0&&(bO(e,n,-l,0),bO(e,a,-l,0))}else(i||o)&&bO(e,n,i,o)}(e,i,i.items[0].items[0]),s=function(e,t){return e.items.forEach((e=>t.union(e.bounds))),t.x1=e.padding,t.y1=e.padding,t}(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),"symbol"===o.type&&function(e){const t=e.reduce(((e,t)=>(e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e)),{});e.forEach((e=>{e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(i.items[0].items[0].items[0].items),a!==zT&&(i.x=u=0,i.y=l=0),i.width=n,i.height=r,LM(s.set(u,l,u+n,l+r),i),i.mark.bounds.clear().union(s),i}function vO(e,t,n,r,i,o,a){const s="symbol"!==e.datum.type,u=n.datum.vgrad,l=(!s||!o&&u||a?t:t.items[0]).bounds[i?"y2":"x2"]-e.padding,c=u&&o?l:0,f=u&&o?0:l,d=i<=0?0:yN(n);return Math.round(r===gT?c:r===vT?f-d:.5*(l-d))}function bO(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function xO(e){Fk.call(this,null,e)}ob(xO,Fk,{transform:function(e,t){const n=t.dataflow;return e.mark.items.forEach((t=>{e.layout&&fO(n,t,e.layout),function(e,t,n){var r,i,o,a,s,u=t.items,l=Math.max(0,t.width||0),c=Math.max(0,t.height||0),f=(new $M).set(0,0,l,c),d=f.clone(),h=f.clone(),p=[];for(a=0,s=u.length;a<s;++a)switch((i=u[a]).role){case xT:(tO(i)?d:h).union(nO(e,i,l,c));break;case wT:r=i;break;case ET:p.push(yO(e,i));break;case _T:case kT:case ST:case AT:case CT:case DT:case MT:case FT:d.union(i.bounds),h.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){const t={};p.forEach((e=>{(o=e.orient||pT)!==zT&&(t[o]||(t[o]=[])).push(e)}));for(const r in t){const i=t[r];cO(e,i,gO(i,r,n.legends,d,h,l,c))}p.forEach((t=>{const r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),n.autosize&&n.autosize.type===$T)switch(t.orient){case hT:case pT:f.add(r.x1,0).add(r.x2,0);break;case dT:case mT:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(d).union(h),r&&f.union(function(e,t,n,r,i){var o,a=t.items[0],s=a.frame,u=a.orient,l=a.anchor,c=a.offset,f=a.padding,d=a.items[0].items[0],h=a.items[1]&&a.items[1].items[0],p=u===hT||u===pT?r:n,m=0,g=0,y=0,v=0,b=0;if(s!==bT?u===hT?(m=i.y2,p=i.y1):u===pT?(m=i.y1,p=i.y2):(m=i.x1,p=i.x2):u===hT&&(m=r,p=0),o=l===gT?m:l===vT?p:(m+p)/2,h&&h.text){switch(u){case dT:case mT:b=d.bounds.height()+f;break;case hT:v=d.bounds.width()+f;break;case pT:v=-d.bounds.width()-f}ZT.clear().union(h.bounds),ZT.translate(v-(h.x||0),b-(h.y||0)),eO(h,"x",v)|eO(h,"y",b)&&(e.dirty(h),h.bounds.clear().union(ZT),h.mark.bounds.clear().union(ZT),e.dirty(h)),ZT.clear().union(h.bounds)}else ZT.clear();switch(ZT.union(d.bounds),u){case dT:g=o,y=i.y1-ZT.height()-c;break;case hT:g=i.x1-ZT.width()-c,y=o;break;case pT:g=i.x2+ZT.width()+c,y=o;break;case mT:g=o,y=i.y2+c;break;default:g=a.x,y=a.y}return eO(a,"x",g)|eO(a,"y",y)&&(ZT.translate(g,y),e.dirty(a),a.bounds.clear().union(ZT),t.bounds.clear().union(ZT),e.dirty(a)),a.bounds}(e,r,l,c,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===NT){const t=e.padding();a-=t.left+t.right,s-=t.top+t.bottom}o===zT?(l=0,f=0,u=a,c=s):o===$T?(u=Math.max(0,a-l-d),c=Math.max(0,s-f-h)):o===TT?(u=Math.max(0,a-l-d),s=c+f+h):o===OT?(a=u+l+d,c=Math.max(0,s-f-h)):"pad"===o&&(a=u+l+d,s=c+f+h);e._resizeView(a,s,u,c,[l,f],i.resize)}(e,t,f,n)}(n,t,e)})),(r=e.mark.group)&&"legend-entry"!==r.mark.role?t.reflow():t;var r}}),t(nA,"viewlayout",(function(){return xO})),t(nA,"render",(function(){return KT})),t(nA,"overlap",(function(){return HT})),t(nA,"mark",(function(){return WT})),t(nA,"identifier",(function(){return qT})),t(nA,"bound",(function(){return jT}));var wO={};function _O(e){Fk.call(this,null,e)}function kO(e){Fk.call(this,null,e)}function EO(){return Z_({})}function SO(e){Fk.call(this,null,e)}function AO(e){Fk.call(this,[],e)}ob(_O,Fk,{transform:function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=vD(o,null==e.count?e.values?e.values.length:10:e.count,e.minstep),s=e.format||wD(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?bD(o,e.values,a):xD(o,a);return i&&(r.rem=i),i=u.map(((e,t)=>Z_({index:t/(u.length-1||1),value:e,label:s(e)}))),e.extra&&i.length&&i.push(Z_({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),ob(kO,Fk,{transform:function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||EO,o=e.key||J_,a=this.value;return gv(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&ov("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=function(e){const t=rb().test((e=>e.exit));return t.lookup=n=>t.get(e(n)),t}(o)),t.visit(t.ADD,(e=>{const t=o(e);let n=a.get(t);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(n=i(e),a.set(t,n),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(e=>{const t=o(e),n=a.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(e=>{const t=o(e),n=a.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}}),ob(SO,Fk,{transform:function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(gv(o)){if(!n.changed()&&!o.every((e=>i[e])))return t.StopPropagation;o=o[0],n.encode=null}var a="enter"===o,s=i.update||hv,u=i.enter||hv,l=i.exit||hv,c=(o&&!a?i[o]:s)||hv;if(t.changed(t.ADD)&&(t.visit(t.ADD,(t=>{u(t,e),s(t,e)})),n.modifies(u.output),n.modifies(s.output),c!==hv&&c!==s&&(t.visit(t.ADD,(t=>{c(t,e)})),n.modifies(c.output))),t.changed(t.REM)&&l!==hv&&(t.visit(t.REM,(t=>{l(t,e)})),n.modifies(l.output)),a||c!==hv){const i=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(i,(t=>{const i=u(t,e)||r;(c(t,e)||i)&&n.mod.push(t)})),n.mod.length&&n.modifies(u.output)):t.visit(i,(t=>{(c(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}}),ob(AO,Fk,{transform:function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,o,a,s=t.dataflow.locale(),u=t.fork(t.NO_SOURCE|t.NO_FIELDS),l=this.value,c=e.type||pD,f=e.scale,d=+e.limit,h=vD(f,null==e.count?5:e.count,e.minstep),p=!!e.values||c===pD,m=e.format||AD(s,f,h,c,e.formatSpecifier,e.formatType,p),g=e.values||SD(f,h);return l&&(u.rem=l),c===pD?(d&&g.length>d?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),l=g.slice(0,d-1),a=!0):l=g,qv(i=e.size)?(e.values||0!==f(l[0])||(l=l.slice(1)),o=l.reduce(((t,n)=>Math.max(t,i(n,e))),0)):i=Xv(o=i||8),l=l.map(((t,n)=>Z_({index:n,label:m(t,n,l),value:t,offset:o,size:i(t,e)}))),a&&(a=g[l.length],l.push(Z_({index:l.length,label:"…".concat(g.length-l.length," entries"),value:a,offset:o,size:i(a,e)})))):"gradient"===c?(n=f.domain(),r=uD(f,n[0],_v(n)),g.length<3&&!e.values&&n[0]!==_v(n)&&(g=[n[0],_v(n)]),l=g.map(((e,t)=>Z_({index:t,label:m(e,t,g),value:e,perc:r(e)})))):(i=g.length-1,r=function(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+_v(t),o=i-r;if(e.type===$C){const e=n?o/n:.1;r-=e,i+=e,o=i-r}return e=>(e-r)/o}(f),l=g.map(((e,t)=>Z_({index:t,label:m(e,t,g),value:e,perc:t?r(e):0,perc2:t===i?1:r(g[t+1])})))),u.source=l,u.add=l,this.value=l,u}});const CO=e=>e.source.x,DO=e=>e.source.y,MO=e=>e.target.x,FO=e=>e.target.y;function NO(e){Fk.call(this,{},e)}NO.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},ob(NO,Fk,{transform:function(e,t){var n=e.sourceX||CO,r=e.sourceY||DO,i=e.targetX||MO,o=e.targetY||FO,a=e.as||"path",s=e.orient||"vertical",u=e.shape||"line",l=zO.get(u+"-"+s)||zO.get(u);return l||ov("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(e=>{e[a]=l(n(e),r(e),i(e),o(e))})),t.reflow(e.modified()).modifies(a)}});const $O=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,TO=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o)/2;return"M"+e+","+t+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r},OO=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},zO=rb({line:$O,"line-radial":(e,t,n,r)=>$O(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),arc:TO,"arc-radial":(e,t,n,r)=>TO(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),curve:OO,"curve-radial":(e,t,n,r)=>OO(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),"orthogonal-horizontal":(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,"orthogonal-vertical":(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,"orthogonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n);return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},"diagonal-horizontal":(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s}});function RO(e){Fk.call(this,null,e)}RO.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},ob(RO,Fk,{transform:function(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],a=o[0],s=o[1],u=e.field||fv,l=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(u),h=d.length,p=l,m=(c-l)/Md(d),g=Dd(h);for(e.sort&&g.sort(((e,t)=>d[e]-d[t])),n=0;n<h;++n)i=d[g[n]],(r=f[g[n]])[a]=p,r[s]=p+=i*m;return this.value=d,t.reflow(e.modified()).modifies(o)}});function PO(e){return KC(e)&&e!==DC}const LO=Sb(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function BO(e){Fk.call(this,null,e),this.modified(!0)}function IO(e,t,n){tD(e)&&(Math.abs(t.reduce(((e,t)=>e+(t<0?-1:t>0?1:0)),0))!==t.length&&n.warn("Log scale domain includes zero: "+xb(t)));return t}function jO(e,t,n){return qv(e)&&(t||n)?oD(e,UO(t||[0,1],n)):e}function UO(e,t){return t?e.slice().reverse():e}function qO(e){Fk.call(this,null,e)}ob(BO,Fk,{transform:function(e,t){var n=t.dataflow,r=this.value,i=function(e){var t,n=e.type,r="";if(n===DC)return"sequential-linear";(function(e){const t=e.type;return KC(t)&&t!==AC&&t!==CC&&(e.scheme||e.range&&e.range.length&&e.range.every(db))})(e)&&(r=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?"sequential-":3===t?"diverging-":"");return(r+n||wC).toLowerCase()}(e);for(i in r&&i===r.type||(this.value=r=XC(i)()),e)if(!LO[i]){if("padding"===i&&PO(r.type))continue;qv(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function(e,t,n){e!==zC&&e!==OC&&ov("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===OC?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*xC(n,i,r)]}(r,t,n);else if(t.scheme&&(o=function(e,t,n){var r,i=t.schemeExtent;gv(t.scheme)?r=aD(t.scheme,t.interpolate,t.interpolateGamma):(r=hD(t.scheme.toLowerCase()))||ov("Unrecognized scheme name: ".concat(t.scheme));return n=e===$C?n+1:e===RC?n-1:e===FC||e===NC?+t.schemeCount||5:n,nD(e)?jO(r,i,t.reverse):qv(r)?sD(jO(r,i),n):e===TC?r:r.slice(0,n)}(r,t,n),qv(o))){if(e.interpolator)return e.interpolator(o);ov("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&nD(r))return e.interpolator(aD(UO(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(lD(t.interpolate,t.interpolateGamma)):qv(e.round)?e.round(i):qv(e.rangeRound)&&e.interpolate(i?cp:sp);o&&e.range(UO(o,t.reverse))}(r,e,function(e,t,n){let r=t.bins;if(r&&!gv(r)){const t=e.domain(),n=t[0],i=_v(t),o=r.step;let a=null==r.start?n:r.start,s=null==r.stop?i:r.stop;o||ov("Scale bins parameter missing step property."),a<n&&(a=o*Math.ceil(n/o)),s>i&&(s=o*Math.floor(i/o)),r=Dd(a,s+o/2,o)}r?e.bins=r:e.bins&&delete e.bins;e.type===RC&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){const r=function(e,t,n){return t?(e.domain(IO(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var i,o,a=t.domain,s=e.type,u=t.zero||void 0===t.zero&&function(e){const t=e.type;return!e.bins&&(t===wC||t===kC||t===EC)}(e);if(!a)return 0;PO(s)&&t.padding&&a[0]!==_v(a)&&(a=function(e,t,n,r,i,o){var a=Math.abs(_v(n)-n[0]),s=a/(a-2*r),u=e===_C?Rv(t,null,s):e===EC?Pv(t,null,s,.5):e===kC?Pv(t,null,s,i||1):e===SC?Lv(t,null,s,o||1):zv(t,null,s);return(t=t.slice())[0]=u[0],t[t.length-1]=u[1],t}(s,a,t.range,t.padding,t.exponent,t.constant));if((u||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(a=a.slice()).length-1||1,u&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=t.domainMin&&(a[0]=t.domainMin),null!=t.domainMax&&(a[i]=t.domainMax),null!=t.domainMid)){const e=(o=t.domainMid)>a[i]?i+1:o<a[0]?0:i;e!==i&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(e,0,o)}e.domain(IO(s,a,n)),s===TC&&e.unknown(t.domainImplicit?xm:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&vD(e,t.nice)||null);return a.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),ob(qO,Fk,{transform:function(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(rk(e.sort)),this.modified(n),t}});const WO="zero",HO="center",VO="normalize",GO=["y0","y1"];function YO(e){Fk.call(this,null,e)}function XO(e,t,n,r,i){for(var o,a=(t-e.sum)/2,s=e.length,u=0;u<s;++u)(o=e[u])[r]=a,o[i]=a+=Math.abs(n(o))}function QO(e,t,n,r,i){for(var o,a=1/e.sum,s=0,u=e.length,l=0,c=0;l<u;++l)(o=e[l])[r]=s,o[i]=s=a*(c+=Math.abs(n(o)))}function JO(e,t,n,r,i){for(var o,a,s=0,u=0,l=e.length,c=0;c<l;++c)(o=+n(a=e[c]))<0?(a[r]=u,a[i]=u+=o):(a[r]=s,a[i]=s+=o)}YO.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:WO,values:[WO,HO,VO]},{name:"as",type:"string",array:!0,length:2,default:GO}]},ob(YO,Fk,{transform:function(e,t){var n,r,i,o,a=e.as||GO,s=a[0],u=a[1],l=rk(e.sort),c=e.field||fv,f=e.offset===HO?XO:e.offset===VO?QO:JO;for(n=function(e,t,n,r){var i,o,a,s,u,l,c,f,d,h=[],p=e=>e(u);if(null==t)h.push(e.slice());else for(i={},o=0,a=e.length;o<a;++o)u=e[o],(c=i[l=t.map(p)])||(i[l]=c=[],h.push(c)),c.push(u);for(l=0,d=0,s=h.length;l<s;++l){for(o=0,f=0,a=(c=h[l]).length;o<a;++o)f+=Math.abs(r(c[o]));c.sum=f,f>d&&(d=f),n&&c.sort(n)}return h.max=d,h}(t.source,e.groupby,l,c),r=0,i=n.length,o=n.max;r<i;++r)f(n[r],o,c,s,u);return t.reflow(e.modified()).modifies(a)}}),t(wO,"stack",(function(){return YO})),t(wO,"sortitems",(function(){return qO})),t(wO,"scale",(function(){return BO})),t(wO,"pie",(function(){return RO})),t(wO,"linkpath",(function(){return NO})),t(wO,"legendentries",(function(){return AO})),t(wO,"encode",(function(){return SO})),t(wO,"datajoin",(function(){return kO})),t(wO,"axisticks",(function(){return _O}));var KO={},ZO=1e-6,ez=1e-12,tz=Math.PI,nz=tz/2,rz=tz/4,iz=2*tz,oz=180/tz,az=tz/180,sz=Math.abs,uz=Math.atan,lz=Math.atan2,cz=Math.cos,fz=Math.ceil,dz=Math.exp,hz=(Math.floor,Math.hypot),pz=Math.log,mz=Math.pow,gz=Math.sin,yz=Math.sign||function(e){return e>0?1:e<0?-1:0},vz=Math.sqrt,bz=Math.tan;function xz(e){return e>1?0:e<-1?tz:Math.acos(e)}function wz(e){return e>1?nz:e<-1?-nz:Math.asin(e)}function _z(){}function kz(e,t){e&&Sz.hasOwnProperty(e.type)&&Sz[e.type](e,t)}var Ez={Feature:function(e,t){kz(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)kz(n[r].geometry,t)}},Sz={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Az(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Az(n[r],t,0)},Polygon:function(e,t){Cz(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Cz(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)kz(n[r],t)}};function Az(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Cz(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Az(e[n],t,1);t.polygonEnd()}var Dz,Mz,Fz,Nz,$z,Tz=function(e,t){e&&Ez.hasOwnProperty(e.type)?Ez[e.type](e,t):kz(e,t)},Oz=new sd,zz=new sd,Rz={point:_z,lineStart:_z,lineEnd:_z,polygonStart:function(){Oz=new sd,Rz.lineStart=Pz,Rz.lineEnd=Lz},polygonEnd:function(){var e=+Oz;zz.add(e<0?iz+e:e),this.lineStart=this.lineEnd=this.point=_z},sphere:function(){zz.add(iz)}};function Pz(){Rz.point=Bz}function Lz(){Iz(Dz,Mz)}function Bz(e,t){Rz.point=Iz,Dz=e,Mz=t,Fz=e*=az,Nz=cz(t=(t*=az)/2+rz),$z=gz(t)}function Iz(e,t){var n=(e*=az)-Fz,r=n>=0?1:-1,i=r*n,o=cz(t=(t*=az)/2+rz),a=gz(t),s=$z*a,u=Nz*o+s*cz(i),l=s*r*gz(i);Oz.add(lz(l,u)),Fz=e,Nz=o,$z=a}var jz,Uz,qz,Wz,Hz,Vz,Gz,Yz,Xz,Qz,Jz;function Kz(e){return[lz(e[1],e[0]),wz(e[2])]}function Zz(e){var t=e[0],n=e[1],r=cz(n);return[r*cz(t),r*gz(t),gz(n)]}function eR(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function tR(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function nR(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function rR(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function iR(e){var t=vz(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var oR={point:aR,lineStart:uR,lineEnd:lR,polygonStart:function(){oR.point=cR,oR.lineStart=fR,oR.lineEnd=dR,Xz=new sd,Rz.polygonStart()},polygonEnd:function(){Rz.polygonEnd(),oR.point=aR,oR.lineStart=uR,oR.lineEnd=lR,Oz<0?(jz=-(qz=180),Uz=-(Wz=90)):Xz>ZO?Wz=90:Xz<-1e-6&&(Uz=-90),Jz[0]=jz,Jz[1]=qz},sphere:function(){jz=-(qz=180),Uz=-(Wz=90)}};function aR(e,t){Qz.push(Jz=[jz=e,qz=e]),t<Uz&&(Uz=t),t>Wz&&(Wz=t)}function sR(e,t){var n=Zz([e*az,t*az]);if(Yz){var r=tR(Yz,n),i=tR([r[1],-r[0],0],r);iR(i),i=Kz(i);var o,a=e-Hz,s=a>0?1:-1,u=i[0]*oz*s,l=sz(a)>180;l^(s*Hz<u&&u<s*e)?(o=i[1]*oz)>Wz&&(Wz=o):l^(s*Hz<(u=(u+360)%360-180)&&u<s*e)?(o=-i[1]*oz)<Uz&&(Uz=o):(t<Uz&&(Uz=t),t>Wz&&(Wz=t)),l?e<Hz?hR(jz,e)>hR(jz,qz)&&(qz=e):hR(e,qz)>hR(jz,qz)&&(jz=e):qz>=jz?(e<jz&&(jz=e),e>qz&&(qz=e)):e>Hz?hR(jz,e)>hR(jz,qz)&&(qz=e):hR(e,qz)>hR(jz,qz)&&(jz=e)}else Qz.push(Jz=[jz=e,qz=e]);t<Uz&&(Uz=t),t>Wz&&(Wz=t),Yz=n,Hz=e}function uR(){oR.point=sR}function lR(){Jz[0]=jz,Jz[1]=qz,oR.point=aR,Yz=null}function cR(e,t){if(Yz){var n=e-Hz;Xz.add(sz(n)>180?n+(n>0?360:-360):n)}else Vz=e,Gz=t;Rz.point(e,t),sR(e,t)}function fR(){Rz.lineStart()}function dR(){cR(Vz,Gz),Rz.lineEnd(),sz(Xz)>ZO&&(jz=-(qz=180)),Jz[0]=jz,Jz[1]=qz,Yz=null}function hR(e,t){return(t-=e)<0?t+360:t}function pR(e,t){return e[0]-t[0]}function mR(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var gR,yR,vR,bR,xR,wR,_R,kR,ER,SR,AR,CR,DR,MR,FR,NR,$R={sphere:_z,point:TR,lineStart:zR,lineEnd:LR,polygonStart:function(){$R.lineStart=BR,$R.lineEnd=IR},polygonEnd:function(){$R.lineStart=zR,$R.lineEnd=LR}};function TR(e,t){e*=az;var n=cz(t*=az);OR(n*cz(e),n*gz(e),gz(t))}function OR(e,t,n){++gR,vR+=(e-vR)/gR,bR+=(t-bR)/gR,xR+=(n-xR)/gR}function zR(){$R.point=RR}function RR(e,t){e*=az;var n=cz(t*=az);MR=n*cz(e),FR=n*gz(e),NR=gz(t),$R.point=PR,OR(MR,FR,NR)}function PR(e,t){e*=az;var n=cz(t*=az),r=n*cz(e),i=n*gz(e),o=gz(t),a=lz(vz((a=FR*o-NR*i)*a+(a=NR*r-MR*o)*a+(a=MR*i-FR*r)*a),MR*r+FR*i+NR*o);yR+=a,wR+=a*(MR+(MR=r)),_R+=a*(FR+(FR=i)),kR+=a*(NR+(NR=o)),OR(MR,FR,NR)}function LR(){$R.point=TR}function BR(){$R.point=jR}function IR(){UR(CR,DR),$R.point=TR}function jR(e,t){CR=e,DR=t,e*=az,t*=az,$R.point=UR;var n=cz(t);MR=n*cz(e),FR=n*gz(e),NR=gz(t),OR(MR,FR,NR)}function UR(e,t){e*=az;var n=cz(t*=az),r=n*cz(e),i=n*gz(e),o=gz(t),a=FR*o-NR*i,s=NR*r-MR*o,u=MR*i-FR*r,l=hz(a,s,u),c=wz(l),f=l&&-c/l;ER.add(f*a),SR.add(f*s),AR.add(f*u),yR+=c,wR+=c*(MR+(MR=r)),_R+=c*(FR+(FR=i)),kR+=c*(NR+(NR=o)),OR(MR,FR,NR)}function qR(e,t,n){var r=Dd(e,t-ZO,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function WR(e,t,n){var r=Dd(e,t-ZO,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}var HR,VR,GR,YR,XR=e=>e,QR=new sd,JR=new sd,KR={point:_z,lineStart:_z,lineEnd:_z,polygonStart:function(){KR.lineStart=ZR,KR.lineEnd=nP},polygonEnd:function(){KR.lineStart=KR.lineEnd=KR.point=_z,QR.add(sz(JR)),JR=new sd},result:function(){var e=QR/2;return QR=new sd,e}};function ZR(){KR.point=eP}function eP(e,t){KR.point=tP,HR=GR=e,VR=YR=t}function tP(e,t){JR.add(YR*e-GR*t),GR=e,YR=t}function nP(){tP(HR,VR)}var rP=1/0,iP=rP,oP=-rP,aP=oP,sP={point:function(e,t){e<rP&&(rP=e);e>oP&&(oP=e);t<iP&&(iP=t);t>aP&&(aP=t)},lineStart:_z,lineEnd:_z,polygonStart:_z,polygonEnd:_z,result:function(){var e=[[rP,iP],[oP,aP]];return oP=aP=-(iP=rP=1/0),e}};var uP,lP,cP,fP,dP=0,hP=0,pP=0,mP=0,gP=0,yP=0,vP=0,bP=0,xP=0,wP={point:_P,lineStart:kP,lineEnd:AP,polygonStart:function(){wP.lineStart=CP,wP.lineEnd=DP},polygonEnd:function(){wP.point=_P,wP.lineStart=kP,wP.lineEnd=AP},result:function(){var e=xP?[vP/xP,bP/xP]:yP?[mP/yP,gP/yP]:pP?[dP/pP,hP/pP]:[NaN,NaN];return dP=hP=pP=mP=gP=yP=vP=bP=xP=0,e}};function _P(e,t){dP+=e,hP+=t,++pP}function kP(){wP.point=EP}function EP(e,t){wP.point=SP,_P(cP=e,fP=t)}function SP(e,t){var n=e-cP,r=t-fP,i=vz(n*n+r*r);mP+=i*(cP+e)/2,gP+=i*(fP+t)/2,yP+=i,_P(cP=e,fP=t)}function AP(){wP.point=_P}function CP(){wP.point=MP}function DP(){FP(uP,lP)}function MP(e,t){wP.point=FP,_P(uP=cP=e,lP=fP=t)}function FP(e,t){var n=e-cP,r=t-fP,i=vz(n*n+r*r);mP+=i*(cP+e)/2,gP+=i*(fP+t)/2,yP+=i,vP+=(i=fP*e-cP*t)*(cP+e),bP+=i*(fP+t),xP+=3*i,_P(cP=e,fP=t)}function NP(e){this._context=e}NP.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,iz)}},result:_z};var $P,TP,OP,zP,RP,PP=new sd,LP={point:_z,lineStart:function(){LP.point=BP},lineEnd:function(){$P&&IP(TP,OP),LP.point=_z},polygonStart:function(){$P=!0},polygonEnd:function(){$P=null},result:function(){var e=+PP;return PP=new sd,e}};function BP(e,t){LP.point=IP,TP=zP=e,OP=RP=t}function IP(e,t){zP-=e,RP-=t,PP.add(vz(zP*zP+RP*RP)),zP=e,RP=t}function jP(){this._string=[]}function UP(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}jP.prototype={_radius:4.5,_circle:UP(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=UP(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var qP=function(e,t){var n,r,i=4.5;function o(e){return e&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Tz(e,n(r))),r.result()}return o.area=function(e){return Tz(e,n(KR)),KR.result()},o.measure=function(e){return Tz(e,n(LP)),LP.result()},o.bounds=function(e){return Tz(e,n(sP)),sP.result()},o.centroid=function(e){return Tz(e,n(wP)),wP.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,XR):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new jP):new NP(t=e),"function"!=typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(r.pointRadius(+e),+e),o):i},o.projection(e).context(t)},WP=function(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:_z,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},HP=function(e,t){return sz(e[0]-t[0])<ZO&&sz(e[1]-t[1])<ZO};function VP(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var GP=function(e,t,n,r,i){var o,a,s=[],u=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(HP(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new VP(r,e,null,!0)),u.push(n.o=new VP(r,null,n,!1)),s.push(n=new VP(a,e,null,!1)),u.push(n.o=new VP(a,null,n,!0))}})),s.length){for(u.sort(t),YP(s),YP(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(l=d.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}};function YP(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function XP(e){return sz(e[0])<=tz?e[0]:yz(e[0])*((sz(e[0])+tz)%iz-tz)}var QP=function(e,t,n,r){return function(i){var o,a,s,u=t(i),l=WP(),c=t(l),f=!1,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,a=[],o=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,a=Cd(a);var e=function(e,t){var n=XP(t),r=t[1],i=gz(r),o=[gz(n),-cz(n),0],a=0,s=0,u=new sd;1===i?r=nz+ZO:-1===i&&(r=-nz-ZO);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=XP(h),m=h[1]/2+rz,g=gz(m),y=cz(m),v=0;v<d;++v,p=x,g=_,y=k,h=b){var b=f[v],x=XP(b),w=b[1]/2+rz,_=gz(w),k=cz(w),E=x-p,S=E>=0?1:-1,A=S*E,C=A>tz,D=g*_;if(u.add(lz(D*S*gz(A),y*k+D*cz(A))),a+=C?E+S*iz:E,C^p>=n^x>=n){var M=tR(Zz(h),Zz(b));iR(M);var F=tR(o,M);iR(F);var N=(C^E>=0?-1:1)*wz(F[2]);(r>N||r===N&&(M[0]||M[1]))&&(s+=C^E>=0?1:-1)}}return(a<-1e-6||a<ZO&&u<-1e-12)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),GP(a,KP,e,n,i)):e&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(t,n){e(t,n)&&i.point(t,n)}function p(e,t){u.point(e,t)}function m(){d.point=p,u.lineStart()}function g(){d.point=h,u.lineEnd()}function y(e,t){s.push([e,t]),c.point(e,t)}function v(){c.lineStart(),s=[]}function b(){y(s[0][0],s[0][1]),c.lineEnd();var e,t,n,r,u=c.clean(),d=l.result(),h=d.length;if(s.pop(),o.push(s),s=null,h)if(1&u){if((t=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),a.push(d.filter(JP))}return d}};function JP(e){return e.length>1}function KP(e,t){return((e=e.x)[0]<0?e[1]-nz-ZO:nz-e[1])-((t=t.x)[0]<0?t[1]-nz-ZO:nz-t[1])}var ZP=QP((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?tz:-tz,u=sz(o-n);sz(u-tz)<ZO?(e.point(n,r=(r+a)/2>0?nz:-nz),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&u>=tz&&(sz(n-i)<ZO&&(n-=i*ZO),sz(o-s)<ZO&&(o-=s*ZO),r=function(e,t,n,r){var i,o,a=gz(e-n);return sz(a)>ZO?uz((gz(t)*(o=cz(r))*gz(n)-gz(r)*(i=cz(t))*gz(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*nz,r.point(-tz,i),r.point(0,i),r.point(tz,i),r.point(tz,0),r.point(tz,-i),r.point(0,-i),r.point(-tz,-i),r.point(-tz,0),r.point(-tz,i);else if(sz(e[0]-t[0])>ZO){var o=e[0]<t[0]?tz:-tz;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}),[-tz,-nz]);var eL=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n};function tL(e,t){return[sz(e)>tz?e+Math.round(-e/iz)*iz:e,t]}function nL(e,t,n){return(e%=iz)?t||n?eL(iL(e),oL(t,n)):iL(e):t||n?oL(t,n):tL}function rL(e){return function(t,n){return[(t+=e)>tz?t-iz:t<-tz?t+iz:t,n]}}function iL(e){var t=rL(e);return t.invert=rL(-e),t}function oL(e,t){var n=cz(e),r=gz(e),i=cz(t),o=gz(t);function a(e,t){var a=cz(t),s=cz(e)*a,u=gz(e)*a,l=gz(t),c=l*n+s*r;return[lz(u*i-c*o,s*n-l*r),wz(c*i+u*o)]}return a.invert=function(e,t){var a=cz(t),s=cz(e)*a,u=gz(e)*a,l=gz(t),c=l*i-u*o;return[lz(u*i+l*o,s*n+c*r),wz(c*n-s*r)]},a}tL.invert=tL;function aL(e,t){(t=Zz(t))[0]-=e,iR(t);var n=xz(-t[1]);return((-t[2]<0?-n:n)+iz-ZO)%iz}var sL=function(e){var t=cz(e),n=6*az,r=t>0,i=sz(t)>ZO;function o(e,n){return cz(e)*cz(n)>t}function a(e,n,r){var i=[1,0,0],o=tR(Zz(e),Zz(n)),a=eR(o,o),s=o[0],u=a-s*s;if(!u)return!r&&e;var l=t*a/u,c=-t*s/u,f=tR(i,o),d=rR(i,l);nR(d,rR(o,c));var h=f,p=eR(d,h),m=eR(h,h),g=p*p-m*(eR(d,d)-1);if(!(g<0)){var y=vz(g),v=rR(h,(-p-y)/m);if(nR(v,d),v=Kz(v),!r)return v;var b,x=e[0],w=n[0],_=e[1],k=n[1];w<x&&(b=x,x=w,w=b);var E=w-x,S=sz(E-tz)<ZO;if(!S&&k<_&&(b=_,_=k,k=b),S||E<ZO?S?_+k>0^v[1]<(sz(v[0]-x)<ZO?_:k):_<=v[1]&&v[1]<=k:E>tz^(x<=v[0]&&v[0]<=w)){var A=rR(h,(-p+y)/m);return nR(A,d),[v,Kz(A)]}}}function s(t,n){var i=r?e:tz-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return QP(o,(function(e){var t,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],m=o(f,d),g=r?m?0:s(f,d):m?s(f+(f<0?tz:-tz),d):0;if(!t&&(l=u=m)&&e.lineStart(),m!==u&&(!(h=a(t,p))||HP(t,h)||HP(p,h))&&(p[2]=1),m!==u)c=0,m?(e.lineStart(),h=a(p,t),e.point(h[0],h[1])):(h=a(t,p),e.point(h[0],h[1],2),e.lineEnd()),t=h;else if(i&&t&&r^m){var y;g&n||!(y=a(p,t,!0))||(c=0,r?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}!m||t&&HP(t,p)||e.point(p[0],p[1]),t=p,u=m,n=g},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),(function(t,r,i,o){!function(e,t,n,r,i,o){if(n){var a=cz(t),s=gz(t),u=r*n;null==i?(i=t+r*iz,o=t-u/2):(i=aL(a,i),o=aL(a,o),(r>0?i<o:i>o)&&(i+=r*iz));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Kz([a,-s*cz(c),-s*gz(c)]),e.point(l[0],l[1])}}(o,e,n,i,t,r)}),r?[0,-e]:[-tz,e-tz])},uL=1e9,lL=-1e9;function cL(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,l){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return sz(r[0]-e)<ZO?i>0?0:3:sz(r[0]-n)<ZO?i>0?2:1:sz(r[1]-t)<ZO?i>0?1:0:i>0?3:2}function s(e,t){return u(e.x,t.x)}function u(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var u,l,c,f,d,h,p,m,g,y,v,b=a,x=WP(),w={point:_,lineStart:function(){w.point=k,l&&l.push(c=[]);y=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(k(f,d),h&&g&&x.rejoin(),u.push(x.result()));w.point=_,g&&b.lineEnd()},polygonStart:function(){b=x,u=[],l=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,f=s[0],d=f[0],h=f[1];u<c;++u)o=d,a=h,d=(f=s[u])[0],h=f[1],a<=r?h>r&&(d-o)*(r-a)>(h-a)*(e-o)&&++t:h<=r&&(d-o)*(r-a)<(h-a)*(e-o)&&--t;return t}(),n=v&&t,i=(u=Cd(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&GP(u,s,t,o,a),a.polygonEnd());b=a,u=l=c=null}};function _(e,t){i(e,t)&&b.point(e,t)}function k(o,a){var s=i(o,a);if(l&&c.push([o,a]),y)f=o,d=a,h=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var u=[p=Math.max(lL,Math.min(uL,p)),m=Math.max(lL,Math.min(uL,m))],x=[o=Math.max(lL,Math.min(uL,o)),a=Math.max(lL,Math.min(uL,a))];!function(e,t,n,r,i,o){var a,s=e[0],u=e[1],l=0,c=1,f=t[0]-s,d=t[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<c&&(c=a)}return l>0&&(e[0]=s+l*f,e[1]=u+l*d),c<1&&(t[0]=s+c*f,t[1]=u+c*d),!0}}}}}(u,x,e,t,n,r)?s&&(b.lineStart(),b.point(o,a),v=!1):(g||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),v=!1)}p=o,m=a,g=s}return w}}function fL(e){return function(t){var n=new dL;for(var r in e)n[r]=e[r];return n.stream=t,n}}function dL(){}function hL(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Tz(n,e.stream(sP)),t(sP.result()),null!=r&&e.clipExtent(r),e}function pL(e,t,n){return hL(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])}),n)}function mL(e,t,n){return pL(e,[[0,0],t],n)}function gL(e,t,n){return hL(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])}),n)}function yL(e,t,n){return hL(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])}),n)}dL.prototype={constructor:dL,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var vL=cz(30*az),bL=function(e,t){return+t?function(e,t){function n(r,i,o,a,s,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var x=a+d,w=s+h,_=u+p,k=vz(x*x+w*w+_*_),E=wz(_/=k),S=sz(sz(_)-1)<ZO||sz(o-f)<ZO?(o+f)/2:lz(w,x),A=e(S,E),C=A[0],D=A[1],M=C-r,F=D-i,N=v*M-y*F;(N*N/b>t||sz((y*M+v*F)/b-.5)>.3||a*d+s*h+u*p<vL)&&(n(r,i,o,a,s,u,C,D,S,x/=k,w/=k,_,m,g),g.point(C,D),n(C,D,S,x,w,_,l,c,f,d,h,p,m,g))}}return function(t){var r,i,o,a,s,u,l,c,f,d,h,p,m={point:g,lineStart:y,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){c=NaN,m.point=v,t.lineStart()}function v(r,i){var o=Zz([r,i]),a=e(r,i);n(c,f,l,d,h,p,c=a[0],f=a[1],l=r,d=o[0],h=o[1],p=o[2],16,t),t.point(c,f)}function b(){m.point=g,t.lineEnd()}function x(){y(),m.point=w,m.lineEnd=_}function w(e,t){v(r=e,t),i=c,o=f,a=d,s=h,u=p,m.point=v}function _(){n(c,f,l,d,h,p,i,o,r,a,s,u,16,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return fL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var xL=fL({point:function(e,t){this.stream.point(e*az,t*az)}});function wL(e,t,n,r,i,o){if(!o)return function(e,t,n,r,i){function o(o,a){return[t+e*(o*=r),n-e*(a*=i)]}return o.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},o}(e,t,n,r,i);var a=cz(o),s=gz(o),u=a*e,l=s*e,c=a/e,f=s/e,d=(s*n-a*t)/e,h=(s*t+a*n)/e;function p(e,o){return[u*(e*=r)-l*(o*=i)+t,n-l*e-u*o]}return p.invert=function(e,t){return[r*(c*e-f*t+d),i*(h-f*e-c*t)]},p}function _L(e){return kL((function(){return e}))()}function kL(e){var t,n,r,i,o,a,s,u,l,c,f=150,d=480,h=250,p=0,m=0,g=0,y=0,v=0,b=0,x=1,w=1,_=null,k=ZP,E=null,S=XR,A=.5;function C(e){return u(e[0]*az,e[1]*az)}function D(e){return(e=u.invert(e[0],e[1]))&&[e[0]*oz,e[1]*oz]}function M(){var e=wL(f,0,0,x,w,b).apply(null,t(p,m)),r=wL(f,d-e[0],h-e[1],x,w,b);return n=nL(g,y,v),s=eL(t,r),u=eL(n,s),a=bL(s,A),F()}function F(){return l=c=null,C}return C.stream=function(e){return l&&c===e?l:l=xL(function(e){return fL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(k(a(S(c=e)))))},C.preclip=function(e){return arguments.length?(k=e,_=void 0,F()):k},C.postclip=function(e){return arguments.length?(S=e,E=r=i=o=null,F()):S},C.clipAngle=function(e){return arguments.length?(k=+e?sL(_=e*az):(_=null,ZP),F()):_*oz},C.clipExtent=function(e){return arguments.length?(S=null==e?(E=r=i=o=null,XR):cL(E=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),F()):null==E?null:[[E,r],[i,o]]},C.scale=function(e){return arguments.length?(f=+e,M()):f},C.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],M()):[d,h]},C.center=function(e){return arguments.length?(p=e[0]%360*az,m=e[1]%360*az,M()):[p*oz,m*oz]},C.rotate=function(e){return arguments.length?(g=e[0]%360*az,y=e[1]%360*az,v=e.length>2?e[2]%360*az:0,M()):[g*oz,y*oz,v*oz]},C.angle=function(e){return arguments.length?(b=e%360*az,M()):b*oz},C.reflectX=function(e){return arguments.length?(x=e?-1:1,M()):x<0},C.reflectY=function(e){return arguments.length?(w=e?-1:1,M()):w<0},C.precision=function(e){return arguments.length?(a=bL(s,A=e*e),F()):vz(A)},C.fitExtent=function(e,t){return pL(C,e,t)},C.fitSize=function(e,t){return mL(C,e,t)},C.fitWidth=function(e,t){return gL(C,e,t)},C.fitHeight=function(e,t){return yL(C,e,t)},function(){return t=e.apply(this,arguments),C.invert=t.invert&&D,M()}}function EL(e){var t=0,n=tz/3,r=kL(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*az,n=e[1]*az):[t*oz,n*oz]},i}function SL(e,t){var n=gz(e),r=(n+gz(t))/2;if(sz(r)<ZO)return function(e){var t=cz(e);function n(e,n){return[e*t,gz(n)/t]}return n.invert=function(e,n){return[e/t,wz(n*t)]},n}(e);var i=1+n*(2*r-n),o=vz(i)/r;function a(e,t){var n=vz(i-2*r*gz(t))/r;return[n*gz(e*=r),o-n*cz(e)]}return a.invert=function(e,t){var n=o-t,a=lz(e,sz(n))*yz(n);return n*r<0&&(a-=tz*yz(e)*yz(n)),[a/r,wz((i-(e*e+n*n)*r*r)/(2*r))]},a}var AL=function(){return EL(SL).scale(155.424).center([0,33.6442])},CL=function(){return AL().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function DL(e){return function(t,n){var r=cz(t),i=cz(n),o=e(r*i);return o===1/0?[2,0]:[o*i*gz(t),o*gz(n)]}}function ML(e){return function(t,n){var r=vz(t*t+n*n),i=e(r),o=gz(i),a=cz(i);return[lz(t*o,r*a),wz(r&&n*o/r)]}}var FL=DL((function(e){return vz(2/(1+e))}));FL.invert=ML((function(e){return 2*wz(e/2)}));var NL=DL((function(e){return(e=xz(e))&&e/gz(e)}));NL.invert=ML((function(e){return e}));function $L(e,t){return[e,pz(bz((nz+t)/2))]}$L.invert=function(e,t){return[e,2*uz(dz(t))-nz]};function TL(e){var t,n,r,i=_L(e),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=tz*a(),s=i(function(e){function t(t){return(t=e(t[0]*az,t[1]*az))[0]*=oz,t[1]*=oz,t}return e=nL(e[0]*az,e[1]*az,e.length>2?e[2]*az:0),t.invert=function(t){return(t=e.invert(t[0]*az,t[1]*az))[0]*=oz,t[1]*=oz,t},t}(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===$L?[[Math.max(s[0]-o,l),t],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),c()):a()},i.translate=function(e){return arguments.length?(s(e),c()):s()},i.center=function(e){return arguments.length?(o(e),c()):o()},i.clipExtent=function(e){return arguments.length?(null==e?l=t=n=r=null:(l=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),c()):null==l?null:[[l,t],[n,r]]},c()}function OL(e){return bz((nz+e)/2)}function zL(e,t){var n=cz(e),r=e===t?gz(e):pz(n/cz(t))/pz(OL(t)/OL(e)),i=n*mz(OL(e),r)/r;if(!r)return $L;function o(e,t){i>0?t<-nz+ZO&&(t=-nz+ZO):t>nz-ZO&&(t=nz-ZO);var n=i/mz(OL(t),r);return[n*gz(r*e),i-n*cz(r*e)]}return o.invert=function(e,t){var n=i-t,o=yz(r)*vz(e*e+n*n),a=lz(e,sz(n))*yz(n);return n*r<0&&(a-=tz*yz(e)*yz(n)),[a/r,2*uz(mz(i/o,1/r))-nz]},o}function RL(e,t){return[e,t]}RL.invert=RL;function PL(e,t){var n=cz(e),r=e===t?gz(e):(n-cz(t))/(t-e),i=n/r+e;if(sz(r)<ZO)return RL;function o(e,t){var n=i-t,o=r*e;return[n*gz(o),i-n*cz(o)]}return o.invert=function(e,t){var n=i-t,o=lz(e,sz(n))*yz(n);return n*r<0&&(o-=tz*yz(e)*yz(n)),[o/r,i-yz(r)*vz(e*e+n*n)]},o}var LL=1.340264,BL=-.081106,IL=893e-6,jL=.003796,UL=vz(3)/2;function qL(e,t){var n=wz(UL*gz(t)),r=n*n,i=r*r*r;return[e*cz(n)/(UL*(LL+-.24331799999999998*r+i*(.0062510000000000005+.034164*r))),n*(LL+BL*r+i*(IL+jL*r))]}qL.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(LL+BL*i+o*(IL+jL*i))-t)/(LL+-.24331799999999998*i+o*(.0062510000000000005+.034164*i)))*r)*i*i,!(sz(n)<ez));++a);return[UL*e*(LL+-.24331799999999998*i+o*(.0062510000000000005+.034164*i))/cz(r),wz(gz(r)/UL)]};function WL(e,t){var n=cz(t),r=cz(e)*n;return[n*gz(e)/r,gz(t)/r]}WL.invert=ML(uz);function HL(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}HL.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(sz(n)>ZO&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function VL(e,t){return[cz(t)*gz(e),gz(t)]}VL.invert=ML(wz);function GL(e,t){var n=cz(t),r=1+cz(e)*n;return[n*gz(e)/r,gz(t)/r]}GL.invert=ML((function(e){return 2*uz(e)}));function YL(e,t){return[pz(bz((nz+t)/2)),-e]}YL.invert=function(e,t){return[-t,2*uz(dz(e))-nz]};var XL=Math.abs,QL=(Math.atan,Math.atan2,Math.ceil,Math.cos),JL=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),KL=(Math.tan,Math.PI),ZL=KL/2,eB=(Math.SQRT1_2,nB(2));nB(KL);function tB(e){return e>1?ZL:e<-1?-ZL:Math.asin(e)}function nB(e){return e>0?Math.sqrt(e):0}function rB(e,t){var n,r=e*JL(t),i=30;do{t-=n=(t+JL(t)-r)/(1+QL(t))}while(XL(n)>1e-6&&--i>0);return t/2}var iB=function(e,t,n){function r(r,i){return[e*r*QL(i=rB(n,i)),t*JL(i)]}return r.invert=function(r,i){return i=tB(i/t),[r/(e*QL(i)),tB((2*i+JL(2*i))/n)]},r}(eB/ZL,eB,KL);const oB=qP(),aB=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function sB(e,t){return function n(){const r=t();return r.type=e,r.path=qP().projection(r),r.copy=r.copy||function(){const e=n();return aB.forEach((t=>{r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}function uB(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(cB[e]=sB(e,t),this):cB[e]||null}function lB(e){return e&&e.path||oB}const cB={albers:CL,albersusa:function(){var e,t,n,r,i,o,a=CL(),s=AL().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=AL().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,t){o=[e,t]}};function c(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(r.point(t,a),o)||(i.point(t,a),o)}function f(){return e=t=null,c}return c.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(e)},c.stream=function(n){return e&&t===n?e:(r=[a.stream(t=n),s.stream(n),u.stream(n)],i=r.length,e={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},c.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),u.precision(e),f()):a.precision()},c.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),u.scale(e),c.translate(a.translate())):a.scale()},c.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],c=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,c-.238*t],[o+.455*t,c+.238*t]]).stream(l),r=s.translate([o-.307*t,c+.201*t]).clipExtent([[o-.425*t+ZO,c+.12*t+ZO],[o-.214*t-ZO,c+.234*t-ZO]]).stream(l),i=u.translate([o-.205*t,c+.212*t]).clipExtent([[o-.214*t+ZO,c+.166*t+ZO],[o-.115*t-ZO,c+.234*t-ZO]]).stream(l),f()},c.fitExtent=function(e,t){return pL(c,e,t)},c.fitSize=function(e,t){return mL(c,e,t)},c.fitWidth=function(e,t){return gL(c,e,t)},c.fitHeight=function(e,t){return yL(c,e,t)},c.scale(1070)},azimuthalequalarea:function(){return _L(FL).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return _L(NL).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return EL(zL).scale(109.5).parallels([30,30])},conicequalarea:AL,conicequidistant:function(){return EL(PL).scale(131.154).center([0,13.9389])},equalEarth:function(){return _L(qL).scale(177.158)},equirectangular:function(){return _L(RL).scale(152.63)},gnomonic:function(){return _L(WL).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,i,o,a,s=1,u=0,l=0,c=1,f=1,d=0,h=null,p=1,m=1,g=fL({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),y=XR;function v(){return p=s*c,m=s*f,o=a=null,b}function b(n){var r=n[0]*p,i=n[1]*m;if(d){var o=i*e-r*t;r=r*e+i*t,i=o}return[r+u,i+l]}return b.invert=function(n){var r=n[0]-u,i=n[1]-l;if(d){var o=i*e+r*t;r=r*e-i*t,i=o}return[r/p,i/m]},b.stream=function(e){return o&&a===e?o:o=g(y(a=e))},b.postclip=function(e){return arguments.length?(y=e,h=n=r=i=null,v()):y},b.clipExtent=function(e){return arguments.length?(y=null==e?(h=n=r=i=null,XR):cL(h=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),v()):null==h?null:[[h,n],[r,i]]},b.scale=function(e){return arguments.length?(s=+e,v()):s},b.translate=function(e){return arguments.length?(u=+e[0],l=+e[1],v()):[u,l]},b.angle=function(n){return arguments.length?(t=gz(d=n%360*az),e=cz(d),v()):d*oz},b.reflectX=function(e){return arguments.length?(c=e?-1:1,v()):c<0},b.reflectY=function(e){return arguments.length?(f=e?-1:1,v()):f<0},b.fitExtent=function(e,t){return pL(b,e,t)},b.fitSize=function(e,t){return mL(b,e,t)},b.fitWidth=function(e,t){return gL(b,e,t)},b.fitHeight=function(e,t){return yL(b,e,t)},b},mercator:function(){return TL($L).scale(961/iz)},mollweide:function(){return _L(iB).scale(169.529)},naturalEarth1:function(){return _L(HL).scale(175.295)},orthographic:function(){return _L(VL).scale(249.5).clipAngle(90.000001)},stereographic:function(){return _L(GL).scale(250).clipAngle(142)},transversemercator:function(){var e=TL(YL),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in cB)uB(e,cB[e]);function fB(){}const dB=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function hB(){var e=1,t=1,n=a;function r(e,t){return t.map((t=>i(e,t)))}function i(r,i){var a=[],s=[];return function(n,r,i){var a,s,u,l,c,f,d=new Array,h=new Array;a=s=-1,l=n[0]>=r,dB[l<<1].forEach(p);for(;++a<e-1;)u=l,l=n[a+1]>=r,dB[u|l<<1].forEach(p);dB[l<<0].forEach(p);for(;++s<t-1;){for(a=-1,l=n[s*e+e]>=r,c=n[s*e]>=r,dB[l<<1|c<<2].forEach(p);++a<e-1;)u=l,l=n[s*e+e+a+1]>=r,f=c,c=n[s*e+a+1]>=r,dB[u|l<<1|c<<2|f<<3].forEach(p);dB[l|c<<3].forEach(p)}a=-1,c=n[s*e]>=r,dB[c<<2].forEach(p);for(;++a<e-1;)f=c,c=n[s*e+a+1]>=r,dB[c<<2|f<<3].forEach(p);function p(e){var t,n,r=[e[0][0]+a,e[0][1]+s],u=[e[1][0]+a,e[1][1]+s],l=o(r),c=o(u);(t=h[l])?(n=d[c])?(delete h[t.end],delete d[n.start],t===n?(t.ring.push(u),i(t.ring)):d[t.start]=h[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete h[t.end],t.ring.push(u),h[t.end=c]=t):(t=d[c])?(n=h[l])?(delete d[t.start],delete h[n.end],t===n?(t.ring.push(u),i(t.ring)):d[n.start]=h[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(r),d[t.start=l]=t):d[l]=h[c]={start:l,end:c,ring:[r,u]}}dB[c<<3].forEach(p)}(r,i,(e=>{n(e,r,i),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?a.push([e]):s.push(e)})),s.forEach((e=>{for(var t,n=0,r=a.length;n<r;++n)if(-1!==pB((t=a[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:i,coordinates:a}}function o(t){return 2*t[0]+t[1]*(e+1)*4}function a(n,r,i){n.forEach((n=>{var o,a=n[0],s=n[1],u=0|a,l=0|s,c=r[l*e+u];a>0&&a<e&&u===a&&(o=r[l*e+u-1],n[0]=a+(i-o)/(c-o)-.5),s>0&&s<t&&l===s&&(o=r[(l-1)*e+u],n[1]=s+(i-o)/(c-o)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.floor(n[0]),o=Math.floor(n[1]);return i>=0&&o>=0||ov("invalid size"),e=i,t=o,r},r.smooth=function(e){return arguments.length?(n=e?a:fB,r):n===a},r}function pB(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=mB(e,t[r]))return n;return 0}function mB(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var u=e[o],l=u[0],c=u[1],f=e[s],d=f[0],h=f[1];if(gB(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function gB(e,t,n){var r,i,o,a;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(i=e[r=+(e[0]===t[0])],o=n[r],a=t[r],i<=o&&o<=a||a<=o&&o<=i)}function yB(e,t,n){return function(r){var i=Kv(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,u=t?yd(o,a,e):s/(e+1);return Dd(o+u,a,u)}}function vB(e){Fk.call(this,null,e)}function bB(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function u(e){e.forEach(l)}function l(e){s&&e.reverse(),e.forEach(c)}function c(e){e[0]=(e[0]-o)*t+r,e[1]=(e[1]-a)*n+i}return function(e){return e.coordinates.forEach(u),e}}function xB(e,t,n){const r=e>=0?e:Bk(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function wB(e){return qv(e)?e:Xv(+e)}function _B(){var e=e=>e[0],t=e=>e[1],n=fv,r=[-1,-1],i=960,o=500,a=2;function s(s,u){const l=xB(r[0],s,e)>>a,c=xB(r[1],s,t)>>a,f=l?l+2:0,d=c?c+2:0,h=2*f+(i>>a),p=2*d+(o>>a),m=new Float32Array(h*p),g=new Float32Array(h*p);let y=m;s.forEach((r=>{const i=f+(+e(r)>>a),o=d+(+t(r)>>a);i>=0&&i<h&&o>=0&&o<p&&(m[i+o*h]+=+n(r))})),l>0&&c>0?(kB(h,p,m,g,l),EB(h,p,g,m,c),kB(h,p,m,g,l),EB(h,p,g,m,c),kB(h,p,m,g,l),EB(h,p,g,m,c)):l>0?(kB(h,p,m,g,l),kB(h,p,g,m,l),kB(h,p,m,g,l),y=g):c>0&&(EB(h,p,m,g,c),EB(h,p,g,m,c),EB(h,p,m,g,c),y=g);const v=u?Math.pow(2,-2*a):1/Md(y);for(let e=0,t=h*p;e<t;++e)y[e]*=v;return{values:y,scale:1<<a,width:h,height:p,x1:f,y1:d,x2:f+(i>>a),y2:d+(o>>a)}}return s.x=function(t){return arguments.length?(e=wB(t),s):e},s.y=function(e){return arguments.length?(t=wB(e),s):t},s.weight=function(e){return arguments.length?(n=wB(e),s):n},s.size=function(e){if(!arguments.length)return[i,o];var t=+e[0],n=+e[1];return t>=0&&n>=0||ov("invalid size"),i=t,o=n,s},s.cellSize=function(e){return arguments.length?((e=+e)>=1||ov("invalid cell size"),a=Math.floor(Math.log(e)/Math.LN2),s):1<<a},s.bandwidth=function(e){return arguments.length?(1===(e=jv(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&ov("invalid bandwidth"),r=e,s):r},s}function kB(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<t;++a)for(let t=0,s=0;t<e+i;++t)t<e&&(s+=n[t+a*e]),t>=i&&(t>=o&&(s-=n[t-o+a*e]),r[t-i+a*e]=s/Math.min(t+1,e-1+o-t,o))}function EB(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<e;++a)for(let s=0,u=0;s<t+i;++s)s<t&&(u+=n[a+s*e]),s>=i&&(s>=o&&(u-=n[a+(s-o)*e]),r[a+(s-i)*e]=u/Math.min(s+1,t-1+o-s,o))}function SB(e){Fk.call(this,null,e)}vB.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},ob(vB,Fk,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||lv,o=hB().smooth(!1!==e.smooth),a=e.thresholds||function(e,t,n){const r=yB(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map((e=>xd(t(e).values))))}(r,i,e),s=null===e.as?null:e.as||"contour",u=[];return r.forEach((t=>{const n=i(t),r=o.size([n.width,n.height])(n.values,gv(a)?a:a(n.values));!function(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;qv(i)&&(i=i(n,r));qv(o)&&(o=o(n,r));if((1===i||null==i)&&!o)return;const a=(cb(i)?i:i[0])||1,s=(cb(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(bB(t,a,s,u,l))}(r,n,t,e),r.forEach((e=>{u.push(tk(t,Z_(null!=s?{[s]:e}:e)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}}),SB.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const AB=["x","y","weight","size","cellSize","bandwidth"];function CB(e,t){return AB.forEach((n=>null!=t[n]?e[n](t[n]):0)),e}function DB(e){Fk.call(this,null,e)}ob(SB,Fk,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=function(e,t){var n,r,i,o,a,s,u=[],l=e=>e(o);if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(l)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(ev),a=CB(_B(),e),s=e.as||"grid";return n=i.map((t=>Z_(function(e,t){for(let n=0;n<o.length;++n)e[o[n]]=t[n];return e}({[s]:a(t,e.counts)},t.dims)))),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),DB.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},ob(DB,Fk,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=hB().smooth(!1!==e.smooth),a=e.values,s=e.thresholds||yB(e.count||10,e.nice,!!a),u=e.size;return a||(a=t.materialize(t.SOURCE).source,r=bB(n=CB(_B(),e)(a,!0),n.scale||1,n.scale||1,0,0),u=[n.width,n.height],a=n.values),s=gv(s)?s:s(a),a=o.size(u)(a,s),r&&a.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(a||[]).map(Z_),i}});const MB="Feature",FB="FeatureCollection";function NB(e){Fk.call(this,null,e)}function $B(e){Fk.call(this,null,e)}function TB(e){Fk.call(this,null,e)}function OB(e){Fk.call(this,null,e)}function zB(e){Fk.call(this,[],e),this.generator=function(){var e,t,n,r,i,o,a,s,u,l,c,f,d=10,h=d,p=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Dd(fz(r/p)*p,n,p).map(c).concat(Dd(fz(s/m)*m,a,m).map(f)).concat(Dd(fz(t/d)*d,e,d).filter((function(e){return sz(e%p)>ZO})).map(u)).concat(Dd(fz(o/h)*h,i,h).filter((function(e){return sz(e%m)>ZO})).map(l))}return y.lines=function(){return v().map((function(e){return{type:"LineString",coordinates:e}}))},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(a).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),y.precision(g)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(g)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(p=+e[0],m=+e[1],y):[p,m]},y.stepMinor=function(e){return arguments.length?(d=+e[0],h=+e[1],y):[d,h]},y.precision=function(d){return arguments.length?(g=+d,u=qR(o,i,90),l=WR(t,e,g),c=qR(s,a,90),f=WR(r,n,g),y):g},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}()}function RB(e){Fk.call(this,null,e)}function PB(e){if(!qv(e))return!1;const t=Sb(tv(e));return t.$x||t.$y||t.$value||t.$max}function LB(e){Fk.call(this,null,e),this.modified(!0)}function BB(e,t,n){qv(e[t])&&e[t](n)}NB.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},ob(NB,Fk,{transform:function(e,t){var n,r=this._features,i=this._points,o=e.fields,a=o&&o[0],s=o&&o[1],u=e.geojson||!o&&lv,l=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(tv(u))||a&&t.modified(tv(a))||s&&t.modified(tv(s)),this.value&&!n||(l=t.SOURCE,this._features=r=[],this._points=i=[]),u&&t.visit(l,(e=>r.push(u(e)))),a&&s&&(t.visit(l,(e=>{var t=a(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])})),r=r.concat({type:MB,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:FB,features:r}}}),$B.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},ob($B,Fk,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||lv,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=lB(e.projection),n.materialize().reflow()):a=i===lv||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=function(e,t){const n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(a,(e=>e[o]=r(i(e)))),r.pointRadius(s),n.modifies(o)}}),TB.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},ob(TB,Fk,{transform:function(e,t){var n,r=e.projection,i=e.fields[0],o=e.fields[1],a=e.as||["x","y"],s=a[0],u=a[1];function l(e){const t=r([i(e),o(e)]);t?(e[s]=t[0],e[u]=t[1]):(e[s]=void 0,e[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(n=t.modified(i.fields)||t.modified(o.fields),t.visit(n?t.ADD_MOD:t.ADD,l)),t.modifies(a)}}),OB.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},ob(OB,Fk,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){const r=null==n?n=>e(t(n)):r=>{var i=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(i),o};return r.context=t=>(e.context(t),r),r}(lB(e.projection),e.field||sv("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,(e=>e[i]=r)),n.modifies(i)}}),zB.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},ob(zB,Fk,{transform:function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(const t in e)qv(i[t])&&i[t](e[t]);return n=i(),r.length?t.mod.push(nk(r[0],n)):t.add.push(Z_(n)),r[0]=n,t}}),RB.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},ob(RB,Fk,{transform:function(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,i=e.field||lv,o=function(e,t){let n;qv(e)?(n=n=>e(n,t),n.dep=PB(e)):e?n=Xv(e):(n=e=>e.$value/e.$max||0,n.dep=!0);return n}(e.opacity,e),a=function(e,t){let n;qv(e)?(n=n=>Zd(e(n,t)),n.dep=PB(e)):n=Xv(Zd(e||"#888"));return n}(e.color,e),s=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?xd(n.map((e=>xd(i(e).values)))):0};return n.forEach((e=>{const t=i(e),n=Jv({},e,u);r||(n.$max=xd(t.values||[])),e[s]=function(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?e=>c[e]:cv,d=vC(u-a,l-s),h=d.getContext("2d"),p=h.getImageData(0,0,u-a,l-s),m=p.data;for(let e=s,o=0;e<l;++e){t.$y=e-s;for(let s=a,l=e*i;s<u;++s,o+=4){t.$x=s-a,t.$value=f(s+l);const e=n(t);m[o+0]=e.r,m[o+1]=e.g,m[o+2]=e.b,m[o+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}(t,n,a.dep?a:Xv(a(n)),o.dep?o:Xv(o(n)))})),t.reflow(!0).modifies(s)}}),ob(LB,Fk,{transform:function(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function(e){const t=uB((e||"mercator").toLowerCase());t||ov("Unrecognized projection type: "+e);return t()}(e.type),aB.forEach((t=>{null!=e[t]&&BB(n,t,e[t])}))):aB.forEach((t=>{e.modified(t)&&BB(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){const n=function(e){return 1===(e=jv(e)).length?e[0]:{type:FB,features:e.reduce(((e,t)=>e.concat(function(e){return e.type===FB?e.features:jv(e).filter((e=>null!=e)).map((e=>e.type===MB?e:{type:MB,geometry:e}))}(t))),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),t(KO,"projection",(function(){return LB})),t(KO,"kde2d",(function(){return SB})),t(KO,"isocontour",(function(){return vB})),t(KO,"heatmap",(function(){return RB})),t(KO,"graticule",(function(){return zB})),t(KO,"geoshape",(function(){return OB})),t(KO,"geopoint",(function(){return TB})),t(KO,"geopath",(function(){return $B})),t(KO,"geojson",(function(){return NB})),t(KO,"contour",(function(){return DB}));var IB={};function jB(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,u,l,c,f,d,h=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((l=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=h,!(h=h[f=c<<1|l]))return i[f]=p,e;if(s=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===s&&n===u)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(l=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((f=c<<1|l)==(d=(u>=a)<<1|s>=o));return i[d]=h,i[f]=p,e}var UB=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function qB(e){return e[0]}function WB(e){return e[1]}function HB(e,t,n){var r=new VB(null==t?qB:t,null==n?WB:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function VB(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function GB(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var YB=HB.prototype=VB.prototype;YB.copy=function(){var e,t,n=new VB(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=GB(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=GB(t));return n},YB.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return jB(this.cover(t,n),t,n,e)},YB.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<o;++n)jB(this,a[n],s[n],e[n]);return this},YB.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,u=i-n||1,l=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},YB.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},YB.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},YB.find=function(e,t,n){var r,i,o,a,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],m=this._root;for(m&&p.push(new UB(m,c,f,d,h)),null==n?n=1/0:(c=e-n,f=t-n,d=e+n,h=t+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>d||(o=u.y0)>h||(a=u.x1)<c||(s=u.y1)<f))if(m.length){var g=(i+a)/2,y=(o+s)/2;p.push(new UB(m[3],g,y,a,s),new UB(m[2],i,y,g,s),new UB(m[1],g,o,a,y),new UB(m[0],i,o,g,y)),(l=(t>=y)<<1|e>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);c=e-w,f=t-w,d=e+w,h=t+w,r=m.data}}return r},YB.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,u,l,c,f,d,h=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((l=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(u=(m+y)/2))?m=u:y=u,t=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},YB.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},YB.root=function(){return this._root},YB.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},YB.visit=function(e){var t,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new UB(u,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new UB(n,l,c,o,a)),(n=u[2])&&s.push(new UB(n,r,c,l,a)),(n=u[1])&&s.push(new UB(n,l,i,o,c)),(n=u[0])&&s.push(new UB(n,r,i,l,c))}return this},YB.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new UB(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,u=t.x1,l=t.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&n.push(new UB(o,a,s,c,f)),(o=i[1])&&n.push(new UB(o,c,s,u,f)),(o=i[2])&&n.push(new UB(o,a,f,c,l)),(o=i[3])&&n.push(new UB(o,c,f,u,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},YB.x=function(e){return arguments.length?(this._x=e,this):this._x},YB.y=function(e){return arguments.length?(this._y=e,this):this._y};var XB=function(e){return function(){return e}},QB=function(e){return 1e-6*(e()-.5)};function JB(e){return e.x+e.vx}function KB(e){return e.y+e.vy}function ZB(e){return e.index}function eI(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}var tI={value:()=>{}};function nI(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new rI(r)}function rI(e){this._=e}function iI(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function oI(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function aI(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=tI,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}rI.prototype=nI.prototype={constructor:rI,on:function(e,t){var n,r=this._,i=iI(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=aI(r[n],e.name,t);else if(null==t)for(n in r)r[n]=aI(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=oI(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new rI(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var sI,uI,lI=0,cI=0,fI=0,dI=0,hI=0,pI=0,mI="object"==typeof performance&&performance.now?performance:Date,gI="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yI(){return hI||(gI(vI),hI=mI.now()+pI)}function vI(){hI=0}function bI(){this._call=this._time=this._next=null}function xI(e,t,n){var r=new bI;return r.restart(e,t,n),r}function wI(){hI=(dI=mI.now())+pI,lI=cI=0;try{!function(){yI(),++lI;for(var e,t=sI;t;)(e=hI-t._time)>=0&&t._call.call(null,e),t=t._next;--lI}()}finally{lI=0,function(){var e,t,n=sI,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:sI=t);uI=e,kI(r)}(),hI=0}}function _I(){var e=mI.now(),t=e-dI;t>1e3&&(pI-=t,dI=e)}function kI(e){lI||(cI&&(cI=clearTimeout(cI)),e-hI>24?(e<1/0&&(cI=setTimeout(wI,e-mI.now()-pI)),fI&&(fI=clearInterval(fI))):(fI||(dI=mI.now(),fI=setInterval(_I,1e3)),lI=1,gI(wI)))}bI.prototype=xI.prototype={constructor:bI,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?yI():+n)+(null==t?0:+t),this._next||uI===this||(uI?uI._next=this:sI=this,uI=this),this._call=e,this._time=n,kI()},stop:function(){this._call&&(this._call=null,this._time=1/0,kI())}};var EI=function(e,t,n){var r=new bI;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r};const SI=4294967296;function AI(e){return e.x}function CI(e){return e.y}var DI=Math.PI*(3-Math.sqrt(5)),MI=function(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=xI(f),l=nI("tick","end"),c=function(){let e=1;return()=>(e=(1664525*e+1013904223)%SI)/SI}();function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(r){var u,l,c=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(e){e(n)})),u=0;u<c;++u)null==(l=e[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return t}function h(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+n),o=n*DI;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,c),t}return null==e&&(e=[]),h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),s.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},randomSource:function(e){return arguments.length?(c=e,s.forEach(p),t):c},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,r){var i,o,a,s,u,l=0,c=e.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=t-(s=e[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(e,n){return arguments.length>1?(l.on(e,n),t):l.on(e)}}};const FI={center:function(e,t){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-e)*r,u=(u/a-t)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i},collide:function(e){var t,n,r,i=1,o=1;function a(){for(var e,a,u,l,c,f,d,h=t.length,p=0;p<o;++p)for(a=HB(t,JB,KB).visitAfter(s),e=0;e<h;++e)u=t[e],f=n[u.index],d=f*f,l=u.x+u.vx,c=u.y+u.vy,a.visit(m);function m(e,t,n,o,a){var s=e.data,h=e.r,p=f+h;if(!s)return t>l+p||o<l-p||n>c+p||a<c-p;if(s.index>u.index){var m=l-s.x-s.vx,g=c-s.y-s.vy,y=m*m+g*g;y<p*p&&(0===m&&(y+=(m=QB(r))*m),0===g&&(y+=(g=QB(r))*g),y=(p-(y=Math.sqrt(y)))/y*i,u.vx+=(m*=y)*(p=(h*=h)/(d+h)),u.vy+=(g*=y)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=XB(null==e?1:+e)),a.initialize=function(e,n){t=e,r=n,u()},a.iterations=function(e){return arguments.length?(o=+e,a):o},a.strength=function(e){return arguments.length?(i=+e,a):i},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:XB(+t),u(),a):e},a},nbody:function(){var e,t,n,r,i,o=XB(-30),a=1,s=1/0,u=.81;function l(n){var i,o=e.length,a=HB(e,AI,CI).visitAfter(f);for(r=n,i=0;i<o;++i)t=e[i],a.visit(d)}function c(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+o(n,t,e)}}function f(e){var t,n,r,o,a,s=0,u=0;if(e.length){for(r=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,u+=n,r+=n*t.x,o+=n*t.y);e.x=r/u,e.y=o/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function d(e,o,l,c){if(!e.value)return!0;var f=e.x-t.x,d=e.y-t.y,h=c-o,p=f*f+d*d;if(h*h/u<p)return p<s&&(0===f&&(p+=(f=QB(n))*f),0===d&&(p+=(d=QB(n))*d),p<a&&(p=Math.sqrt(a*p)),t.vx+=f*e.value*r/p,t.vy+=d*e.value*r/p),!0;if(!(e.length||p>=s)){(e.data!==t||e.next)&&(0===f&&(p+=(f=QB(n))*f),0===d&&(p+=(d=QB(n))*d),p<a&&(p=Math.sqrt(a*p)));do{e.data!==t&&(h=i[e.data.index]*r/p,t.vx+=f*h,t.vy+=d*h)}while(e=e.next)}}return l.initialize=function(t,r){e=t,n=r,c()},l.strength=function(e){return arguments.length?(o="function"==typeof e?e:XB(+e),c(),l):o},l.distanceMin=function(e){return arguments.length?(a=e*e,l):Math.sqrt(a)},l.distanceMax=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l.theta=function(e){return arguments.length?(u=e*e,l):Math.sqrt(u)},l},link:function(e){var t,n,r,i,o,a,s=ZB,u=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},l=XB(30),c=1;function f(r){for(var i=0,s=e.length;i<c;++i)for(var u,l,f,d,h,p,m,g=0;g<s;++g)l=(u=e[g]).source,d=(f=u.target).x+f.vx-l.x-l.vx||QB(a),h=f.y+f.vy-l.y-l.vy||QB(a),d*=p=((p=Math.sqrt(d*d+h*h))-n[g])/p*r*t[g],h*=p,f.vx-=d*(m=o[g]),f.vy-=h*m,l.vx+=d*(m=1-m),l.vy+=h*m}function d(){if(r){var a,u,l=r.length,c=e.length,f=new Map(r.map(((e,t)=>[s(e,t,r),e])));for(a=0,i=new Array(l);a<c;++a)(u=e[a]).index=a,"object"!=typeof u.source&&(u.source=eI(f,u.source)),"object"!=typeof u.target&&(u.target=eI(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=e[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);t=new Array(c),h(),n=new Array(c),p()}}function h(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+u(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e,t){r=e,a=t,d()},f.links=function(t){return arguments.length?(e=t,d(),f):e},f.id=function(e){return arguments.length?(s=e,f):s},f.iterations=function(e){return arguments.length?(c=+e,f):c},f.strength=function(e){return arguments.length?(u="function"==typeof e?e:XB(+e),h(),f):u},f.distance=function(e){return arguments.length?(l="function"==typeof e?e:XB(+e),p(),f):l},f},x:function(e){var t,n,r,i=XB(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=XB(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:XB(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:XB(+t),a(),o):e},o},y:function(e){var t,n,r,i=XB(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=XB(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:XB(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:XB(+t),a(),o):e},o}},NI="forces",$I=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],TI=["static","iterations"],OI=["x","y","vx","vy"];function zI(e){Fk.call(this,null,e)}function RI(e,t,n,r){var i,o,a,s,u=jv(t.forces);for(i=0,o=$I.length;i<o;++i)(a=$I[i])!==NI&&t.modified(a)&&e[a](t[a]);for(i=0,o=u.length;i<o;++i)s=NI+i,(a=n||t.modified(NI,i)?LI(u[i]):r&&PI(u[i],r)?e.force(s):null)&&e.force(s,a);for(o=e.numForces||0;i<o;++i)e.force(NI+i,null);return e.numForces=u.length,e}function PI(e,t){var n,r;for(n in e)if(qv(r=e[n])&&t.modified(tv(r)))return 1;return 0}function LI(e){var t,n;for(n in tb(FI,e.force)||ov("Unrecognized force: "+e.force),t=FI[e.force](),e)qv(t[n])&&BI(t[n],e[n],e);return t}function BI(e,t,n){e(qv(t)?e=>t(e,n):t)}zI.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:OI}]},ob(zI,Fk,{transform:function(e,t){var n,r,i=this.value,o=t.changed(t.ADD_REM),a=e.modified($I),s=e.iterations||300;if(i?(o&&(t.modifies("index"),i.nodes(t.source)),(a||t.changed(t.MOD))&&RI(i,e,0,t)):(this.value=i=function(e,t){const n=MI(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),RI(n,t,!0).on("end",(()=>o=!0))}(t.source,e),i.on("tick",(n=t.dataflow,r=this,()=>n.touch(r).run())),e.static||(o=!0,i.tick()),t.modifies("index")),a||o||e.modified(TI)||t.changed()&&e.restart)if(i.alpha(Math.max(i.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),e.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return t.StopPropagation;return this.finish(e,t)},finish:function(e,t){const n=t.dataflow;for(let e,t=this._argops,s=0,u=t.length;s<u;++s)if(e=t[s],e.name===NI&&"link"===e.op._argval.force)for(var r,i=e.op._argops,o=0,a=i.length;o<a;++o)if("links"===i[o].name&&(r=i[o].op.source)){n.pulse(r,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(OI)}}),t(IB,"force",(function(){return zI}));var II={};function jI(e,t){return e.parent===t.parent?1:2}function UI(e,t){return e+t.x}function qI(e,t){return Math.max(e,t.y)}function WI(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function HI(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=GI)):void 0===t&&(t=VI);for(var n,r,i,o,a,s=new QI(e),u=[s];n=u.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new QI(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(XI)}function VI(e){return e.children}function GI(e){return Array.isArray(e)?e[1]:null}function YI(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function XI(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function QI(e){this.data=e,this.depth=this.height=0,this.parent=null}QI.prototype=HI.prototype={constructor:QI,count:function(){return this.eachAfter(WI)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++u,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return HI(this).eachBefore(YI)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,o=[i];do{for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n])}while(o.length)}};var JI=function(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,o=[];r<i;)t=e[r],n&&ej(n,t)?++r:(n=nj(o=KI(o,t)),r=0);return n};function KI(e,t){var n,r;if(tj(t,e))return[t];for(n=0;n<e.length;++n)if(ZI(t,e[n])&&tj(rj(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ZI(rj(e[n],e[r]),t)&&ZI(rj(e[n],t),e[r])&&ZI(rj(e[r],t),e[n])&&tj(ij(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ZI(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function ej(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function tj(e,t){for(var n=0;n<t.length;++n)if(!ej(e,t[n]))return!1;return!0}function nj(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return rj(e[0],e[1]);case 3:return ij(e[0],e[1],e[2])}var t}function rj(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}function ij(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-a,h=r-l,p=i-s,m=i-c,g=u-o,y=f-o,v=r*r+i*i-o*o,b=v-a*a-s*s+u*u,x=v-l*l-c*c+f*f,w=h*p-d*m,_=(p*x-m*b)/(2*w)-r,k=(m*g-p*y)/w,E=(h*b-d*x)/(2*w)-i,S=(d*y-h*g)/w,A=k*k+S*S-1,C=2*(o+_*k+E*S),D=_*_+E*E-o*o,M=-(A?(C+Math.sqrt(C*C-4*A*D))/(2*A):D/C);return{x:r+_+k*M,y:i+E+S*M,r:M}}function oj(e,t,n){var r,i,o,a,s=e.x-t.x,u=e.y-t.y,l=s*s+u*u;l?(i=t.r+n.r,i*=i,a=e.r+n.r,i>(a*=a)?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=e.x-r*s-o*u,n.y=e.y-r*u+o*s):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=t.x+r*s-o*u,n.y=t.y+r*u+o*s)):(n.x=t.x+n.r,n.y=t.y)}function aj(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function sj(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function uj(e){this._=e,this.next=null,this.previous=null}function lj(e){if(!(o=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,o,a,s,u,l,c,f,d;if((n=e[0]).x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;oj(r,n,i=e[2]),n=new uj(n),r=new uj(r),i=new uj(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){oj(n._,r._,i=e[u]),i=new uj(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do{if(f<=d){if(aj(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(aj(c._,i._)){(n=c).next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=sj(n);(i=i.next)!==r;)(s=sj(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=JI(n),u=0;u<o;++u)(n=e[u]).x-=i.x,n.y-=i.y;return i.r}function cj(e){return null==e?null:fj(e)}function fj(e){if("function"!=typeof e)throw new Error;return e}function dj(){return 0}var hj=function(e){return function(){return e}};function pj(e){return Math.sqrt(e.value)}function mj(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function gj(e,t){return function(n){if(r=n.children){var r,i,o,a=r.length,s=e(n)*t||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=lj(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function yj(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var vj=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},bj=function(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(r-t)/e.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l},xj={depth:-1},wj={};function _j(e){return e.id}function kj(e){return e.parentId}var Ej=function(){var e=_j,t=kj;function n(n){var r,i,o,a,s,u,l,c=Array.from(n),f=c.length,d=new Map;for(i=0;i<f;++i)r=c[i],s=c[i]=new QI(r),null!=(u=e(r,i,n))&&(u+="")&&(l=s.id=u,d.set(l,d.has(l)?wj:s)),null!=(u=t(r,i,n))&&(u+="")&&(s.parent=u);for(i=0;i<f;++i)if(u=(s=c[i]).parent){if(!(a=d.get(u)))throw new Error("missing: "+u);if(a===wj)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=xj,o.eachBefore((function(e){e.depth=e.parent.depth+1,--f})).eachBefore(XI),o.parent=null,f>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=fj(t),n):e},n.parentId=function(e){return arguments.length?(t=fj(e),n):t},n};function Sj(e,t){return e.parent===t.parent?1:2}function Aj(e){var t=e.children;return t?t[0]:e.t}function Cj(e){var t=e.children;return t?t[t.length-1]:e.t}function Dj(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Mj(e,t,n){return e.a.parent===t.parent?e.a:n}function Fj(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Fj.prototype=Object.create(QI.prototype);var Nj=function(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(i-n)/e.value;++s<u;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l},$j=(1+Math.sqrt(5))/2;function Tj(e,t,n,r,i,o){for(var a,s,u,l,c,f,d,h,p,m,g,y=[],v=t.children,b=0,x=0,w=v.length,_=t.value;b<w;){u=i-n,l=o-r;do{c=v[x++].value}while(!c&&x<w);for(f=d=c,g=c*c*(m=Math.max(l/u,u/l)/(_*e)),p=Math.max(d/g,g/f);x<w;++x){if(c+=s=v[x].value,s<f&&(f=s),s>d&&(d=s),g=c*c*m,(h=Math.max(d/g,g/f))>p){c-=s;break}p=h}y.push(a={value:c,dice:u<l,children:v.slice(b,x)}),a.dice?bj(a,n,r,i,_?r+=l*c/_:o):Nj(a,n,r,_?n+=u*c/_:i,o),_-=c,b=x}return y}var Oj=function e(t){function n(e,n,r,i,o){Tj(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}($j),zj=function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,u,l,c,f=-1,d=a.length,h=e.value;++f<d;){for(u=(s=a[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?bj(s,n,r,i,h?r+=(o-r)*s.value/h:o):Nj(s,n,r,h?n+=(i-n)*s.value/h:i,o),h-=s.value}else e._squarify=a=Tj(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}($j);function Rj(e,t,n){const r={};return e.each((e=>{const i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e}function Pj(e){Fk.call(this,null,e)}Pj.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Lj=e=>e.values;function Bj(){const e=[],t={entries:e=>r(n(e,0),0),key:n=>(e.push(n),t)};function n(t,r){if(r>=e.length)return t;const i=t.length,o=e[r++],a={},s={};let u,l,c,f=-1;for(;++f<i;)u=o(l=t[f])+"",(c=a[u])?c.push(l):a[u]=[l];for(u in a)s[u]=n(a[u],r);return s}function r(t,n){if(++n>e.length)return t;const i=[];for(const e in t)i.push({key:e,values:r(t[e],n)});return i}return t}function Ij(e){Fk.call(this,null,e)}ob(Pj,Fk,{transform:function(e,t){t.source||ov("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each((e=>{e.children&&Q_(e.data)&&i.rem.push(e.data)})),this.value=o=HI({values:jv(e.keys).reduce(((e,t)=>(e.key(t),e)),Bj()).entries(i.source)},Lj),n&&o.each((e=>{e.children&&(e=Z_(e.data),i.add.push(e),i.source.push(e))})),Rj(o,J_,J_)),i.source.root=o,i}});const jj=(e,t)=>e.parent===t.parent?1:2;ob(Ij,Fk,{transform:function(e,t){t.source&&t.source.root||ov(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(rk(e.sort,(e=>e.data))),function(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?jj:fv);try{this.value=n(i)}catch(e){ov(e)}return i.each((e=>function(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}(e,r,o))),t.reflow(e.modified()).modifies(o).modifies("leaf")}});const Uj=["x","y","r","depth","children"];function qj(e){Ij.call(this,e)}qj.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Uj.length,default:Uj}]},ob(qj,Ij,{layout:function(){var e=null,t=1,n=1,r=dj;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(mj(e)).eachAfter(gj(r,.5)).eachBefore(yj(1)):i.eachBefore(mj(pj)).eachAfter(gj(dj,1)).eachAfter(gj(r,i.r/Math.min(t,n))).eachBefore(yj(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=cj(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:hj(+e),i):r},i},params:["radius","size","padding"],fields:Uj});const Wj=["x0","y0","x1","y1","depth","children"];function Hj(e){Ij.call(this,e)}function Vj(e){Fk.call(this,null,e)}Hj.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Wj.length,default:Wj}]},ob(Hj,Ij,{layout:function(){var e=1,t=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(function(e,t){return function(r){r.children&&bj(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(t,o)),r&&i.eachBefore(vj),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},params:["size","round","padding"],fields:Wj}),Vj.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},ob(Vj,Fk,{transform:function(e,t){t.source||ov("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?Rj(Ej().id(e.key).parentId(e.parentKey)(i.source),e.key,dv):Rj(Ej()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Gj={tidy:function(){var e=Sj,t=1,n=1,r=null;function i(i){var u=function(e){for(var t,n,r,i,o,a=new Fj(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new Fj(r[i],i)),n.parent=t;return(a.parent=new Fj(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore((function(e){e.x<l.x&&(l=e),e.x>c.x&&(c=e),e.depth>f.depth&&(f=e)}));var d=l===c?1:e(l,c)/2,h=d-l.x,p=t/(c.x+d+h),m=n/(f.depth||1);i.eachBefore((function(e){e.x=(e.x+h)*p,e.y=e.depth*m}))}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,u=o.parent.children[0],l=o.m,c=a.m,f=s.m,d=u.m;s=Cj(s),o=Aj(o),s&&o;)u=Aj(u),(a=Cj(a)).a=t,(i=s.z+f-o.z-l+e(s._,o._))>0&&(Dj(Mj(s,t,r),t,i),l+=i,c+=i),f+=s.m,l+=o.m,d+=u.m,c+=a.m;s&&!Cj(a)&&(a.t=s,a.m+=f-c),o&&!Aj(u)&&(u.t=o,u.m+=l-d,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},cluster:function(){var e=jI,t=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(UI,0)/e.length}(n),t.y=function(e){return 1+e.reduce(qI,0)}(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),l=s.x-e(s,u)/2,c=u.x+e(u,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-l)/(c-l)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}},Yj=["x","y","depth","children"];function Xj(e){Ij.call(this,e)}function Qj(e){Fk.call(this,[],e)}Xj.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Yj.length,default:Yj}]},ob(Xj,Ij,{layout:function(e){const t=e||"tidy";if(tb(Gj,t))return Gj[t]();ov("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Yj}),Qj.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},ob(Qj,Fk,{transform:function(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||ov("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,(e=>o[J_(e)]=1)),r.each((e=>{const t=e.data,n=e.parent&&e.parent.data;n&&o[J_(t)]&&o[J_(n)]&&i.add.push(Z_({source:n,target:t}))})),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,(e=>o[J_(e)]=1)),n.forEach((e=>{(o[J_(e.source)]||o[J_(e.target)])&&i.mod.push(e)}))),i}});const Jj={binary:function(e,t,n,r,i){var o,a,s=e.children,u=s.length,l=new Array(u+1);for(l[0]=a=o=0;o<u;++o)l[o+1]=a+=s[o].value;!function e(t,n,r,i,o,a,u){if(t>=n-1){var c=s[t];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=u)}var f=l[t],d=r/2+f,h=t+1,p=n-1;for(;h<p;){var m=h+p>>>1;l[m]<d?h=m+1:p=m}d-l[h-1]<l[h]-d&&t+1<h&&--h;var g=l[h]-f,y=r-g;if(a-i>u-o){var v=r?(i*y+a*g)/r:a;e(t,h,g,i,o,v,u),e(h,n,y,v,o,a,u)}else{var b=r?(o*y+u*g)/r:u;e(t,h,g,i,o,a,b),e(h,n,y,i,b,a,u)}}(0,u,e.value,t,n,r,i)},dice:bj,slice:Nj,slicedice:function(e,t,n,r,i){(1&e.depth?Nj:bj)(e,t,n,r,i)},squarify:Oj,resquarify:zj},Kj=["x0","y0","x1","y1","depth","children"];function Zj(e){Ij.call(this,e)}Zj.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Kj.length,default:Kj}]},ob(Zj,Ij,{layout:function(){const e=function(){var e=Oj,t=!1,n=1,r=1,i=[0],o=dj,a=dj,s=dj,u=dj,l=dj;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),i=[0],t&&e.eachBefore(vj),e}function f(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),t.x0=r,t.y0=c,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=o(t)/2,r+=l(t)-n,c+=a(t)-n,(f-=s(t)-n)<r&&(r=f=(r+f)/2),(d-=u(t)-n)<c&&(c=d=(c+d)/2),e(t,r,c,f,d))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=fj(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:hj(+e),c):o},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:hj(+e),c):a},c.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:hj(+e),c):s},c.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:hj(+e),c):u},c.paddingLeft=function(e){return arguments.length?(l="function"==typeof e?e:hj(+e),c):l},c}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{tb(Jj,t)?e.tile(Jj[t]):ov("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Kj}),t(II,"treemap",(function(){return Zj})),t(II,"treelinks",(function(){return Qj})),t(II,"tree",(function(){return Xj})),t(II,"stratify",(function(){return Vj})),t(II,"partition",(function(){return Hj})),t(II,"pack",(function(){return qj})),t(II,"nest",(function(){return Pj}));var eU={};function tU(e,t,n,r){const i=e.width,o=e.height,a=n||r,s=vC(i,o).getContext("2d");t.forEach((e=>nU(s,e,a)));const u=new Uint32Array(s.getImageData(0,0,i,o).data.buffer),l=e.bitmap(),c=a&&e.bitmap();let f,d,h,p,m;for(d=0;d<o;++d)for(f=0;f<i;++f)m=4278190080&u[d*i+f],m&&(h=e(f),p=e(d),r||l.set(h,p),a&&268435456^m&&c.set(h,p));return[l,c]}function nU(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;"group"===r?t.forEach((t=>{t.items.forEach((t=>nU(e,t.items,n)))})):AN[r].draw(e,{items:n?t.map(rU):t})}function rU(e){const t=tk(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=.0625,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}const iU=31,oU=new Uint32Array(33),aU=new Uint32Array(33);aU[0]=0,oU[0]=~aU[0];for(let e=1;e<=32;++e)aU[e]=aU[e-1]<<1|1,oU[e]=~aU[e];function sU(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=e=>~~((e+n)/r);return a.invert=e=>e*r-n,a.bitmap=()=>function(e,t){const n=new Uint32Array(~~((e*t+32)/32));function r(e,t){n[e]|=t}function i(e,t){n[e]&=t}return{array:n,get:(t,r)=>{const i=r*e+t;return n[i>>>5]&1<<(i&iU)},set:(t,n)=>{const i=n*e+t;r(i>>>5,1<<(i&iU))},clear:(t,n)=>{const r=n*e+t;i(r>>>5,~(1<<(r&iU)))},getRange:(t,r,i,o)=>{let a,s,u,l,c=o;for(;c>=r;--c)if(a=c*e+t,s=c*e+i,u=a>>>5,l=s>>>5,u===l){if(n[u]&oU[a&iU]&aU[1+(s&iU)])return!0}else{if(n[u]&oU[a&iU])return!0;if(n[l]&aU[1+(s&iU)])return!0;for(let e=u+1;e<l;++e)if(n[e])return!0}return!1},setRange:(t,n,i,o)=>{let a,s,u,l,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+i,u=a>>>5,l=s>>>5,u===l)r(u,oU[a&iU]&aU[1+(s&iU)]);else for(r(u,oU[a&iU]),r(l,aU[1+(s&iU)]),c=u+1;c<l;++c)r(c,4294967295)},clearRange:(t,n,r,o)=>{let a,s,u,l,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+r,u=a>>>5,l=s>>>5,u===l)i(u,aU[a&iU]|oU[1+(s&iU)]);else for(i(u,aU[a&iU]),i(l,oU[1+(s&iU)]),c=u+1;c<l;++c)i(c,0)},outOfBounds:(n,r,i,o)=>n<0||r<0||o>=t||i>=e}}(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function uU(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function lU(e,t,n,r,i,o,a,s){const u=i*o/(2*r),l=e(t-u),c=e(t+u),f=e(n-(o/=2)),d=e(n+o);return a.outOfBounds(l,f,c,d)||a.getRange(l,f,c,d)||s&&s.getRange(l,f,c,d)}const cU=[-1,-1,1,1],fU=[-1,1,-1,1];const dU=["right","center","left"],hU=["bottom","middle","top"];function pU(e,t,n,r,i,o,a,s,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o?o.getRange(e,n,t,r)||!function(e,t,n,r,i){return i[0]<=e&&n<=i[2]&&i[3]<=t&&r<=i[5]}(a,u,s,l,c):i.getRange(e,n,t,r)))}const mU={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},gU={naive:function(e,t,n,r){const i=e.width,o=e.height;return function(e){const t=e.datum.datum.items[r].items,n=t.length,a=e.datum.fontSize,s=uN.width(e.datum,e.datum.text);let u,l,c,f,d,h,p,m=0;for(let r=0;r<n;++r)u=t[r].x,c=t[r].y,l=void 0===t[r].x2?u:t[r].x2,f=void 0===t[r].y2?c:t[r].y2,d=(u+l)/2,h=(c+f)/2,p=Math.abs(l-u+f-c),p>=m&&(m=p,e.x=d,e.y=h);return d=s/2,h=a/2,u=e.x-d,l=e.x+d,c=e.y-h,f=e.y+h,e.align="center",u<0&&l<=i?e.align="left":0<=u&&i<l&&(e.align="right"),e.baseline="middle",c<0&&f<=o?e.baseline="top":0<=c&&o<f&&(e.baseline="bottom"),!0}},"reduced-search":function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1];function u(t,n,r,u,l){const c=e.invert(t),f=e.invert(n);let d,h=r,p=o;if(!uU(c,f,u,l,i,o)&&!lU(e,c,f,l,u,h,a,s)&&!lU(e,c,f,l,u,l,a,null)){for(;p-h>=1;)d=(h+p)/2,lU(e,c,f,l,u,d,a,s)?p=d:h=d;if(h>r)return[c,f,h,!0]}}return function(t){const s=t.datum.datum.items[r].items,l=s.length,c=t.datum.fontSize,f=uN.width(t.datum,t.datum.text);let d,h,p,m,g,y,v,b,x,w,_,k,E,S,A,C,D,M=n?c:0,F=!1,N=!1,$=0;for(let r=0;r<l;++r){for(d=s[r].x,p=s[r].y,h=void 0===s[r].x2?d:s[r].x2,m=void 0===s[r].y2?p:s[r].y2,d>h&&(D=d,d=h,h=D),p>m&&(D=p,p=m,m=D),x=e(d),_=e(h),w=~~((x+_)/2),k=e(p),S=e(m),E=~~((k+S)/2),v=w;v>=x;--v)for(b=E;b>=k;--b)C=u(v,b,M,f,c),C&&([t.x,t.y,M,F]=C);for(v=w;v<=_;++v)for(b=E;b<=S;++b)C=u(v,b,M,f,c),C&&([t.x,t.y,M,F]=C);F||n||(A=Math.abs(h-d+m-p),g=(d+h)/2,y=(p+m)/2,A>=$&&!uU(g,y,f,c,i,o)&&!lU(e,g,y,c,f,c,a,null)&&($=A,t.x=g,t.y=y,N=!0))}return!(!F&&!N)&&(g=f/2,y=c/2,a.setRange(e(t.x-g),e(t.y-y),e(t.x+g),e(t.y+y)),t.align="center",t.baseline="middle",!0)}},floodfill:function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=e.bitmap();return function(t){const l=t.datum.datum.items[r].items,c=l.length,f=t.datum.fontSize,d=uN.width(t.datum,t.datum.text),h=[];let p,m,g,y,v,b,x,w,_,k,E,S,A=n?f:0,C=!1,D=!1,M=0;for(let r=0;r<c;++r){for(p=l[r].x,g=l[r].y,m=void 0===l[r].x2?p:l[r].x2,y=void 0===l[r].y2?g:l[r].y2,h.push([e((p+m)/2),e((g+y)/2)]);h.length;)if([x,w]=h.pop(),!(a.get(x,w)||s.get(x,w)||u.get(x,w))){u.set(x,w);for(let e=0;e<4;++e)v=x+cU[e],b=w+fU[e],u.outOfBounds(v,b,v,b)||h.push([v,b]);if(v=e.invert(x),b=e.invert(w),_=A,k=o,!uU(v,b,d,f,i,o)&&!lU(e,v,b,f,d,_,a,s)&&!lU(e,v,b,f,d,f,a,null)){for(;k-_>=1;)E=(_+k)/2,lU(e,v,b,f,d,E,a,s)?k=E:_=E;_>A&&(t.x=v,t.y=b,A=_,C=!0)}}C||n||(S=Math.abs(m-p+y-g),v=(p+m)/2,b=(g+y)/2,S>=M&&!uU(v,b,d,f,i,o)&&!lU(e,v,b,f,d,f,a,null)&&(M=S,t.x=v,t.y=b,D=!0))}return!(!C&&!D)&&(v=d/2,b=f/2,a.setRange(e(t.x-v),e(t.y-b),e(t.x+v),e(t.y+b)),t.align="center",t.baseline="middle",!0)}}};function yU(e,t,n,r,i,o,a,s,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=function(e,t){const n=new Float64Array(t),r=e.length;for(let t=0;t<r;++t)n[t]=e[t]||0;for(let e=r;e<t;++e)n[e]=n[r-1];return n}(r,f),h=function(e,t){const n=new Int8Array(t),r=e.length;for(let t=0;t<r;++t)n[t]|=mU[e[t]];for(let e=r;e<t;++e)n[e]=n[r-1];return n}(i,f),p=(x=e[0].datum)&&x.mark&&x.mark.marktype,m="group"===p&&e[0].datum.items[u].marktype,g="area"===m,y=function(e,t,n,r){const i=e=>[e.x,e.x,e.x,e.y,e.y,e.y];return e?"line"===e||"area"===e?e=>i(e.datum):"line"===t?e=>{const t=e.datum.items[r].items;return i(t.length?t["start"===n?0:t.length-1]:{x:NaN,y:NaN})}:e=>{const t=e.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2]}:i}(p,m,s,u),v=sU(t[0],t[1],l),b=g&&"naive"===c;var x;const w=e.map((e=>({datum:e,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(e)})));let _;if(!b){n&&w.sort(((e,t)=>n(e.datum,t.datum)));let t=!1;for(let e=0;e<h.length&&!t;++e)t=5===h[e]||d[e]<0;p&&(a||g)&&(o=[e.map((e=>e.datum))].concat(o)),_=o.length?tU(v,o,t,g):function(e,t){const n=e.bitmap();return(t||[]).forEach((t=>n.set(e(t.boundary[0]),e(t.boundary[3])))),[n,void 0]}(v,a&&w)}const k=g?gU[c](v,_,a,u):function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=r.length;return function(t){const l=t.boundary,c=t.datum.fontSize;if(l[2]<0||l[5]<0||l[0]>i||l[3]>o)return!1;let f,d,h,p,m,g,y,v,b,x,w,_,k,E,S,A=0;for(let i=0;i<u;++i){if(f=(3&n[i])-1,d=(n[i]>>>2&3)-1,h=0===f&&0===d||r[i]<0,p=f&&d?Math.SQRT1_2:1,m=r[i]<0?-1:1,g=l[1+f]+r[i]*f*p,w=l[4+d]+m*c*d/2+r[i]*d*p,v=w-c/2,b=w+c/2,_=e(g),E=e(v),S=e(b),!A){if(!pU(_,_,E,S,a,s,g,g,v,b,l,h))continue;A=uN.width(t.datum,t.datum.text)}if(x=g+m*A*f/2,g=x-A/2,y=x+A/2,_=e(g),k=e(y),pU(_,k,E,S,a,s,g,y,v,b,l,h))return t.x=f?f*m<0?y:g:x,t.y=d?d*m<0?b:v:w,t.align=dU[f*m+1],t.baseline=hU[d*m+1],a.setRange(_,E,k,S),!0}return!1}}(v,_,h,d);return w.forEach((e=>e.opacity=+k(e))),w}const vU=["x","y","opacity","align","baseline"],bU=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function xU(e){Fk.call(this,null,e)}xU.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:bU},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:vU.length,default:vU}]},ob(xU,Fk,{transform:function(e,t){const n=e.modified();if(!(n||t.changed(t.ADD_REM)||function(n){const r=e[n];return qv(r)&&t.modified(r.fields)}("sort")))return;e.size&&2===e.size.length||ov("Size parameter should be specified as a [width, height] array.");const r=e.as||vU;return yU(t.materialize(t.SOURCE).source,e.size,e.sort,jv(e.offset||1),jv(e.anchor||bU),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,e.padding||0,e.method||"naive").forEach((e=>{const t=e.datum;t[r[0]]=e.x,t[r[1]]=e.y,t[r[2]]=e.opacity,t[r[3]]=e.align,t[r[4]]=e.baseline})),t.reflow(n).modifies(r)}}),t(eU,"label",(function(){return xU}));var wU={};function _U(e,t){var n,r,i,o,a,s,u=[],l=function(e){return e(o)};if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(l)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}function kU(e){Fk.call(this,null,e)}kU.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},ob(kU,Fk,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=_U(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(ev),o=i.length,a=e.as||[ev(e.x),ev(e.y)],s=[];r.forEach((t=>{EE(t,e.x,e.y,e.bandwidth||.3).forEach((e=>{const n={};for(let e=0;e<o;++e)n[i[e]]=t.dims[e];n[a[0]]=e[0],n[a[1]]=e[1],s.push(Z_(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});const EU={linear:yE,log:vE,exp:bE,pow:xE,quad:wE,poly:_E};function SU(e){Fk.call(this,null,e)}SU.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(EU)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},ob(SU,Fk,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=_U(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(ev),o=e.method||"linear",a=e.order||3,s=((e,t)=>"poly"===e?t:"quad"===e?2:1)(o,a),u=e.as||[ev(e.x),ev(e.y)],l=EU[o],c=[];let f=e.extent;tb(EU,o)||ov("Invalid regression method: "+o),null!=f&&"log"===o&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((n=>{if(n.length<=s)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const r=l(n,e.x,e.y,a);if(e.params)return void c.push(Z_({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));const d=f||Kv(n,e.x),h=e=>{const t={};for(let e=0;e<i.length;++e)t[i[e]]=n.dims[e];t[u[0]]=e[0],t[u[1]]=e[1],c.push(Z_(t))};"linear"===o?d.forEach((e=>h([e,r.predict(e)]))):DE(r.predict,d,25,200).forEach(h)})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),t(wU,"regression",(function(){return SU})),t(wU,"loess",(function(){return kU}));var AU={};const CU=Math.pow(2,-52),DU=new Uint32Array(512);class MU{static from(e,t=PU,n=LU){const r=e.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=e[o];i[2*o]=t(r),i[2*o+1]=n(r)}return new MU(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=e.length>>1;let a=1/0,s=1/0,u=-1/0,l=-1/0;for(let t=0;t<o;t++){const n=e[2*t],r=e[2*t+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>l&&(l=r),this._ids[t]=t}const c=(a+u)/2,f=(s+l)/2;let d,h,p,m=1/0;for(let t=0;t<o;t++){const n=FU(c,f,e[2*t],e[2*t+1]);n<m&&(d=t,m=n)}const g=e[2*d],y=e[2*d+1];m=1/0;for(let t=0;t<o;t++){if(t===d)continue;const n=FU(g,y,e[2*t],e[2*t+1]);n<m&&n>0&&(h=t,m=n)}let v=e[2*h],b=e[2*h+1],x=1/0;for(let t=0;t<o;t++){if(t===d||t===h)continue;const n=OU(g,y,v,b,e[2*t],e[2*t+1]);n<x&&(p=t,x=n)}let w=e[2*p],_=e[2*p+1];if(x===1/0){for(let t=0;t<o;t++)this._dists[t]=e[2*t]-e[0]||e[2*t+1]-e[1];zU(this._ids,this._dists,0,o-1);const t=new Uint32Array(o);let n=0;for(let e=0,r=-1/0;e<o;e++){const i=this._ids[e];this._dists[i]>r&&(t[n++]=i,r=this._dists[i])}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if($U(g,y,v,b,w,_)){const e=h,t=v,n=b;h=p,v=w,b=_,p=e,w=t,_=n}const k=function(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u);return{x:e+(l*c-s*f)*d,y:t+(a*f-u*c)*d}}(g,y,v,b,w,_);this._cx=k.x,this._cy=k.y;for(let t=0;t<o;t++)this._dists[t]=FU(e[2*t],e[2*t+1],k.x,k.y);zU(this._ids,this._dists,0,o-1),this._hullStart=d;let E=3;n[d]=t[p]=h,n[h]=t[d]=p,n[p]=t[h]=d,r[d]=0,r[h]=1,r[p]=2,i.fill(-1),i[this._hashKey(g,y)]=d,i[this._hashKey(v,b)]=h,i[this._hashKey(w,_)]=p,this.trianglesLen=0,this._addTriangle(d,h,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],l=e[2*u],c=e[2*u+1];if(s>0&&Math.abs(l-o)<=CU&&Math.abs(c-a)<=CU)continue;if(o=l,a=c,u===d||u===h||u===p)continue;let f=0;for(let e=0,t=this._hashKey(l,c);e<this._hashSize&&(f=i[(t+e)%this._hashSize],-1===f||f===n[f]);e++);f=t[f];let m,g=f;for(;m=n[g],!$U(l,c,e[2*g],e[2*g+1],e[2*m],e[2*m+1]);)if(g=m,g===f){g=-1;break}if(-1===g)continue;let y=this._addTriangle(g,u,n[g],-1,-1,r[g]);r[u]=this._legalize(y+2),r[g]=y,E++;let v=n[g];for(;m=n[v],$U(l,c,e[2*v],e[2*v+1],e[2*m],e[2*m+1]);)y=this._addTriangle(v,u,m,r[u],-1,r[v]),r[u]=this._legalize(y+2),n[v]=v,E--,v=m;if(g===f)for(;m=t[g],$U(l,c,e[2*m],e[2*m+1],e[2*g],e[2*g+1]);)y=this._addTriangle(m,u,g,-1,r[g],r[m]),this._legalize(y+2),r[m]=y,n[g]=g,E--,g=m;this._hullStart=t[u]=g,n[g]=t[v]=u,n[u]=v,i[this._hashKey(l,c)]=u,i[this._hashKey(e[2*g],e[2*g+1])]=g}this.hull=new Uint32Array(E);for(let e=0,t=this._hullStart;e<E;e++)this.hull[e]=t,t=n[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[e],s=e-e%3;if(o=s+(e+2)%3,-1===a){if(0===i)break;e=DU[--i];continue}const u=a-a%3,l=s+(e+1)%3,c=u+(a+2)%3,f=t[o],d=t[e],h=t[l],p=t[c];if(TU(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1])){t[e]=p,t[a]=f;const r=n[c];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(a,n[o]),this._link(o,c);const s=u+(a+1)%3;i<DU.length&&(DU[i++]=s)}else{if(0===i)break;e=DU[--i]}}return o}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function FU(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function NU(e,t,n,r,i,o){const a=(r-t)*(i-e),s=(n-e)*(o-t);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function $U(e,t,n,r,i,o){return(NU(i,o,e,t,n,r)||NU(e,t,n,r,i,o)||NU(n,r,i,o,e,t))<0}function TU(e,t,n,r,i,o,a,s){const u=e-a,l=t-s,c=n-a,f=r-s,d=i-a,h=o-s,p=c*c+f*f,m=d*d+h*h;return u*(f*m-p*h)-l*(c*m-p*d)+(u*u+l*l)*(c*h-f*d)<0}function OU(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u),h=(l*c-s*f)*d,p=(a*f-u*c)*d;return h*h+p*p}function zU(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=e[i],o=t[r];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=r}else{let i=n+1,o=r;RU(e,n+r>>1,i),t[e[n]]>t[e[r]]&&RU(e,n,r),t[e[i]]>t[e[r]]&&RU(e,i,r),t[e[n]]>t[e[i]]&&RU(e,n,i);const a=e[i],s=t[a];for(;;){do{i++}while(t[e[i]]<s);do{o--}while(t[e[o]]>s);if(o<i)break;RU(e,i,o)}e[n+1]=e[o],e[o]=a,r-i+1>=o-n?(zU(e,t,i,r),zU(e,t,n,o-1)):(zU(e,t,n,o-1),zU(e,t,i,r))}}function RU(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function PU(e){return e[0]}function LU(e){return e[1]}const BU=1e-6;class IU{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>BU||Math.abs(this._y1-i)>BU)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class jU{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class UU{constructor(e,[t,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let t,r,o=0,a=0,s=n.length;o<s;o+=3,a+=2){const s=2*n[o],u=2*n[o+1],l=2*n[o+2],c=e[s],f=e[s+1],d=e[u],h=e[u+1],p=e[l],m=e[l+1],g=d-c,y=h-f,v=p-c,b=m-f,x=g*g+y*y,w=v*v+b*b,_=2*(g*b-y*v);if(_)if(Math.abs(_)<1e-8)t=(c+p)/2,r=(f+m)/2;else{const e=1/_;t=c+(b*x-y*w)*e,r=f+(g*w-v*x)*e}else t=(c+p)/2-1e8*b,r=(f+m)/2+1e8*v;i[a]=t,i[a+1]=r}let o,a,s,u=t[t.length-1],l=4*u,c=e[2*u],f=e[2*u+1];r.fill(0);for(let n=0;n<t.length;++n)u=t[n],o=l,a=c,s=f,l=4*u,c=e[2*u],f=e[2*u+1],r[o+2]=r[l]=s-f,r[o+3]=r[l+1]=c-a}render(e){const t=null==e?e=new IU:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let t=0,r=n.length;t<r;++t){const r=n[t];if(r<t)continue;const i=2*Math.floor(t/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],l=o[a],c=o[a+1];this._renderSegment(s,u,l,c,e)}let s,u=i[i.length-1];for(let t=0;t<i.length;++t){s=u,u=i[t];const n=2*Math.floor(r[u]/3),l=o[n],c=o[n+1],f=4*s,d=this._project(l,c,a[f+2],a[f+3]);d&&this._renderSegment(l,c,d[0],d[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new IU:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new IU:void 0,r=this._clip(e);if(null===r||!r.length)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let e=2;e<i;e+=2)r[e]===r[e-2]&&r[e+1]===r[e-1]||t.lineTo(r[e],r[e+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new jU;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,i){let o;const a=this._regioncode(e,t),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const e=this._clip(n);if(e)e:for(let r=0,i=t.length;r<i;r+=2)for(let o=0,a=e.length;o<a;o+=2)if(t[r]==e[o]&&t[r+1]==e[o+1]&&t[(r+2)%i]==e[(o+a-2)%a]&&t[(r+3)%i]==e[(o+a-1)%a]){yield n;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[e];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(t[2*n],t[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==e)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let r,i,o,a,s,u=null,l=t[n-2],c=t[n-1],f=this._regioncode(l,c);for(let d=0;d<n;d+=2)if(r=l,i=c,l=t[d],c=t[d+1],o=f,f=this._regioncode(l,c),0===o&&0===f)a=s,s=0,u?u.push(l,c):u=[l,c];else{let t,n,d,h,p;if(0===o){if(null===(t=this._clipSegment(r,i,l,c,o,f)))continue;[n,d,h,p]=t}else{if(null===(t=this._clipSegment(l,c,r,i,f,o)))continue;[h,p,n,d]=t,a=s,s=this._edgecode(n,d),a&&s&&this._edge(e,a,s,u,u.length),u?u.push(n,d):u=[n,d]}a=s,s=this._edgecode(h,p),a&&s&&this._edge(e,a,s,u,u.length),u?u.push(h,p):u=[h,p]}if(u)a=s,s=this._edgecode(u[0],u[1]),a&&s&&this._edge(e,a,s,u,u.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(e,t,n,r,i,o){for(;;){if(0===i&&0===o)return[e,t,n,r];if(i&o)return null;let a,s,u=i||o;8&u?(a=e+(n-e)*(this.ymax-t)/(r-t),s=this.ymax):4&u?(a=e+(n-e)*(this.ymin-t)/(r-t),s=this.ymin):2&u?(s=t+(r-t)*(this.xmax-e)/(n-e),a=this.xmax):(s=t+(r-t)*(this.xmin-e)/(n-e),a=this.xmin),i?(e=a,t=s,i=this._regioncode(e,t)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,i,o){let a,s=Array.from(t);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(e,s))for(let t,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)t=i,i=this._edgecode(s[n],s[n+1]),t&&i&&(n=this._edge(e,t,i,s,n),r=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,n,r,i){for(;t!==n;){let n,o;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(e,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let e=0;e<r.length;e+=2){const t=(e+2)%r.length,n=(e+4)%r.length;(r[e]===r[t]&&r[t]===r[n]||r[e+1]===r[t+1]&&r[t+1]===r[n+1])&&(r.splice(t,2),e-=2)}return i}_project(e,t,n,r){let i,o,a,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(a=this.ymin,o=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(a=this.ymax,o=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(o=this.xmax,a=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(o=this.xmin,a=t+(s=i)*r)}return[o,a]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}const qU=2*Math.PI,WU=Math.pow;function HU(e){return e[0]}function VU(e){return e[1]}function GU(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class YU{static from(e,t=HU,n=VU,r){return new YU("length"in e?function(e,t,n,r){const i=e.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=e[a];o[2*a]=t.call(r,i,a,e),o[2*a+1]=n.call(r,i,a,e)}return o}(e,t,n,r):Float64Array.from(function*(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}(e,t,n,r)))}constructor(e){this._delaunator=new MU(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let e=0;e<t.length;e+=3){const r=2*t[e],i=2*t[e+1],o=2*t[e+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},((e,t)=>t)).sort(((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]));const e=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let e=0,n=t.length/2;e<n;++e){const n=GU(t[2*e],t[2*e+1],i);t[2*e]=n[0],t[2*e+1]=n[1]}this._delaunator=new MU(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let e=0,t=n.length;e<t;++e){const t=i[e%3==2?e-2:e+1];-1!==n[e]&&-1!==o[t]||(o[t]=e)}for(let e=0,t=r.length;e<t;++e)a[r[e]]=e;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(e){return new UU(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const t=a.indexOf(e);return t>0&&(yield a[t-1]),void(t<a.length-1&&(yield a[t+1]))}const s=t[e];if(-1===s)return;let u=s,l=-1;do{if(yield l=o[u],u=u%3==2?u-2:u+1,o[u]!==e)return;if(u=i[u],-1===u){const t=n[(r[e]+1)%n.length];return void(t!==l&&(yield t))}}while(u!==s)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const r=n;let i;for(;(i=this._step(n,e,t))>=0&&i!==n&&i!==r;)n=i;return i}_step(e,t,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[e]||!u.length)return(e+1)%(u.length>>1);let l=e,c=WU(t-u[2*e],2)+WU(n-u[2*e+1],2);const f=r[e];let d=f;do{let r=s[d];const f=WU(t-u[2*r],2)+WU(n-u[2*r+1],2);if(f<c&&(c=f,l=r),d=d%3==2?d-2:d+1,s[d]!==e)break;if(d=a[d],-1===d){if(d=i[(o[e]+1)%i.length],d!==r&&WU(t-u[2*d],2)+WU(n-u[2*d+1],2)<c)return d;break}}while(d!==f);return l}render(e){const t=null==e?e=new IU:void 0,{points:n,halfedges:r,triangles:i}=this;for(let t=0,o=r.length;t<o;++t){const o=r[t];if(o<t)continue;const a=2*i[t],s=2*i[o];e.moveTo(n[a],n[a+1]),e.lineTo(n[s],n[s+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t=2){const n=null==e?e=new IU:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];e.moveTo(i+t,o),e.arc(i,o,t,0,qU)}return n&&n.value()}renderHull(e){const t=null==e?e=new IU:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;e.moveTo(r[i],r[i+1]);for(let t=1;t<o;++t){const i=2*n[t];e.lineTo(r[i],r[i+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new jU;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new IU:void 0,{points:r,triangles:i}=this,o=2*i[e*=3],a=2*i[e+1],s=2*i[e+2];return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new jU;return this.renderTriangle(e,t),t.value()}}function XU(e){Fk.call(this,null,e)}XU.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const QU=[-1e5,-1e5,1e5,1e5];function JU(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}ob(XU,Fk,{transform:function(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:QU;const o=this.value=YU.from(r,e.x,e.y).voronoi(i);for(let e=0,t=r.length;e<t;++e){const t=o.cellPolygon(e);r[e][n]=t?JU(t):null}return t.reflow(e.modified()).modifies(n)}}),t(AU,"voronoi",(function(){return XU}));var KU={},ZU=Math.PI/180,eq=2048;function tq(){var e,t,n,r,i,o,a,s=[256,256],u=oq,l=[],c=Math.random,f={};function d(e,t,n){for(var r,i,o,a,l,f=t.x,d=t.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=u(s),m=c()<.5?1:-1,g=-m;(r=p(g+=m))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=h));)if(t.x=f+i,t.y=d+o,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1]||n&&rq(t,e,s[0])||n&&(l=n,!((a=t).x+a.x1>l[0].x&&a.x+a.x0<l[1].x&&a.y+a.y1>l[0].y&&a.y+a.y0<l[1].y)))){for(var y,v=t.sprite,b=t.width>>5,x=s[0]>>5,w=t.x-(b<<4),_=127&w,k=32-_,E=t.y1-t.y0,S=(t.y+t.y0)*x+(w>>5),A=0;A<E;A++){y=0;for(var C=0;C<=b;C++)e[S+C]|=y<<k|(C<b?(y=v[A*b+C])>>>_:0);S+=x}return t.sprite=null,!0}return!1}return f.layout=function(){for(var u=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=eq/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(vC()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),h=null,p=l.length,m=-1,g=[],y=l.map((s=>({text:e(s),font:t(s),style:r(s),weight:i(s),rotate:o(s),size:~~(n(s)+1e-14),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}))).sort(((e,t)=>t.size-e.size));++m<p;){var v=y[m];v.x=s[0]*(c()+.5)>>1,v.y=s[1]*(c()+.5)>>1,nq(u,v,y,m),v.hasText&&d(f,v,h)&&(g.push(v),h?iq(h,v):h=[{x:v.x+v.x0,y:v.y+v.y0},{x:v.x+v.x1,y:v.y+v.y1}],v.x-=s[0]>>1,v.y-=s[1]>>1)}return g},f.words=function(e){return arguments.length?(l=e,f):l},f.size=function(e){return arguments.length?(s=[+e[0],+e[1]],f):s},f.font=function(e){return arguments.length?(t=aq(e),f):t},f.fontStyle=function(e){return arguments.length?(r=aq(e),f):r},f.fontWeight=function(e){return arguments.length?(i=aq(e),f):i},f.rotate=function(e){return arguments.length?(o=aq(e),f):o},f.text=function(t){return arguments.length?(e=aq(t),f):e},f.spiral=function(e){return arguments.length?(u=sq[e]||e,f):u},f.fontSize=function(e){return arguments.length?(n=aq(e),f):n},f.padding=function(e){return arguments.length?(a=aq(e),f):a},f.random=function(e){return arguments.length?(c=e,f):c},f}function nq(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,2048/o,eq/o);var a,s,u,l,c,f=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,a=i.measureText(t.text+"m").width*o,u=t.size<<1,t.rotate){var m=Math.sin(t.rotate*ZU),g=Math.cos(t.rotate*ZU),y=a*g,v=a*m,b=u*g,x=u*m;a=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,u=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else a=a+31>>5<<5;if(u>h&&(h=u),f+a>=2048&&(f=0,d+=h,h=0),d+u>=eq)break;i.translate((f+(a>>1))/o,(d+(u>>1))/o),t.rotate&&i.rotate(t.rotate*ZU),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=a,t.height=u,t.xoff=f,t.yoff=d,t.x1=a>>1,t.y1=u>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=a}for(var w=i.getImageData(0,0,2048/o,eq/o).data,_=[];--r>=0;)if((t=n[r]).hasText){for(s=(a=t.width)>>5,u=t.y1-t.y0,l=0;l<u*s;l++)_[l]=0;if(null==(f=t.xoff))return;d=t.yoff;var k=0,E=-1;for(c=0;c<u;c++){for(l=0;l<a;l++){var S=s*c+(l>>5),A=w[2048*(d+c)+(f+l)<<2]?1<<31-l%32:0;_[S]|=A,k|=A}k?E=c:(t.y0++,u--,c--,d++)}t.y1=t.y0+E,t.sprite=_.slice(0,(t.y1-t.y0)*s)}}}function rq(e,t,n){n>>=5;for(var r,i=e.sprite,o=e.width>>5,a=e.x-(o<<4),s=127&a,u=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(a>>5),f=0;f<l;f++){r=0;for(var d=0;d<=o;d++)if((r<<u|(d<o?(r=i[f*o+d])>>>s:0))&t[c+d])return!0;c+=n}return!1}function iq(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function oq(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function aq(e){return"function"==typeof e?e:function(){return e}}var sq={archimedean:oq,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};const uq=["x","y","font","fontSize","fontStyle","fontWeight","angle"],lq=["text","font","rotate","fontSize","fontStyle","fontWeight"];function cq(e){Fk.call(this,tq(),e)}cq.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:uq}]},ob(cq,Fk,{transform:function(e,t){!e.size||e.size[0]&&e.size[1]||ov("Wordcloud size dimensions must be non-zero.");const n=e.modified();if(!(n||t.changed(t.ADD_REM)||lq.some((function(n){const r=e[n];return qv(r)&&t.modified(r.fields)}))))return;const r=t.materialize(t.SOURCE).source,i=this.value,o=e.as||uq;let a,s=e.fontSize||14;if(qv(s)?a=e.fontSizeRange:s=Xv(s),a){const e=s,t=XC("sqrt")().domain(Kv(r,e)).range(a);s=n=>t(e(n))}r.forEach((e=>{e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0}));const u=i.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(jk).layout(),l=i.size(),c=l[0]>>1,f=l[1]>>1,d=u.length;for(let e,t,n=0;n<d;++n)e=u[n],t=e.datum,t[o[0]]=e.x+c,t[o[1]]=e.y+f,t[o[2]]=e.font,t[o[3]]=e.size,t[o[4]]=e.style,t[o[5]]=e.weight,t[o[6]]=e.rotate;return t.reflow(n).modifies(o)}}),t(KU,"wordcloud",(function(){return cq}));var fq={};const dq=e=>new Uint8Array(e),hq=e=>new Uint16Array(e),pq=e=>new Uint32Array(e);function mq(e,t,n){const r=(t<257?dq:t<65537?hq:pq)(e);return n&&r.set(n),r}function gq(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){const n=this,i=n.bisect(n.range,e.value),o=e.index,a=i[0],s=i[1],u=o.length;let l;for(l=0;l<a;++l)t[o[l]]|=r;for(l=s;l<u;++l)t[o[l]]|=r;return n}}}function yq(){let e=pq(0),t=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];const a=n,s=i.length,u=pq(s);let l,c,f,d=Array(s);for(f=0;f<s;++f)d[f]=r(i[f]),u[f]=f;if(d=function(e,t){return e.sort.call(t,((t,n)=>{const r=e[t],i=e[n];return r<i?-1:r>i?1:0})),function(e,t){return Array.from(t,(t=>e[t]))}(e,t)}(d,u),a)l=t,c=e,t=Array(a+s),e=pq(a+s),function(e,t,n,r,i,o,a,s,u){let l,c=0,f=0;for(l=0;c<r&&f<a;++l)t[c]<i[f]?(s[l]=t[c],u[l]=n[c++]):(s[l]=i[f],u[l]=o[f++]+e);for(;c<r;++c,++l)s[l]=t[c],u[l]=n[c];for(;f<a;++f,++l)s[l]=i[f],u[l]=o[f]+e}(o,l,c,a,d,u,s,t,e);else{if(o>0)for(f=0;f<s;++f)u[f]+=o;t=d,e=u}return n=a+s,{index:u,value:d}},remove:function(r,i){const o=n;let a,s,u;for(s=0;!i[e[s]]&&s<o;++s);for(u=s;s<o;++s)i[a=e[s]]||(e[u]=a,t[u]=t[s],++u);n=o-r},bisect:function(e,r){let i;return r?i=r.length:(r=t,i=n),[od(r,e[0],0,i),id(r,e[1],0,i)]},reindex:function(t){for(let r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:()=>e,size:()=>n}}function vq(e){Fk.call(this,function(){let e=8,t=[],n=pq(0),r=mq(0,e),i=mq(0,e);return{data:()=>t,seen:()=>{return e=n,r=t.length,n=e.length>=r?e:((i=i||new e.constructor(r)).set(e),i);var e,r,i},add:function(e){for(let n,r=0,i=t.length,o=e.length;r<o;++r)n=e[r],n._index=i++,t.push(n)},remove:function(e,n){const o=t.length,a=Array(o-e),s=t;let u,l,c;for(l=0;!n[l]&&l<o;++l)a[l]=t[l],s[l]=l;for(c=l;l<o;++l)u=t[l],n[l]?s[l]=-1:(s[l]=c,r[c]=r[l],i[c]=i[l],a[c]=u,u._index=c++),r[l]=0;return t=a,s},size:()=>t.length,curr:()=>r,prev:()=>i,reset:e=>i[e]=r[e],all:()=>e<257?255:e<65537?65535:4294967295,set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=mq(t,e,r),i=mq(t,e))}}}(),e),this._indices=null,this._dims=null}function bq(e){Fk.call(this,null,e)}vq.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},ob(vq,Fk,{transform:function(e,t){return this._dims?e.modified("fields")||e.fields.some((e=>t.modified(e.fields)))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init:function(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s,u,l=0;for(;l<a;++l)s=n[l].fname,u=i[s]||(i[s]=yq()),o.push(gq(u,l,r[l]));return this.eval(e,t)},reinit:function(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,u=s.curr(),l=s.prev(),c=s.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,x,w,_,k;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,_=v.length;w<_;++w)x[v[w]._index]=1;for(w=0;w<h;++w)k=r[w],(!a[w]||e.modified("fields",w)||t.modified(k.fields))&&(y=k.fname,(m=p[y])||(o[y]=g=yq(),p[y]=m=g.insert(k,t.source,0)),a[w]=gq(g,w,i[w]).onAdd(m,u));for(w=0,_=s.data().length;w<_;++w)b[w]||(l[w]!==u[w]?f.push(w):x[w]&&u[w]!==c&&d.push(w));return s.mask=(1<<h)-1,n},eval:function(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert:function(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d,h,p,m=i.size();i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(d=0;d<f;++d)h=s[d].fname,p=u[h]||(u[h]=a[h].insert(s[d],r,m)),o[d].onAdd(p,g);for(;m<c;++m)y[m]=v,g[m]!==v&&l.push(m)},modify:function(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,u,l;for(s=0,u=a.length;s<u;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove:function(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,a[h]=p=o[h],o[h]=s,p!==s&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex:function(e,t,n){const r=this._indices,i=this.value;e.runAfter((()=>{const e=i.remove(t,n);for(const t in r)r[t].reindex(e)}))},update:function(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s,u,l=0;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(s=u,++l);if(1===l)l=r[s].one,this.incrementOne(r[s],i[s],n.add,n.rem);else for(u=0,l=0;u<a;++u)e.modified("query",u)&&(l|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return l},incrementAll:function(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;e.range=t.slice()},incrementOne:function(e,t,n,r){const i=this.value.curr(),o=e.index(),a=e.bisect(e.range),s=e.bisect(t),u=s[0],l=s[1],c=a[0],f=a[1],d=e.one;let h,p,m;if(u<c)for(h=u,p=Math.min(c,l);h<p;++h)m=o[h],i[m]^=d,n.push(m);else if(u>c)for(h=c,p=Math.min(u,f);h<p;++h)m=o[h],i[m]^=d,r.push(m);if(l>f)for(h=Math.max(u,f),p=l;h<p;++h)m=o[h],i[m]^=d,n.push(m);else if(l<f)for(h=Math.max(c,l),p=f;h<p;++h)m=o[h],i[m]^=d,r.push(m);e.range=t.slice()}}),bq.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},ob(bq,Fk,{transform:function(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),u=r.prev(),l=e=>s[e]&n?null:a[e];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,(e=>{const t=s[e]&n;return!t&&t^u[e]&n?a[e]:null})),o.filter(o.REM,(e=>{const t=s[e]&n;return t&&!(t^t^u[e]&n)?a[e]:null}))):(o.filter(o.ADD,l),o.filter(o.REM,(e=>(s[e]&n)===i?a[e]:null))),o.filter(o.SOURCE,(e=>l(e._index)))}}),t(fq,"resolvefilter",(function(){return bq})),t(fq,"crossfilter",(function(){return vq})),n(Jy,zk),n(Jy,vw),n(Jy,Db),n(Jy,rA);const xq="RawCode",wq="Literal",_q="Property",kq="Identifier",Eq="ArrayExpression",Sq="BinaryExpression",Aq="CallExpression",Cq="ConditionalExpression",Dq="LogicalExpression",Mq="MemberExpression",Fq="ObjectExpression",Nq="UnaryExpression";function $q(e){this.type=e}var Tq,Oq,zq,Rq,Pq;$q.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=function(e){switch(e.type){case Eq:return e.elements;case Sq:case Dq:return[e.left,e.right];case Aq:return[e.callee].concat(e.arguments);case Cq:return[e.test,e.consequent,e.alternate];case Mq:return[e.object,e.property];case Fq:return e.properties;case _q:return[e.key,e.value];case Nq:return[e.argument];case kq:case wq:case xq:default:return[]}}(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};(Tq={})[1]="Boolean",Tq[2]="<end>",Tq[3]="Identifier",Tq[4]="Keyword",Tq[5]="Null",Tq[6]="Numeric",Tq[7]="Punctuator",Tq[8]="String",Tq[9]="RegularExpression";var Lq="Identifier",Bq="Unexpected token %0",Iq="Invalid regular expression",jq="Invalid regular expression: missing /",Uq="Octal literals are not allowed in strict mode.",qq="ILLEGAL",Wq="Disabled.",Hq=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Vq=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Gq(e,t){if(!e)throw new Error("ASSERT: "+t)}function Yq(e){return e>=48&&e<=57}function Xq(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Qq(e){return"01234567".indexOf(e)>=0}function Jq(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Kq(e){return 10===e||13===e||8232===e||8233===e}function Zq(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&Hq.test(String.fromCharCode(e))}function eW(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&Vq.test(String.fromCharCode(e))}const tW={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function nW(){for(;zq<Rq;){const e=Oq.charCodeAt(zq);if(!Jq(e)&&!Kq(e))break;++zq}}function rW(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)zq<Rq&&Xq(Oq[zq])?(r=Oq[zq++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):bW({},Bq,qq);return String.fromCharCode(i)}function iW(){var e,t,n,r;for(t=0,"}"===(e=Oq[zq])&&bW({},Bq,qq);zq<Rq&&Xq(e=Oq[zq++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&bW({},Bq,qq),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function oW(){var e,t;for(e=Oq.charCodeAt(zq++),t=String.fromCharCode(e),92===e&&(117!==Oq.charCodeAt(zq)&&bW({},Bq,qq),++zq,(e=rW("u"))&&"\\"!==e&&Zq(e.charCodeAt(0))||bW({},Bq,qq),t=e);zq<Rq&&eW(e=Oq.charCodeAt(zq));)++zq,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Oq.charCodeAt(zq)&&bW({},Bq,qq),++zq,(e=rW("u"))&&"\\"!==e&&eW(e.charCodeAt(0))||bW({},Bq,qq),t+=e);return t}function aW(){var e,t;return e=zq,{type:1===(t=92===Oq.charCodeAt(zq)?oW():function(){var e,t;for(e=zq++;zq<Rq;){if(92===(t=Oq.charCodeAt(zq)))return zq=e,oW();if(!eW(t))break;++zq}return Oq.slice(e,zq)}()).length?3:tW.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:zq}}function sW(){var e,t,n,r,i=zq,o=Oq.charCodeAt(zq),a=Oq[zq];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++zq,{type:7,value:String.fromCharCode(o),start:i,end:zq};default:if(61===(e=Oq.charCodeAt(zq+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return zq+=2,{type:7,value:String.fromCharCode(o)+String.fromCharCode(e),start:i,end:zq};case 33:case 61:return zq+=2,61===Oq.charCodeAt(zq)&&++zq,{type:7,value:Oq.slice(i,zq),start:i,end:zq}}}return">>>="===(r=Oq.substr(zq,4))?{type:7,value:r,start:i,end:zq+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:i,end:zq+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?{type:7,value:t,start:i,end:zq+=2}:("//"===t&&bW({},Bq,qq),"<>=!+-*%&|^/".indexOf(a)>=0?{type:7,value:a,start:i,end:++zq}:void bW({},Bq,qq))}function uW(){var e,t,n;if(Gq(Yq((n=Oq[zq]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=zq,e="","."!==n){if(e=Oq[zq++],n=Oq[zq],"0"===e){if("x"===n||"X"===n)return++zq,function(e){let t="";for(;zq<Rq&&Xq(Oq[zq]);)t+=Oq[zq++];return 0===t.length&&bW({},Bq,qq),Zq(Oq.charCodeAt(zq))&&bW({},Bq,qq),{type:6,value:parseInt("0x"+t,16),start:e,end:zq}}(t);if(Qq(n))return function(e){let t="0"+Oq[zq++];for(;zq<Rq&&Qq(Oq[zq]);)t+=Oq[zq++];return(Zq(Oq.charCodeAt(zq))||Yq(Oq.charCodeAt(zq)))&&bW({},Bq,qq),{type:6,value:parseInt(t,8),octal:!0,start:e,end:zq}}(t);n&&Yq(n.charCodeAt(0))&&bW({},Bq,qq)}for(;Yq(Oq.charCodeAt(zq));)e+=Oq[zq++];n=Oq[zq]}if("."===n){for(e+=Oq[zq++];Yq(Oq.charCodeAt(zq));)e+=Oq[zq++];n=Oq[zq]}if("e"===n||"E"===n)if(e+=Oq[zq++],"+"!==(n=Oq[zq])&&"-"!==n||(e+=Oq[zq++]),Yq(Oq.charCodeAt(zq)))for(;Yq(Oq.charCodeAt(zq));)e+=Oq[zq++];else bW({},Bq,qq);return Zq(Oq.charCodeAt(zq))&&bW({},Bq,qq),{type:6,value:parseFloat(e),start:t,end:zq}}function lW(){var e,t,n,r;return Pq=null,nW(),e=zq,t=function(){var e,t,n,r;for(Gq("/"===(e=Oq[zq]),"Regular expression literal must start with a slash"),t=Oq[zq++],n=!1,r=!1;zq<Rq;)if(t+=e=Oq[zq++],"\\"===e)Kq((e=Oq[zq++]).charCodeAt(0))&&bW({},jq),t+=e;else if(Kq(e.charCodeAt(0)))bW({},jq);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||bW({},jq),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";zq<Rq&&eW((e=Oq[zq]).charCodeAt(0));)++zq,"\\"===e&&zq<Rq?bW({},Bq,qq):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&bW({},Iq,n),{value:n,literal:t}}(),r=function(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,((e,t)=>{if(parseInt(t,16)<=1114111)return"x";bW({},Iq)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){bW({},Iq)}try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:zq}}function cW(){if(nW(),zq>=Rq)return{type:2,start:zq,end:zq};const e=Oq.charCodeAt(zq);return Zq(e)?aW():40===e||41===e||59===e?sW():39===e||34===e?function(){var e,t,n,r,i="",o=!1;for(Gq("'"===(e=Oq[zq])||'"'===e,"String literal must starts with a quote"),t=zq,++zq;zq<Rq;){if((n=Oq[zq++])===e){e="";break}if("\\"===n)if((n=Oq[zq++])&&Kq(n.charCodeAt(0)))"\r"===n&&"\n"===Oq[zq]&&++zq;else switch(n){case"u":case"x":"{"===Oq[zq]?(++zq,i+=iW()):i+=rW(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:Qq(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),zq<Rq&&Qq(Oq[zq])&&(o=!0,r=8*r+"01234567".indexOf(Oq[zq++]),"0123".indexOf(n)>=0&&zq<Rq&&Qq(Oq[zq])&&(r=8*r+"01234567".indexOf(Oq[zq++]))),i+=String.fromCharCode(r)):i+=n}else{if(Kq(n.charCodeAt(0)))break;i+=n}}return""!==e&&bW({},Bq,qq),{type:8,value:i,octal:o,start:t,end:zq}}():46===e?Yq(Oq.charCodeAt(zq+1))?uW():sW():Yq(e)?uW():sW()}function fW(){const e=Pq;return zq=e.end,Pq=cW(),zq=e.end,e}function dW(){const e=zq;Pq=cW(),zq=e}function hW(e,t,n){const r=new $q("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function pW(e,t){const n=new $q("CallExpression");return n.callee=e,n.arguments=t,n}function mW(e){const t=new $q(Lq);return t.name=e,t}function gW(e){const t=new $q("Literal");return t.value=e.value,t.raw=Oq.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function yW(e,t,n){const r=new $q("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function vW(e,t,n){const r=new $q("Property");return r.key=t,r.value=n,r.kind=e,r}function bW(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,((e,t)=>(Gq(t<r.length,"Message reference must be in range"),r[t])));throw(n=new Error(i)).index=zq,n.description=i,n}function xW(e){2===e.type&&bW(e,"Unexpected end of input"),6===e.type&&bW(e,"Unexpected number"),8===e.type&&bW(e,"Unexpected string"),3===e.type&&bW(e,"Unexpected identifier"),4===e.type&&bW(e,"Unexpected reserved word"),bW(e,Bq,e.value)}function wW(e){const t=fW();7===t.type&&t.value===e||xW(t)}function _W(e){return 7===Pq.type&&Pq.value===e}function kW(e){return 4===Pq.type&&Pq.value===e}function EW(){const e=[];for(zq=Pq.start,wW("[");!_W("]");)_W(",")?(fW(),e.push(null)):(e.push(RW()),_W("]")||wW(","));return fW(),function(e){const t=new $q("ArrayExpression");return t.elements=e,t}(e)}function SW(){zq=Pq.start;const e=fW();return 8===e.type||6===e.type?(e.octal&&bW(e,Uq),gW(e)):mW(e.value)}function AW(){var e,t,n;return zq=Pq.start,3===(e=Pq).type?(n=SW(),wW(":"),vW("init",n,RW())):2!==e.type&&7!==e.type?(t=SW(),wW(":"),vW("init",t,RW())):void xW(e)}function CW(){var e,t,n=[],r={},i=String;for(zq=Pq.start,wW("{");!_W("}");)t="$"+((e=AW()).key.type===Lq?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?bW({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),_W("}")||wW(",");return wW("}"),function(e){const t=new $q("ObjectExpression");return t.properties=e,t}(n)}const DW={if:1};function MW(){var e,t,n;if(_W("("))return function(){wW("(");const e=PW();return wW(")"),e}();if(_W("["))return EW();if(_W("{"))return CW();if(e=Pq.type,zq=Pq.start,3===e||DW[Pq.value])n=mW(fW().value);else if(8===e||6===e)Pq.octal&&bW(Pq,Uq),n=gW(fW());else{if(4===e)throw new Error(Wq);1===e?((t=fW()).value="true"===t.value,n=gW(t)):5===e?((t=fW()).value=null,n=gW(t)):_W("/")||_W("/=")?(n=gW(lW()),dW()):xW(fW())}return n}function FW(){const e=[];if(wW("("),!_W(")"))for(;zq<Rq&&(e.push(RW()),!_W(")"));)wW(",");return wW(")"),e}function NW(){return wW("."),function(){zq=Pq.start;const e=fW();return function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||xW(e),mW(e.value)}()}function $W(){wW("[");const e=PW();return wW("]"),e}function TW(){const e=function(){var e;for(e=MW();;)if(_W("."))e=yW(".",e,NW());else if(_W("("))e=pW(e,FW());else{if(!_W("["))break;e=yW("[",e,$W())}return e}();if(7===Pq.type&&(_W("++")||_W("--")))throw new Error(Wq);return e}function OW(){var e,t;if(7!==Pq.type&&4!==Pq.type)t=TW();else{if(_W("++")||_W("--"))throw new Error(Wq);if(_W("+")||_W("-")||_W("~")||_W("!"))e=fW(),t=OW(),t=function(e,t){const n=new $q("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(kW("delete")||kW("void")||kW("typeof"))throw new Error(Wq);t=TW()}}return t}function zW(e){let t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function RW(){var e,t;return e=function(){var e,t,n,r,i,o,a,s,u,l;if(e=Pq,u=OW(),0===(i=zW(r=Pq)))return u;for(r.prec=i,fW(),t=[e,Pq],o=[u,r,a=OW()];(i=zW(Pq))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),t.pop(),n=hW(s,u,a),o.push(n);(r=fW()).prec=i,o.push(r),t.push(Pq),n=OW(),o.push(n)}for(n=o[l=o.length-1],t.pop();l>1;)t.pop(),n=hW(o[l-1].value,o[l-2],n),l-=2;return n}(),_W("?")&&(fW(),t=RW(),wW(":"),e=function(e,t,n){const r=new $q("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,RW())),e}function PW(){const e=RW();if(_W(","))throw new Error(Wq);return e}function LW(e){zq=0,Rq=(Oq=e).length,Pq=null,dW();const t=PW();if(2!==Pq.type)throw new Error("Unexpect token after expression.");return t}var BW={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function IW(e){function t(t,n,r){return i=>function(t,n,r,i){let o=e(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}const n="new Date",r="String",i="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&ov("Missing arguments to clamp function."),t.length>3&&ov("Too many arguments to clamp function.");const n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:i,test:t("test",i),if:function(t){t.length<3&&ov("Missing arguments to if function."),t.length>3&&ov("Too many arguments to if function.");const n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function jW(e){const t=(e=e||{}).allowed?Sb(e.allowed):{},n=e.forbidden?Sb(e.forbidden):{},r=e.constants||BW,i=(e.functions||IW)(f),o=e.globalvar,a=e.fieldvar,s=qv(o)?o:e=>"".concat(o,'["').concat(e,'"]');let u={},l={},c=0;function f(e){if(db(e))return e;const t=d[e.type];return null==t&&ov("Unsupported type: "+e.type),t(e)}const d={Literal:e=>e.raw,Identifier:e=>{const i=e.name;return c>0?i:tb(n,i)?ov("Illegal identifier: "+i):tb(r,i)?r[i]:tb(t,i)?i:(u[i]=1,s(i))},MemberExpression:e=>{const t=!e.computed,n=f(e.object);t&&(c+=1);const r=f(e.property);return n===a&&(l[function(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(c-=1),n+(t?"."+r:"["+r+"]")},CallExpression:e=>{"Identifier"!==e.callee.type&&ov("Illegal callee type: "+e.callee.type);const t=e.callee.name,n=e.arguments,r=tb(i,t)&&i[t];return r||ov("Unrecognized function: "+t),qv(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:e=>"["+e.elements.map(f).join(",")+"]",BinaryExpression:e=>"("+f(e.left)+" "+e.operator+" "+f(e.right)+")",UnaryExpression:e=>"("+e.operator+f(e.argument)+")",ConditionalExpression:e=>"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")",LogicalExpression:e=>"("+f(e.left)+e.operator+f(e.right)+")",ObjectExpression:e=>"{"+e.properties.map(f).join(",")+"}",Property:e=>{c+=1;const t=f(e.key);return c-=1,t+":"+f(e.value)}};function h(e){const t={code:f(e),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},t}return h.functions=i,h.constants=r,h}const UW="intersect",qW="union";function WW(e,t){for(var n,r,i=t.fields,o=t.values,a=i.length,s=0;s<a;++s)if((r=i[s]).getter=sv.getter||sv(r.field),ub(n=r.getter(e))&&(n=kv(n)),ub(o[s])&&(o[s]=kv(o[s])),ub(o[s][0])&&(o[s]=o[s].map(kv)),"E"===r.type){if(gv(o[s])?o[s].indexOf(n)<0:n!==o[s])return!1}else if("R"===r.type){if(!ab(n,o[s]))return!1}else if("R-RE"===r.type){if(!ab(n,o[s],!0,!1))return!1}else if("R-E"===r.type){if(!ab(n,o[s],!1,!1))return!1}else if("R-LE"===r.type&&!ab(n,o[s],!1,!0))return!1;return!0}const HW=sv("_vgsid_"),VW=function(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>{return(r=e(t))<(i=n)?-1:r>i?1:r>=i?0:NaN;var r,i}}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}(HW),GW=VW.left,YW=VW.right;var XW={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((e=>t.indexOf(e)>=0)):t},R_union:function(e,t){var n=kv(t[0]),r=kv(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=kv(t[0]),r=kv(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function QW(e,t,n,r){t[0].type!==wq&&ov("First argument to selection functions must be a string literal.");const i=t[0].value,o="unit",a="@unit",s=":"+i;(t.length>=2&&_v(t).value)!==UW||tb(r,a)||(r["@unit"]=n.getData(i).indataRef(n,o)),tb(r,s)||(r[s]=n.getData(i).tuplesRef())}function JW(e){const t=this.context.data[e];return t?t.values.value:[]}const KW=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},ZW=KW("format"),eH=KW("timeFormat"),tH=KW("utcFormat"),nH=KW("timeParse"),rH=KW("utcParse"),iH=new Date(2e3,0,1);function oH(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(iH.setYear(2e3),iH.setMonth(e),iH.setDate(t),eH.call(this,iH,n)):""}function aH(e,t,n,r){t[0].type!==wq&&ov("First argument to data functions must be a string literal.");const i=t[0].value,o=":"+i;if(!tb(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(e){}}function sH(e,t,n,r){if(t[0].type===wq)uH(n,r,t[0].value);else for(e in n.scales)uH(n,r,e)}function uH(e,t,n){const r="%"+n;if(!tb(t,r))try{t[r]=e.scaleRef(n)}catch(e){}}function lH(e,t){let n;return qv(e)?e:db(e)?(n=t.scales[e])&&n.value:void 0}function cH(e,t,n){t.__bandwidth=e=>e&&e.bandwidth?e.bandwidth():0,n._bandwidth=sH,n._range=sH,n._scale=sH;const r=t=>"_["+(t.type===wq?xb("%"+t.value):xb("%")+"+"+e(t))+"]";return{_bandwidth:e=>"this.__bandwidth(".concat(r(e[0]),")"),_range:e=>"".concat(r(e[0]),".range()"),_scale:t=>"".concat(r(t[0]),"(").concat(e(t[1]),")")}}function fH(e,t){return function(n,r,i){if(n){const t=lH(n,(i||this).context);return t&&t.path[e](r)}return t(r)}}const dH=fH("area",(function(e){return zz=new sd,Tz(e,Rz),2*zz})),hH=fH("bounds",(function(e){var t,n,r,i,o,a,s;if(Wz=qz=-(jz=Uz=1/0),Qz=[],Tz(e,oR),n=Qz.length){for(Qz.sort(pR),t=1,o=[r=Qz[0]];t<n;++t)mR(r,(i=Qz[t])[0])||mR(r,i[1])?(hR(r[0],i[1])>hR(r[0],r[1])&&(r[1]=i[1]),hR(i[0],r[1])>hR(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=hR(r[1],i[0]))>a&&(a=s,jz=i[0],qz=r[1])}return Qz=Jz=null,jz===1/0||Uz===1/0?[[NaN,NaN],[NaN,NaN]]:[[jz,Uz],[qz,Wz]]})),pH=fH("centroid",(function(e){gR=yR=vR=bR=xR=wR=_R=kR=0,ER=new sd,SR=new sd,AR=new sd,Tz(e,$R);var t=+ER,n=+SR,r=+AR,i=hz(t,n,r);return i<ez&&(t=wR,n=_R,r=kR,yR<ZO&&(t=vR,n=bR,r=xR),(i=hz(t,n,r))<ez)?[NaN,NaN]:[lz(n,t)*oz,wz(r/i)*oz]}));function mH(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function gH(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function yH(e){const t=Zd(e);return.2126*gH(t.r)+.7152*gH(t.g)+.0722*gH(t.b)}function vH(e,t){return e===t||e!=e&&t!=t||(gv(e)?!(!gv(t)||e.length!==t.length)&&function(e,t){for(let n=0,r=e.length;n<r;++n)if(!vH(e[n],t[n]))return!1;return!0}(e,t):!(!yv(e)||!yv(t))&&bH(e,t))}function bH(e,t){for(const n in e)if(!vH(e[n],t[n]))return!1;return!0}function xH(e){return t=>bH(e,t)}const wH={};function _H(e){return gv(e)||ArrayBuffer.isView(e)?e:null}function kH(e){return _H(e)||(db(e)?e:null)}const EH=e=>e.data;function SH(e,t){const n=JW.call(t,e);return n.root&&n.root.lookup||{}}const AH=()=>"undefined"!=typeof window&&window||null;const CH={random:function(){return jk()},cumulativeNormal:Kk,cumulativeLogNormal:iE,cumulativeUniform:cE,densityNormal:Jk,densityLogNormal:rE,densityUniform:lE,quantileNormal:Zk,quantileLogNormal:oE,quantileUniform:fE,sampleNormal:Qk,sampleLogNormal:nE,sampleUniform:uE,isArray:gv,isBoolean:sb,isDate:ub,isDefined:function(e){return void 0!==e},isNumber:cb,isObject:yv,isRegExp:fb,isString:db,isTuple:Q_,isValid:function(e){return null!=e&&e==e},toBoolean:wb,toDate:kb,toNumber:kv,toString:Eb,indexof:function(e,...t){return kH(e).indexOf(...t)},join:function(e,...t){return _H(e).join(...t)},lastindexof:function(e,...t){return kH(e).lastIndexOf(...t)},replace:function(e,t,n){return qv(n)&&ov("Function argument passed to replace."),String(e).replace(t,n)},reverse:function(e){return _H(e).slice().reverse()},slice:function(e,...t){return kH(e).slice(...t)},flush:ib,lerp:pb,merge:function(){const e=[].slice.call(arguments);return e.unshift({}),Jv(...e)},pad:vb,peek:_v,pluck:function(e,t){const n=wH[t]||(wH[t]=sv(t));return gv(e)?e.map(n):n(e)},span:bb,inrange:ab,truncate:Ab,rgb:Zd,lab:yh,hcl:Eh,hsl:ah,luminance:yH,contrast:function(e,t){const n=yH(e),r=yH(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:Dd,format:ZW,utcFormat:tH,utcParse:rH,utcOffset:l_,utcSequence:d_,timeFormat:eH,timeParse:nH,timeOffset:u_,timeSequence:f_,timeUnitSpecifier:Ow,monthFormat:function(e){return oH.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return oH.call(this,e,1,"%b")},dayFormat:function(e){return oH.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return oH.call(this,0,2+e,"%a")},quarter:Bv,utcquarter:Iv,week:Lw,utcweek:Ww,dayofyear:Pw,utcdayofyear:qw,warn:function(){return mH(this.context.dataflow,"warn",arguments)},info:function(){return mH(this.context.dataflow,"info",arguments)},debug:function(){return mH(this.context.dataflow,"debug",arguments)},extent:Kv,inScope:function(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];const[r,i]=e,o=(new $M).set(r[0],r[1],i[0],i[1]);return rT(n||this.context.dataflow.scenegraph().root,o,function(e){let t=null;if(e){const n=jv(e.marktype),r=jv(e.markname);t=e=>(!n.length||n.some((t=>e.marktype===t)))&&(!r.length||r.some((t=>e.name===t)))}return t}(t))},clampRange:Uv,pinchDistance:function(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){const e=AH();return e?e.screen:{}},containerSize:function(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){const e=AH();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return xC(e||0,t||0,n||0)},setdata:function(e,t){const n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(dv).insert(t)),1},pathShape:function(e){let t=null;return function(n){return n?tM(n,t=t||WD(e)):e}},panLinear:Fv,panLog:Nv,panPow:$v,panSymlog:Tv,zoomLinear:zv,zoomLog:Rv,zoomPow:Pv,zoomSymlog:Lv,encode:function(e,t,n){if(e){const n=this.context.dataflow,r=e.mark.source;n.pulse(r,n.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,o){const a=this.context.dataflow,s=this.context.data[e],u=s.input,l=a.stamp();let c,f,d=s.changes;if(!1===a._trigger||!(u.value.length||t||r))return 0;if((!d||d.stamp<l)&&(s.changes=d=a.changeset(),d.stamp=l,a.runAfter((()=>{s.modified=!0,a.pulse(u,d).run()}),!0,1)),n&&(c=!0===n?dv:gv(n)||Q_(n)?n:xH(n),d.remove(c)),t&&d.insert(t),r&&(c=xH(r),u.value.some(c)?d.remove(c):d.insert(r)),i)for(f in o)d.modify(i,f,o[f]);return 1}},DH=["view","item","group","xy","x","y"],MH="this.",FH={},NH={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>"_[".concat(xb("$"+e),"]"),functions:function(e){const t=IW(e);DH.forEach((e=>t[e]="event.vega."+e));for(const e in CH)t[e]=MH+e;return Jv(t,cH(e,CH,FH)),t},constants:BW,visitors:FH},$H=jW(NH);function TH(e,t,n){return 1===arguments.length?CH[e]:(CH[e]=t,n&&(FH[e]=n),$H&&($H.functions[e]=MH+e),this)}function OH(e,t){const n={};let r;try{r=LW(e=db(e)?e:xb(e)+"")}catch(t){ov("Expression parse error: "+e)}r.visit((e=>{if(e.type!==Aq)return;const r=e.callee.name,i=NH.visitors[r];i&&i(r,e.arguments,t,n)}));const i=$H(r);return i.globals.forEach((e=>{const r="$"+e;!tb(n,r)&&t.getSignal(e)&&(n[r]=t.signalRef(e))})),{$expr:Jv({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}TH("bandwidth",(function(e,t){const n=lH(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),sH),TH("copy",(function(e,t){const n=lH(e,(t||this).context);return n?n.copy():void 0}),sH),TH("domain",(function(e,t){const n=lH(e,(t||this).context);return n?n.domain():[]}),sH),TH("range",(function(e,t){const n=lH(e,(t||this).context);return n&&n.range?n.range():[]}),sH),TH("invert",(function(e,t,n){const r=lH(e,(n||this).context);return r?gv(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),sH),TH("scale",(function(e,t,n){const r=lH(e,(n||this).context);return r?r(t):void 0}),sH),TH("gradient",(function(e,t,n,r,i){e=lH(e,(i||this).context);const o=BD(t,n);let a=e.domain(),s=a[0],u=_v(a),l=lv;return u-s?l=uD(e,s,u):e=(e.interpolator?XC("sequential")().interpolator(e.interpolator()):XC("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,u=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),u!==_v(a)&&a.push(u)),a.forEach((t=>o.stop(l(t),e(t)))),o}),sH),TH("geoArea",dH,sH),TH("geoBounds",hH,sH),TH("geoCentroid",pH,sH),TH("geoShape",(function(e,t,n){const r=lH(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),sH),TH("indata",(function(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(e,t,n,r){t[0].type!==wq&&ov("First argument to indata must be a string literal."),t[1].type!==wq&&ov("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a="@"+o;tb(a,r)||(r[a]=n.getData(i).indataRef(n,o))})),TH("data",JW,aH),TH("treePath",(function(e,t,n){const r=SH(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(EH):void 0}),aH),TH("treeAncestors",(function(e,t){const n=SH(e,this)[t];return n?n.ancestors().map(EH):void 0}),aH),TH("vlSelectionTest",(function(e,t,n){for(var r,i,o,a,s,u=this.context.data[e],l=u?u.values.value:[],c=u?u["index:unit"]&&u["index:unit"].value:void 0,f=n===UW,d=l.length,h=0;h<d;++h)if(r=l[h],c&&f){if(-1===(o=(i=i||{})[a=r.unit]||0))continue;if(s=WW(t,r),i[a]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(a).count)return!1}else if(f^(s=WW(t,r)))return s;return d&&f}),QW),TH("vlSelectionIdTest",(function(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r["index:unit"]&&r["index:unit"].value:void 0,a=n===UW,s=HW(t),u=GW(i,s);if(u===i.length)return!1;if(HW(i[u])!==s)return!1;if(o&&a){if(1===o.size)return!0;if(YW(i,s)-u<o.size)return!1}return!0}),QW),TH("vlSelectionResolve",(function(e,t,n,r){for(var i,o,a,s,u,l,c,f,d,h,p,m=this.context.data[e],g=m?m.values.value:[],y={},v={},b={},x=g.length,w=0;w<x;++w){for(s=(i=g[w]).unit,o=i.fields,a=i.values,h=0,p=o.length;h<p;++h)u=o[h],c=(l=y[u.field]||(y[u.field]={}))[s]||(l[s]=[]),b[u.field]=f=u.type.charAt(0),d=XW[f+"_union"],l[s]=d(c,jv(a[h]));n&&(c=v[s]||(v[s]=[])).push(jv(a).reduce(((e,t,n)=>(e[o[n].field]=t,e)),{}))}if(t=t||qW,Object.keys(y).forEach((e=>{y[e]=Object.keys(y[e]).map((t=>y[e][t])).reduce(((n,r)=>void 0===n?r:XW[b[e]+"_"+t](n,r)))})),g=Object.keys(v),n&&g.length){y[r?"vlPoint":"vlMulti"]=t===qW?{or:g.reduce(((e,t)=>(e.push(...v[t]),e)),[])}:{and:g.map((e=>({or:v[e]})))}}return y}),QW),TH("vlSelectionTuples",(function(e,t){return e.map((e=>Jv({values:t.fields.map((t=>(t.getter||(t.getter=sv(t.field)))(e.datum)))},t)))}));const zH=Sb(["rule"]),RH=Sb(["group","image","rect"]);function PH(e){return(e+"").toLowerCase()}function LH(e,t,n){";"!==n[n.length-1]&&(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}var BH={operator:(e,t)=>LH(e,["_"],t.code),parameter:(e,t)=>LH(e,["datum","_"],t.code),event:(e,t)=>LH(e,["event"],t.code),handler:(e,t)=>LH(e,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(t.code,";")),encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const e in r){const t="o["+xb(e)+"]";i+="$=".concat(r[e].code,";if(").concat(t,"!==$)").concat(t,"=$,m=1;")}return i+=function(e,t){let n="";return zH[t]||(e.x2&&(e.x?(RH[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(RH[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),i+="return m;",LH(e,["item","_"],i)},codegen:{get:function(e){const t="[".concat(e.map(xb).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator:function(e,t){let n;const r=Function("a","b","var u, v; return "+e.map(((e,r)=>{const i=t[r];let o,a;return e.path?(o="a".concat(e.path),a="b".concat(e.path)):((n=n||{})["f"+r]=e,o="this.f".concat(r,"(a)"),a="this.f".concat(r,"(b)")),function(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(o,a,-i,i)})).join("")+"0;");return n?r.bind(n):r}}};function IH(e,t,n){if(!e||!yv(e))return e;for(let r,i=0,o=jH.length;i<o;++i)if(r=jH[i],tb(e,r.key))return r.parse(e,t,n);return e}var jH=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||ov("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=hb(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=Zy(t.parameterExpression(e.$expr),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=sv(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function(e,t){const n=e.$encode,r={};for(const e in n){const i=n[e];r[e]=Zy(t.encodeExpression(i.$expr),i.$fields),r[e].output=i.$output}return r}},{key:"$compare",parse:function(e,t){const n="c:"+e.$compare+"_"+e.$order,r=jv(e.$compare).map((e=>e&&e.$tupleid?J_:e));return t.fn[n]||(t.fn[n]=Wv(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){const n=e.$subflow;return function(e,r,i){const o=t.fork().parse(n),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a.detachSubflow=()=>t.detach(o),a}}},{key:"$tupleid",parse:function(){return J_}}];const UH={skip:!0};function qH(e,t,n,r){return new WH(e,t,n,r)}function WH(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||BH,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function HH(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function VH(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}WH.prototype=HH.prototype={fork:function(){const e=new HH(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach:function(e){this.subcontext=this.subcontext.filter((t=>t!==e));const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),"collect"===PH(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push((()=>{i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)}))}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const r in e.data){const i=n.data[r]||(n.data[r]={});e.data[r].forEach((e=>i[e]=t))}},resolve:function(){return(this.unresolved||[]).forEach((e=>e())),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[PH(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression:function(e){return this.expr.operator(this,e)},parameterExpression:function(e){return this.expr.parameter(this,e)},eventExpression:function(e){return this.expr.event(this,e)},handlerExpression:function(e){return this.expr.handler(this,e)},encodeExpression:function(e){return this.expr.encode(this,e)},parse:function(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach((e=>t.parseOperator(e))),n.forEach((e=>t.parseOperatorParameters(e))),(e.streams||[]).forEach((e=>t.parseStream(e))),(e.updates||[]).forEach((e=>t.parseUpdate(e))),t.resolve()},parseOperator:function(e){const t=this;"operator"!==PH(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function(e){const t=this;if(e.params){const n=t.get(e.id);n||ov("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=gv(i)?i.map((e=>IH(e,n,t))):IH(i,n,t)}return t},parseStream:function(e){var t,n=this,r=null!=e.filter?n.eventExpression(e.filter):void 0,i=null!=e.stream?n.get(e.stream):void 0;e.source?i=n.events(e.source,e.type,r):e.merge&&(i=(t=e.merge.map((e=>n.get(e))))[0].merge.apply(t[0],t.slice(1))),e.between&&(t=e.between.map((e=>n.get(e))),i=i.between(t[0],t[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&ov("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),n.stream(e,i)},parseUpdate:function(e){var t,n=this,r=yv(r=e.source)?r.$ref:r,i=n.get(r),o=e.update,a=void 0;i||ov("Source not defined: "+e.source),t=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),o&&o.$expr&&(o.$params&&(a=n.parseParameters(o.$params)),o=n.handlerExpression(o.$expr)),n.update(e,i,t,o,a)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((n=>{const i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((n=>{const r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((t=>t.getState(e)))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((e=>{n.update(t.signals[e],i[e],UH)})),Object.keys(r||{}).forEach((e=>{n.pulse(t.data[e].input,n.changeset().remove(dv).insert(r[e]))})),(e.subcontext||[]).forEach(((e,n)=>{const r=t.subcontext[n];r&&r.setState(e)}))}};const GH="default";function YH(e,t){const n=e.globalCursor()?"undefined"!=typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function XH(e,t){var n=e._runtime.data;return tb(n,t)||ov("Unrecognized data set: "+t),n[t]}function QH(e,t){ik(t)||ov("Second argument to changes must be a changeset.");const n=XH(this,e);return n.modified=!0,this.pulse(n.input,t)}function JH(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function KH(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function ZH(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function eV(e,t,n){var r,i,o=e._renderer,a=o&&o.canvas();return a&&(i=ZH(e),(r=jN(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){const r=t?"group"===t.mark.marktype?t:t.mark.group:null;function i(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(e){if(!e)return n;db(e)&&(e=i(e));const t=n.slice();for(;e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:Xv(e),item:Xv(t||{}),group:i,xy:o,x:e=>o(e)[0],y:e=>o(e)[1]}}(e,n,r),t}const tV="view",nV={trap:!1};function rV(e,t,n,r){e._eventListeners.push({type:n,sources:jv(t),handler:r})}function iV(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return!(!1===r||yv(r)&&!r[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function oV(e){return e.item}function aV(e){return e.item.mark.source}function sV(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function uV(e,t,n){const r=document.createElement(e);for(const e in t)r.setAttribute(e,t[e]);return null!=n&&(r.textContent=n),r}function lV(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),rV(r,t,i,o),e.set=e=>{t.value=e,t.dispatchEvent(function(e){return"undefined"!=typeof Event?new Event(e):{type:e}}(i))}}function cV(e,t,n,r){const i=r.signal(n.signal),o=uV("div",{class:"vega-bind"}),a="radio"===n.input?o:o.appendChild(uV("label"));a.appendChild(uV("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(o);let s=fV;switch(n.input){case"checkbox":s=dV;break;case"select":s=hV;break;case"radio":s=pV;break;case"range":s=mV}s(e,a,n,i)}function fV(e,t,n,r){const i=uV("input");for(const e in n)"signal"!==e&&"element"!==e&&i.setAttribute("input"===e?"type":e,n[e]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(()=>e.update(i.value))),e.elements=[i],e.set=e=>i.value=e}function dV(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=uV("input",i);t.appendChild(o),o.addEventListener("change",(()=>e.update(o.checked))),e.elements=[o],e.set=e=>o.checked=!!e||null}function hV(e,t,n,r){const i=uV("select",{name:n.signal}),o=n.labels||[];n.options.forEach(((e,t)=>{const n={value:e};gV(e,r)&&(n.selected=!0),i.appendChild(uV("option",n,(o[t]||e)+""))})),t.appendChild(i),i.addEventListener("change",(()=>{e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=e=>{for(let t=0,r=n.options.length;t<r;++t)if(gV(n.options[t],e))return void(i.selectedIndex=t)}}function pV(e,t,n,r){const i=uV("span",{class:"vega-bind-radio"}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map(((t,a)=>{const s={type:"radio",name:n.signal,value:t};gV(t,r)&&(s.checked=!0);const u=uV("input",s);u.addEventListener("change",(()=>e.update(t)));const l=uV("label",{},(o[a]||t)+"");return l.prepend(u),i.appendChild(l),u})),e.set=t=>{const n=e.elements,r=n.length;for(let e=0;e<r;++e)gV(n[e].value,t)&&(n[e].checked=!0)}}function mV(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||yd(o,i,100),s=uV("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const u=uV("span",{},+r);t.appendChild(s),t.appendChild(u);const l=()=>{u.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=e=>{s.value=e,u.textContent=e}}function gV(e,t){return e===t||e+""==t+""}function yV(e,t,n,r,i,o){return(t=t||new r(e.loader())).initialize(n,JH(e),KH(e),ZH(e),i,o).background(e.background())}function vV(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function bV(e,t,n){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}const xV=e=>+e||0;function wV(e){return yv(e)?{top:xV(e.top),bottom:xV(e.bottom),left:xV(e.left),right:xV(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(xV(e))}async function _V(e,t,n,r){const i=nT(t),o=i&&i.headless;return o||ov("Unrecognized renderer type: "+t),await e.runAsync(),yV(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}var kV="width",EV="height",SV="padding",AV={skip:!0};function CV(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===SV?r.left+r.right:0)}function DV(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===SV?r.top+r.bottom:0)}function MV(e,t){return t.modified&&gv(t.input.value)&&e.indexOf("_:vega:_")}function FV(e,t){return!("parent"===e||t instanceof Nk.proxy)}function NV(e,t,n,r){const i=e.element();i&&i.setAttribute("title",function(e){return null==e?"":gv(e)?$V(e):yv(e)&&!ub(e)?(t=e,Object.keys(t).map((e=>{const n=t[e];return e+": "+(gv(n)?$V(n):TV(n))})).join("\n")):e+"";var t}(r))}function $V(e){return"["+e.map(TV).join(", ")+"]"}function TV(e){return gv(e)?"[…]":yv(e)&&!ub(e)?"{…}":e}function OV(e,t){const n=this;if(t=t||{},Dk.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const r=Jv({},e.locale,t.locale);n.locale(j_(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||eT.Canvas,n._scenegraph=new ON;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||NV,n._redraw=!0,n._handler=(new a$).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(e){const t=Jv({defaults:{}},e),n=(e,t)=>{t.forEach((t=>{gv(e[t])&&(e[t]=Sb(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=function(e,t,n){return qH(e,Nk,CH,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map((e=>({state:null,param:Jv({},e)}))),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=CV(n,n._width),n._viewHeight=DV(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){var t=e._signals,n=t.width,r=t.height,i=t.padding;function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(t=>{e._width=t.size,e._viewWidth=CV(e,t.size),o()}),{size:n}),e._resizeHeight=e.add(null,(t=>{e._height=t.size,e._viewHeight=DV(e,t.size),o()}),{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(n),function(e){e.add(null,(t=>(e._background=t.bg,e._resize=1,t.bg)),{bg:e._signals.background})}(n),function(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:GH,item:null}));e.on(e.events("view","mousemove"),t,((e,n)=>{const r=t.value,i=r?db(r)?r:r.user:GH,o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}})),e.add(null,(function(t){let n=t.cursor,r=this.value;return db(n)||(r=n.item,n=n.user),YH(e,n&&n!==GH?n:r||n),r}),{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function zV(e,t){return tb(e._signals,t)?e._signals[t]:ov("Unrecognized signal name: "+xb(t))}function RV(e,t){const n=(e._targets||[]).filter((e=>e._update&&e._update.handler===t));return n.length?n[0]:null}function PV(e,t,n,r){let i=RV(n,r);return i||(i=vV(e,(()=>r(t,n.value))),i.handler=r,e.on(n,null,i)),e}function LV(e,t,n){const r=RV(t,n);return r&&t._targets.remove(r),e}ob(OV,Dk,{evaluate:async function(e,t,n){if(await Dk.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,i=ZH(r=this),o=JH(r),a=KH(r),r._renderer.background(r.background()),r._renderer.resize(o,a,i),r._handler.origin(i),r._resizeListeners.forEach((e=>{try{e(o,a)}catch(e){r.error(e)}}))),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(e){this.error(e)}var r,i,o,a;return n&&G_(this,n),this},dirty:function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description:function(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&VH(this._el,this._desc=t),this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},signal:function(e,t,n){const r=zV(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width:function(e){return arguments.length?this.signal("width",e):this.signal("width")},height:function(e){return arguments.length?this.signal("height",e):this.signal("height")},padding:function(e){return arguments.length?this.signal("padding",wV(e)):wV(this.signal("padding"))},autosize:function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background:function(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer:function(e){return arguments.length?(nT(e)||ov("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip:function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader:function(e){return arguments.length?(e!==this._loader&&(Dk.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize:function(){return this._autosize=1,this.touch(zV(this,"autosize"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(e,t,n,r,i,o){this.runAfter((a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(kV,n,AV),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(EV,r,AV),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter((e=>e.resize()))}),!1,1)},addEventListener:function(e,t,n){let r=t;return n&&!1===n.trap||(r=vV(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener:function(e,t){for(var n,r,i=this._handler.handlers(e),o=i.length;--o>=0;)if(r=i[o].type,n=i[o].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener:function(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener:function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener:function(e,t){return PV(this,e,zV(this,e),t)},removeSignalListener:function(e,t){return LV(this,zV(this,e),t)},addDataListener:function(e,t){return PV(this,e,XH(this,e).values,t)},removeDataListener:function(e,t){return LV(this,XH(this,e).values,t)},globalCursor:function(e){if(arguments.length){if(this._globalCursor!==!!e){const t=YH(this,null);this._globalCursor=!!e,t&&YH(this,t)}return this}return this._globalCursor},preventDefault:function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function(e,t){this._timers.push(function(e,t,n){var r=new bI,i=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?yI():+n,r._restart((function o(a){a+=i,r._restart(o,i+=t,n),e(a)}),t,n)},r.restart(e,t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},events:function(e,t,n){var r,i=this,o=new hk(n),a=function(n,r){i.runAsync(null,(()=>{e===tV&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault(),o.receive(eV(i,n,r))}))};if("timer"===e)iV(i,"timer",t)&&i.timer(a,t);else if(e===tV)iV(i,"view",t)&&i.addEventListener(t,a,nV);else if("window"===e?iV(i,"window",t)&&"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&iV(i,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(t,a);rV(i,r,t,a)}else i.warn("Can not resolve event source: "+e);return o},finalize:function(){var e,t,n,r=this._tooltip,i=this._timers,o=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=o.length;--e>=0;)for(t=(n=o[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",oV),aV,sV(e)),this.on(this.events("view","mouseout",oV),aV,sV(t)),this},data:function(e,t){return arguments.length<2?XH(this,e).values.value:QH.call(this,e,ok().remove(dv).insert(t))},change:QH,insert:function(e,t){return QH.call(this,e,ok().insert(t))},remove:function(e,t){return QH.call(this,e,ok().remove(t))},scale:function(e){var t=this._runtime.scales;return tb(t,e)||ov("Unrecognized scale or projection: "+e),t[e].value},initialize:function(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=nT(r);e=n._el=e?bV(n,e,!0):null,function(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),VH(t,e.description()))}(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||a$,s=e?o.renderer:o.headless;return n._renderer=s?yV(n,n._renderer,e,s):null,n._handler=function(e,t,n,r){const i=new r(e.loader(),vV(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,ZH(e),e);return t&&t.handlers().forEach((e=>{i.on(e.type,e.handler)})),i}(n,n._handler,e,a),n._redraw=!0,e&&"none"!==i&&(t=t?n._elBind=bV(n,t,!0):e.appendChild(uV("form",{class:"vega-bindings"})),n._bind.forEach((e=>{e.param.element&&"container"!==i&&(e.element=bV(n,e.param.element,!!e.param.input))})),n._bind.forEach((e=>{!function(e,t,n){if(!t)return;const r=n.param;let i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:t=>{t!=e.signal(r.signal)&&e.runAsync(null,(()=>{i.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(i.update=Qv(r.debounce,i.update))),(null==r.input&&r.element?lV:cV)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,(()=>{i.source?i.source=!1:i.set(e.signal(r.signal))})),i.active=!0)}(n,e.element||t,e)}))),n},toImageURL:async function(e,t){e!==eT.Canvas&&e!==eT.SVG&&e!==eT.PNG&&ov("Unrecognized image type: "+e);const n=await _V(this,e,t);return e===eT.SVG?function(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")},toCanvas:async function(e,t){return(await _V(this,eT.Canvas,e,t)).canvas()},toSVG:async function(e){return(await _V(this,eT.SVG,e)).svg()},getState:function(e){return this._runtime.getState(e||{data:MV,signals:FV,recurse:!0})},setState:function(e){return this.runAsync(null,(t=>{t._trigger=!1,t._runtime.setState(e)}),(e=>{e._trigger=!0})),this}});const BV="[",IV="]",jV=/[[\]{}]/,UV={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let qV,WV;function HV(e,t,n){return qV=t||"view",WV=n||UV,GV(e.trim()).map(YV)}function VV(e,t,n,r,i){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function GV(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=VV(e,i,",","[{","]}"),t.push(e.substring(r,i).trim()),r=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function YV(e){return"["===e[0]?function(e){const t=e.length;let n,r=1;if(r=VV(e,r,IV,BV,IV),r===t)throw"Empty between selector: "+e;if(n=GV(e.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(r+1).trim())[0])throw"Expected '>' after between selector: "+e;n=n.map(YV);const i=YV(e.slice(1).trim());if(i.between)return{between:n,stream:i};i.between=n;return i}(e):function(e){const t={source:qV},n=[];let r,i,o=[0,0],a=0,s=0,u=e.length,l=0;if("}"===e[u-1]){if(l=e.lastIndexOf("{"),!(l>=0))throw"Unmatched right brace: "+e;try{o=function(e){const t=e.split(",");if(!e.length||t.length>2)throw e;return t.map((t=>{const n=+t;if(n!=n)throw e;return n}))}(e.substring(l+1,u-1))}catch(t){throw"Invalid throttle specification: "+e}u=(e=e.slice(0,l).trim()).length,l=0}if(!u)throw e;"@"===e[0]&&(a=++l);r=VV(e,l,":"),r<u&&(n.push(e.substring(s,r).trim()),s=l=++r);if(l=VV(e,l,BV),l===u)n.push(e.substring(s,u).trim());else if(n.push(e.substring(s,l).trim()),i=[],s=++l,s===u)throw"Unmatched left bracket: "+e;for(;l<u;){if(l=VV(e,l,IV),l===u)throw"Unmatched left bracket: "+e;if(i.push(e.substring(s,l).trim()),l<u-1&&e[++l]!==BV)throw"Expected left bracket: "+e;s=++l}if(!(u=n.length)||jV.test(n[u-1]))throw"Invalid event selector: "+e;u>1?(t.type=n[1],a?t.markname=n[0].slice(1):(c=n[0],WV[c]?t.marktype=n[0]:t.source=n[0])):t.type=n[0];var c;"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1));null!=i&&(t.filter=i);o[0]&&(t.throttle=o[0]);o[1]&&(t.debounce=o[1]);return t}(e)}function XV(e){return yv(e)?e:{type:e||"pad"}}const QV=e=>+e||0;function JV(e){return yv(e)?e.signal?e:{top:QV(e.top),bottom:QV(e.bottom),left:QV(e.left),right:QV(e.right)}:{top:t=QV(e),bottom:t,left:t,right:t};var t}const KV=e=>yv(e)&&!gv(e)?Jv({},e):{value:e};function ZV(e,t,n,r){if(null!=n){return yv(n)&&!gv(n)||gv(n)&&n.length&&yv(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1}return 0}function eG(e,t,n){for(const n in t)ZV(e,n,t[n]);for(const t in n)ZV(e,t,n[t],"update")}function tG(e,t,n){for(const r in t)n&&tb(n,r)||(e[r]=Jv(e[r]||{},t[r]));return e}function nG(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const rG="mark",iG="frame",oG="scope",aG="legend-label",sG="title-text",uG="title-subtitle";function lG(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const cG=e=>db(e)?xb(e):e.signal?"(".concat(e.signal,")"):pG(e);function fG(e){if(null!=e.gradient)return function(e){const t=[e.start,e.stop,e.count].map((e=>null==e?null:xb(e)));for(;t.length&&null==_v(t);)t.pop();return t.unshift(cG(e.gradient)),"gradient(".concat(t.join(","),")")}(e);let t=e.signal?"(".concat(e.signal,")"):e.color?function(e){return e.c?dG("hcl",e.h,e.c,e.l):e.h||e.s?dG("hsl",e.h,e.s,e.l):e.l||e.a?dG("lab",e.l,e.a,e.b):e.r||e.g||e.b?dG("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?pG(e.field):void 0!==e.value?xb(e.value):void 0;return null!=e.scale&&(t=function(e,t){const n=cG(e.scale);null!=e.range?t="lerp(_range(".concat(n,"), ").concat(+e.range,")"):(void 0!==t&&(t="_scale(".concat(n,", ").concat(t,")")),e.band&&(t=(t?t+"+":"")+"_bandwidth(".concat(n,")")+(1==+e.band?"":"*"+hG(e.band)),e.extra&&(t="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(t,")"))),null==t&&(t="0"));return t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t="pow(".concat(t,",").concat(hG(e.exponent),")")),null!=e.mult&&(t+="*".concat(hG(e.mult))),null!=e.offset&&(t+="+".concat(hG(e.offset))),e.round&&(t="round(".concat(t,")")),t}const dG=(e,t,n,r)=>"(".concat(e,"(").concat([t,n,r].map(fG).join(","),")+'')");function hG(e){return yv(e)?"("+fG(e)+")":e}function pG(e){return mG(yv(e)?e:{datum:e})}function mG(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):ov("Invalid field reference: "+xb(e));return e.signal||(r=db(r)?av(r).map(xb).join("]["):mG(r)),t+"["+r+"]"}function gG(e,t,n,r,i,o){const a={};(o=o||{}).encoders={$encode:a},e=function(e,t,n,r,i){const o={},a={};let s,u,l,c;for(u in u="lineBreak","text"!==t||null==i[u]||nG(u,e)||lG(o,u,i[u]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c=n===iG?i.group:n===rG?Jv({},i.mark,i[t]):null,c)l=nG(u,e)||("fill"===u||"stroke"===u)&&(nG("fill",e)||nG("stroke",e)),l||lG(o,u,c[u]);for(u in jv(r).forEach((t=>{const n=i.style&&i.style[t];for(const t in n)nG(t,e)||lG(o,t,n[t])})),e=Jv({},e),o)c=o[u],c.signal?(s=s||{})[u]=c:a[u]=c;return e.enter=Jv(a,e.enter),s&&(e.update=Jv(s,e.update)),e}(e,t,n,r,i.config);for(const n in e)a[n]=yG(e[n],t,o,i);return o}function yG(e,t,n,r){const i={},o={};for(const t in e)null!=e[t]&&(i[t]=vG((a=e[t],gv(a)?function(e){let t="";return e.forEach((e=>{const n=fG(e);t+=e.test?"(".concat(e.test,")?").concat(n,":"):n})),":"===_v(t)&&(t+="null"),t}(a):fG(a)),r,n,o));var a;return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function vG(e,t,n,r){const i=OH(e,t);return i.$fields.forEach((e=>r[e]=1)),Jv(n,i.$params),i.$expr}const bG=["value","update","init","react","bind"];function xG(e,t){ov(e+' for "outer" push: '+xb(t))}function wG(e,t){const n=e.name;if("outer"===e.push)t.signals[n]||xG("No prior signal definition",n),bG.forEach((t=>{void 0!==e[t]&&xG("Invalid property ",t)}));else{const r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function _G(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function kG(e,t,n,r){return new _G(e,t,n,r)}function EG(e,t){return kG("operator",e,t)}function SG(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function AG(e,t){return t?{$field:e,$name:t}:{$field:e}}const CG=AG("key");function DG(e,t){return{$compare:e,$order:t}}function MG(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const FG="scope",NG="view";function $G(e){return e&&e.signal}function TG(e){if($G(e))return!0;if(yv(e))for(const t in e)if(TG(e[t]))return!0;return!1}function OG(e,t){return null!=e?e:t}function zG(e){return e&&e.signal||e}const RG="timer";function PG(e,t){return(e.merge?LG:e.stream?BG:e.type?IG:ov("Invalid stream specification: "+xb(e)))(e,t)}function LG(e,t){const n=jG({merge:e.merge.map((e=>PG(e,t)))},e,t);return t.addStream(n).id}function BG(e,t){const n=jG({stream:PG(e.stream,t)},e,t);return t.addStream(n).id}function IG(e,t){let n;var r;e.type===RG?(n=t.event(RG,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((r=e.source)===FG?NG:r||NG,e.type);const i=jG({stream:n},e,t);return 1===Object.keys(i).length?n:t.addStream(i).id}function jG(e,t,n){let r=t.between;return r&&(2!==r.length&&ov('Stream "between" parameter must have 2 entries: '+xb(t)),e.between=[PG(r[0],n),PG(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){const r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===FG&&r.push("inScope(event.item)"),r.length&&(e.filter=OH("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}const UG={code:"_.$value",ast:{type:"Identifier",value:"value"}};function qG(e,t,n){const r=e.encode,i={target:n};let o=e.events,a=e.update,s=[];o||ov("Signal update missing events specification."),db(o)&&(o=HV(o,t.isSubscope()?FG:NG)),o=jv(o).filter((e=>e.signal||e.scale?(s.push(e),0):1)),s.length>1&&(s=[WG(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),null!=r&&(a&&ov("Signal encode and update are mutually exclusive."),a="encode(item(),"+xb(r)+")"),i.update=db(a)?OH(a,t):null!=a.expr?OH(a.expr,t):null!=a.value?a.value:null!=a.signal?{$expr:UG,$params:{$value:t.signalRef(a.signal)}}:ov("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach((e=>t.addUpdate(Jv(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):PG(e,t)}}(e,t),i))))}function WG(e){return{signal:"["+e.map((e=>e.scale?'scale("'+e.scale+'")':e.signal))+"]"}}const HG=e=>(t,n,r)=>kG(e,n,t||void 0,r),VG=HG("aggregate"),GG=HG("axisticks"),YG=HG("bound"),XG=HG("collect"),QG=HG("compare"),JG=HG("datajoin"),KG=HG("encode"),ZG=HG("expression"),eY=HG("facet"),tY=HG("field"),nY=HG("key"),rY=HG("legendentries"),iY=HG("load"),oY=HG("mark"),aY=HG("multiextent"),sY=HG("multivalues"),uY=HG("overlap"),lY=HG("params"),cY=HG("prefacet"),fY=HG("projection"),dY=HG("proxy"),hY=HG("relay"),pY=HG("render"),mY=HG("scale"),gY=HG("sieve"),yY=HG("sortitems"),vY=HG("viewlayout"),bY=HG("values");let xY=0;const wY={min:"min",max:"max",count:"sum"};function _Y(e,t){const n=t.getScale(e.name).params;let r;var i;for(r in n.domain=AY(e.domain,e,t),null!=e.range&&(n.range=OY(e,t,n)),null!=e.interpolate&&function(e,t){t.interpolate=kY(e.type||e),null!=e.gamma&&(t.interpolateGamma=kY(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=yv(i=e.nice)?{interval:kY(i.interval),step:kY(i.step)}:kY(i)),null!=e.bins&&(n.bins=function(e,t){return e.signal||gv(e)?EY(e,t):t.objectProperty(e)}(e.bins,t)),e)tb(n,r)||"name"===r||(n[r]=kY(e[r],t))}function kY(e,t){return yv(e)?e.signal?t.signalRef(e.signal):ov("Unsupported object: "+xb(e)):e}function EY(e,t){return e.signal?t.signalRef(e.signal):e.map((e=>kY(e,t)))}function SY(e){ov("Can not find data set: "+xb(e))}function AY(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(gv(e)?CY:e.fields?MY:DY)(e,t,n);null==t.domainMin&&null==t.domainMax||ov("No scale domain defined for domainMin/domainMax to override.")}function CY(e,t,n){return e.map((e=>kY(e,n)))}function DY(e,t,n){const r=n.getData(e.data);return r||SY(e.data),ZC(t.type)?r.valuesRef(n,e.field,NY(e.sort,!1)):rD(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function MY(e,t,n){const r=e.data,i=e.fields.reduce(((e,t)=>(t=db(t)?{data:r,field:t}:gv(t)||t.signal?function(e,t){const n="_:vega:_"+xY++,r=XG({});if(gv(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+xb(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,gY({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e)),[]);return(ZC(t.type)?FY:rD(t.type)?$Y:TY)(e,n,i)}function FY(e,t,n){const r=NY(e.sort,!0);let i,o;const a=n.map((e=>{const n=t.getData(e.data);return n||SY(e.data),n.countsRef(t,e.field,r)})),s={groupby:CG,pulse:a};r&&(i=r.op||"count",o=r.field?MG(i,r.field):"count",s.ops=[wY[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(VG(s));const u=t.add(XG({pulse:SG(i)}));return o=t.add(bY({field:CG,sort:t.sortRef(r),pulse:SG(u)})),SG(o)}function NY(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!wY[e.op]&&ov("Multiple domain scales can not be sorted using "+e.op):ov("No field provided for sort aggregate op: "+e.op):yv(e)?e.field="key":e={field:"key"}),e}function $Y(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||SY(e.data),n.domainRef(t,e.field)}));return SG(t.add(sY({values:r})))}function TY(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||SY(e.data),n.extentRef(t,e.field)}));return SG(t.add(aY({extents:r})))}function OY(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(db(i)){if(r&&tb(r,i))return OY(e=Jv({},e,{range:r[i]}),t,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=ZC(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ov("Unrecognized scale range value: "+xb(i))}else{if(i.scheme)return n.scheme=gv(i.scheme)?EY(i.scheme,t):kY(i.scheme,t),i.extent&&(n.schemeExtent=EY(i.extent,t)),void(i.count&&(n.schemeCount=kY(i.count,t)));if(i.step)return void(n.rangeStep=kY(i.step,t));if(ZC(e.type)&&!gv(i))return AY(i,e,t);gv(i)||ov("Unsupported range type: "+xb(i))}return i.map((e=>(gv(e)?EY:kY)(e,t)))}function zY(e,t,n){return gv(e)?e.map((e=>zY(e,t,n))):yv(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:ov("Unsupported parameter object: "+xb(e)):e}const RY="top",PY="left",LY="right",BY="bottom",IY="center",jY="index",UY="label",qY="perc",WY="value",HY="guide-label",VY="guide-title",GY="group-title",YY="group-subtitle",XY="symbol",QY="gradient",JY="discrete",KY="size",ZY=[KY,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],eX={name:1,style:1,interactive:1},tX={value:0},nX={value:1},rX="group",iX="rect",oX="rule",aX="text";function sX(e){return e.type=rX,e.interactive=e.interactive||!1,e}function uX(e,t){const n=(n,r)=>OG(e[n],OG(t[n],r));return n.isVertical=n=>"vertical"===OG(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>OG(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>OG(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>OG(e.columns,OG(t.columns,+n.isVertical(!0))),n}function lX(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function cX(e,t,n){return"item.anchor === '".concat("start","' ? ").concat(e," : item.anchor === '").concat("end","' ? ").concat(t," : ").concat(n)}const fX=cX(xb(PY),xb(LY),xb(IY));function dX(e,t){return t?e?yv(e)?Object.assign({},e,{offset:dX(e.offset,t)}):{value:e,offset:t}:t:e}function hX(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=tG(e.encode,t,eX)):e.interactive=!1,e}function pX(e,t,n,r){const i=uX(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=a,d=s):(l=[0,0],c=[1,0],f=s,d=a);const h={enter:u={opacity:tX,x:tX,y:tX,width:KV(f),height:KV(d)},update:Jv({},u,{opacity:nX,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:tX}};return eG(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),hX({type:iX,role:"legend-gradient",encode:h},r)}function mX(e,t,n,r,i){const o=uX(e,n),a=o.isVertical(),s=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";a?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:tX,fill:{scale:t,field:WY}};p[l]={signal:h+"datum."+qY,mult:u},p[c]=tX,p[f]={signal:h+"datum.perc2",mult:u},p[d]=KV(s);const m={enter:p,update:Jv({},p,{opacity:nX}),exit:{opacity:tX}};return eG(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),hX({type:iX,role:"legend-band",key:WY,from:i,encode:m},r)}const gX="datum.".concat(qY,'<=0?"').concat(PY,'":datum.').concat(qY,'>=1?"').concat(LY,'":"').concat(IY,'"'),yX="datum.".concat(qY,'<=0?"').concat(BY,'":datum.').concat(qY,'>=1?"').concat(RY,'":"').concat("middle",'"');function vX(e,t,n,r){const i=uX(e,t),o=i.isVertical(),a=KV(i.gradientThickness()),s=i.gradientLength();let u,l,c,f,d=i("labelOverlap"),h="";const p={enter:u={opacity:tX},update:l={opacity:nX,text:{field:UY}},exit:{opacity:tX}};return eG(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:OG(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=l.baseline={signal:yX},c="y",f="x",h="1-"):(u.align=l.align={signal:gX},u.baseline={value:"top"},c="x",f="y"),u[c]=l[c]={signal:h+"datum."+qY,mult:s},u[f]=l[f]=a,a.offset=OG(e.labelOffset,t.gradientLabelOffset)||0,d=d?{separation:i("labelSeparation"),method:d,order:"datum.index"}:void 0,hX({type:aX,role:aG,style:HY,key:WY,from:r,encode:p,overlap:d},n)}function bX(e,t,n,r,i){const o=uX(e,t),a=n.entries,s=!(!a||!a.interactive),u=a?a.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d="(".concat(i,") ? datum.").concat("offset"," : datum.").concat(KY),h=l?KV(l):{field:KY},p="datum.".concat(jY),m="max(1, ".concat(i,")");let g,y,v,b,x;h.mult=.5,g={enter:y={opacity:tX,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:nX,x:y.x,y:y.y},exit:{opacity:tX}};let w=null,_=null;e.fill||(w=t.symbolBaseFillColor,_=t.symbolBaseStrokeColor),eG(g,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",_),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),ZY.forEach((t=>{e[t]&&(v[t]=y[t]={scale:e[t],field:WY})}));const k=hX({type:"symbol",role:"legend-symbol",key:WY,from:f,clip:!!l||void 0,encode:g},n.symbols),E=KV(c);E.offset=o("labelOffset"),g={enter:y={opacity:tX,x:{signal:d,offset:E},y:h},update:v={opacity:nX,text:{field:UY},x:y.x,y:y.y},exit:{opacity:tX}},eG(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const S=hX({type:aX,role:aG,style:HY,key:WY,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:tX,height:l?KV(l):tX,opacity:tX},exit:{opacity:tX},update:v={opacity:nX,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b="ceil(item.mark.items.length / ".concat(m,")"),v.row.signal="".concat(p,"%").concat(b),v.column.signal="floor(".concat(p," / ").concat(b,")"),x={field:["row",p]}):(v.row.signal="floor(".concat(p," / ").concat(m,")"),v.column.signal="".concat(p," % ").concat(m),x={field:p}),v.column.signal="(".concat(i,")?").concat(v.column.signal,":").concat(p),sX({role:oG,from:r={facet:{data:r,name:"value",groupby:jY}},encode:tG(g,a,eX),marks:[k,S],name:u,interactive:s,sort:x})}const xX='item.orient === "left"',wX='item.orient === "right"',_X="(".concat(xX," || ").concat(wX,")"),kX="datum.vgrad && ".concat(_X),EX=cX('"top"','"bottom"','"middle"'),SX=cX('"right"','"left"','"center"'),AX="datum.vgrad && ".concat(wX," ? (").concat(SX,") : (").concat(_X," && !(datum.vgrad && ").concat(xX,')) ? "left" : ').concat(fX),CX="item._anchor || (".concat(_X,' ? "middle" : "start")'),DX="".concat(kX," ? (").concat(xX," ? -90 : 90) : 0"),MX="".concat(_X," ? (datum.vgrad ? (").concat(wX,' ? "bottom" : "top") : ').concat(EX,') : "top"');function FX(e,t){let n;return yv(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+NX(e.path)+")":e.sphere&&(n="geoShape("+NX(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function NX(e){return yv(e)&&e.signal?e.signal:xb(e)}function $X(e){const t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===rX?oG:t||rG:t}function TX(e){return{marktype:e.type,name:e.name||void 0,role:e.role||$X(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function OX(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function zX(e,t){const n=$k(e.type);n||ov("Unrecognized transform type: "+xb(e.type));const r=kG(n.type.toLowerCase(),null,RX(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function RX(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const i=e.params[o];r[i.name]=PX(i,t,n)}return r}function PX(e,t,n){const r=e.type,i=t[e.name];return"index"===r?function(e,t,n){db(t.from)||ov('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function(e,t,n){const r=t[e.name];return e.array?(gv(r)||ov("Expected an array of sub-parameters. Instead: "+xb(r)),r.map((t=>BX(e,t,n)))):BX(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!$G(i)?i.map((t=>LX(e,t,n))):LX(e,i,n):void(e.required&&ov("Missing required "+xb(t.type)+" parameter: "+xb(e.name)))}function LX(e,t,n){const r=e.type;if($G(t))return qX(r)?ov("Expression references can not be signals."):WX(r)?n.fieldRef(t):HX(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||WX(r);return i&&IX(t)?n.exprRef(t.expr,t.as):i&&jX(t)?AG(t.field,t.as):qX(r)?OH(t,n):UX(r)?SG(n.getData(t).values):WX(r)?AG(t):HX(r)?n.compareRef(t):t}}function BX(e,t,n){const r=e.params.length;let i;for(let n=0;n<r;++n){i=e.params[n];for(const e in i.key)if(i.key[e]!==t[e]){i=null;break}if(i)break}i||ov("Unsupported parameter: "+xb(t));const o=Jv(RX(i,t,n),i.key);return SG(n.add(lY(o)))}const IX=e=>e&&e.expr,jX=e=>e&&e.field,UX=e=>"data"===e,qX=e=>"expr"===e,WX=e=>"field"===e,HX=e=>"compare"===e;function VX(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:SG(t.getData(e.data).output)}function GX(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function YX(e){return db(e)?e:null}function XX(e,t,n){const r=MG(n.op,n.field);let i;if(t.ops){for(let e=0,n=t.as.length;e<n;++e)if(t.as[e]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function QX(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),u=function(e){return yv(e)?("descending"===e.order?"-":"+")+MG(e.op,e.field):""}(o);let l,c,f=YX(i);if(null!=f&&(e=t.scope,f+=u?"|"+u:"",l=s[f]),!l){const n=o?{field:CG,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:SG(t.output)};u&&(n.sort=e.sortRef(o)),c=e.add(kG(r,void 0,n)),a&&(t.index[i]=c),l=SG(c),null!=f&&(s[f]=l)}return l}function JX(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,u=t.add(EG()),l=OH("if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map((e=>null==e?"null":e)).join(",")+"),0)",t);u.update=l.$expr,u.params=l.$params}function KX(e,t){const n=$X(e),r=e.type===rX,i=e.from&&e.from.facet,o=e.overlap;let a,s,u,l,c,f,d,h=e.layout||n===oG||n===iG;const p=n===rG||h||i,m=function(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||ov("Only group marks can be faceted."),null!=r.field?a=s=VX(r,n):(e.data?s=SG(n.getData(e.data).aggregate):(o=zX(Jv({type:"aggregate",groupby:jv(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=VX(r,n),a=s=SG(n.add(o))),i=n.keyRef(r.groupby,!0))):a=SG(n.add(XG(null,[{}]))),a||(a=VX(e,n)),{key:i,pulse:a,parent:s}}(e.from,r,t);s=t.add(JG({key:m.key||(e.key?AG(e.key):void 0),pulse:m.pulse,clean:!r}));const g=SG(s);s=u=t.add(XG({pulse:g})),s=t.add(oY({markdef:TX(e),interactive:OX(e.interactive,t),clip:FX(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:SG(s)}));const y=SG(s);s=l=t.add(KG(gG(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),s.params.parent=t.encode(),e.transform&&e.transform.forEach((e=>{const n=zX(e,t),r=n.metadata;(r.generates||r.changes)&&ov("Mark transforms should not generate new data."),r.nomod||(l.params.mod=!0),n.params.pulse=SG(s),t.add(s=n)})),e.sort&&(s=t.add(yY({sort:t.compareRef(e.sort),pulse:SG(s)})));const v=SG(s);(i||h)&&(h=t.add(vY({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),f=SG(h));const b=t.add(YG({mark:y,pulse:f||v}));d=SG(b),r&&(p&&(a=t.operators,a.pop(),h&&a.pop()),t.pushState(v,f||d,g),i?function(e,t,n){const r=e.from.facet,i=r.name,o=VX(r,t);let a;r.name||ov("Facet must have a name: "+xb(r)),r.data||ov("Facet must reference a data set: "+xb(r)),r.field?a=t.add(cY({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(eY({key:t.keyRef(r.groupby),group:SG(t.proxy(n.parent)),pulse:o})):ov("Facet must specify groupby or field: "+xb(r));const s=t.fork(),u=s.add(XG()),l=s.add(gY({pulse:SG(u)}));s.addData(i,new GX(s,u,u,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}(e,t,m):p?function(e,t,n){const r=t.add(cY({pulse:n.pulse})),i=t.fork();i.add(gY()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}(e,t,m):t.parse(e),t.popState(),p&&(h&&a.push(h),a.push(b))),o&&(d=function(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:$G(o)?n.signalRef(o.signal):o,method:$G(r)?n.signalRef(r.signal):r,pulse:t};e.order&&(a.sort=n.compareRef({field:e.order}));if(i){const e=i.tolerance;a.boundTolerance=$G(e)?n.signalRef(e.signal):+e,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return SG(n.add(uY(a)))}(o,d,t));const x=t.add(pY({pulse:d})),w=t.add(gY({pulse:SG(x)},void 0,t.parent()));null!=e.name&&(c=e.name,t.addData(c,new GX(t,u,x,w)),e.on&&e.on.forEach((e=>{(e.insert||e.remove||e.toggle)&&ov("Marks only support modify triggers."),JX(e,t,c)})))}function ZX(e,t){const n=t.config.legend,r=e.encode||{},i=uX(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,u=o.style,l={};let c,f,d,h=0;ZY.forEach((t=>e[t]?(l[t]=e[t],h=h||e[t]):0)),h||ov("Missing valid scale for legend.");const p=function(e,t){let n=e.type||XY;e.type||1!==function(e){return ZY.reduce(((t,n)=>t+(e[n]?1:0)),0)}(e)||!e.fill&&!e.stroke||(n=KC(t)?QY:eD(t)?JY:XY);return n!==QY?n:eD(t)?JY:QY}(e,t.scaleType(h)),m={title:null!=e.title,scales:l,type:p,vgrad:"symbol"!==p&&i.isVertical()},g=SG(t.add(XG(null,[m]))),y=SG(t.add(rY(f={type:p,scale:t.scaleRef(h),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===QY?(d=[pX(e,h,n,r.gradient),vX(e,n,r.labels,y)],f.count=f.count||t.signalRef("max(2,2*floor((".concat(zG(i.gradientLength()),")/100))"))):p===JY?d=[mX(e,h,n,r.gradient,y),vX(e,n,r.labels,y)]:(c=function(e,t){const n=uX(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),d=[bX(e,n,r,y,zG(c.columns))],f.size=function(e,t,n){const r=zG(tQ("size",e,n)),i=zG(tQ("strokeWidth",e,n)),o=zG(function(e,t,n){return lX("fontSize",e)||function(e,t,n){const r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,HY));return OH("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(o,")"),t)}(e,t,d[0].marks)),d=[sX({role:"legend-entry",from:g,encode:{enter:{x:{value:0},y:{value:0}}},marks:d,layout:c,interactive:s})],m.title&&d.push(function(e,t,n,r){const i=uX(e,t),o={enter:{opacity:tX},update:{opacity:nX,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tX}};return eG(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:CX},angle:{signal:DX},align:{signal:AX},baseline:{signal:MX},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),hX({type:aX,role:"legend-title",style:VY,from:r,encode:o},n)}(e,n,r.title,g)),KX(sX({role:"legend",from:g,encode:tG(eQ(i,e,n),o,eX),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:u}),t)}function eQ(e,t,n){const r={enter:{},update:{}};return eG(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function tQ(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):lX(e,n[0].encode)}GX.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=SG(t[s-1]),e.add(t[s]),"aggregate"===t[s].type&&(a=t[s]);return new GX(e,o,i,r,a)},GX.prototype={countsRef:function(e,t,n){const r=this,i=r.counts||(r.counts={}),o=YX(t);let a,s,u;return null!=o&&(e=r.scope,a=i[o]),a?n&&n.field&&XX(e,a.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:SG(r.output)},n&&n.field&&XX(e,u,n),s=e.add(VG(u)),a=e.add(XG({pulse:SG(s)})),a={agg:s,ref:SG(a)},null!=o&&(i[o]=a)),a.ref},tuplesRef:function(){return SG(this.values)},extentRef:function(e,t){return QX(e,this,"extent","extent",t,!1)},domainRef:function(e,t){return QX(e,this,"domain","values",t,!1)},valuesRef:function(e,t,n){return QX(e,this,"vals","values",t,n||!0)},lookupRef:function(e,t){return QX(e,this,"lookup","tupleindex",t,!1)},indataRef:function(e,t){return QX(e,this,"indata","tupleindex",t,!0,!0)}};const nQ='item.orient==="'.concat(PY,'"?-90:item.orient==="').concat(LY,'"?90:0');function rQ(e,t){const n=uX(e=db(e)?{text:e}:e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,u=[],l=SG(t.add(XG(null,[{}])));return u.push(function(e,t,n,r){const i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return eG(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hX({type:aX,role:sG,style:GY,from:r,encode:a},n)}(e,n,function(e){const t=e.encode;return t&&t.title||Jv({name:e.name,interactive:e.interactive,style:e.style},t)}(e),l)),e.subtitle&&u.push(function(e,t,n,r){const i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return eG(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hX({type:aX,role:uG,style:YY,from:r,encode:a},n)}(e,n,r.subtitle,l)),KX(sX({role:"title",from:l,encode:iQ(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function iQ(e,t){const n={enter:{},update:{}};return eG(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:fX},angle:{signal:nQ},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),tG(n,t,eX)}function oQ(e,t){const n=[];e.transform&&e.transform.forEach((e=>{n.push(zX(e,t))})),e.on&&e.on.forEach((n=>{JX(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){const r=[];let i,o,a,s,u,l=null,c=!1,f=!1;e.values?$G(e.values)||TG(e.format)?(r.push(sQ(t,e)),r.push(l=aQ())):r.push(l=aQ({$ingest:e.values,$format:e.format})):e.url?TG(e.url)||TG(e.format)?(r.push(sQ(t,e)),r.push(l=aQ())):r.push(l=aQ({$request:e.url,$format:e.format})):e.source&&(l=i=jv(e.source).map((e=>SG(t.getData(e).output))),r.push(null));for(o=0,a=n.length;o<a;++o)s=n[o],u=s.metadata,l||u.source||r.push(l=aQ()),r.push(s),u.generates&&(f=!0),u.modifies&&!f&&(c=!0),u.source?l=s:u.changes&&(l=null);i&&(a=i.length-1,r[0]=hY({derive:c,pulse:a?i:i[0]}),(c||a)&&r.splice(1,0,aQ()));l||r.push(aQ());return r.push(gY({})),r}(e,t,n))}function aQ(e){const t=XG({},e);return t.metadata={source:!0},t}function sQ(e,t){return iY({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const uQ=e=>e===BY||e===RY,lQ=(e,t,n)=>$G(e)?mQ(e.signal,t,n):e===PY||e===RY?t:n,cQ=(e,t,n)=>$G(e)?hQ(e.signal,t,n):uQ(e)?t:n,fQ=(e,t,n)=>$G(e)?pQ(e.signal,t,n):uQ(e)?n:t,dQ=(e,t,n)=>$G(e)?gQ(e.signal,t,n):e===RY?{value:t}:{value:n},hQ=(e,t,n)=>vQ("".concat(e," === '").concat(RY,"' || ").concat(e," === '").concat(BY,"'"),t,n),pQ=(e,t,n)=>vQ("".concat(e," !== '").concat(RY,"' && ").concat(e," !== '").concat(BY,"'"),t,n),mQ=(e,t,n)=>xQ("".concat(e," === '").concat(PY,"' || ").concat(e," === '").concat(RY,"'"),t,n),gQ=(e,t,n)=>xQ("".concat(e," === '").concat(RY,"'"),t,n),yQ=(e,t,n)=>xQ("".concat(e," === '").concat(LY,"'"),t,n),vQ=(e,t,n)=>(t=null!=t?KV(t):t,n=null!=n?KV(n):n,bQ(t)&&bQ(n)?(t=t?t.signal||xb(t.value):null,n=n?n.signal||xb(n.value):null,{signal:"".concat(e," ? (").concat(t,") : (").concat(n,")")}):[Jv({test:e},t)].concat(n||[])),bQ=e=>null==e||1===Object.keys(e).length,xQ=(e,t,n)=>({signal:"".concat(e," ? (").concat(wQ(t),") : (").concat(wQ(n),")")}),wQ=e=>$G(e)?e.signal:null==e?null:xb(e),_Q=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function kQ(e,t,n,r){let i;if(t&&tb(t,e))return t[e];if(tb(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r["guide-title"][i]}if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r["guide-label"][i]}return null}function EQ(e){const t={};for(const n of e)if(n)for(const e in n)t[e]=1;return Object.keys(t)}function SQ(e,t){return{scale:e.scale,range:t}}function AQ(e,t,n,r,i){const o=uX(e,t),a=e.orient,s=e.gridScale,u=lQ(a,1,-1),l=function(e,t){if(1===t);else if(yv(e)){let n=e=Jv({},e);for(;null!=n.mult;){if(!yv(n.mult))return n.mult=$G(t)?{signal:"(".concat(n.mult,") * (").concat(t.signal,")")}:n.mult*t,e;n=n.mult=Jv({},n.mult)}n.mult=t}else e=$G(t)?{signal:"(".concat(t.signal,") * (").concat(e||0,")")}:t*(e||0);return e}(e.offset,u);let c,f,d;const h={enter:c={opacity:tX},update:d={opacity:nX},exit:f={opacity:tX}};eG(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:WY,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=cQ(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:u,offset:l}:{value:0,offset:l},y=s?{scale:s,range:1,mult:u,offset:l}:Jv(m,{mult:u,offset:l});return c.x=d.x=cQ(a,p,g),c.y=d.y=fQ(a,p,g),c.x2=d.x2=fQ(a,y),c.y2=d.y2=cQ(a,y),f.x=cQ(a,p),f.y=fQ(a,p),hX({type:oX,role:"axis-grid",key:WY,from:r,encode:h},n)}function CQ(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function DQ(e,t,n,r,i,o){const a=uX(e,t),s=e.orient,u=e.scale,l=lQ(s,-1,1),c=zG(a("labelFlush")),f=zG(a("labelFlushOffset")),d=a("labelAlign"),h=a("labelBaseline");let p,m=0===c||!!c;const g=KV(i);g.mult=l,g.offset=KV(a("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:WY,band:.5,offset:dX(o.offset,a("labelOffset"))},v=cQ(s,m?CQ(u,c,'"left"','"right"','"center"'):{value:"center"},((e,t,n)=>$G(e)?yQ(e.signal,t,n):e===LY?{value:t}:{value:n})(s,"left","right")),b=cQ(s,dQ(s,"bottom","top"),m?CQ(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=CQ(u,c,"-(".concat(f,")"),f,0);m=m&&f;const w={opacity:tX,x:cQ(s,y,g),y:fQ(s,y,g)},_={enter:w,update:p={opacity:nX,text:{field:UY},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:tX,x:w.x,y:w.y}};eG(_,{dx:!d&&m?cQ(s,x):null,dy:!h&&m?fQ(s,x):null}),eG(_,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:h});const k=a("labelBound");let E=a("labelOverlap");return E=E||k?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:k?{scale:u,orient:s,tolerance:k}:null}:void 0,p.align!==v&&(p.align=_Q(p.align,v)),p.baseline!==b&&(p.baseline=_Q(p.baseline,b)),hX({type:aX,role:"axis-label",style:HY,key:WY,from:r,encode:_,overlap:E},n)}function MQ(e,t,n,r){const i=uX(e,t),o=e.orient,a=lQ(o,-1,1);let s,u;const l={enter:s={opacity:tX,anchor:KV(i("titleAnchor",null)),align:{signal:fX}},update:u=Jv({},s,{opacity:nX,text:KV(e.title)}),exit:{opacity:tX}},c={signal:'lerp(range("'.concat(e.scale,'"), ').concat(cX(0,1,.5),")")};return u.x=cQ(o,c),u.y=fQ(o,c),s.angle=cQ(o,tX,((e,t)=>0===t?0:$G(e)?{signal:"(".concat(e.signal,") * ").concat(t)}:{value:e*t})(a,90)),s.baseline=cQ(o,dQ(o,BY,RY),{value:BY}),u.angle=s.angle,u.baseline=s.baseline,eG(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),function(e,t,n,r){const i=(e,t)=>null!=e?(n.update[t]=_Q(KV(e),n.update[t]),!1):!nG(t,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?KV(a):cQ(t,KV(a),KV(o))}(i,o,l,n),l.update.align=_Q(l.update.align,s.align),l.update.angle=_Q(l.update.angle,s.angle),l.update.baseline=_Q(l.update.baseline,s.baseline),hX({type:aX,role:"axis-title",style:VY,from:r,encode:l},n)}function FQ(e,t){const n=function(e,t){var n,r,i,o,a,s,u,l,c=t.config,f=c.style,d=c.axis,h="band"===t.scaleType(e.scale)&&c.axisBand,p=e.orient;if($G(p)){const e=EQ([c.axisX,c.axisY]),t=EQ([c.axisTop,c.axisBottom,c.axisLeft,c.axisRight]);for(i of(n={},e))n[i]=cQ(p,kQ(i,c.axisX,d,f),kQ(i,c.axisY,d,f));for(i of(r={},t))r[i]=(o=p.signal,a=kQ(i,c.axisTop,d,f),s=kQ(i,c.axisBottom,d,f),u=kQ(i,c.axisLeft,d,f),l=kQ(i,c.axisRight,d,f),{signal:(null!=u?"".concat(o," === '").concat(PY,"' ? (").concat(wQ(u),") : "):"")+(null!=s?"".concat(o," === '").concat(BY,"' ? (").concat(wQ(s),") : "):"")+(null!=l?"".concat(o," === '").concat(LY,"' ? (").concat(wQ(l),") : "):"")+(null!=a?"".concat(o," === '").concat(RY,"' ? (").concat(wQ(a),") : "):"")+"(null)"})}else n=p===RY||p===BY?c.axisX:c.axisY,r=c["axis"+p[0].toUpperCase()+p.slice(1)];return n||r||h?Jv({},d,n,r,h):d}(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,u=uX(e,n),l=function(e){const t=e("tickBand");let n,r,i=e("tickOffset");return t?t.signal?(n={signal:"(".concat(t.signal,") === 'extent' ? 1 : 0.5")},r={signal:"(".concat(t.signal,") === 'extent'")},yv(i)||(i={signal:"(".concat(t.signal,") === 'extent' ? 0 : ").concat(i)})):"extent"===t?(n=1,r=!0,i=0):(n=.5,r=!1):(n=e("bandPosition"),r=e("tickExtra")),{extra:r,band:n,offset:i}}(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:null!=e.title},f=SG(t.add(XG({},[c]))),d=SG(t.add(GG({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(AQ(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(function(e,t,n,r,i,o){const a=uX(e,t),s=e.orient,u=lQ(s,-1,1);let l,c,f;const d={enter:l={opacity:tX},update:f={opacity:nX},exit:c={opacity:tX}};eG(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=KV(i);h.mult=u;const p={scale:e.scale,field:WY,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=cQ(s,tX,p),f.y2=l.y2=cQ(s,h),c.x=cQ(s,p),f.x=l.x=fQ(s,tX,p),f.x2=l.x2=fQ(s,h),c.y=fQ(s,p),hX({type:oX,role:"axis-tick",key:WY,from:r,encode:d},n)}(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(DQ(e,n,r.labels,d,p,l))),c.domain&&h.push(function(e,t,n,r){const i=uX(e,t),o=e.orient;let a,s;const u={enter:a={opacity:tX},update:s={opacity:nX},exit:{opacity:tX}};eG(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=SQ(e,0),c=SQ(e,1);return a.x=s.x=cQ(o,l,tX),a.x2=s.x2=cQ(o,c),a.y=s.y=fQ(o,l,tX),a.y2=s.y2=fQ(o,c),hX({type:oX,role:"axis-domain",from:r,encode:u},n)}(e,n,r.domain,f)),c.title&&h.push(MQ(e,n,r.title,f)),KX(sX({role:"axis",from:f,encode:tG(NQ(u,e),i,eX),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:a,style:s}),t)}function NQ(e,t){const n={enter:{},update:{}};return eG(n,{orient:e("orient"),offset:e("offset")||0,position:OG(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:'abs(span(range("'.concat(t.scale,'")))')},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function $Q(e,t,n){const r=jv(e.signals),i=jv(e.scales);return n||r.forEach((e=>wG(e,t))),jv(e.projections).forEach((e=>function(e,t){const n=t.config.projection||{},r={};for(const n in e)"name"!==n&&(r[n]=zY(e[n],n,t));for(const e in n)null==r[e]&&(r[e]=zY(n[e],e,t));t.addProjection(e.name,r)}(e,t))),i.forEach((e=>function(e,t){const n=e.type||"linear";QC(n)||ov("Unrecognized scale type: "+xb(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t))),jv(e.data).forEach((e=>oQ(e,t))),i.forEach((e=>_Y(e,t))),(n||r).forEach((e=>function(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?ov("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=OH(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((e=>qG(e,t,n.id)))}(e,t))),jv(e.axes).forEach((e=>FQ(e,t))),jv(e.marks).forEach((e=>KX(e,t))),jv(e.legends).forEach((e=>ZX(e,t))),e.title&&rQ(e.title,t),t.parseLambdas(),t}function TQ(e,t){const n=t.config,r=SG(t.root=t.add(EG())),i=function(e,t){const n=n=>OG(e[n],t[n]),r=[OQ("background",n("background")),OQ("autosize",XV(n("autosize"))),OQ("padding",JV(n("padding"))),OQ("width",n("width")||0),OQ("height",n("height")||0)],i=r.reduce(((e,t)=>(e[t.name]=t,e)),{}),o={};return jv(e.signals).forEach((e=>{tb(i,e.name)?e=Jv(i[e.name],e):r.push(e),o[e.name]=e})),jv(t.signals).forEach((e=>{tb(o,e.name)||tb(i,e.name)||r.push(e)})),r}(e,n);i.forEach((e=>wG(e,t))),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(XG()),a=t.add(KG(gG((e=>tG({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e))(e.encode),rX,iG,e.style,t,{pulse:SG(o)}))),s=t.add(vY({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:SG(a)}));t.operators.pop(),t.pushState(SG(a),SG(s),null),$Q(e,t,i),t.operators.push(s);let u=t.add(YG({mark:r,pulse:SG(s)}));return u=t.add(pY({pulse:SG(u)})),u=t.add(gY({pulse:SG(u)})),t.addData("root",new GX(t,o,o,u)),t}function OQ(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function zQ(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function RQ(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function PQ(e){return(gv(e)?LQ:BQ)(e)}function LQ(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const t=e[r];n+=(r>0?",":"")+(yv(t)?t.signal||PQ(t):xb(t))}return n+"]"}function BQ(e){let t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+xb(t)+":"+(yv(n)?n.signal||PQ(n):xb(n));return r+"}"}function IQ(e,t,n){return yv(e)||ov("Input Vega specification must be an object."),TQ(e,new zQ(t=bv(function(){const e="sans-serif",t="#4c78a8",n="#000",r="#888",i="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:i}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:i,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:i,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}zQ.prototype=RQ.prototype={parse:function(e){return $Q(e,this)},fork:function(){return new RQ(this)},isSubscope:function(){return this._subid>0},toRuntime:function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function(){return(this._subid?this._subid+":":0)+this._id++},add:function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((t=>{t.$ref=e.id})),e.refs=null),e},proxy:function(e){const t=e instanceof _G?SG(e):e;return this.add(dY({value:t}))},addStream:function(e){return this.streams.push(e),e.id=this.id(),e},addUpdate:function(e){return this.updates.push(e),e},finish:function(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){let r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState:function(e,t,n){this._encode.push(SG(this.add(gY({pulse:e})))),this._parent.push(t),this._lookup.push(n?SG(this.proxy(n)):null),this._markpath.push(-1)},popState:function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function(){return _v(this._parent)},encode:function(){return _v(this._encode)},lookup:function(){return _v(this._lookup)},markpath:function(){const e=this._markpath;return++e[e.length-1]},fieldRef:function(e,t){if(db(e))return AG(e,t);e.signal||ov("Unsupported field reference: "+xb(e));const n=e.signal;let r=this.field[n];if(!r){const e={name:this.signalRef(n)};t&&(e.as=t),this.field[n]=r=SG(this.add(tY(e)))}return r},compareRef:function(e){let t=!1;const n=e=>$G(e)?(t=!0,this.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(t=!0,this.exprRef(e.expr)):e,r=jv(e.field).map(n),i=jv(e.order).map(n);return t?SG(this.add(QG({fields:r,orders:i}))):DG(r,i)},keyRef:function(e,t){let n=!1;const r=this.signals;return e=jv(e).map((e=>$G(e)?(n=!0,SG(r[e.signal])):e)),n?SG(this.add(nY({fields:e,flat:t}))):function(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef:function(e){if(!e)return e;const t=MG(e.op,e.field),n=e.order||"ascending";return n.signal?SG(this.add(QG({fields:t,orders:this.signalRef(n.signal)}))):DG(t,n)},event:function(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal:function(e){return tb(this.signals,e)},addSignal:function(e,t){this.hasOwnSignal(e)&&ov("Duplicate signal name: "+xb(e));const n=t instanceof _G?t:this.add(EG(t));return this.signals[e]=n},getSignal:function(e){return this.signals[e]||ov("Unrecognized signal name: "+xb(e)),this.signals[e]},signalRef:function(e){return this.signals[e]?SG(this.signals[e]):(tb(this.lambdas,e)||(this.lambdas[e]=this.add(EG(null))),SG(this.lambdas[e]))},parseLambdas:function(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const n=e[t],r=OH(n,this),i=this.lambdas[n];i.params=r.$params,i.update=r.$expr}},property:function(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty:function(e){return e&&yv(e)?this.signalRef(e.signal||PQ(e)):e},exprRef:function(e,t){const n={expr:OH(e,this)};return t&&(n.expr.$name=t),SG(this.add(ZG(n)))},addBinding:function(e,t){this.bindings||ov("Nested signals do not support binding: "+xb(e)),this.bindings.push(Jv({signal:e},t))},addScaleProj:function(e,t){tb(this.scales,e)&&ov("Duplicate scale or projection name: "+xb(e)),this.scales[e]=this.add(t)},addScale:function(e,t){this.addScaleProj(e,mY(t))},addProjection:function(e,t){this.addScaleProj(e,fY(t))},getScale:function(e){return this.scales[e]||ov("Unrecognized scale name: "+xb(e)),this.scales[e]},scaleRef:function(e){return SG(this.getScale(e))},scaleType:function(e){return this.getScale(e).params.type},projectionRef:function(e){return this.scaleRef(e)},projectionType:function(e){return this.scaleType(e)},addData:function(e,t){return tb(this.data,e)&&ov("Duplicate data set name: "+xb(e)),this.data[e]=t},getData:function(e){return this.data[e]||ov("Undefined data set name: "+xb(e)),this.data[e]},addDataPipeline:function(e,t){return tb(this.data,e)&&ov("Duplicate data set name: "+xb(e)),this.addData(e,GX.fromEntries(this,t))}},t(Jy,"tupleid",(function(){return J_})),t(Jy,"transforms",(function(){return Nk})),t(Jy,"transform",(function(){return Tk})),t(Jy,"isTuple",(function(){return Q_})),t(Jy,"ingest",(function(){return Z_})),t(Jy,"definition",(function(){return $k})),t(Jy,"changeset",(function(){return ok})),t(Jy,"Transform",(function(){return Fk})),t(Jy,"Pulse",(function(){return bk})),t(Jy,"Parameters",(function(){return sk})),t(Jy,"Operator",(function(){return ck})),t(Jy,"MultiPulse",(function(){return kk})),t(Jy,"EventStream",(function(){return hk})),t(Jy,"Dataflow",(function(){return Dk})),t(Jy,"scheme",(function(){return hD})),t(Jy,"scale",(function(){return XC})),t(Jy,"quantizeInterpolator",(function(){return sD})),t(Jy,"interpolateRange",(function(){return oD})),t(Jy,"interpolateColors",(function(){return aD})),t(Jy,"interpolate",(function(){return lD})),t(Jy,"projection",(function(){return uB})),t(Jy,"View",(function(){return OV})),t(Jy,"timeFormatLocale",(function(){return B_})),t(Jy,"resetDefaultLocale",(function(){return q_})),t(Jy,"locale",(function(){return j_})),t(Jy,"formatLocale",(function(){return O_})),t(Jy,"defaultLocale",(function(){return U_})),t(Jy,"expressionFunction",(function(){return TH})),t(Jy,"parse",(function(){return IQ})),t(Jy,"runtimeContext",(function(){return qH})),t(Jy,"parseExpression",(function(){return LW})),t(Jy,"codegenExpression",(function(){return jW})),t(Jy,"parseSelector",(function(){return HV}));var jQ="5.20.2";Jv(Nk,Ok,nA,wO,KO,IB,eU,II,wU,AU,KU,fq);const UQ=jQ;t(Jy,"version",(function(){return UQ}));var qQ,WQ={},HQ=(qQ=function(e,t){return(qQ=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}qQ(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),VQ=Object.prototype.hasOwnProperty;
/*!
  * https://github.com/Starcounter-Jack/JSON-Patch
  * (c) 2017 Joachim Wester
  * MIT license
  */function GQ(e,t){return VQ.call(e,t)}function YQ(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)GQ(e,r)&&t.push(r);return t}function XQ(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function QQ(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function JQ(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function KQ(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function ZQ(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(ZQ(e[t]))return!0}else if("object"==typeof e){var r=YQ(e),i=r.length;for(t=0;t<i;t++)if(ZQ(e[r[t]]))return!0}return!1}function eJ(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}t(WQ,"hasOwnProperty",(function(){return GQ})),t(WQ,"_objectKeys",(function(){return YQ})),t(WQ,"_deepClone",(function(){return XQ})),t(WQ,"isInteger",(function(){return QQ})),t(WQ,"escapePathComponent",(function(){return JQ})),t(WQ,"unescapePathComponent",(function(){return KQ})),t(WQ,"hasUndefined",(function(){return ZQ}));var tJ=function(e){function t(t,n,r,i,o){var a=this.constructor,s=e.call(this,eJ(t,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=eJ(t,{name:n,index:r,operation:i,tree:o}),s}return HQ(t,e),t}(Error);t(WQ,"PatchError",(function(){return tJ}));var nJ=WQ.PatchError,rJ={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=oJ(n,this.path);r&&(r=WQ._deepClone(r));var i=aJ(n,{op:"remove",path:this.from}).removed;return aJ(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=oJ(n,this.from);return aJ(n,{op:"add",path:this.path,value:WQ._deepClone(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:lJ(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},iJ={add:function(e,t,n){return WQ.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:rJ.move,copy:rJ.copy,test:rJ.test,_get:rJ._get};function oJ(e,t){if(""==t)return e;var n={op:"_get",path:t};return aJ(e,n),n.value}function aJ(e,t,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):uJ(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=oJ(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=lJ(e,t.value),!1===a.test)throw new nJ("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new nJ("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}r||(e=WQ._deepClone(e));var s=(t.path||"").split("/"),u=e,l=1,c=s.length,f=void 0,d=void 0,h=void 0;for(h="function"==typeof n?n:uJ;;){if(d=s[l],i&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===u[d]?f=s.slice(0,l).join("/"):l==c-1&&(f=t.path),void 0!==f&&h(t,0,e,f)),l++,Array.isArray(u)){if("-"===d)d=u.length;else{if(n&&!WQ.isInteger(d))throw new nJ("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);WQ.isInteger(d)&&(d=~~d)}if(l>=c){if(n&&"add"===t.op&&d>u.length)throw new nJ("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(a=iJ[t.op].call(t,u,d,e)).test)throw new nJ("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(d&&-1!=d.indexOf("~")&&(d=WQ.unescapePathComponent(d)),l>=c){if(!1===(a=rJ[t.op].call(t,u,d,e)).test)throw new nJ("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}u=u[d]}}function sJ(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new nJ("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=WQ._deepClone(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=aJ(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function uJ(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new nJ("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!rJ[e.op])throw new nJ("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new nJ("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new nJ('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new nJ("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new nJ("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&WQ.hasUndefined(e.value))throw new nJ("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new nJ("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new nJ("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=function(e,t,n){try{if(!Array.isArray(e))throw new nJ("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)sJ(WQ._deepClone(t),WQ._deepClone(e),n||!0);else{n=n||uJ;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof nJ)return e;throw e}}([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new nJ("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function lJ(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!lJ(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!=n--;)if(!lJ(e[i=s[n]],t[i]))return!1;return!0}return e!=e&&t!=t}new WeakMap;Object.assign({},$9c57765d0fbdf05dda806ee242f9709f$exports,$9c57765d0fbdf05dda806ee242f9709f$exports,{JsonPatchError:WQ.PatchError,deepClone:WQ._deepClone,escapePathComponent:WQ.escapePathComponent,unescapePathComponent:WQ.unescapePathComponent});var cJ,fJ,dJ,hJ,pJ=/("(?:[^\\"]|\\.)*")|[:,]/g,mJ={};const gJ=Number.MAX_SAFE_INTEGER||9007199254740991;hJ={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:gJ,MAX_SAFE_COMPONENT_LENGTH:16};var yJ,vJ,bJ,xJ={};function wJ(){throw new Error("setTimeout has not been defined")}function _J(){throw new Error("clearTimeout has not been defined")}function kJ(e){if(vJ===setTimeout)return setTimeout(e,0);if((vJ===wJ||!vJ)&&setTimeout)return vJ=setTimeout,setTimeout(e,0);try{return vJ(e,0)}catch(t){try{return vJ.call(null,e,0)}catch(t){return vJ.call(this,e,0)}}}!function(){try{vJ="function"==typeof setTimeout?setTimeout:wJ}catch(e){vJ=wJ}try{bJ="function"==typeof clearTimeout?clearTimeout:_J}catch(e){bJ=_J}}();var EJ,SJ=[],AJ=!1,CJ=-1;function DJ(){AJ&&EJ&&(AJ=!1,EJ.length?SJ=EJ.concat(SJ):CJ=-1,SJ.length&&MJ())}function MJ(){if(!AJ){var e=kJ(DJ);AJ=!0;for(var t=SJ.length;t;){for(EJ=SJ,SJ=[];++CJ<t;)EJ&&EJ[CJ].run();CJ=-1,t=SJ.length}EJ=null,AJ=!1,function(e){if(bJ===clearTimeout)return clearTimeout(e);if((bJ===_J||!bJ)&&clearTimeout)return bJ=clearTimeout,clearTimeout(e);try{bJ(e)}catch(t){try{return bJ.call(null,e)}catch(t){return bJ.call(this,e)}}}(e)}}function FJ(e,t){this.fun=e,this.array=t}function NJ(){}xJ.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];SJ.push(new FJ(e,t)),1!==SJ.length||AJ||kJ(MJ)},FJ.prototype.run=function(){this.fun.apply(null,this.array)},xJ.title="browser",xJ.browser=!0,xJ.env={},xJ.argv=[],xJ.version="",xJ.versions={},xJ.on=NJ,xJ.addListener=NJ,xJ.once=NJ,xJ.off=NJ,xJ.removeListener=NJ,xJ.removeAllListeners=NJ,xJ.emit=NJ,xJ.prependListener=NJ,xJ.prependOnceListener=NJ,xJ.listeners=function(e){return[]},xJ.binding=function(e){throw new Error("process.binding is not supported")},xJ.cwd=function(){return"/"},xJ.chdir=function(e){throw new Error("process.chdir is not supported")},xJ.umask=function(){return 0};const $J=yJ=()=>{};mJ={};const TJ=(cJ=[],mJ.re=cJ),OJ=(fJ=[],mJ.src=fJ),zJ=(dJ={},mJ.t=dJ);let RJ=0;const PJ=(e,t,n)=>{const r=RJ++;$J(r,t),zJ[e]=r,OJ[r]=t,TJ[r]=new RegExp(t,n?"g":void 0)};PJ("NUMERICIDENTIFIER","0|[1-9]\\d*"),PJ("NUMERICIDENTIFIERLOOSE","[0-9]+"),PJ("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),PJ("MAINVERSION",`(${OJ[zJ.NUMERICIDENTIFIER]})\\.(${OJ[zJ.NUMERICIDENTIFIER]})\\.(${OJ[zJ.NUMERICIDENTIFIER]})`),PJ("MAINVERSIONLOOSE",`(${OJ[zJ.NUMERICIDENTIFIERLOOSE]})\\.(${OJ[zJ.NUMERICIDENTIFIERLOOSE]})\\.(${OJ[zJ.NUMERICIDENTIFIERLOOSE]})`),PJ("PRERELEASEIDENTIFIER",`(?:${OJ[zJ.NUMERICIDENTIFIER]}|${OJ[zJ.NONNUMERICIDENTIFIER]})`),PJ("PRERELEASEIDENTIFIERLOOSE",`(?:${OJ[zJ.NUMERICIDENTIFIERLOOSE]}|${OJ[zJ.NONNUMERICIDENTIFIER]})`),PJ("PRERELEASE",`(?:-(${OJ[zJ.PRERELEASEIDENTIFIER]}(?:\\.${OJ[zJ.PRERELEASEIDENTIFIER]})*))`),PJ("PRERELEASELOOSE",`(?:-?(${OJ[zJ.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${OJ[zJ.PRERELEASEIDENTIFIERLOOSE]})*))`),PJ("BUILDIDENTIFIER","[0-9A-Za-z-]+"),PJ("BUILD",`(?:\\+(${OJ[zJ.BUILDIDENTIFIER]}(?:\\.${OJ[zJ.BUILDIDENTIFIER]})*))`),PJ("FULLPLAIN",`v?${OJ[zJ.MAINVERSION]}${OJ[zJ.PRERELEASE]}?${OJ[zJ.BUILD]}?`),PJ("FULL",`^${OJ[zJ.FULLPLAIN]}$`),PJ("LOOSEPLAIN",`[v=\\s]*${OJ[zJ.MAINVERSIONLOOSE]}${OJ[zJ.PRERELEASELOOSE]}?${OJ[zJ.BUILD]}?`),PJ("LOOSE",`^${OJ[zJ.LOOSEPLAIN]}$`),PJ("GTLT","((?:<|>)?=?)"),PJ("XRANGEIDENTIFIERLOOSE",`${OJ[zJ.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),PJ("XRANGEIDENTIFIER",`${OJ[zJ.NUMERICIDENTIFIER]}|x|X|\\*`),PJ("XRANGEPLAIN",`[v=\\s]*(${OJ[zJ.XRANGEIDENTIFIER]})(?:\\.(${OJ[zJ.XRANGEIDENTIFIER]})(?:\\.(${OJ[zJ.XRANGEIDENTIFIER]})(?:${OJ[zJ.PRERELEASE]})?${OJ[zJ.BUILD]}?)?)?`),PJ("XRANGEPLAINLOOSE",`[v=\\s]*(${OJ[zJ.XRANGEIDENTIFIERLOOSE]})(?:\\.(${OJ[zJ.XRANGEIDENTIFIERLOOSE]})(?:\\.(${OJ[zJ.XRANGEIDENTIFIERLOOSE]})(?:${OJ[zJ.PRERELEASELOOSE]})?${OJ[zJ.BUILD]}?)?)?`),PJ("XRANGE",`^${OJ[zJ.GTLT]}\\s*${OJ[zJ.XRANGEPLAIN]}$`),PJ("XRANGELOOSE",`^${OJ[zJ.GTLT]}\\s*${OJ[zJ.XRANGEPLAINLOOSE]}$`),PJ("COERCE",`(^|[^\\d])(\\d{1,${hJ.MAX_SAFE_COMPONENT_LENGTH}})(?:\\.(\\d{1,${hJ.MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\.(\\d{1,${hJ.MAX_SAFE_COMPONENT_LENGTH}}))?(?:$|[^\\d])`),PJ("COERCERTL",OJ[zJ.COERCE],!0),PJ("LONETILDE","(?:~>?)"),PJ("TILDETRIM",`(\\s*)${OJ[zJ.LONETILDE]}\\s+`,!0);mJ.tildeTrimReplace="$1~",PJ("TILDE",`^${OJ[zJ.LONETILDE]}${OJ[zJ.XRANGEPLAIN]}$`),PJ("TILDELOOSE",`^${OJ[zJ.LONETILDE]}${OJ[zJ.XRANGEPLAINLOOSE]}$`),PJ("LONECARET","(?:\\^)"),PJ("CARETTRIM",`(\\s*)${OJ[zJ.LONECARET]}\\s+`,!0);mJ.caretTrimReplace="$1^",PJ("CARET",`^${OJ[zJ.LONECARET]}${OJ[zJ.XRANGEPLAIN]}$`),PJ("CARETLOOSE",`^${OJ[zJ.LONECARET]}${OJ[zJ.XRANGEPLAINLOOSE]}$`),PJ("COMPARATORLOOSE",`^${OJ[zJ.GTLT]}\\s*(${OJ[zJ.LOOSEPLAIN]})$|^$`),PJ("COMPARATOR",`^${OJ[zJ.GTLT]}\\s*(${OJ[zJ.FULLPLAIN]})$|^$`),PJ("COMPARATORTRIM",`(\\s*)${OJ[zJ.GTLT]}\\s*(${OJ[zJ.LOOSEPLAIN]}|${OJ[zJ.XRANGEPLAIN]})`,!0);mJ.comparatorTrimReplace="$1$2$3",PJ("HYPHENRANGE",`^\\s*(${OJ[zJ.XRANGEPLAIN]})\\s+-\\s+(${OJ[zJ.XRANGEPLAIN]})\\s*$`),PJ("HYPHENRANGELOOSE",`^\\s*(${OJ[zJ.XRANGEPLAINLOOSE]})\\s+-\\s+(${OJ[zJ.XRANGEPLAINLOOSE]})\\s*$`),PJ("STAR","(<|>)?=?\\s*\\*"),PJ("GTE0","^\\s*>=\\s*0.0.0\\s*$"),PJ("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");var LJ;const BJ=yJ;var IJ;const jJ=["includePrerelease","loose","rtl"],UJ=IJ=e=>e?"object"!=typeof e?{loose:!0}:jJ.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};var qJ;const WJ=/^[0-9]+$/,HJ=(e,t)=>{const n=WJ.test(e),r=WJ.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};qJ={compareIdentifiers:HJ,rcompareIdentifiers:(e,t)=>HJ(t,e)};class VJ{constructor(e,t){if(t=UJ(t),e instanceof VJ){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>hJ.MAX_LENGTH)throw new TypeError(`version is longer than ${hJ.MAX_LENGTH} characters`);BJ("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?mJ.re[mJ.t.LOOSE]:mJ.re[mJ.t.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>hJ.MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>hJ.MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>hJ.MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<hJ.MAX_SAFE_INTEGER)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(BJ("SemVer.compare",this.version,this.options,e),!(e instanceof VJ)){if("string"==typeof e&&e===this.version)return 0;e=new VJ(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof VJ||(e=new VJ(e,this.options)),qJ.compareIdentifiers(this.major,e.major)||qJ.compareIdentifiers(this.minor,e.minor)||qJ.compareIdentifiers(this.patch,e.patch)}comparePre(e){if(e instanceof VJ||(e=new VJ(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(BJ("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return qJ.compareIdentifiers(n,r)}while(++t)}compareBuild(e){e instanceof VJ||(e=new VJ(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(BJ("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return qJ.compareIdentifiers(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var GJ;const YJ=LJ=VJ,XJ=IJ;var QJ;const JJ=GJ=(e,t)=>{if(t=XJ(t),e instanceof YJ)return e;if("string"!=typeof e)return null;if(e.length>hJ.MAX_LENGTH)return null;if(!(t.loose?mJ.re[mJ.t.LOOSE]:mJ.re[mJ.t.FULL]).test(e))return null;try{return new YJ(e,t)}catch(e){return null}};QJ=(e,t)=>{const n=JJ(e,t);return n?n.version:null};var KJ;const ZJ=GJ;KJ=(e,t)=>{const n=ZJ(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var eK;const tK=LJ;eK=(e,t,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new tK(e,n).inc(t,r).version}catch(e){return null}};var nK;const rK=GJ;var iK,oK;const aK=LJ,sK=oK=(e,t,n)=>new aK(e,n).compare(new aK(t,n)),uK=iK=(e,t,n)=>0===sK(e,t,n);nK=(e,t)=>{if(uK(e,t))return null;{const n=rK(e),r=rK(t),i=n.prerelease.length||r.prerelease.length,o=i?"pre":"",a=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return o+e;return a}};var lK;const cK=LJ;lK=(e,t)=>new cK(e,t).major;var fK;const dK=LJ;fK=(e,t)=>new dK(e,t).minor;var hK;const pK=LJ;hK=(e,t)=>new pK(e,t).patch;var mK;const gK=GJ;mK=(e,t)=>{const n=gK(e,t);return n&&n.prerelease.length?n.prerelease:null};var yK;const vK=oK;yK=(e,t,n)=>vK(t,e,n);var bK;const xK=oK;bK=(e,t)=>xK(e,t,!0);var wK;const _K=LJ;var kK;const EK=wK=(e,t,n)=>{const r=new _K(e,n),i=new _K(t,n);return r.compare(i)||r.compareBuild(i)};kK=(e,t)=>e.sort(((e,n)=>EK(e,n,t)));var SK;const AK=wK;SK=(e,t)=>e.sort(((e,n)=>AK(n,e,t)));var CK;const DK=oK;var MK;const FK=oK;var NK;const $K=oK;var TK;const OK=oK;var zK;const RK=oK;var PK;const LK=iK,BK=NK=(e,t,n)=>0!==$K(e,t,n),IK=CK=(e,t,n)=>DK(e,t,n)>0,jK=TK=(e,t,n)=>OK(e,t,n)>=0,UK=MK=(e,t,n)=>FK(e,t,n)<0,qK=zK=(e,t,n)=>RK(e,t,n)<=0;PK=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return LK(e,n,r);case"!=":return BK(e,n,r);case">":return IK(e,n,r);case">=":return jK(e,n,r);case"<":return UK(e,n,r);case"<=":return qK(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var WK;const HK=LJ,VK=GJ;WK=(e,t)=>{if(e instanceof HK)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=mJ.re[mJ.t.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),mJ.re[mJ.t.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;mJ.re[mJ.t.COERCERTL].lastIndex=-1}else n=e.match(mJ.re[mJ.t.COERCE]);return null===n?null:VK(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};var GK;const YK=Symbol("SemVer ANY");class XK{static get ANY(){return YK}constructor(e,t){if(t=QK(t),e instanceof XK){if(e.loose===!!t.loose)return e;e=e.value}KK("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===YK?this.value="":this.value=this.operator+this.semver.version,KK("comp",this)}parse(e){const t=this.options.loose?mJ.re[mJ.t.COMPARATORLOOSE]:mJ.re[mJ.t.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new ZK(n[2],this.options.loose):this.semver=YK}toString(){return this.value}test(e){if(KK("Comparator.test",e,this.options.loose),this.semver===YK||e===YK)return!0;if("string"==typeof e)try{e=new ZK(e,this.options)}catch(e){return!1}return JK(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof XK))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new YZ(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new YZ(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=JK(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=JK(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&o||a||s}}GK=XK;const QK=IJ,JK=PK,KK=yJ,ZK=LJ;var eZ;class tZ{constructor(e,t){if(t=MZ(t),e instanceof tZ)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new tZ(e.raw,t);if(e instanceof FZ)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!TZ(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&OZ(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=DZ.get(t);if(n)return n;const r=this.options.loose,i=r?mJ.re[mJ.t.HYPHENRANGELOOSE]:mJ.re[mJ.t.HYPHENRANGE];e=e.replace(i,VZ(this.options.includePrerelease)),NZ("hyphen replace",e),e=e.replace(mJ.re[mJ.t.COMPARATORTRIM],mJ.comparatorTrimReplace),NZ("comparator trim",e,mJ.re[mJ.t.COMPARATORTRIM]),e=(e=(e=e.replace(mJ.re[mJ.t.TILDETRIM],mJ.tildeTrimReplace)).replace(mJ.re[mJ.t.CARETTRIM],mJ.caretTrimReplace)).split(/\s+/).join(" ");const o=r?mJ.re[mJ.t.COMPARATORLOOSE]:mJ.re[mJ.t.COMPARATOR],a=e.split(" ").map((e=>RZ(e,this.options))).join(" ").split(/\s+/).map((e=>HZ(e,this.options))).filter(this.options.loose?e=>!!e.match(o):()=>!0).map((e=>new FZ(e,this.options))),s=(a.length,new Map);for(const e of a){if(TZ(e))return[e];s.set(e.value,e)}s.size>1&&s.has("")&&s.delete("");const u=[...s.values()];return DZ.set(t,u),u}intersects(e,t){if(!(e instanceof tZ))throw new TypeError("a Range is required");return this.set.some((n=>zZ(n,t)&&e.set.some((e=>zZ(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new $Z(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(GZ(this.set[t],e,this.options))return!0;return!1}}eZ=tZ;var nZ,rZ=!1;var iZ;function oZ(e){var t=this;if(t instanceof oZ||(t=new oZ),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function aZ(e,t,n){var r=t===e.head?new lZ(n,null,t,e):new lZ(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function sZ(e,t){e.tail=new lZ(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function uZ(e,t){e.head=new lZ(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function lZ(e,t,n,r){if(!(this instanceof lZ))return new lZ(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}iZ=oZ,oZ.Node=lZ,oZ.create=oZ,oZ.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},oZ.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},oZ.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},oZ.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)sZ(this,arguments[e]);return this.length},oZ.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)uZ(this,arguments[e]);return this.length},oZ.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},oZ.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},oZ.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},oZ.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},oZ.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},oZ.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},oZ.prototype.map=function(e,t){t=t||this;for(var n=new oZ,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},oZ.prototype.mapReverse=function(e,t){t=t||this;for(var n=new oZ,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},oZ.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},oZ.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},oZ.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},oZ.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},oZ.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new oZ;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},oZ.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new oZ;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},oZ.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var o=[];for(r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(r=0;r<n.length;r++)i=aZ(this,i,n[r]);return o},oZ.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{(rZ||(rZ=!0,nZ={},nZ=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),nZ)(oZ)}catch(e){}const cZ=iZ,fZ=Symbol("max"),dZ=Symbol("length"),hZ=Symbol("lengthCalculator"),pZ=Symbol("allowStale"),mZ=Symbol("maxAge"),gZ=Symbol("dispose"),yZ=Symbol("noDisposeOnSet"),vZ=Symbol("lruList"),bZ=Symbol("cache"),xZ=Symbol("updateAgeOnGet"),wZ=()=>1;const _Z=(e,t,n)=>{const r=e[bZ].get(t);if(r){const t=r.value;if(kZ(e,t)){if(SZ(e,r),!e[pZ])return}else n&&(e[xZ]&&(r.value.now=Date.now()),e[vZ].unshiftNode(r));return t.value}},kZ=(e,t)=>{if(!t||!t.maxAge&&!e[mZ])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[mZ]&&n>e[mZ]},EZ=e=>{if(e[dZ]>e[fZ])for(let t=e[vZ].tail;e[dZ]>e[fZ]&&null!==t;){const n=t.prev;SZ(e,t),t=n}},SZ=(e,t)=>{if(t){const n=t.value;e[gZ]&&e[gZ](n.key,n.value),e[dZ]-=n.length,e[bZ].delete(n.key),e[vZ].removeNode(t)}};class AZ{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const CZ=(e,t,n,r)=>{let i=n.value;kZ(e,i)&&(SZ(e,n),e[pZ]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},DZ=new class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[fZ]=e.max||1/0;const t=e.length||wZ;if(this[hZ]="function"!=typeof t?wZ:t,this[pZ]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[mZ]=e.maxAge||0,this[gZ]=e.dispose,this[yZ]=e.noDisposeOnSet||!1,this[xZ]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[fZ]=e||1/0,EZ(this)}get max(){return this[fZ]}set allowStale(e){this[pZ]=!!e}get allowStale(){return this[pZ]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[mZ]=e,EZ(this)}get maxAge(){return this[mZ]}set lengthCalculator(e){"function"!=typeof e&&(e=wZ),e!==this[hZ]&&(this[hZ]=e,this[dZ]=0,this[vZ].forEach((e=>{e.length=this[hZ](e.value,e.key),this[dZ]+=e.length}))),EZ(this)}get lengthCalculator(){return this[hZ]}get length(){return this[dZ]}get itemCount(){return this[vZ].length}rforEach(e,t){t=t||this;for(let n=this[vZ].tail;null!==n;){const r=n.prev;CZ(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[vZ].head;null!==n;){const r=n.next;CZ(this,e,n,t),n=r}}keys(){return this[vZ].toArray().map((e=>e.key))}values(){return this[vZ].toArray().map((e=>e.value))}reset(){this[gZ]&&this[vZ]&&this[vZ].length&&this[vZ].forEach((e=>this[gZ](e.key,e.value))),this[bZ]=new Map,this[vZ]=new cZ,this[dZ]=0}dump(){return this[vZ].map((e=>!kZ(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[vZ]}set(e,t,n){if((n=n||this[mZ])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,i=this[hZ](t,e);if(this[bZ].has(e)){if(i>this[fZ])return SZ(this,this[bZ].get(e)),!1;const o=this[bZ].get(e).value;return this[gZ]&&(this[yZ]||this[gZ](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[dZ]+=i-o.length,o.length=i,this.get(e),EZ(this),!0}const o=new AZ(e,t,i,r,n);return o.length>this[fZ]?(this[gZ]&&this[gZ](e,t),!1):(this[dZ]+=o.length,this[vZ].unshift(o),this[bZ].set(e,this[vZ].head),EZ(this),!0)}has(e){if(!this[bZ].has(e))return!1;const t=this[bZ].get(e).value;return!kZ(this,t)}get(e){return _Z(this,e,!0)}peek(e){return _Z(this,e,!1)}pop(){const e=this[vZ].tail;return e?(SZ(this,e),e.value):null}del(e){SZ(this,this[bZ].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[bZ].forEach(((e,t)=>_Z(this,t,!1)))}}({max:1e3}),MZ=IJ,FZ=GK,NZ=yJ,$Z=LJ,TZ=e=>"<0.0.0-0"===e.value,OZ=e=>""===e.value,zZ=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},RZ=(e,t)=>(NZ("comp",e,t),e=IZ(e,t),NZ("caret",e),e=LZ(e,t),NZ("tildes",e),e=UZ(e,t),NZ("xrange",e),e=WZ(e,t),NZ("stars",e),e),PZ=e=>!e||"x"===e.toLowerCase()||"*"===e,LZ=(e,t)=>e.trim().split(/\s+/).map((e=>BZ(e,t))).join(" "),BZ=(e,t)=>{const n=t.loose?mJ.re[mJ.t.TILDELOOSE]:mJ.re[mJ.t.TILDE];return e.replace(n,((t,n,r,i,o)=>{let a;return NZ("tilde",e,t,n,r,i,o),PZ(n)?a="":PZ(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:PZ(i)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(NZ("replaceTilde pr",o),a=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,NZ("tilde return",a),a}))},IZ=(e,t)=>e.trim().split(/\s+/).map((e=>jZ(e,t))).join(" "),jZ=(e,t)=>{NZ("caret",e,t);const n=t.loose?mJ.re[mJ.t.CARETLOOSE]:mJ.re[mJ.t.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,a)=>{let s;return NZ("caret",e,t,n,i,o,a),PZ(n)?s="":PZ(i)?s=`>=${n}.0.0${r} <${+n+1}.0.0-0`:PZ(o)?s="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:a?(NZ("replaceCaret pr",a),s="0"===n?"0"===i?`>=${n}.${i}.${o}-${a} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${a} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${a} <${+n+1}.0.0-0`):(NZ("no pr"),s="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),NZ("caret return",s),s}))},UZ=(e,t)=>(NZ("replaceXRanges",e,t),e.split(/\s+/).map((e=>qZ(e,t))).join(" ")),qZ=(e,t)=>{e=e.trim();const n=t.loose?mJ.re[mJ.t.XRANGELOOSE]:mJ.re[mJ.t.XRANGE];return e.replace(n,((n,r,i,o,a,s)=>{NZ("xRange",e,n,r,i,o,a,s);const u=PZ(i),l=u||PZ(o),c=l||PZ(a),f=c;return"="===r&&f&&(r=""),s=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(l&&(o=0),a=0,">"===r?(r=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(s="-0"),n=`${r+i}.${o}.${a}${s}`):l?n=`>=${i}.0.0${s} <${+i+1}.0.0-0`:c&&(n=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`),NZ("xRange return",n),n}))},WZ=(e,t)=>(NZ("replaceStars",e,t),e.trim().replace(mJ.re[mJ.t.STAR],"")),HZ=(e,t)=>(NZ("replaceGTE0",e,t),e.trim().replace(mJ.re[t.includePrerelease?mJ.t.GTE0PRE:mJ.t.GTE0],"")),VZ=e=>(t,n,r,i,o,a,s,u,l,c,f,d,h)=>`${n=PZ(r)?"":PZ(i)?`>=${r}.0.0${e?"-0":""}`:PZ(o)?`>=${r}.${i}.0${e?"-0":""}`:a?`>=${n}`:`>=${n}${e?"-0":""}`} ${u=PZ(l)?"":PZ(c)?`<${+l+1}.0.0-0`:PZ(f)?`<${l}.${+c+1}.0-0`:d?`<=${l}.${c}.${f}-${d}`:e?`<${l}.${c}.${+f+1}-0`:`<=${u}`}`.trim(),GZ=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(NZ(e[n].semver),e[n].semver!==FZ.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},YZ=eZ;var XZ;const QZ=eZ;XZ=(e,t,n)=>{try{t=new QZ(t,n)}catch(e){return!1}return t.test(e)};var JZ;const KZ=eZ;JZ=(e,t)=>new KZ(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));var ZZ;const e0=LJ,t0=eZ;ZZ=(e,t,n)=>{let r=null,i=null,o=null;try{o=new t0(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new e0(r,n)))})),r};var n0;const r0=LJ,i0=eZ;n0=(e,t,n)=>{let r=null,i=null,o=null;try{o=new i0(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new r0(r,n)))})),r};var o0;const a0=LJ,s0=eZ,u0=CK;o0=(e,t)=>{e=new s0(e,t);let n=new a0("0.0.0");if(e.test(n))return n;if(n=new a0("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const r=e.set[t];let i=null;r.forEach((e=>{const t=new a0(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!u0(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!u0(n,i)||(n=i)}return n&&e.test(n)?n:null};var l0;const c0=eZ;l0=(e,t)=>{try{return new c0(e,t).range||"*"}catch(e){return null}};var f0;const d0=LJ,h0=GK,{ANY:p0}=h0,m0=eZ,g0=XZ,y0=CK,v0=MK,b0=zK,x0=TK;var w0;const _0=f0=(e,t,n,r)=>{let i,o,a,s,u;switch(e=new d0(e,r),t=new m0(t,r),n){case">":i=y0,o=b0,a=v0,s=">",u=">=";break;case"<":i=v0,o=x0,a=y0,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(g0(e,t,r))return!1;for(let n=0;n<t.set.length;++n){const l=t.set[n];let c=null,f=null;if(l.forEach((e=>{e.semver===p0&&(e=new h0(">=0.0.0")),c=c||e,f=f||e,i(e.semver,c.semver,r)?c=e:a(e.semver,f.semver,r)&&(f=e)})),c.operator===s||c.operator===u)return!1;if((!f.operator||f.operator===s)&&o(e,f.semver))return!1;if(f.operator===u&&a(e,f.semver))return!1}return!0};w0=(e,t,n)=>_0(e,t,">",n);var k0;const E0=f0;k0=(e,t,n)=>E0(e,t,"<",n);var S0;const A0=eZ;S0=(e,t,n)=>(e=new A0(e,n),t=new A0(t,n),e.intersects(t));var C0;const D0=XZ,M0=oK;C0=(e,t,n)=>{const r=[];let i=null,o=null;const a=e.sort(((e,t)=>M0(e,t,n)));for(const e of a){D0(e,t,n)?(o=e,i||(i=e)):(o&&r.push([i,o]),o=null,i=null)}i&&r.push([i,null]);const s=[];for(const[e,t]of r)e===t?s.push(e):t||e!==a[0]?t?e===a[0]?s.push(`<=${t}`):s.push(`${e} - ${t}`):s.push(`>=${e}`):s.push("*");const u=s.join(" || "),l="string"==typeof t.raw?t.raw:String(t);return u.length<l.length?u:t};var F0;const N0=eZ,$0=GK,{ANY:T0}=$0,O0=XZ,z0=oK,R0=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===T0){if(1===t.length&&t[0].semver===T0)return!0;e=n.includePrerelease?[new $0(">=0.0.0-0")]:[new $0(">=0.0.0")]}if(1===t.length&&t[0].semver===T0){if(n.includePrerelease)return!0;t=[new $0(">=0.0.0")]}const r=new Set;let i,o,a,s,u,l,c;for(const t of e)">"===t.operator||">="===t.operator?i=P0(i,t,n):"<"===t.operator||"<="===t.operator?o=L0(o,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&o){if(a=z0(i.semver,o.semver,n),a>0)return null;if(0===a&&(">="!==i.operator||"<="!==o.operator))return null}for(const e of r){if(i&&!O0(e,String(i),n))return null;if(o&&!O0(e,String(o),n))return null;for(const r of t)if(!O0(e,String(r),n))return!1;return!0}let f=!(!o||n.includePrerelease||!o.semver.prerelease.length)&&o.semver,d=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;f&&1===f.prerelease.length&&"<"===o.operator&&0===f.prerelease[0]&&(f=!1);for(const e of t){if(c=c||">"===e.operator||">="===e.operator,l=l||"<"===e.operator||"<="===e.operator,i)if(d&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===d.major&&e.semver.minor===d.minor&&e.semver.patch===d.patch&&(d=!1),">"===e.operator||">="===e.operator){if(s=P0(i,e,n),s===e&&s!==i)return!1}else if(">="===i.operator&&!O0(i.semver,String(e),n))return!1;if(o)if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),"<"===e.operator||"<="===e.operator){if(u=L0(o,e,n),u===e&&u!==o)return!1}else if("<="===o.operator&&!O0(o.semver,String(e),n))return!1;if(!e.operator&&(o||i)&&0!==a)return!1}return!(i&&l&&!o&&0!==a)&&(!(o&&c&&!i&&0!==a)&&(!d&&!f))},P0=(e,t,n)=>{if(!e)return t;const r=z0(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},L0=(e,t,n)=>{if(!e)return t;const r=z0(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};F0=(e,t,n={})=>{if(e===t)return!0;e=new N0(e,n),t=new N0(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=R0(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0},mJ.re,mJ.src,mJ.t;var B0={},I0=e(JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"5.1.0","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"files":["bin","build","src","vega-lite*","tsconfig.json"],"scripts":{"changelog":"conventional-changelog -p angular -r 2","prebuild":"yarn clean:build","build":"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"yarn clean:build && del-cli \'site/data/*\' \'examples/compiled/*.png\' && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","clean:build":"del-cli \'build/*\' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:cover":"jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch":"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"jest --watch test/"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/core":"^7.13.15","@babel/preset-env":"^7.13.15","@babel/preset-typescript":"^7.13.0","@rollup/plugin-babel":"^5.3.0","@rollup/plugin-commonjs":"^18.0.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.1","@types/chai":"^4.2.16","@types/d3":"^6.3.0","@types/jest":"^26.0.22","@types/mkdirp":"^1.0.1","@types/pako":"^1.0.1","@typescript-eslint/eslint-plugin":"^4.22.0","@typescript-eslint/parser":"^4.22.0","ajv":"^8.1.0","ajv-formats":"^2.0.2","chai":"^4.3.4","cheerio":"^1.0.0-rc.6","conventional-changelog-cli":"^2.1.1","d3":"^6.7.0","del-cli":"^3.0.1","eslint":"^7.24.0","eslint-config-prettier":"^8.2.0","eslint-plugin-jest":"^24.3.5","eslint-plugin-prettier":"^3.4.0","gh-pages":"^3.1.0","highlight.js":"^10.7.2","jest":"^26.6.3","jest-dev-server":"^5.0.0","mkdirp":"^1.0.4","pako":"^2.0.3","prettier":"^2.2.1","puppeteer":"^8.0.0","rollup":"^2.45.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2","serve":"^11.3.2","terser":"^5.6.1","ts-json-schema-generator":"^0.90.0","typescript":"~4.2.4","vega-cli":"^5.20.2","vega-datasets":"~2.2.0","vega-embed":"^6.17.0","vega-tooltip":"^0.25.1","yaml-front-matter":"^4.1.1"},"dependencies":{"@types/clone":"~2.1.0","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0","tslib":"~2.2.0","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-util":"~1.16.1","yargs":"~16.2.0"},"peerDependencies":{"vega":"^5.20.0"},"jest":{"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false,"setupFiles":["./test/jest.overrides.ts"]}}')),j0={};Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var U0={},q0=yx,W0=function(){function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{r=Promise}catch(e){r=function(){}}function i(o,s,u,l,c){"object"==typeof s&&(u=s.depth,l=s.prototype,c=s.includeNonEnumerable,s=s.circular);var f=[],d=[],h=void 0!==q0;return void 0===s&&(s=!0),void 0===u&&(u=1/0),function o(u,p){if(null===u)return null;if(0===p)return u;var m,g;if("object"!=typeof u)return u;if(e(u,t))m=new t;else if(e(u,n))m=new n;else if(e(u,r))m=new r((function(e,t){u.then((function(t){e(o(t,p-1))}),(function(e){t(o(e,p-1))}))}));else if(i.__isArray(u))m=[];else if(i.__isRegExp(u))m=new RegExp(u.source,a(u)),u.lastIndex&&(m.lastIndex=u.lastIndex);else if(i.__isDate(u))m=new Date(u.getTime());else{if(h&&q0.isBuffer(u))return m=q0.allocUnsafe?q0.allocUnsafe(u.length):new q0(u.length),u.copy(m),m;e(u,Error)?m=Object.create(u):void 0===l?(g=Object.getPrototypeOf(u),m=Object.create(g)):(m=Object.create(l),g=l)}if(s){var y=f.indexOf(u);if(-1!=y)return d[y];f.push(u),d.push(m)}for(var v in e(u,t)&&u.forEach((function(e,t){var n=o(t,p-1),r=o(e,p-1);m.set(n,r)})),e(u,n)&&u.forEach((function(e){var t=o(e,p-1);m.add(t)})),u){var b;g&&(b=Object.getOwnPropertyDescriptor(g,v)),b&&null==b.set||(m[v]=o(u[v],p-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(u);for(v=0;v<x.length;v++){var w=x[v];(!(k=Object.getOwnPropertyDescriptor(u,w))||k.enumerable||c)&&(m[w]=o(u[w],p-1),k.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(c){var _=Object.getOwnPropertyNames(u);for(v=0;v<_.length;v++){var k,E=_[v];(k=Object.getOwnPropertyDescriptor(u,E))&&k.enumerable||(m[E]=o(u[E],p-1),Object.defineProperty(m,E,{enumerable:!1}))}}return m}(o,u)}function o(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=a,i}();U0&&(U0=W0);var H0=e(U0),V0=e((function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n})),G0=e((function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(a="",n=0;n<u.length;n++){var l=u[n],c=e(t[l]);c&&(a&&(a+=","),a+=JSON.stringify(l)+":"+c)}return o.splice(s,1),"{"+a+"}"}}(e)}));function Y0(e){return!!e.or}function X0(e){return!!e.and}function Q0(e){return!!e.not}function J0(e,t){if(Q0(e))J0(e.not,t);else if(X0(e))for(const n of e.and)J0(n,t);else if(Y0(e))for(const n of e.or)J0(n,t);else t(e)}function K0(e,t){return Q0(e)?{not:K0(e.not,t)}:X0(e)?{and:e.and.map((e=>K0(e,t)))}:Y0(e)?{or:e.or.map((e=>K0(e,t)))}:t(e)}const Z0=V0;t(j0,"deepEqual",(function(){return Z0}));const e1=H0;function t1(e,t){const n={};for(const r of t)tb(e,r)&&(n[r]=e[r]);return n}function n1(e,t){const n={...e};for(const e of t)delete n[e];return n}t(j0,"duplicate",(function(){return e1})),t(j0,"pick",(function(){return t1})),t(j0,"omit",(function(){return n1})),Set.prototype.toJSON=function(){return`Set(${[...this].map((e=>G0(e))).join(",")})`};const r1=G0;function i1(e){if(cb(e))return e;const t=db(e)?e:G0(e);if(t.length<250)return t;let n=0;for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return n}function o1(e){return!1===e||null===e}function a1(e,t){return e.includes(t)}function s1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function u1(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function l1(e,...t){for(const n of t)c1(e,n??{});return e}function c1(e,t){for(const n of v1(t))xv(e,n,t[n],!0)}function f1(e,t){const n=[],r={};let i;for(const o of e)i=t(o),i in r||(r[i]=1,n.push(o));return n}function d1(e,t){const n=v1(e),r=v1(t);if(n.length!==r.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function h1(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function p1(e,t){for(const n of e)if(t.has(n))return!0;return!1}function m1(e){const t=new Set;for(const n of e){const e=av(n).map(((e,t)=>0===t?e:`[${e}]`)),r=e.map(((t,n)=>e.slice(0,n+1).join("")));for(const e of r)t.add(e)}return t}function g1(e,t){return void 0===e||void 0===t||p1(m1(e),m1(t))}function y1(e){return 0===v1(e).length}t(j0,"stringify",(function(){return r1})),t(j0,"hash",(function(){return i1})),t(j0,"isNullOrFalse",(function(){return o1})),t(j0,"contains",(function(){return a1})),t(j0,"some",(function(){return s1})),t(j0,"every",(function(){return u1})),t(j0,"mergeDeep",(function(){return l1})),t(j0,"unique",(function(){return f1})),t(j0,"isEqual",(function(){return d1})),t(j0,"setEqual",(function(){return h1})),t(j0,"hasIntersection",(function(){return p1})),t(j0,"prefixGenerator",(function(){return m1})),t(j0,"fieldIntersection",(function(){return g1})),t(j0,"isEmpty",(function(){return y1}));const v1=Object.keys;t(j0,"keys",(function(){return v1}));const b1=Object.values;t(j0,"vals",(function(){return b1}));const x1=Object.entries;function w1(e){return!0===e||!1===e}function _1(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function k1(e,t){return Q0(e)?`!(${k1(e.not,t)})`:X0(e)?`(${e.and.map((e=>k1(e,t))).join(") && (")})`:Y0(e)?`(${e.or.map((e=>k1(e,t))).join(") || (")})`:t(e)}function E1(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&E1(e[n],t)&&delete e[n],y1(e)}function S1(e){return e.charAt(0).toUpperCase()+e.substr(1)}function A1(e,t="datum"){const n=av(e),r=[];for(let e=1;e<=n.length;e++){const i=`[${n.slice(0,e).map(xb).join("][")}]`;r.push(`${t}${i}`)}return r.join(" && ")}function C1(e,t="datum"){return`${t}[${xb(av(e).join("."))}]`}function D1(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function M1(e){return`${av(e).map(D1).join("\\.")}`}function F1(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function N1(e){return`${av(e).join(".")}`}function $1(e){return e?av(e).length:0}function T1(...e){for(const t of e)if(void 0!==t)return t}t(j0,"entries",(function(){return x1})),t(j0,"isBoolean",(function(){return w1})),t(j0,"varName",(function(){return _1})),t(j0,"logicalExpr",(function(){return k1})),t(j0,"deleteNestedProperty",(function(){return E1})),t(j0,"titleCase",(function(){return S1})),t(j0,"accessPathWithDatum",(function(){return A1})),t(j0,"flatAccessWithDatum",(function(){return C1})),t(j0,"replacePathInField",(function(){return M1})),t(j0,"replaceAll",(function(){return F1})),t(j0,"removePathFromField",(function(){return N1})),t(j0,"accessPathDepth",(function(){return $1})),t(j0,"getFirstDefined",(function(){return T1}));let O1=42;function z1(e){const t=++O1;return e?String(e)+t:t}function R1(){O1=42}function P1(e){return L1(e)?e:`__${e}`}function L1(e){return e.startsWith("__")}function B1(e){if(void 0!==e)return(e%360+360)%360}function I1(e){return!!cb(e)||!isNaN(e)&&!isNaN(parseFloat(e))}t(j0,"uniqueId",(function(){return z1})),t(j0,"resetIdCounter",(function(){return R1})),t(j0,"internalField",(function(){return P1})),t(j0,"isInternalField",(function(){return L1})),t(j0,"normalizeAngle",(function(){return B1})),t(j0,"isNumeric",(function(){return I1}));const j1="row",U1="column",q1="facet",W1="x",H1="y",V1="x2",G1="y2",Y1="radius",X1="radius2",Q1="theta",J1="theta2",K1="latitude",Z1="longitude",e2="latitude2",t2="longitude2",n2="color",r2="fill",i2="stroke",o2="shape",a2="size",s2="angle",u2="opacity",l2="fillOpacity",c2="strokeOpacity",f2="strokeWidth",d2="strokeDash",h2="text",p2="order",m2="detail",g2="key",y2="tooltip",v2="href",b2="url",x2="description",w2={theta:1,theta2:1,radius:1,radius2:1};function _2(e){return e in w2}const k2={longitude:1,longitude2:1,latitude:1,latitude2:1};const E2=v1(k2),S2={x:1,y:1,x2:1,y2:1,...w2,...k2,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function A2(e){return e===n2||e===r2||e===i2}const C2={row:1,column:1,facet:1},D2=v1(C2),M2={...S2,...C2},F2=v1(M2),{order:N2,detail:$2,tooltip:T2,...O2}=M2,{row:z2,column:R2,facet:P2,...L2}=O2;v1(O2),v1(L2);function B2(e){return!!M2[e]}const I2=[V1,G1,e2,t2,J1,X1];function j2(e){return U2(e)!==e}function U2(e){switch(e){case V1:return W1;case G1:return H1;case e2:return K1;case t2:return Z1;case J1:return Q1;case X1:return Y1}return e}function q2(e){if(_2(e))switch(e){case Q1:return"startAngle";case J1:return"endAngle";case Y1:return"outerRadius";case X1:return"innerRadius"}return e}function W2(e){switch(e){case W1:return V1;case H1:return G1;case K1:return e2;case Z1:return t2;case Q1:return J1;case Y1:return X1}}function H2(e){switch(e){case W1:case V1:return"width";case H1:case G1:return"height"}}v1(S2);const{x:V2,y:G2,x2:Y2,y2:X2,latitude:Q2,longitude:J2,latitude2:K2,longitude2:Z2,theta:e3,theta2:t3,radius:n3,radius2:r3,...i3}=S2,o3=v1(i3),a3={x:1,y:1},s3=v1(a3);function u3(e){return e in a3}const l3={theta:1,radius:1},c3=v1(l3);function f3(e){return"width"===e?W1:H1}const{text:d3,tooltip:h3,href:p3,url:m3,description:g3,detail:y3,key:v3,order:b3,...x3}=i3,w3=v1(x3);const _3={...a3,...l3,...x3},k3=v1(_3);function E3(e){return!!_3[e]}function S3(e,t){return function(e){switch(e){case n2:case r2:case i2:case x2:case m2:case g2:case y2:case v2:case p2:case u2:case l2:case c2:case f2:case q1:case j1:case U1:return A3;case W1:case H1:case K1:case Z1:return D3;case V1:case G1:case e2:case t2:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case a2:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case d2:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case o2:return{point:"always",geoshape:"always"};case h2:return{text:"always"};case s2:return{point:"always",square:"always",text:"always"};case b2:return{image:"always"};case Q1:case Y1:return{text:"always",arc:"always"};case J1:case X1:return{arc:"always"}}}(e)[t]}const A3={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:C3,...D3}=A3;function M3(e){switch(e){case W1:case H1:case Q1:case Y1:case a2:case s2:case f2:case u2:case l2:case c2:case V1:case G1:case J1:case X1:return;case q1:case j1:case U1:case o2:case d2:case h2:case y2:case v2:case b2:case x2:return"discrete";case n2:case r2:case i2:return"flexible";case K1:case Z1:case e2:case t2:case m2:case g2:case p2:return}}const F3={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},N3={count:1,min:1,max:1};function $3(e){return!!e&&!!e.argmin}function T3(e){return!!e&&!!e.argmax}v1(F3);function O3(e){return db(e)&&!!F3[e]}const z3=["count","valid","missing","distinct"];function R3(e){return db(e)&&a1(z3,e)}const P3=["count","sum","distinct","valid","missing"],L3=Sb(["mean","average","median","q1","q3","min","max"]);function B3(e){return sb(e)&&(e=T9(e,void 0)),"bin"+v1(e).map((t=>q3(e[t])?_1(`_${t}_${x1(e[t])}`):_1(`_${t}_${e[t]}`))).join("")}function I3(e){return!0===e||U3(e)&&!e.binned}function j3(e){return"binned"===e||U3(e)&&!0===e.binned}function U3(e){return yv(e)}function q3(e){return e?.param}function W3(e){switch(e){case j1:case U1:case a2:case n2:case r2:case i2:case f2:case u2:case l2:case c2:case o2:return 6;case d2:return 4;default:return 10}}function H3(e){return e&&!!e.expr}function V3(e){const t=v1(e||{}),n={};for(const r of t)n[r]=n5(e[r]);return n}function G3(e){const{anchor:t,frame:n,offset:r,orient:i,color:o,subtitleColor:a,subtitleFont:s,subtitleFontSize:u,subtitleFontStyle:l,subtitleFontWeight:c,subtitleLineHeight:f,subtitlePadding:d,...h}=e,p={...h,...o?{fill:o}:{}},m={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{}},g={...a?{subtitleColor:a}:{},...s?{subtitleFont:s}:{},...u?{subtitleFontSize:u}:{},...l?{subtitleFontStyle:l}:{},...c?{subtitleFontWeight:c}:{},...f?{subtitleLineHeight:f}:{},...d?{subtitlePadding:d}:{}};return{titleMarkConfig:p,subtitleMarkConfig:t1(p,["align","baseline","dx","dy","limit"]),nonMark:m,subtitle:g}}function Y3(e){return db(e)||gv(e)&&db(e[0])}function X3(e){return e&&!!e.signal}function Q3(e){return!!e.step}function J3(e){return!gv(e)&&("field"in e&&"data"in e)}const K3=v1({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),Z3={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},e5=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function t5(e){const t=gv(e.condition)?e.condition.map(r5):r5(e.condition);return{...n5(e),condition:t}}function n5(e){if(H3(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function r5(e){if(H3(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function i5(e){if(H3(e)){const{expr:t,...n}=e;return{signal:t,...n}}return X3(e)?e:void 0!==e?{value:e}:void 0}function o5(e){return X3(e)?e.signal:xb(e.value)}function a5(e){return X3(e)?e.signal:null==e?null:xb(e)}function s5(e,t,n){for(const r of n){const n=c5(r,t.markDef,t.config);void 0!==n&&(e[r]=i5(n))}return e}function u5(e){return[].concat(e.type,e.style??[])}function l5(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&void 0!==t[i]?t[i]:void 0!==t[e]?t[e]:!o||i&&i!==e?c5(e,t,n,r):void 0}function c5(e,t,n,{vgChannel:r}={}){return T1(r?f5(e,t,n.style):void 0,f5(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function f5(e,t,n){return d5(e,u5(t),n)}function d5(e,t,n){let r;t=jv(t);for(const i of t){const t=n[i];t&&void 0!==t[e]&&(r=t[e])}return r}function h5(e,t){return jv(e).reduce(((e,n)=>(e.field.push(b9(n,t)),e.order.push(n.sort??"ascending"),e)),{field:[],order:[]})}function p5(e,t){const n=[...e];return t.forEach((e=>{for(const t of n)if(Z0(t,e))return;n.push(e)})),n}function m5(e,t){return Z0(e,t)||!t?e:e?[...jv(e),...jv(t)].join(", "):t}function g5(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((Y3(n)||X3(n))&&(Y3(r)||X3(r)))return{explicit:e.explicit,value:m5(n,r)};if(Y3(n)||X3(n))return{explicit:e.explicit,value:n};if(Y3(r)||X3(r))return{explicit:e.explicit,value:r};if(!(Y3(n)||X3(n)||Y3(r)||X3(r)))return{explicit:e.explicit,value:p5(n,r)};throw new Error("It should never reach here")}var y5={},v5={};function b5(e){return`Invalid specification ${r1(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}t(v5,"invalidSpec",(function(){return b5}));function x5(e){return`${"width"==e?"Width":"Height"} "container" only works for single views and layered views.`}function w5(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function _5(e){return e?`Dropping "fit-${e}" because spec has discrete ${H2(e)}.`:'Dropping "fit" because spec has discrete size.'}function k5(e){return`Unknown field for ${e}. Cannot calculate view size.`}function E5(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function S5(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function A5(e){return`The "nearest" transform is not supported for ${e} marks.`}function C5(e){return`Selection not supported for ${e} yet.`}function D5(e){return`Cannot find a selection named "${e}".`}t(v5,"FIT_NON_SINGLE",(function(){return'Autosize "fit" only works for single views and layered views.'})),t(v5,"containerSizeNonSingle",(function(){return x5})),t(v5,"containerSizeNotCompatibleWithAutosize",(function(){return w5})),t(v5,"droppingFit",(function(){return _5})),t(v5,"unknownField",(function(){return k5})),t(v5,"cannotProjectOnChannelWithoutField",(function(){return E5})),t(v5,"cannotProjectAggregate",(function(){return S5})),t(v5,"nearestNotSupportForContinuous",(function(){return A5})),t(v5,"selectionNotSupported",(function(){return C5})),t(v5,"selectionNotFound",(function(){return D5}));t(v5,"SCALE_BINDINGS_CONTINUOUS",(function(){return"Scale bindings are currently only supported for scales with unbinned, continuous domains."}));function M5(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function F5(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}t(v5,"LEGEND_BINDINGS_MUST_HAVE_PROJECTION",(function(){return"Legend bindings are only supported for selections over an individual field or encoding channel."})),t(v5,"cannotLookupVariableParameter",(function(){return M5})),t(v5,"noSameUnitLookup",(function(){return F5}));t(v5,"NEEDS_SAME_SELECTION",(function(){return"The same selection must be used to override scale domains in a layered view."}));function N5(e){return`Unknown repeated value "${e}".`}function $5(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}t(v5,"INTERVAL_INITIALIZED_WITH_X_Y",(function(){return'Interval selections should be initialized using "x" and/or "y" keys.'})),t(v5,"noSuchRepeatedValue",(function(){return N5})),t(v5,"columnsNotSupportByRowCol",(function(){return $5}));function T5(e){return`Unrecognized parse "${e}".`}function O5(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}t(v5,"CONCAT_CANNOT_SHARE_AXIS",(function(){return"Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."})),t(v5,"unrecognizedParse",(function(){return T5})),t(v5,"differentParse",(function(){return O5}));function z5(e){return`Ignoring an invalid transform: ${r1(e)}.`}t(v5,"ADD_SAME_CHILD_TWICE",(function(){return"Attempt to add the same child twice."})),t(v5,"invalidTransformIgnored",(function(){return z5}));function R5(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function P5(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${r1(t)} is overridden by a child projection ${r1(n)}.`}t(v5,"NO_FIELDS_NEEDS_AS",(function(){return'If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'})),t(v5,"customFormatTypeNotAllowed",(function(){return R5})),t(v5,"projectionOverridden",(function(){return P5}));function L5(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${r1(n)}}.`}function B5(e){return`Invalid field type "${e}".`}function I5(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function j5(e){return`Invalid aggregation operator "${e}".`}function U5(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function q5(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function W5(e){return`Position range does not support relative band size for ${e}.`}function H5(e,t){return`Dropping ${r1(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}t(v5,"REPLACE_ANGLE_WITH_THETA",(function(){return"Arc marks uses theta channel rather than angle, replacing angle with theta."})),t(v5,"primitiveChannelDef",(function(){return L5})),t(v5,"invalidFieldType",(function(){return B5})),t(v5,"invalidFieldTypeForCountAggregate",(function(){return I5})),t(v5,"invalidAggregate",(function(){return j5})),t(v5,"missingFieldType",(function(){return U5})),t(v5,"droppingColor",(function(){return q5})),t(v5,"relativeBandSizeNotSupported",(function(){return W5})),t(v5,"emptyFieldDef",(function(){return H5}));function V5(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function G5(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Y5(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function X5(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Q5(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function J5(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function K5(e){return`The ${e} for range marks cannot be an expression`}function Z5(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function e6(e,t){return`Specified orient "${e}" overridden with "${t}".`}t(v5,"LINE_WITH_VARYING_SIZE",(function(){return"Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."})),t(v5,"incompatibleChannel",(function(){return V5})),t(v5,"invalidEncodingChannel",(function(){return G5})),t(v5,"channelShouldBeDiscrete",(function(){return Y5})),t(v5,"channelShouldBeDiscreteOrDiscretizing",(function(){return X5})),t(v5,"facetChannelDropped",(function(){return Q5})),t(v5,"discreteChannelCannotEncode",(function(){return J5})),t(v5,"rangeMarkAlignmentCannotBeExpression",(function(){return K5})),t(v5,"lineWithRange",(function(){return Z5})),t(v5,"orientOverridden",(function(){return e6}));function t6(e){return`Cannot use the scale property "${e}" with non-color channel.`}function n6(e){return`Cannot use the relative band size with ${e} scale.`}function r6(e){return`Using unaggregated domain with raw field has no effect (${r1(e)}).`}function i6(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function o6(e){return`Unaggregated domain is currently unsupported for log scale (${r1(e)}).`}function a6(e){return`Cannot apply size to non-oriented mark "${e}".`}function s6(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function u6(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function l6(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function c6(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function f6(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}function d6(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${r1(n)} and ${r1(r)}). Using ${r1(n)}.`}function h6(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${r1(n)} and ${r1(r)}). Using the union of the two domains.`}function p6(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function m6(e){return`Dropping sort property ${r1(e)} as unioned domains only support boolean or op "count", "min", and "max".`}t(v5,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return"Custom domain scale cannot be unioned with default field-based domain."})),t(v5,"cannotUseScalePropertyWithNonColor",(function(){return t6})),t(v5,"cannotUseRelativeBandSizeWithNonBandScale",(function(){return n6})),t(v5,"unaggregateDomainHasNoEffectForRawField",(function(){return r6})),t(v5,"unaggregateDomainWithNonSharedDomainOp",(function(){return i6})),t(v5,"unaggregatedDomainWithLogScale",(function(){return o6})),t(v5,"cannotApplySizeToNonOrientedMark",(function(){return a6})),t(v5,"scaleTypeNotWorkWithChannel",(function(){return s6})),t(v5,"scaleTypeNotWorkWithFieldDef",(function(){return u6})),t(v5,"scalePropertyNotWorkWithScaleType",(function(){return l6})),t(v5,"scaleTypeNotWorkWithMark",(function(){return c6})),t(v5,"stepDropped",(function(){return f6})),t(v5,"mergeConflictingProperty",(function(){return d6})),t(v5,"mergeConflictingDomainProperty",(function(){return h6})),t(v5,"independentScaleMeansIndependentGuide",(function(){return p6})),t(v5,"domainSortDropped",(function(){return m6}));t(v5,"MORE_THAN_ONE_SORT",(function(){return"Domains that should be unioned has conflicting sort properties. Sort will be set to true."}));t(v5,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return"Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."}));t(v5,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return"Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."}));t(v5,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return"Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect."}));function g6(e){return`Cannot stack "${e}" if there is already "${e}2".`}function y6(e){return`Cannot stack non-linear scale (${e}).`}function v6(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function b6(e,t){return`Invalid ${e}: ${r1(t)}.`}function x6(e){return`Dropping day from datetime ${r1(e)} as day cannot be combined with other units.`}function w6(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function _6(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function k6(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function E6(e){return`1D error band does not support ${e}.`}function S6(e){return`Channel ${e} is required for "binned" bin.`}function A6(e){return`Channel ${e} should not be used with "binned" bin.`}function C6(e){return`Domain for ${e} is required for threshold scale.`}t(v5,"INVALID_CHANNEL_FOR_AXIS",(function(){return"Invalid channel for axis."})),t(v5,"cannotStackRangedMark",(function(){return g6})),t(v5,"cannotStackNonLinearScale",(function(){return y6})),t(v5,"stackNonSummativeAggregate",(function(){return v6})),t(v5,"invalidTimeUnit",(function(){return b6})),t(v5,"droppedDay",(function(){return x6})),t(v5,"errorBarCenterAndExtentAreNotNeeded",(function(){return w6})),t(v5,"errorBarCenterIsUsedWithWrongExtent",(function(){return _6})),t(v5,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return k6})),t(v5,"errorBand1DNotSupport",(function(){return E6})),t(v5,"channelRequiredForBinned",(function(){return S6})),t(v5,"channelShouldNotBeUsedForBinned",(function(){return A6})),t(v5,"domainRequiredForThresholdScale",(function(){return C6}));t(y5,"message",(function(){return v5}));const D6=mv(2);let M6=D6;function F6(e){return M6=e,M6}function N6(){return M6=D6,M6}function $6(...e){M6.warn(...e)}function T6(...e){M6.debug(...e)}function O6(e){if(e&&yv(e))for(const t of U6)if(t in e)return!0;return!1}new WeakMap,t(y5,"set",(function(){return F6})),t(y5,"reset",(function(){return N6})),t(y5,"warn",(function(){return $6})),t(y5,"debug",(function(){return T6}));const z6=["january","february","march","april","may","june","july","august","september","october","november","december"],R6=z6.map((e=>e.substr(0,3))),P6=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],L6=P6.map((e=>e.substr(0,3)));function B6(e,t){const n=[];if(t&&void 0!==e.day&&v1(e).length>1&&(y5.warn(v5.droppedDay(e)),delete(e=e1(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){const r=t?function(e){if(I1(e)&&(e=+e),cb(e))return e-1;{const t=e.toLowerCase(),n=z6.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=R6.indexOf(r);if(-1!==i)return i;throw new Error(v5.invalidTimeUnit("month",e))}}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){const r=t?function(e){if(I1(e)&&(e=+e),cb(e))return e>4&&y5.warn(v5.invalidTimeUnit("quarter",e)),e-1;throw new Error(v5.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;n.push(cb(r)?3*r:`${r}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const r=t?function(e){if(I1(e)&&(e=+e),cb(e))return e%7;{const t=e.toLowerCase(),n=P6.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=L6.indexOf(r);if(-1!==i)return i;throw new Error(v5.invalidTimeUnit("day",e))}}(e.day):e.day;n.push(cb(r)?r+1:`${r}+1`)}else n.push(1);for(const t of["hours","minutes","seconds","milliseconds"]){const r=e[t];n.push(void 0===r?0:r)}return n}function I6(e){const t=B6(e,!0).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}const j6={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},U6=v1(j6);function q6(e){return e.startsWith("utc")}const W6={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function H6(e){return U6.filter((t=>V6(e,t)))}function V6(e,t){const n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function G6(e,t,{end:n}={end:!1}){const r=A1(t),i=q6(e)?"utc":"";let o;const a={};for(const t of U6)V6(e,t)&&(a[t]="quarter"===(s=t)?`(${i}quarter(${r})-1)`:`${i}${s}(${r})`,o=t);var s;return n&&(a[o]+="+1"),function(e){const t=B6(e,!1).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}(a)}function Y6(e){if(!e)return;const t=H6(e);return`timeUnitSpecifier(${r1(t)}, ${r1(W6)})`}function X6(e){if(!e)return;let t;return db(e)?t={unit:e}:yv(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),q6(t.unit)&&(t.utc=!0,t.unit=t.unit.substr(3)),t}function Q6(e){return e&&!!e.field&&void 0!==e.equal}function J6(e){return e&&!!e.field&&void 0!==e.lt}function K6(e){return e&&!!e.field&&void 0!==e.lte}function Z6(e){return e&&!!e.field&&void 0!==e.gt}function e4(e){return e&&!!e.field&&void 0!==e.gte}function t4(e){if(e&&e.field){if(gv(e.range)&&2===e.range.length)return!0;if(X3(e.range))return!0}return!1}function n4(e){return e&&!!e.field&&(gv(e.oneOf)||gv(e.in))}function r4(e){return n4(e)||Q6(e)||t4(e)||J6(e)||Z6(e)||K6(e)||e4(e)}function i4(e,t){return R9(e,{timeUnit:t,wrapTime:!0})}function o4(e,t=!0){const{field:n}=e,r=X6(e.timeUnit)?.unit,i=r?`time(${G6(r,n)})`:b9(e,{expr:"datum"});if(Q6(e))return`${i}===${i4(e.equal,r)}`;if(J6(e)){return`${i}<${i4(e.lt,r)}`}if(Z6(e)){return`${i}>${i4(e.gt,r)}`}if(K6(e)){return`${i}<=${i4(e.lte,r)}`}if(e4(e)){return`${i}>=${i4(e.gte,r)}`}if(n4(e))return`indexof([${function(e,t){return e.map((e=>i4(e,t)))}(e.oneOf,r).join(",")}], ${i}) !== -1`;if(function(e){return e&&!!e.field&&void 0!==e.valid}(e))return a4(i,e.valid);if(t4(e)){const{range:n}=e,o=X3(n)?{signal:`${n.signal}[0]`}:n[0],a=X3(n)?{signal:`${n.signal}[1]`}:n[1];if(null!==o&&null!==a&&t)return"inrange("+i+", ["+i4(o,r)+", "+i4(a,r)+"])";const s=[];return null!==o&&s.push(`${i} >= ${i4(o,r)}`),null!==a&&s.push(`${i} <= ${i4(a,r)}`),s.length>0?s.join(" && "):"true"}throw new Error(`Invalid field predicate: ${r1(e)}`)}function a4(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function s4(e){return r4(e)&&e.timeUnit?{...e,timeUnit:X6(e.timeUnit)?.unit}:e}const u4={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},l4=u4.quantitative,c4=u4.ordinal,f4=u4.temporal,d4=u4.nominal,h4=u4.geojson;v1(u4);const p4="linear",m4="log",g4="pow",y4="sqrt",v4="symlog",b4="time",x4="utc",w4="quantile",_4="quantize",k4="threshold",E4="point",S4="band",A4={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};v1(A4);function C4(e,t){const n=A4[e],r=A4[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const D4={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function M4(e){return D4[e]}const F4=["linear","log","pow","sqrt","symlog","time","utc"],N4=Sb(F4),$4=Sb(["linear","log","pow","sqrt","symlog"]);const T4=Sb(["quantile","quantize","threshold"]),O4=Sb(F4.concat(["quantile","quantize","threshold","sequential","identity"])),z4=Sb(["ordinal","bin-ordinal","point","band"]);function R4(e){return e in z4}function P4(e){return e in O4}function L4(e){return e in N4}function B4(e){return e in T4}function I4(e){return e?.param}const j4={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:U4,domain:q4,range:W4,rangeMax:H4,rangeMin:V4,scheme:G4,...Y4}=(v1(j4),j4),X4=v1(Y4);function Q4(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return L4(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return L4(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"clamp":return L4(e);case"nice":return L4(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return P4(e)&&!a1(["log","time","utc","threshold","quantile"],e)}}function J4(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return A2(e)?void 0:v5.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const K4={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Z4=K4.arc,e8=K4.area,t8=K4.bar,n8=K4.image,r8=K4.line,i8=K4.point,o8=K4.rect,a8=K4.rule,s8=K4.text,u8=K4.tick,l8=K4.trail,c8=K4.circle,f8=K4.square,d8=K4.geoshape;function h8(e){return["line","area","trail"].includes(e)}function p8(e){return["rect","bar","image","arc"].includes(e)}const m8=v1(K4);function g8(e){return e.type}Sb(m8);const y8=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],v8=v1({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),b8=v1({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function x8(e){return e&&null!=e.band}const w8={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},_8={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},k8={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function E8(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=F8(e);return a9(n)&&!R3(n.aggregate)&&i&&L4(i.get("type"))&&!1===i.get("zero")?S8({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function S8({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){if(h8(n.type))return r;return null===l5("invalid",n,i)?r:[A8(e,t),r]}function A8(e,t){return{test:C8(e,!0),..."y"===U2(t)?{field:{group:"height"}}:{value:0}}}function C8(e,t=!0){return a4(db(e)?e:b9(e,{expr:"datum"}),!t)}function D8(e,t,n,r){const i={};if(t&&(i.scale=t),u9(e)){const{datum:t}=e;O6(t)?i.signal=I6(t):X3(t)?i.signal=t.signal:H3(t)?i.signal=t.expr:i.value=t}else i.field=b9(e,n);if(r){const{offset:e,band:t}=r;e&&(i.offset=e),t&&(i.band=t)}return i}function M8({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const a=0<o&&o<1?"datum":void 0,s=b9(t,{expr:a,suffix:i}),u=void 0!==n?b9(n,{expr:a}):b9(t,{suffix:"end",expr:a}),l={};if(0===o||1===o){l.scale=e;const t=0===o?s:u;l.field=t}else{const t=X3(o)?`${o.signal} * ${s} + (1-${o.signal}) * ${u}`:`${o} * ${s} + ${1-o} * ${u}`;l.signal=`scale("${e}", ${t})`}return r&&(l.offset=r),l}function F8({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l,bandPosition:c}){if(t){if(f9(t)){if(d9(t)){c??(c=e9({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:a,timeUnit:l,type:f}=t;if(I3(a)||c&&l&&f===f4)return s&&s.impute?D8(t,o,{binSuffix:"mid"},{offset:u}):c?M8({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):D8(t,o,L9(t,e)?{binSuffix:"range"}:{},{offset:u});if(j3(a)){if(a9(n))return M8({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});{const t=e===W1?V1:G1;y5.warn(v5.channelRequiredForBinned(t))}}}const l=a?.get?.("type");return D8(t,o,R4(l)?{binSuffix:"range"}:{},{offset:u,band:"band"===l?c??t.bandPosition??.5:void 0})}if(h9(t)){const n=u?{offset:u}:{};return{...N8(e,t.value),...n}}}return qv(l)&&(l=l()),l?{...l,...u?{offset:u}:{}}:l}function N8(e,t){return a1(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:a1(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:i5(t)}function $8(e){return e&&"number"!==e&&"time"!==e}function T8(e,t,n){return`${e}(${t}${n?`, ${r1(n)}`:""})`}function O8({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if($8(n))return R8({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const a=z8(e,r,i);if(z9(e)){const n=function(e,t,n,r,i){return!t||n?`${i?"utc":"time"}Format(${e}, '${n=db(n)?n:r}')`:function(e,t,n){if(!e)return;const r=Y6(e);return`${n||q6(e)?"utc":"time"}Format(${t}, ${r})`}(t,e,i)}(a,a9(e)?X6(e.timeUnit)?.unit:void 0,t,o.timeFormat,p9(e)&&e.scale?.type===x4);return n?{signal:n}:void 0}if(t=B8(s9(e),t,o),a9(e)&&I3(e.bin)){return{signal:U8(a,b9(e,{expr:r,binSuffix:"end"}),t,n,o)}}return t||"quantitative"===s9(e)?{signal:`${I8(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function z8(e,t,n){return a9(e)?n?`${b9(e,{expr:t,suffix:"end"})}-${b9(e,{expr:t,suffix:"start"})}`:b9(e,{expr:t}):function(e){const{datum:t}=e;return O6(t)?I6(t):`${r1(t)}`}(e)}function R8({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=z8(e,r,i)),a9(e)&&I3(e.bin)){return{signal:U8(a,b9(e,{expr:r,binSuffix:"end"}),t,n,o)}}return{signal:T8(n,a,t)}}function P8(e,t,n,r,i,o){if(!$8(r)){if(z9(e)){return function(e,t,n,r){if(e)return e;if(t)return{signal:Y6(t)};return r?void 0:n.timeFormat}(n,a9(e)?X6(e.timeUnit)?.unit:void 0,i,o)}return B8(t,n,i)}}function L8(e,t,n){return e&&(X3(e)||"number"===e||"time"===e)?e:z9(t)&&"time"!==n&&"utc"!==n?"time":void 0}function B8(e,t,n){return db(t)?t:e===l4?n.numberFormat:void 0}function I8(e,t){return`format(${e}, "${t||""}")`}function j8(e,t,n,r){return $8(n)?T8(n,e,t):I8(e,(db(t)?t:void 0)??r.numberFormat)}function U8(e,t,n,r,i){const o=j8(e,n,r,i),a=j8(t,n,r,i);return`${a4(e,!1)} ? "null" : ${o} + " – " + ${a}`}const q8="min",W8={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function H8(e){return e in W8}function V8(e){return!!e&&!!e.encoding}function G8(e){return!(!e||"count"!==e.op&&!e.field)}function Y8(e){return!!e&&gv(e)}function X8(e){return"row"in e||"column"in e}function Q8(e){return!!e&&"header"in e}function J8(e){return"facet"in e}function K8(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Z8(e){return"sort"in e}function e9({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(f9(e)&&void 0!==e.bandPosition)return e.bandPosition;if(a9(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return p8(n.type)?0:c5("timeUnitBandPosition",n,r);if(I3(o))return.5}}function t9({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){const s=H2(e),u=l5(a?"size":s,r,i,{vgChannel:s});if(void 0!==u)return u;if(a9(t)){const{timeUnit:e,bin:a}=t;if(e&&!n)return{band:c5("timeUnitBandSize",r,i)};if(I3(a)&&!R4(o))return{band:1}}return p8(r.type)?o?R4(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize:void 0}function n9(e,t,n,r){return!!(I3(e.bin)||e.timeUnit&&d9(e)&&"temporal"===e.type)&&void 0!==e9({fieldDef:e,fieldDef2:t,markDef:n,config:r})}function r9(e){return!!e&&"condition"in e}function i9(e){const t=e&&e.condition;return!!t&&!gv(t)&&a9(t)}function o9(e){const t=e&&e.condition;return!!t&&!gv(t)&&f9(t)}function a9(e){return!(!e||!e.field&&"count"!==e.aggregate)}function s9(e){return e&&e.type}function u9(e){return!!e&&"datum"in e}function l9(e){return d9(e)&&!x9(e)||c9(e)}function c9(e){return u9(e)&&cb(e.datum)}function f9(e){return a9(e)||u9(e)}function d9(e){return!!e&&("field"in e||"count"===e.aggregate)&&"type"in e}function h9(e){return e&&"value"in e&&"value"in e}function p9(e){return!!e&&("scale"in e||"sort"in e)}function m9(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function g9(e){return!!e&&"legend"in e}function y9(e){return!!e&&("format"in e||"formatType"in e)}function v9(e){return n1(e,["legend","axis","header","scale"])}function b9(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(function(e){return"count"===e.aggregate}(e))n=P1("count");else{let r;if(!t.nofn)if(function(e){return"op"in e}(e))r=e.op;else{const{bin:a,aggregate:s,timeUnit:u}=e;I3(a)?(r=B3(a),i=(t.binSuffix??"")+(t.suffix??"")):s?T3(s)?(o=`["${n}"]`,n=`argmax_${s.argmax}`):$3(s)?(o=`["${n}"]`,n=`argmin_${s.argmin}`):r=String(s):u&&(r=function(e){const{utc:t,...n}=X6(e);return n.unit?(t?"utc":"")+v1(n).map((e=>_1(`${"unit"===e?"":`_${e}_`}${n[e]}`))).join(""):(t?"utc":"")+"timeunit"+v1(n).map((e=>_1(`_${e}_${n[e]}`))).join("")}(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}r&&(n=n?`${r}_${n}`:r)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?N1(n):t.expr?C1(n,t.expr)+o:M1(n)+o}function x9(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return a9(e)&&!!e.bin;case"temporal":return!1}throw new Error(v5.invalidFieldType(e.type))}const w9=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(T3(t))return`${i} for argmax(${t.argmax})`;if($3(t))return`${i} for argmin(${t.argmin})`;const o=X6(r),a=t||o?.unit||o?.maxbins&&"timeunit"||I3(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}(e);default:return function(e,t){const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if("count"===o)return t.countTitle;if(I3(r))return`${n} (binned)`;if(i){const e=X6(i)?.unit;if(e)return`${n} (${H6(e).join("-")})`}else if(o)return T3(o)?`${n} for max ${o.argmax}`:$3(o)?`${n} for min ${o.argmin}`:`${S1(o)} of ${n}`;return n}(e,t)}};let _9=w9;function k9(e){_9=e}function E9(e,t,{allowDisabling:n,includeDefault:r=!0}){const i=S9(e)?.title;if(!a9(e))return i;const o=e,a=r?A9(o,t):void 0;return n?T1(i,o.title,a):i??o.title??a}function S9(e){return m9(e)&&e.axis?e.axis:g9(e)&&e.legend?e.legend:Q8(e)&&e.header?e.header:void 0}function A9(e,t){return _9(e,t)}function C9(e){if(y9(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=S9(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function D9(e){return a9(e)?e:i9(e)?e.condition:void 0}function M9(e){return f9(e)?e:o9(e)?e.condition:void 0}function F9(e,t,n,r={}){if(db(e)||cb(e)||sb(e)){const n=db(e)?"string":cb(e)?"number":"boolean";return y5.warn(v5.primitiveChannelDef(t,n,e)),{value:e}}return f9(e)?N9(e,t,n,r):o9(e)?{...e,condition:N9(e.condition,t,n,r)}:e}function N9(e,t,n,r){if(y9(e)){const{format:i,formatType:o,...a}=e;if($8(o)&&!n.customFormatTypes)return y5.warn(v5.customFormatTypeNotAllowed(t)),N9(a,t,n,r)}else{const i=m9(e)?"axis":g9(e)?"legend":Q8(e)?"header":null;if(i&&e[i]){const{format:o,formatType:a,...s}=e[i];if($8(a)&&!n.customFormatTypes)return y5.warn(v5.customFormatTypeNotAllowed(t)),N9({...e,[i]:s},t,n,r)}}return a9(e)?$9(e,t,r):function(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=cb(n)?"quantitative":db(n)?"nominal":O6(n)?"temporal":void 0,{...e,type:t}}(e)}function $9(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s={...e};if(n||!r||O3(r)||T3(r)||$3(r)||(y5.warn(v5.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=X6(i)),a&&(s.field=`${a}`),I3(o)&&(s.bin=T9(o,t)),j3(o)&&!u3(t)&&y5.warn(v5.channelShouldNotBeUsedForBinned(t)),d9(s)){const{type:e}=s,t=function(e){if(e)switch(e=e.toLowerCase()){case"q":case l4:return"quantitative";case"t":case f4:return"temporal";case"o":case c4:return"ordinal";case"n":case d4:return"nominal";case h4:return"geojson"}}(e);e!==t&&(s.type=t),"quantitative"!==e&&R3(r)&&(y5.warn(v5.invalidFieldTypeForCountAggregate(e,r)),s.type="quantitative")}else if(!j2(t)){const e=function(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Z8(e)&&gv(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!T3(n)&&!$3(n))return"quantitative";if(p9(e)&&e.scale?.type)switch(A4[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(s,t);s.type=e}if(d9(s)){const{compatible:e,warning:n}=function(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case j1:case U1:case q1:return x9(e)?O9:{compatible:!1,warning:v5.channelShouldBeDiscrete(t)};case W1:case H1:case n2:case r2:case i2:case h2:case m2:case g2:case y2:case v2:case b2:case s2:case Q1:case Y1:case x2:return O9;case Z1:case t2:case K1:case e2:return n!==l4?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:O9;case u2:case l2:case c2:case f2:case a2:case J1:case X1:case V1:case G1:return"nominal"!==n||e.sort?O9:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case o2:case d2:return x9(e)||p9(r=e)&&B4(r.scale?.type)?O9:{compatible:!1,warning:v5.channelShouldBeDiscreteOrDiscretizing(t)};case p2:return"nominal"!==e.type||"sort"in e?O9:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}var r}(s,t)||{};!1===e&&y5.warn(n)}if(Z8(s)&&db(s.sort)){const{sort:e}=s;if(H8(e))return{...s,sort:{encoding:e}};const t=e.substr(1);if("-"===e.charAt(0)&&H8(t))return{...s,sort:{encoding:t,order:"descending"}}}if(Q8(s)){const{header:e}=s;if(e){const{orient:t,...n}=e;if(t)return{...s,header:{...n,labelOrient:e.labelOrient||t,titleOrient:e.titleOrient||t}}}}return s}function T9(e,t){return sb(e)?{maxbins:W3(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:W3(t)}}const O9={compatible:!0};function z9(e){const{formatType:t}=C9(e);return"time"===t||!t&&((n=e)&&("temporal"===n.type||a9(n)&&!!n.timeUnit));var n}function R9(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){const o=t&&X6(t)?.unit;let a,s=o||"temporal"===n;return H3(e)?a=e.expr:X3(e)?a=e.signal:O6(e)?(s=!0,a=I6(e)):(db(e)||cb(e))&&s&&(a=`datetime(${r1(e)})`,function(e){return!!j6[e]}(o)&&(cb(e)&&e<1e4||db(e)&&isNaN(Date.parse(e)))&&(a=I6({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:r1(e)}function P9(e,t){const{type:n}=e;return t.map((t=>{const r=R9(t,{timeUnit:a9(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function L9(e,t){return I3(e.bin)?E3(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const B9={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function I9(e){return e&&e.condition}const j9=["domain","grid","labels","ticks","title"],U9={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},q9={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},W9={...q9,style:1,labelExpr:1,encoding:1};function H9(e){return!!W9[e]}v1(W9);const V9=v1({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function G9(e){return"mark"in e}class Y9{constructor(e,t){this.name=e,this.run=t}hasMatchingType(e){return!!G9(e)&&(g8(t=e.mark)?t.type:t)===this.name;var t}}function X9(e,t){const n=e&&e[t];return!!n&&(gv(n)?s1(n,(e=>!!e.field)):a9(n)||i9(n))}function Q9(e){return s1(F2,(t=>{if(X9(e,t)){const n=e[t];if(gv(n))return s1(n,(e=>!!e.aggregate));{const e=D9(n);return e&&!!e.aggregate}}return!1}))}function J9(e,t){const n=[],r=[],i=[],o=[],a={};return e7(e,((s,u)=>{if(a9(s)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=s;if(c||d||f){const e=S9(s),p=e&&e.title;let m=b9(s,{forAs:!0});const g={...p?[]:{title:E9(s,t,{allowDisabling:!0})},...h,field:m};if(c){let e;if(T3(c)?(e="argmax",m=b9({op:"argmax",field:c.argmax},{forAs:!0}),g.field=`${m}.${l}`):$3(c)?(e="argmin",m=b9({op:"argmin",field:c.argmin},{forAs:!0}),g.field=`${m}.${l}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(e=c),e){const t={op:e,as:m};l&&(t.field=l),o.push(t)}}else if(n.push(m),d9(s)&&I3(f)){if(r.push({bin:f,field:l,as:m}),n.push(b9(s,{binSuffix:"end"})),L9(s,u)&&n.push(b9(s,{binSuffix:"range"})),u3(u)){const e={field:`${m}_end`};a[`${u}2`]=e}g.bin="binned",j2(u)||(g.type=l4)}else if(d){i.push({timeUnit:d,field:l,as:m});const e=d9(s)&&s.type!==f4&&"time";e&&(u===h2||u===y2?g.formatType=e:!function(e){return!!i3[e]}(u)?u3(u)&&(g.axis={formatType:e,...g.axis}):g.legend={formatType:e,...g.legend})}a[u]=g}else n.push(l),a[u]=e[u]}else a[u]=e[u]})),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function K9(e,t,n,r){return v1(e).reduce(((i,o)=>{if(!B2(o))return y5.warn(v5.invalidEncodingChannel(o)),i;const a=e[o];if("angle"!==o||"arc"!==t||e.theta||(y5.warn(v5.REPLACE_ANGLE_WITH_THETA),o=Q1),!function(e,t,n){const r=S3(t,n);if(!r)return!1;if("binned"===r){const n=e[t===V1?W1:H1];return!!(a9(n)&&a9(e[t])&&j3(n.bin))}return!0}(e,o,t))return y5.warn(v5.incompatibleChannel(o,t)),i;if(o===a2&&"line"===t){if(D9(e[o])?.aggregate)return y5.warn(v5.LINE_WITH_VARYING_SIZE),i}if(o===n2&&(n?"fill"in e:"stroke"in e))return y5.warn(v5.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),i;if(o===m2||o===p2&&!gv(a)&&!h9(a)||o===y2&&gv(a))a&&(i[o]=jv(a).reduce(((e,t)=>(a9(t)?e.push($9(t,o)):y5.warn(v5.emptyFieldDef(t,o)),e)),[]));else{if(o===y2&&null===a)i[o]=null;else if(!(a9(a)||u9(a)||h9(a)||r9(a)||X3(a)))return y5.warn(v5.emptyFieldDef(a,o)),i;i[o]=F9(a,o,r)}return i}),{})}function Z9(e,t){const n={};for(const r of v1(e)){const i=F9(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function e7(e,t,n){if(e)for(const r of v1(e)){const i=e[r];if(gv(i))for(const e of i)t.call(n,e,r);else t.call(n,i,r)}}function t7(e,t){return v1(t).reduce(((n,r)=>{switch(r){case W1:case H1:case v2:case x2:case b2:case V1:case G1:case Q1:case J1:case Y1:case X1:case K1:case Z1:case e2:case t2:case h2:case o2:case s2:case y2:return n;case p2:if("line"===e||"trail"===e)return n;case m2:case g2:{const e=t[r];if(gv(e)||a9(e))for(const t of jv(e))t.aggregate||n.push(b9(t,{}));return n}case a2:if("trail"===e)return n;case n2:case r2:case i2:case u2:case l2:case c2:case d2:case f2:{const e=D9(t[r]);return e&&!e.aggregate&&n.push(b9(e,{})),n}}}),[])}function n7(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};return{tooltip:[...e.map((({fieldPrefix:e,titlePrefix:n})=>{const i=r?` of ${r7(t)}`:"";return{field:e+t.field,type:t.type,title:X3(n)?{signal:`${n}"${escape(i)}"`}:n+i}})),...f1(function(e){const t=[];for(const n of v1(e))if(X9(e,n)){const r=jv(e[n]);for(const e of r)a9(e)?t.push(e):i9(e)&&t.push(e.condition)}return t}(n).map(v9),i1)]}}function r7(e){const{title:t,field:n}=e;return T1(t,n)}function i7(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:u,positionPrefix:l,endPositionPrefix:c,extraEncoding:f={}})=>{const d=r7(n);return o7(e,s,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...void 0!==d?{title:d}:{},...void 0!==o?{scale:o}:{},...void 0!==a?{axis:a}:{}},...db(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function o7(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||void 0===e[t]&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...a?{opacity:a}:{},...g8(r.mark)?r.mark:{type:r.mark},style:`${s}-${t}`,...sb(e[t])?{}:e[t]}}]:[]}function a7(e,t,n){const{encoding:r}=e,i="vertical"===t?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:s7(o,n),continuousAxisChannelDef2:s7(a,n),continuousAxisChannelDefError:s7(s,n),continuousAxisChannelDefError2:s7(u,n),continuousAxis:i}}function s7(e,t){if(e&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&y5.warn(v5.errorBarContinuousAxisHasCustomizedAggregate(n,t)),r}return e}function u7(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(g8(n)&&n.orient)return n.orient;if(l9(i)){if(l9(o)){const e=a9(i)&&i.aggregate,n=a9(o)&&o.aggregate;if(e||n!==t){if(n||e!==t){if(e===t&&n===t)throw new Error("Both x and y cannot have aggregate");return z9(o)&&!z9(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(l9(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const l7="boxplot",c7=new Y9(l7,d7);function f7(e){return cb(e)?"tukey":e}function d7(e,{config:t}){e={...e,encoding:Z9(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...a}=e,s=g8(n)?n:{type:n};i&&y5.warn(v5.selectionNotSupported("boxplot"));const u=s.extent??t.boxplot.extent,l=l5("size",s,t),c=f7(u),{bins:f,timeUnits:d,transform:h,continuousAxisChannelDef:p,continuousAxis:m,groupby:g,aggregate:y,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:w}=function(e,t,n){const r=u7(e,l7),{continuousAxisChannelDef:i,continuousAxis:o}=a7(e,r,l7),a=i.field,s=f7(t),u=[...h7(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:("min-max"===s?"lower_whisker_":"min_")+a},{op:"max",field:a,as:("min-max"===s?"upper_whisker_":"max_")+a}],l="min-max"===s||"tukey"===s?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=function(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(gv(t)){for(const e of t)e.aggregate?(r||(r=[]),r.push(e)):(i||(i=[]),i.push(e));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return gv(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=J9(h,n),b="vertical"===r?"horizontal":"vertical",x=r,w=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:w,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:d}}(e,u,t),{color:_,size:k,...E}=v,S=e=>i7(s,m,p,e,t.boxplot),A=S(E),C=S(v),D=S({...E,...k?{size:k}:{}}),M=n7([{fieldPrefix:"min-max"===c?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===c?"lower_whisker_":"min_",titlePrefix:"Min"}],p,v),F={type:"tick",color:"black",opacity:1,orient:b,invalid:null,aria:!1},N="min-max"===c?M:n7([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,v),$=[...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:N})],T=[..."tukey"!==c?$:[],...C({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:null,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...D({partName:"median",mark:{type:"tick",invalid:null,...yv(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if("min-max"===c)return{...a,transform:(a.transform??[]).concat(h),layer:T};const O=`datum["lower_box_${p.field}"]`,z=`datum["upper_box_${p.field}"]`,R=`(${z} - ${O})`,P=`${O} - ${u} * ${R}`,L=`${z} + ${u} * ${R}`,B=`datum["${p.field}"]`,I={joinaggregate:h7(p.field),groupby:g},j={transform:[{filter:`(${P} <= ${B}) && (${B} <= ${L})`},{aggregate:[{op:"min",field:p.field,as:`lower_whisker_${p.field}`},{op:"max",field:p.field,as:`upper_whisker_${p.field}`},{op:"min",field:`lower_box_${p.field}`,as:`lower_box_${p.field}`},{op:"max",field:`upper_box_${p.field}`,as:`upper_box_${p.field}`},...y],groupby:g}],layer:$},{tooltip:U,...q}=E,{scale:W,axis:H}=p,V=r7(p),G=n1(H,["title"]),Y=o7(s,"outliers",t.boxplot,{transform:[{filter:`(${B} < ${P}) || (${B} > ${L})`}],mark:"point",encoding:{[m]:{field:p.field,type:p.type,...void 0!==V?{title:V}:{},...void 0!==W?{scale:W}:{},...y1(G)?{}:{axis:G}},...q,..._?{color:_}:{},...w?{tooltip:w}:{}}})[0];let X;const Q=[...f,...d,I];return Y?X={transform:Q,layer:[Y,j]}:(X=j,X.transform.unshift(...Q)),{...a,layer:[X,{transform:h,layer:T}]}}function h7(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}const p7="errorbar",m7=new Y9(p7,g7);function g7(e,{config:t}){e={...e,encoding:Z9(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:u,tooltipEncoding:l}=v7(e,p7,t);delete o.size;const c=i7(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,h={type:"tick",orient:a,aria:!1,...void 0!==f?{thickness:f}:{},...void 0!==d?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==f?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function y7(e,t){const{encoding:n}=e;if(function(e){return(f9(e.x)||f9(e.y))&&!f9(e.x2)&&!f9(e.y2)&&!f9(e.xError)&&!f9(e.xError2)&&!f9(e.yError)&&!f9(e.yError2)}(n))return{orient:u7(e,t),inputType:"raw"};const r=function(e){return f9(e.x2)||f9(e.y2)}(n),i=function(e){return f9(e.xError)||f9(e.xError2)||f9(e.yError)||f9(e.yError2)}(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const e=n.x2,r=n.y2;if(f9(e)&&f9(r))throw new Error(`${t} cannot have both x2 and y2`);if(f9(e)){if(l9(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(f9(r)){if(l9(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const e=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(f9(r)&&!f9(e))throw new Error(`${t} cannot have xError2 without xError`);if(f9(s)&&!f9(i))throw new Error(`${t} cannot have yError2 without yError`);if(f9(e)&&f9(i))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(f9(e)){if(l9(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(f9(i)){if(l9(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function v7(e,t,n){const{mark:r,encoding:i,params:o,projection:a,...s}=e,u=g8(r)?r:{type:r};o&&y5.warn(v5.selectionNotSupported(t));const{orient:l,inputType:c}=y7(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=a7(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=function(e,t,n,r,i,o,a,s){let u=[],l=[];const c=t.field;let f,d=!1;if("raw"===o){const t=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,n=e.extent?e.extent:"mean"===t?"stderr":"iqr";if("median"===t!=("iqr"===n)&&y5.warn(v5.errorBarCenterIsUsedWithWrongExtent(t,n,a)),"stderr"===n||"stdev"===n)u=[{op:n,field:c,as:`extent_${c}`},{op:t,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:S1(t)},{fieldPrefix:"upper_",titlePrefix:b7(t,n,"+")},{fieldPrefix:"lower_",titlePrefix:b7(t,n,"-")}],d=!0;else{let e,t,r;"ci"===n?(e="mean",t="ci0",r="ci1"):(e="median",t="q1",r="q3"),u=[{op:t,field:c,as:`lower_${c}`},{op:r,field:c,as:`upper_${c}`},{op:e,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:E9({field:c,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:E9({field:c,aggregate:t,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:E9({field:c,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&y5.warn(v5.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),"aggregated-upper-lower"===o?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):"aggregated-error"===o&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const e of l)f.push({fieldPrefix:e.as.substring(0,6),titlePrefix:F1(F1(e.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}(u,f,d,h,p,c,t,n),{[m]:x,["x"===m?"x2":"y2"]:w,["x"===m?"xError":"yError"]:_,["x"===m?"xError2":"yError2"]:k,...E}=i,{bins:S,timeUnits:A,aggregate:C,groupby:D,encoding:M}=J9(E,n),F=[...C,...g],N="raw"!==c?[]:D,$=n7(v,f,M,b);return{transform:[...s.transform??[],...S,...A,...0===F.length?[]:[{aggregate:F,groupby:N}],...y],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:u,outerSpec:s,tooltipEncoding:$}}function b7(e,t,n){return`${S1(e)} ${n} ${t}`}const x7="errorband",w7=new Y9(x7,_7);function _7(e,{config:t}){e={...e,encoding:Z9(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:u}=v7(e,x7,t),l=a,c=i7(l,i,r,o,t.errorband),f=void 0!==e.encoding.x&&void 0!==e.encoding.y;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?y5.warn(v5.errorBand1DNotSupport("interpolate")):l.tension&&y5.warn(v5.errorBand1DNotSupport("tension")),{...s,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const k7={};function E7(e,t,n){const r=new Y9(e,t);k7[e]={normalizer:r,parts:n}}E7(l7,d7,["box","median","outliers","rule","ticks"]),E7(p7,g7,["ticks","rule"]),E7(x7,_7,["band","borders"]);const S7=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],A7={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},C7={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},D7=v1(A7),M7=v1(C7),F7=v1({header:1,headerRow:1,headerColumn:1,headerFacet:1}),N7=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],$7={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},T7=(v1($7),"_vgsid_"),O7={point:{on:"click",fields:[T7],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function z7(e){return!(!e||"legend"!==e&&!e.legend)}function R7(e){return z7(e)&&yv(e)}function P7(e){return!!e.select}function L7(e){const t=[];for(const n of e||[]){if(P7(n))continue;const{expr:e,bind:r,...i}=n;if(r&&e){const n={...i,bind:r,init:e};t.push(n)}else{const n={...i,...e?{update:e}:{},...r?{bind:r}:{}};t.push(n)}}return t}function B7(e){return"concat"in e}function I7(e){return"vconcat"in e}function j7(e){return"hconcat"in e}function U7(e){return yv(e)&&void 0!==e.step}function q7(e){return e.view||e.width||e.height}const W7=v1({align:1,bounds:1,center:1,columns:1,spacing:1});function H7(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function V7(e,t){const n=G7(e,t);return U7(n)?n.step:Y7}function G7(e,t){return T1(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const Y7=20,X7={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Y7},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:_8,circle:{},geoshape:{},image:{},line:{},point:{},rect:k8,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:O7,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},Q7=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],J7={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},K7={blue:Q7[0],orange:Q7[1],red:Q7[2],teal:Q7[3],green:Q7[4],yellow:Q7[5],purple:Q7[6],pink:Q7[7],brown:Q7[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Z7(e){const t=v1(e||{}),n={};for(const r of t){const t=e[r];n[r]=I9(t)?t5(t):n5(t)}return n}const eee=[...b8,...V9,...F7,"background","padding","legend","lineBreak","scale","style","title","view"];function tee(e={}){const{color:t,font:n,fontSize:r,...i}=e,o=bv({},X7,n?function(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function(e={}){return{signals:[{name:"color",value:yv(e)?{...K7,...e}:K7}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},r?function(e){return{signals:[{name:"fontSize",value:yv(e)?{...J7,...e}:J7}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},i||{}),a=n1(o,eee);for(const e of["background","lineBreak","padding"])o[e]&&(a[e]=n5(o[e]));for(const e of b8)o[e]&&(a[e]=V3(o[e]));for(const e of V9)o[e]&&(a[e]=Z7(o[e]));for(const e of F7)o[e]&&(a[e]=V3(o[e]));return o.legend&&(a.legend=V3(o.legend)),o.scale&&(a.scale=V3(o.scale)),o.style&&(a.style=function(e){const t=v1(e),n={};for(const r of t)n[r]=Z7(e[r]);return n}(o.style)),o.title&&(a.title=V3(o.title)),o.view&&(a.view=V3(o.view)),a}const nee=["view",...m8],ree=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],iee={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]};function oee(e){e=e1(e);for(const t of ree)delete e[t];if(e.axis)for(const t in e.axis)I9(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of S7)delete e.legend[t];if(e.mark){for(const t of v8)delete e.mark[t];e.mark.tooltip&&yv(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(L7(e.params)),delete e.params);for(const t of nee){for(const n of v8)delete e[t][n];const n=iee[t];if(n)for(const r of n)delete e[t][r];aee(e,t)}for(const t of v1(k7))delete e[t];!function(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=G3(e.title);y1(t)||(e.style["group-title"]={...e.style["group-title"],...t});y1(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n});y1(r)?delete e.title:e.title=r}(e);for(const t in e)yv(e[t])&&y1(e[t])&&delete e[t];return y1(e)?void 0:e}function aee(e,t,n,r){"view"===t&&(n="cell");const i={...r?e[t][r]:e[t],...e.style[n??t]};y1(i)||(e.style[n??t]=i),r||delete e[t]}function see(e){return"layer"in e}class uee{map(e,t){return J8(e)?this.mapFacet(e,t):function(e){return"repeat"in e}(e)?this.mapRepeat(e,t):j7(e)?this.mapHConcat(e,t):I7(e)?this.mapVConcat(e,t):B7(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}mapLayerOrUnit(e,t){if(see(e))return this.mapLayer(e,t);if(G9(e))return this.mapUnit(e,t);throw new Error(v5.invalidSpec(e))}mapLayer(e,t){return{...e,layer:e.layer.map((e=>this.mapLayerOrUnit(e,t)))}}mapHConcat(e,t){return{...e,hconcat:e.hconcat.map((e=>this.map(e,t)))}}mapVConcat(e,t){return{...e,vconcat:e.vconcat.map((e=>this.map(e,t)))}}mapConcat(e,t){const{concat:n,...r}=e;return{...r,concat:n.map((e=>this.map(e,t)))}}mapFacet(e,t){return{...e,spec:this.map(e.spec,t)}}mapRepeat(e,t){return{...e,spec:this.map(e.spec,t)}}}const lee={zero:1,center:1,normalize:1};const cee=new Set([Z4,t8,e8,a8,i8,c8,f8,r8,s8,u8]),fee=new Set([t8,e8,Z4]);function dee(e,t){const n="x"===t?"y":"radius",r=e[t],i=e[n];if(a9(r)&&a9(i))if("quantitative"===s9(r)&&"quantitative"===s9(i)){if(r.stack)return t;if(i.stack)return n;const e=a9(r)&&!!r.aggregate;if(e!==(a9(i)&&!!i.aggregate))return e?t:n;{const e=r.scale?.type,o=i.scale?.type;if(e&&"linear"!==e)return n;if(o&&"linear"!==o)return t}}else{if("quantitative"===s9(r))return t;if("quantitative"===s9(i))return n}else{if("quantitative"===s9(r))return t;if("quantitative"===s9(i))return n}}function hee(e,t,n={}){const r=g8(e)?e.type:e;if(!cee.has(r))return null;const i=dee(t,"x")||dee(t,"theta");if(!i)return null;const o=t[i],a=a9(o)?b9(o,{}):void 0;let s=function(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(i),u=t[s],l=a9(u)?b9(u,{}):void 0;l===a&&(l=void 0,u=void 0,s=void 0);const c=o3.reduce(((e,n)=>{if("tooltip"!==n&&X9(t,n)){const r=t[n];for(const t of jv(r)){const r=D9(t);if(r.aggregate)continue;const i=b9(r,{});i&&i===l||e.push({channel:n,fieldDef:r})}}return e}),[]);let f;if(void 0!==o.stack?f=sb(o.stack)?o.stack?"zero":null:o.stack:fee.has(r)&&(f="zero"),!f||!(f in lee))return null;if(Q9(t)&&0===c.length)return null;if(o?.scale?.type&&o?.scale?.type!==p4){if(n.disallowNonLinearStack)return null;y5.warn(v5.cannotStackNonLinearScale(o.scale.type))}return f9(t[W2(i)])?(void 0!==o.stack&&y5.warn(v5.cannotStackRangedMark(i)),null):(a9(o)&&o.aggregate&&!a1(P3,o.aggregate)&&y5.warn(v5.stackNonSummativeAggregate(o.aggregate)),{groupbyChannel:u?s:void 0,groupbyField:l,fieldChannel:i,impute:null!==o.impute&&h8(r),stackBy:c,offset:f})}function pee(e){const{point:t,line:n,...r}=e;return v1(r).length>1?r:r.type}function mee(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:n1(e[t],["point","line"])});return e}function gee(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?yv(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?yv(t.point)?t.point:{}:void 0}function yee(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class vee{constructor(){this.name="path-overlay"}hasMatchingType(e,t){if(G9(e)){const{mark:n,encoding:r}=e,i=g8(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!gee(i,t[i.type],r);case"area":return!!gee(i,t[i.type],r)||!!yee(i,t[i.type])}}return!1}run(e,t,n){const{config:r}=t,{params:i,projection:o,mark:a,encoding:s,...u}=e,l=Z9(s,r),c=g8(a)?a:{type:a},f=gee(c,r[c.type],l),d="area"===c.type&&yee(c,r[c.type]),h=[{...i?{params:i}:{},mark:pee({..."area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{},...c}),encoding:n1(l,["shape"])}],p=hee(c,l);let m=l;if(p){const{fieldChannel:e,offset:t}=p;m={...l,[e]:{...l[e],...t?{stack:t}:{}}}}return d&&h.push({...o?{projection:o}:{},mark:{type:"line",...t1(c,["clip","interpolate","tension","tooltip"]),...d},encoding:m}),f&&h.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...t1(c,["clip","tooltip"]),...f},encoding:m}),n({...u,layer:h},{...t,config:mee(r)})}}function bee(e,t){return t?X8(e)?See(e,t):_ee(e,t):e}function xee(e,t){return t?See(e,t):e}function wee(e,t,n){const r=t[e];return(i=r)&&!db(i)&&"repeat"in i?r.repeat in n?{...t,[e]:n[r.repeat]}:void y5.warn(v5.noSuchRepeatedValue(r.repeat)):t;var i}function _ee(e,t){if(void 0!==(e=wee("field",e,t))){if(null===e)return null;if(Z8(e)&&G8(e.sort)){const n=wee("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function kee(e,t){if(a9(e))return _ee(e,t);{const n=wee("datum",e,t);return n===e||n.type||(n.type="nominal"),n}}function Eee(e,t){if(!f9(e)){if(o9(e)){const n=kee(e.condition,t);if(n)return{...e,condition:n};{const{condition:t,...n}=e;return n}}return e}{const n=kee(e,t);if(n)return n;if(r9(e))return{condition:e.condition}}}function See(e,t){const n={};for(const r in e)if(tb(e,r)){const i=e[r];if(gv(i))n[r]=i.map((e=>Eee(e,t))).filter((e=>e));else{const e=Eee(i,t);void 0!==e&&(n[r]=e)}}return n}class Aee{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(G9(e)){const{encoding:t,mark:n}=e;if("line"===n||g8(n)&&"line"===n.type)for(const e of I2){const n=t[U2(e)];if(t[e]&&(a9(n)&&!j3(n.bin)||u9(n)))return!0}}return!1}run(e,t,n){const{encoding:r,mark:i}=e;return y5.warn(v5.lineWithRange(!!r.x2,!!r.y2)),console.log(i),n({...e,mark:yv(i)?{...i,type:"rule"}:"rule"},t)}}function Cee({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...v1(e),...v1(t)]);for(const o of i){const i=t[o],a=e[o];if(f9(i)){const e={...a,...i};r[o]=e}else o9(i)?r[o]={...i,condition:{...a,...i.condition}}:i||null===i?r[o]=i:(n||h9(a)||X3(a)||f9(a)||gv(a))&&(r[o]=a)}}else r=t;return!r||y1(r)?void 0:r}function Dee(e){const{parentProjection:t,projection:n}=e;return t&&n&&y5.warn(v5.projectionOverridden({parentProjection:t,projection:n})),n??t}function Mee(e){return"filter"in e}function Fee(e){return"lookup"in e}function Nee(e){return"pivot"in e}function $ee(e){return"density"in e}function Tee(e){return"quantile"in e}function Oee(e){return"regression"in e}function zee(e){return"loess"in e}function Ree(e){return"sample"in e}function Pee(e){return"window"in e}function Lee(e){return"joinaggregate"in e}function Bee(e){return"flatten"in e}function Iee(e){return"calculate"in e}function jee(e){return"bin"in e}function Uee(e){return"impute"in e}function qee(e){return"timeUnit"in e}function Wee(e){return"aggregate"in e}function Hee(e){return"stack"in e}function Vee(e){return"fold"in e}function Gee(e,t){const{transform:n,...r}=e;if(n){return{...r,transform:n.map((e=>{if(Mee(e))return{filter:Qee(e,t)};if(jee(e)&&U3(e.bin))return{...e,bin:Xee(e.bin)};if(Fee(e)){const{selection:t,...n}=e.from;return t?{...e,from:{param:t,...n}}:e}return e}))}}return e}function Yee(e,t){const n=e1(e);if(a9(n)&&U3(n.bin)&&(n.bin=Xee(n.bin)),p9(n)&&n.scale?.domain?.selection){const{selection:e,...t}=n.scale.domain;n.scale.domain={...t,...e?{param:e}:{}}}if(r9(n))if(gv(n.condition))n.condition=n.condition.map((e=>{const{selection:n,param:r,test:i,...o}=e;return r?e:{...o,test:Qee(e,t)}}));else{const{selection:e,param:r,test:i,...o}=Yee(n.condition,t);n.condition=r?n.condition:{...o,test:Qee(n.condition,t)}}return n}function Xee(e){const t=e.extent;if(t?.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function Qee(e,t){const n=e=>K0(e,(e=>{var n;const r={param:e,empty:t.emptySelections[e]??!0};return(n=t.selectionPredicates)[e]??(n[e]=[]),t.selectionPredicates[e].push(r),r}));return e.selection?n(e.selection):K0(e.test||e.filter,(e=>e.selection?n(e.selection):e))}class Jee extends uee{map(e,t){const n=t.selections??[];if(e.params&&!G9(e)){const t=[];for(const r of e.params)P7(r)?n.push(r):t.push(r);e.params=t}return t.selections=n,super.map(e,Kee(e,t))}mapUnit(e,t){const n=t.selections;if(!n||!n.length)return e;const r=(t.path??[]).concat(e.name),i=[];for(const t of n)if(t.views&&t.views.length)for(const n of t.views)(db(n)&&(n===e.name||r.indexOf(n)>=0)||gv(n)&&n.map((e=>r.indexOf(e))).every(((e,t,n)=>-1!==e&&(0===t||e>n[t-1]))))&&i.push(t);else i.push(t);return i.length&&(e.params=i),e}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Jee.prototype[e];Jee.prototype[e]=function(e,n){return t.call(this,e,Kee(e,n))}}function Kee(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Zee(e,t){void 0===t&&(t=tee(e.config));const n=function(e,t={}){const n={config:t};return nte.map(ete.map(tte.map(e,n),n),n)}(e,t),{width:r,height:i}=e,o=function(e,t,n){let{width:r,height:i}=t;const o=G9(e)||see(e),a={};o?"container"==r&&"container"==i?(a.type="fit",a.contains="padding"):"container"==r?(a.type="fit-x",a.contains="padding"):"container"==i&&(a.type="fit-y",a.contains="padding"):("container"==r&&(y5.warn(v5.containerSizeNonSingle("width")),r=void 0),"container"==i&&(y5.warn(v5.containerSizeNonSingle("height")),i=void 0));const s={type:"pad",...a,...n?rte(n.autosize):{},...rte(e.autosize)};"fit"!==s.type||o||(y5.warn(v5.FIT_NON_SINGLE),s.type="pad");"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&y5.warn(v5.containerSizeNotCompatibleWithAutosize("width"));"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&y5.warn(v5.containerSizeNotCompatibleWithAutosize("height"));if(Z0(s,{type:"pad"}))return;return s}(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const ete=new class extends uee{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[c7,m7,w7,new vee,new Aee]}map(e,t){if(G9(e)){const n=X9(e.encoding,j1),r=X9(e.encoding,U1),i=X9(e.encoding,q1);if(n||r||i)return this.mapFacetedUnit(e,t)}return super.map(e,t)}mapUnit(e,t){const{parentEncoding:n,parentProjection:r}=t,i=xee(e.encoding,t.repeater),o={...e,...i?{encoding:i}:{}};if(n||r)return this.mapUnitWithParentEncodingOrProjection(o,t);const a=this.mapLayerOrUnit.bind(this);for(const e of this.nonFacetUnitNormalizers)if(e.hasMatchingType(o,t.config))return e.run(o,t,a);return o}mapRepeat(e,t){return function(e){return!gv(e.repeat)&&e.repeat.layer}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}mapLayerRepeat(e,t){const{repeat:n,spec:r,...i}=e,{row:o,column:a,layer:s}=n,{repeater:u={},repeaterPrefix:l=""}=t;return o||a?this.mapRepeat({...e,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:s},spec:r}},t):{...i,layer:s.map((e=>{const n={...u,layer:e},i=`${(r.name||"")+l}child__layer_${_1(e)}`,o=this.mapLayerOrUnit(r,{...t,repeater:n,repeaterPrefix:i});return o.name=i,o}))}}mapNonLayerRepeat(e,t){const{repeat:n,spec:r,data:i,...o}=e;!gv(n)&&e.columns&&(e=n1(e,["columns"]),y5.warn(v5.columnsNotSupportByRowCol("repeat")));const a=[],{repeater:s={},repeaterPrefix:u=""}=t,l=!gv(n)&&n.row||[s?s.row:null],c=!gv(n)&&n.column||[s?s.column:null],f=gv(n)&&n||[s?s.repeat:null];for(const e of f)for(const i of l)for(const o of c){const l={repeat:e,row:i,column:o,layer:s.layer},c=(r.name||"")+u+"child__"+(gv(n)?`${_1(e)}`:(n.row?`row_${_1(i)}`:"")+(n.column?`column_${_1(o)}`:"")),f=this.map(r,{...t,repeater:l,repeaterPrefix:c});f.name=c,a.push(n1(f,["data"]))}const d=gv(n)?e.columns:n.column?n.column.length:1;return{data:r.data??i,align:"all",...o,columns:d,concat:a}}mapFacet(e,t){const{facet:n}=e;return X8(n)&&e.columns&&(e=n1(e,["columns"]),y5.warn(v5.columnsNotSupportByRowCol("facet"))),super.mapFacet(e,t)}mapUnitWithParentEncodingOrProjection(e,t){const{encoding:n,projection:r}=e,{parentEncoding:i,parentProjection:o,config:a}=t,s=Dee({parentProjection:o,projection:r}),u=Cee({parentEncoding:i,encoding:xee(n,t.repeater)});return this.mapUnit({...e,...s?{projection:s}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(e,t){const{row:n,column:r,facet:i,...o}=e.encoding,{mark:a,width:s,projection:u,height:l,view:c,params:f,encoding:d,...h}=e,{facetMapping:p,layout:m}=this.getFacetMappingAndLayout({row:n,column:r,facet:i},t),g=xee(o,t.repeater);return this.mapFacet({...h,...m,facet:p,spec:{...s?{width:s}:{},...l?{height:l}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:a,encoding:g,...f?{params:f}:{}}},t)}getFacetMappingAndLayout(e,t){const{row:n,column:r,facet:i}=e;if(n||r){i&&y5.warn(v5.facetChannelDropped([...n?[j1]:[],...r?[U1]:[]]));const t={},o={};for(const n of[j1,U1]){const r=e[n];if(r){const{align:e,center:i,spacing:a,columns:s,...u}=r;t[n]=u;for(const e of["align","center","spacing"])void 0!==r[e]&&(o[e]??(o[e]={}),o[e][n]=r[e])}}return{facetMapping:t,layout:o}}{const{align:e,center:n,spacing:r,columns:o,...a}=i;return{facetMapping:bee(a,t.repeater),layout:{...e?{align:e}:{},...n?{center:n}:{},...r?{spacing:r}:{},...o?{columns:o}:{}}}}}mapLayer(e,{parentEncoding:t,parentProjection:n,...r}){const{encoding:i,projection:o,...a}=e,s={...r,parentEncoding:Cee({parentEncoding:t,encoding:i,layer:!0}),parentProjection:Dee({parentProjection:n,projection:o})};return super.mapLayer(a,s)}},tte=new class extends uee{map(e,t){return t.emptySelections??(t.emptySelections={}),t.selectionPredicates??(t.selectionPredicates={}),e=Gee(e,t),super.map(e,t)}mapLayerOrUnit(e,t){if((e=Gee(e,t)).encoding){const n={};for(const[r,i]of x1(e.encoding))n[r]=Yee(i,t);e={...e,encoding:n}}return super.mapLayerOrUnit(e,t)}mapUnit(e,t){const{selection:n,...r}=e;return n?{...r,params:x1(n).map((([e,n])=>{const{init:r,bind:i,empty:o,...a}=n;"single"===a.type?(a.type="point",a.toggle=!1):"multi"===a.type&&(a.type="point"),t.emptySelections[e]="none"!==o;for(const n of b1(t.selectionPredicates[e]??{}))n.empty="none"!==o;return{name:e,value:r,select:a,bind:i}}))}:e}},nte=new Jee;function rte(e){return db(e)?{type:e}:e??{}}const ite=["background","padding"];function ote(e,t){const n={};for(const t of ite)e&&void 0!==e[t]&&(n[t]=n5(e[t]));return t&&(n.params=e.params),n}class ate{constructor(e={},t={}){this.explicit=e,this.implicit=t}clone(){return new ate(e1(this.explicit),e1(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return T1(this.explicit[e],this.implicit[e])}getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:t,explicit:n}){void 0!==t&&this.set(e,t,n)}set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}copyKeyFromSplit(e,{explicit:t,implicit:n}){void 0!==t[e]?this.set(e,t[e],!0):void 0!==n[e]&&this.set(e,n[e],!1)}copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}copyAll(e){for(const t of v1(e.combine())){const n=e.getWithExplicit(t);this.setWithExplicit(t,n)}}}function ste(e){return{explicit:!0,value:e}}function ute(e){return{explicit:!1,value:e}}function lte(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:cte(t,n,r,i)}}function cte(e,t,n,r){return e.explicit&&t.explicit&&y5.warn(v5.mergeConflictingProperty(n,r,e.value,t.value)),e}function fte(e,t,n,r,i=cte){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Z0(e.value,t.value)?e:i(e,t,n,r)}class dte extends ate{constructor(e={},t={},n=!1){super(e,t),this.explicit=e,this.implicit=t,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function hte(e){return"url"in e}function pte(e){return"values"in e}function mte(e){return"name"in e&&!hte(e)&&!pte(e)&&!gte(e)}function gte(e){return e&&(yte(e)||vte(e)||bte(e))}function yte(e){return"sequence"in e}function vte(e){return"sphere"in e}function bte(e){return"graticule"in e}var xte,wte;function _te(e,t=!0,n=lv){if(gv(e)){const r=e.map((e=>_te(e,t,n)));return t?`[${r.join(", ")}]`:r}return O6(e)?n(t?I6(e):function(e){const t=B6(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(r1(e)):e}function kte(e,t){for(const n of b1(e.component.selection??{})){const r=n.name;let i=`${r}${One}, ${"global"===n.resolve?"true":`{unit: ${Lne(e)}}`}`;for(const r of Pne)r.defined(n)&&(r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(i=r.modifyExpr(e,n,i)));t.push({name:r+zne,on:[{events:{signal:n.name+One},update:`modify(${xb(n.name+Tne)}, ${i})`}]})}return Ate(t)}function Ete(e,t){if(e.component.selection&&v1(e.component.selection).length){const n=xb(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:HV("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Ate(t)}function Ste(e,t){for(const n of b1(e.component.selection??{}))for(const r of Pne)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Ate(e){return e.map((e=>(e.on&&!e.on.length&&delete e.on,e)))}(wte=xte||(xte={}))[wte.Raw=0]="Raw",wte[wte.Main=1]="Main",wte[wte.Row=2]="Row",wte[wte.Column=3]="Column",wte[wte.Lookup=4]="Lookup";class Cte{constructor(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.includes(e)?y5.warn(v5.ADD_SAME_CHILD_TWICE):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,e++)}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;for(const t of this._children)t.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this}}class Dte extends Cte{constructor(e,t,n,r){super(e,t),this.type=n,this.refCounts=r,this._source=this._name=t,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${z1()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}class Mte extends Cte{constructor(e,t){super(e),this.formula=t}clone(){return new Mte(null,e1(this.formula))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,t)=>{const{field:n,timeUnit:r}=t;if(r){const i=b9(t,{forAs:!0});e[i1({as:i,field:n,timeUnit:r})]={as:i,field:n,timeUnit:r}}return e}),{});return y1(n)?null:new Mte(e,n)}static makeFromTransform(e,t){const{timeUnit:n,...r}={...t},i={...r,timeUnit:X6(n)};return new Mte(e,{[i1(i)]:i})}merge(e){this.formula={...this.formula};for(const t in e.formula)this.formula[t]||(this.formula[t]=e.formula[t]);for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}removeFormulas(e){const t={};for(const[n,r]of x1(this.formula))e.has(r.as)||(t[n]=r);this.formula=t}producedFields(){return new Set(b1(this.formula).map((e=>e.as)))}dependentFields(){return new Set(b1(this.formula).map((e=>e.field)))}hash(){return`TimeUnit ${i1(this.formula)}`}assemble(){const e=[];for(const t of b1(this.formula)){const{field:n,as:r,timeUnit:i}=t,{unit:o,utc:a,...s}=X6(i);e.push({field:M1(n),type:"timeunit",...o?{units:H6(o)}:{},...a?{timezone:"utc"}:{},...s,as:[r,`${r}_end`]})}return e}}const Fte="_tuple_fields";class Nte{constructor(...e){this.items=e,this.hasChannel={},this.hasField={}}}const $te={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Nte),o={},a={},s=new Set,u=(e,t)=>{const n="visual"===t?e.channel:e.field;let i=_1(`${r}_${n}`);for(let e=1;s.has(i);e++)i=_1(`${r}_${n}_${e}`);return s.add(i),{[t]:i}},l=t.type,c=e.config.selection[l],f=void 0!==n.value?jv(n.value):null;let{fields:d,encodings:h}=yv(n.select)?n.select:{};if(!d&&!h&&f)for(const e of f)if(yv(e))for(const t of v1(e))L2[t]?(h||(h=[])).push(t):"interval"===l?(y5.warn(v5.INTERVAL_INITIALIZED_WITH_X_Y),h=c.encodings):(d||(d=[])).push(t);d||h||(h=c.encodings,d=c.fields);for(const t of h??[]){const n=e.fieldDef(t);if(n){let r=n.field;if(n.aggregate){y5.warn(v5.cannotProjectAggregate(t,n.aggregate));continue}if(!r){y5.warn(v5.cannotProjectOnChannelWithoutField(t));continue}if(n.timeUnit){r=e.vgField(t);const i={timeUnit:n.timeUnit,as:r,field:n.field};a[i1(i)]=i}if(!o[r]){let a="E";if("interval"===l){P4(e.getScaleComponent(t).get("type"))&&(a="R")}else n.bin&&(a="R-RE");const s={field:r,channel:t,type:a};s.signals={...u(s,"data"),...u(s,"visual")},i.items.push(o[r]=s),i.hasField[r]=i.hasChannel[t]=o[r]}}else y5.warn(v5.cannotProjectOnChannelWithoutField(t))}for(const e of d??[]){if(i.hasField[e])continue;const t={type:"E",field:e};t.signals={...u(t,"data")},i.items.push(t),i.hasField[e]=t}f&&(t.init=f.map((e=>i.items.map((t=>yv(e)?void 0!==e[t.channel]?e[t.channel]:e[t.field]:e))))),y1(a)||(i.timeUnit=new Mte(null,a))},signals:(e,t,n)=>{const r=t.name+Fte;return n.filter((e=>e.name===r)).length>0?n:n.concat({name:r,value:t.project.items.map((e=>{const{signals:t,hasLegend:n,...r}=e;return r.field=M1(r.field),r}))})}},Tte={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!E3(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;o&&P4(a)?(o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)):y5.warn(v5.SCALE_BINDINGS_CONTINUOUS)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter((e=>0===n.filter((t=>t.name===e.signals.data)).length));if(!e.parent||zte(e)||0===r.length)return n;const i=n.filter((e=>e.name===t.name))[0];let o=i.update;if(o.indexOf(Rne)>=0)i.update=`{${r.map((e=>`${xb(M1(e.field))}: ${e.signals.data}`)).join(", ")}}`;else{for(const e of r){const t=`${xb(M1(e.field))}: ${e.signals.data}`;o.includes(t)||(o=`${o.substring(0,o.length-1)}, ${t}}`)}i.update=o}return n.concat(r.map((e=>({name:e.signals.data}))))},signals:(e,t,n)=>{if(e.parent&&!zte(e))for(const e of t.scales){const t=n.filter((t=>t.name===e.signals.data))[0];t.push="outer",delete t.value,delete t.update}return n}};function Ote(e,t){return`domain(${xb(e.scaleName(t))})`}function zte(e){return(e.parent&&koe(e.parent)&&!e.parent.parent)??zte(e.parent.parent)}const Rte="_brush",Pte="_scale_trigger",Lte={defined:e=>"interval"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Fte,o=Tte.defined(t),a=t.init?t.init[0]:null,s=[],u=[];if(t.translate&&!o){const e=`!event.item || event.item.mark.name !== ${xb(r+Rte)}`;Bte(t,((t,n)=>{var r;const i=jv((r=n.between[0]).filter??(r.filter=[]));return i.includes(e)||i.push(e),t}))}t.project.items.forEach(((r,i)=>{const o=r.channel;if(o!==W1&&o!==H1)return void y5.warn("Interval selections only support x and y encoding channels.");const l=a?a[i]:null,c=function(e,t,n,r){const i=n.channel,o=n.signals.visual,a=n.signals.data,s=Tte.defined(t),u=xb(e.scaleName(i)),l=e.getScaleComponent(i),c=l?l.get("type"):void 0,f=e=>`scale(${u}, ${e})`,d=e.getSizeSignalRef(i===W1?"width":"height").signal,h=`${i}(unit)`,p=Bte(t,((e,t)=>[...e,{events:t.between[0],update:`[${h}, ${h}]`},{events:t,update:`[${o}[0], clamp(${h}, 0, ${d})]`}]));return p.push({events:{signal:t.name+Pte},update:P4(c)?`[${f(`${a}[0]`)}, ${f(`${a}[1]`)}]`:"[0, 0]"}),s?[{name:a,on:[]}]:[{name:o,...r?{init:_te(r,!0,f)}:{value:[]},on:p},{name:a,...r?{init:_te(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]}]}(e,t,r,l),f=r.signals.data,d=r.signals.visual,h=xb(e.scaleName(o)),p=P4(e.getScaleComponent(o).get("type"))?"+":"";n.push(...c),s.push(f),u.push({scaleName:e.scaleName(o),expr:`(!isArray(${f}) || (${p}invert(${h}, ${d})[0] === ${p}${f}[0] && ${p}invert(${h}, ${d})[1] === ${p}${f}[1]))`})})),o||n.push({name:r+Pte,value:{},on:[{events:u.map((e=>({scale:e.scaleName}))),update:`${u.map((e=>e.expr)).join(" && ")} ? ${r+Pte} : {}`}]});const l=`unit: ${Lne(e)}, fields: ${i}, values`;return n.concat({name:r+One,...a?{init:`{${l}: ${_te(a)}}`}:{},on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]})},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=i&&i.signals.visual,s=o&&o.signals.visual,u=`data(${xb(t.name+Tne)})`;if(Tte.defined(t))return n;const l={x:void 0!==i?{signal:`${a}[0]`}:{value:0},y:void 0!==o?{signal:`${s}[0]`}:{value:0},x2:void 0!==i?{signal:`${a}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${s}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const t of v1(l))l[t]=[{test:`${u}.length && ${u}[0].unit === ${Lne(e)}`,...l[t]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=v1(h).reduce(((e,t)=>(e[t]=[{test:[void 0!==i&&`${a}[0] !== ${a}[1]`,void 0!==o&&`${s}[0] !== ${s}[1]`].filter((e=>e)).join(" && "),value:h[t]},{value:null}],e)),{});return[{name:`${r+Rte}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Rte,type:"rect",clip:!0,encode:{enter:{...d?{cursor:{value:d}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Bte(e,t){return e.events.reduce(((e,n)=>n.between?t(e,n):(y5.warn(`${n} is not an ordered event stream for interval selections.`),e)),[])}const Ite={defined:e=>"point"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Fte,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=o.items.map((t=>{const n=e.fieldDef(t.channel);return n&&n.bin?`[${a}[${xb(e.vgField(t.channel,{}))}], ${a}[${xb(e.vgField(t.channel,{binSuffix:"end"}))}]]`:`${a}[${xb(t.field)}]`})).join(", "),u=`unit: ${Lne(e)}, fields: ${i}, values`,l=t.events;return n.concat([{name:r+One,on:l?[{events:l,update:`datum && item().mark.marktype !== 'group' ? {${u}: [${s}]} : null`,force:!0}]:[]}])}};function jte(e,t,n,r){const i=r9(t)&&t.condition,o=r(t);if(i){return{[n]:[...jv(i).map((t=>{const n=r(t);if(function(e){return e.param}(t)){const{param:r,empty:i}=t;return{test:Hne(e,{param:r,empty:i}),...n}}return{test:Gne(e,t.test),...n}})),...void 0!==o?[o]:[]]}}return void 0!==o?{[n]:o}:{}}function Ute(e,t="text"){const n=e.encoding[t];return jte(e,n,t,(t=>qte(t,e.config)))}function qte(e,t,n="datum"){if(e){if(h9(e))return i5(e.value);if(f9(e)){const{format:r,formatType:i}=C9(e);return O8({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Wte(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(gv(a))return{tooltip:Vte({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return jte(e,a,"tooltip",(e=>{const a=qte(e,i,s);if(a)return a;if(null===e)return;let u=l5("tooltip",r,i);return!0===u&&(u={content:"encoding"}),db(u)?{value:u}:yv(u)?X3(u)?u:"encoding"===u.content?Vte(n,o,i,t):{signal:s}:void 0}))}}function Hte(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",a=[];function s(r,s){const u=U2(s),l=d9(r)?r:{...r,type:e[u].type},c=jv(l.title||A9(l,n)).join(", ");let f;if(u3(s)){const r="x"===s?"x2":"y2",a=D9(e[r]);if(j3(l.bin)&&a){const e=b9(l,{expr:o}),t=b9(a,{expr:o}),{format:s,formatType:u}=C9(l);f=U8(e,t,s,u,n),i[r]=!0}else if(t&&t.fieldChannel===s&&"normalize"===t.offset){const{format:e,formatType:t}=C9(l);f=O8({fieldOrDatumDef:l,format:e,formatType:t,expr:o,config:n,normalizeStack:!0}).signal}}f??(f=qte(l,n,o).signal),a.push({channel:s,key:c,value:f})}e7(e,((e,t)=>{a9(e)?s(e,t):i9(e)&&s(e.condition,t)}));const u={};for(const{channel:e,key:t,value:n}of a)i[e]||u[t]||(u[t]=n);return u}function Vte(e,t,n,{reactiveGeom:r}={}){const i=Hte(e,t,n,{reactiveGeom:r}),o=x1(i).map((([e,t])=>`"${e}": ${t}`));return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Gte(e){const{markDef:t,config:n}=e,r=l5("aria",t,n);return!1===r?{}:{...r?{aria:r}:{},...Yte(e),...Xte(e)}}function Yte(e){const{mark:t,markDef:n,config:r}=e;if(!1===r.aria)return{};const i=l5("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:t in Z3?{}:{ariaRoleDescription:{value:t}}}function Xte(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return jte(e,o,"description",(t=>qte(t,e.config)));const a=l5("description",n,r);if(null!=a)return{description:i5(a)};if(!1===r.aria)return{};const s=Hte(t,i,r);return y1(s)?void 0:{description:{signal:x1(s).map((([e,t],n)=>`"${n>0?"; ":""}${e}: " + (${t})`)).join(" + ")}}}function Qte(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:u}=n;void 0===s&&(u??(u=l5(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),void 0!==u&&(s=i5(u)));const l=i[e];return jte(t,l,a??e,(n=>F8({channel:e,channelDef:n,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s})))}function Jte(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??l5("filled",n,i),s=a1(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=l5(!0===a?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[!0===a&&"color"]??s,l=l5(!1===a?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[!1===a&&"color"],c=a?"fill":"stroke",f={...u?{fill:i5(u)}:{},...l?{stroke:i5(l)}:{}};return n.color&&(a?n.fill:n.stroke)&&y5.warn(v5.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Qte("color",e,{vgChannel:c,defaultValue:a?u:l}),...Qte("fill",e,{defaultValue:r.fill?u:void 0}),...Qte("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Kte(e){const{encoding:t,mark:n}=e,r=t.order;return!h8(n)&&h9(r)?jte(e,r,"zindex",(e=>i5(e.value))):{}}function Zte(e,t){const n=t[function(e){switch(e){case W1:return"xOffset";case H1:return"yOffset";case V1:return"x2Offset";case G1:return"y2Offset";case Q1:return"thetaOffset";case Y1:return"radiusOffset";case J1:return"theta2Offset";case X1:return"radius2Offset"}}(e)];if(n)return n}function ene(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,u=i[e],l=i[W2(e)],c=t.scaleName(e),f=t.getScaleComponent(e),d=Zte(e,o),h=tne({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),p=!u&&u3(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:function(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(f9(n)&&i&&t===i.fieldChannel){if(a9(n)){let e=n.bandPosition;if(void 0!==e||"text"!==a.type||"radius"!==t&&"theta"!==t||(e=.5),void 0!==e)return M8({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:e,offset:o})}return D8(n,r,{suffix:"end"},{offset:o})}return E8(e)}({channel:e,channelDef:u,channel2Def:l,markDef:o,config:a,scaleName:c,scale:f,stack:s,offset:d,defaultRef:h});return p?{[r||e]:p}:void 0}function tne({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=U2(n),u=q2(n),l=l5(n,o,a,{vgChannel:u});if(void 0!==l)return N8(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const e=i.get("type");if(a1([m4,b4,x4],e));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===t)return"y"===s?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[H2(n)],mult:.5}}}}const nne={left:"x",center:"xc",right:"x2"},rne={top:"y",middle:"yc",bottom:"y2"};function ine(e,t,n,r="middle"){if("radius"===e||"theta"===e)return q2(e);const i="x"===e?"align":"baseline",o=l5(i,t,n);let a;return X3(o)?(y5.warn(v5.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,"x"===e?nne[a||("top"===r?"left":"center")]:rne[a||r]}function one(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?ane(e,t,{defaultPos:n,defaultPos2:r}):ene(e,t,{defaultPos:n})}function ane(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=W2(e),s=H2(e),u=function(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,u=U2(n),l=H2(n),c=q2(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),p=Zte(n in r||n in o?n:u,e.markDef);if(!f&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude)){const t=H2(n),r=e.markDef[t];return null!=r?{[t]:{value:r}}:{[c]:{field:e.getName(n)}}}const m=function({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l}){if(f9(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0))return D8(t,o,{suffix:"start"},{offset:u});return E8({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:u,defaultRef:l})}({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:h,stack:a,offset:p,defaultRef:void 0});if(void 0!==m)return{[c]:m};return sne(n,o)||sne(n,{[n]:f5(n,o,s.style),[l]:f5(l,o,s.style)})||sne(n,s[i])||sne(n,s.mark)||{[c]:tne({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}(t,r,a);return{...ene(e,t,{defaultPos:n,vgChannel:u[s]?ine(e,i,o):q2(e)}),...u}}function sne(e,t){const n=H2(e),r=q2(e);if(void 0!==t[r])return{[r]:N8(e,t[r])};if(void 0!==t[e])return{[r]:N8(e,t[e])};if(t[n]){const r=t[n];if(!x8(r))return{[n]:N8(e,r)};y5.warn(v5.relativeBandSizeNotSupported(n))}}function une(e,t,n){const{config:r,encoding:i,markDef:o}=e,a=W2(t),s=H2(t),u=i[t],l=i[a],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=e.scaleName(t),h=o.orient,p=i[s]??i.size??l5("size",o,r,{vgChannel:s}),m="bar"===n&&("x"===t?"vertical"===h:"horizontal"===h);if(!a9(u)||!(I3(u.bin)||j3(u.bin)||u.timeUnit&&!l)||p&&!x8(p)||R4(f))return(f9(u)&&R4(f)||m)&&!l?function(e,t,n){const{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=H2(t),f=W2(t),d="horizontal"===s&&"y"===t||"vertical"===s&&"x"===t;let h;(i.size||r.size)&&(d?h=Qte("size",n,{vgChannel:c,defaultRef:i5(r.size)}):y5.warn(v5.cannotApplySizeToNonOrientedMark(r.type)));const p=t9({channel:t,fieldDef:e,markDef:r,config:o,scaleType:l?.get?.("type"),useVlSizeChannel:d});h=h||{[c]:lne(c,u,l,o,p)};const m="band"===l?.get?.("type")&&"band"in h[c]?"top":"middle",g=ine(t,r,o,m),y="xc"===g||"yc"===g,v=Zte(t,r),b=E8({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:a,offset:v,defaultRef:tne({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:y?.5:X3(p)?{signal:`(1-${p})/2`}:x8(p)?(1-p.band)/2:0});if(c)return{[g]:b,...h};{const e=q2(f),t=h[c],n=v?{...t,offset:v}:t;return{[g]:b,[e]:gv(b)?[b[0],{...b[1],offset:n}]:{...b,offset:n}}}}(u,t,e):ane(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});return function({fieldDef:e,fieldDef2:t,channel:n,bandSize:r,scaleName:i,markDef:o,spacing:a=0,axisTranslate:s,reverse:u,config:l}){const c=W2(n),f=q2(n),d=q2(c),h=Zte(n,o),p=X3(r)?{signal:`(1-${r.signal})/2`}:x8(r)?(1-r.band)/2:.5;if(I3(e.bin)||e.timeUnit)return{[d]:fne({channel:n,fieldDef:e,scaleName:i,markDef:o,bandPosition:p,offset:cne(c,a,u,s,h),config:l}),[f]:fne({channel:n,fieldDef:e,scaleName:i,markDef:o,bandPosition:X3(p)?{signal:`1-${p.signal}`}:1-p,offset:cne(n,a,u,s,h),config:l})};if(j3(e.bin)){const r=D8(e,i,{},{offset:cne(c,a,u,s,h)});if(a9(t))return{[d]:r,[f]:D8(t,i,{},{offset:cne(n,a,u,s,h)})};if(U3(e.bin)&&e.bin.step)return{[d]:r,[f]:{signal:`scale("${i}", ${b9(e,{expr:"datum"})} + ${e.bin.step})`,offset:cne(n,a,u,s,h)}}}return void y5.warn(v5.channelRequiredForBinned(c))}({fieldDef:u,fieldDef2:l,channel:t,markDef:o,scaleName:d,bandSize:t9({channel:t,fieldDef:u,markDef:o,config:r,scaleType:f}),axisTranslate:e.component.axes[t]?.[0]?.get?.("translate")??.5,spacing:u3(t)?l5("binSpacing",o,r):void 0,reverse:c.get("reverse"),config:r})}function lne(e,t,n,r,i){if(x8(i)){if(!n)return{mult:i.band,field:{group:e}};{const e=n.get("type");if("band"===e)return{scale:t,band:i.band};1!==i.band&&(y5.warn(v5.cannotUseRelativeBandSizeWithNonBandScale(e)),i=void 0)}}else{if(X3(i))return i;if(i)return{value:i}}if(n){const e=n.get("range");if(Q3(e)&&cb(e.step))return{value:e.step-2}}return{value:V7(r.view,e)-2}}function cne(e,t,n,r,i){if(_2(e))return 0;const o="x"===e||"y2"===e?-t/2:t/2;if(X3(n)||X3(i)||X3(r)){const e=a5(n),t=a5(i),a=a5(r);return{signal:(a?`${a} + `:"")+(e?`(${e} ? -1 : 1) * `:"")+(t?`(${t} + ${o})`:o)}}return i=i||0,r+(n?-i-o:+i+o)}function fne({channel:e,fieldDef:t,scaleName:n,markDef:r,bandPosition:i,offset:o,config:a}){return S8({fieldDef:t,channel:e,markDef:r,ref:M8({scaleName:n,fieldOrDatumDef:t,bandPosition:i,offset:o}),config:a})}const dne=new Set(["aria","width","height"]);function hne(e,t){const{fill:n,stroke:r}="include"===t.color?Jte(e):{};return{...mne(e.markDef,t),...pne(e,"fill",n),...pne(e,"stroke",r),...Qte("opacity",e),...Qte("fillOpacity",e),...Qte("strokeOpacity",e),...Qte("strokeWidth",e),...Qte("strokeDash",e),...Kte(e),...Wte(e),...Ute(e,"href"),...Gte(e)}}function pne(e,t,n){const{config:r,mark:i,markDef:o}=e;if("hide"===l5("invalid",o,r)&&n&&!h8(i)){const r=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&P4(i)&&(t[o]=!0)}return t}),{}),i=v1(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>C8(e,t))).join(` ${e} `)}return}(e,{invalid:!0,channels:k3});if(r)return{[t]:[{test:r,value:null},...jv(n)]}}return n?{[t]:n}:{}}function mne(e,t){return K3.reduce(((n,r)=>(dne.has(r)||void 0===e[r]||"ignore"===t[r]||(n[r]=i5(e[r])),n)),{})}function gne(e){const{config:t,markDef:n}=e;if(l5("invalid",n,t)){const t=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&P4(i)&&(t[o]=!0)}return t}),{}),i=v1(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>C8(e,t))).join(` ${e} `)}return}(e,{channels:s3});if(t)return{defined:{signal:t}}}return{}}function yne(e,t){if(void 0!==t)return{[e]:i5(t)}}const vne="voronoi",bne={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(vne)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(h8(o))return y5.warn(v5.nearestNotSupportForContinuous(o)),n;const a={name:e.getName(vne),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Wte(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,u=!1;return n.forEach(((t,n)=>{const r=t.name??"";r===e.component.mark[0].name?s=n:r.indexOf(vne)>=0&&(u=!0)})),u||n.splice(s+1,0,a),n}},xne={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!z7(e.bind),parse:(e,t,n)=>Ine(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=bne.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach(((e,i)=>{const u=_1(`${r}_${e.field}`);n.filter((e=>e.name===u)).length||n.unshift({name:u,...a?{init:_te(a[i])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${xb(e.field)}] : null`}]:[],bind:o[e.field]??o[e.channel]??o})})),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter((e=>e.name===r+One))[0],a=r+Fte,s=i.items.map((e=>_1(`${r}_${e.field}`))),u=s.map((e=>`${e} !== null`)).join(" && ");return s.length&&(o.update=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},wne="_toggle",_ne={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+wne,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+One,r=t.name+wne;return`${r} ? null : ${n}, `+("global"===t.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${Lne(e)}}, `)+`${r} ? ${n} : null`}},kne={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=db(t.clear)?HV(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(xne.defined(t))for(const e of t.project.items){const r=n.findIndex((n=>n.name===_1(`${t.name}_${e.field}`)));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)for(const e of t.project.items){const t=n.findIndex((t=>t.name===e.signals.visual));if(r(t,"[0, 0]"),-1===t){r(n.findIndex((t=>t.name===e.signals.data)),"null")}}else{let e=n.findIndex((e=>e.name===t.name+One));r(e,"null"),_ne.defined(t)&&(e=n.findIndex((e=>e.name===t.name+wne)),r(e,"false"))}return n}},Ene={defined:e=>{const t="global"===e.resolve&&e.bind&&z7(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==T7;return t&&!n&&y5.warn(v5.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{const r=e1(n);if(r.select=db(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Ine(t,r),yv(n.select)&&(n.select.on||n.select.clear)){const e='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of t.events)n.filter=jv(n.filter??[]),n.filter.includes(e)||n.filter.push(e)}const i=R7(t.bind)?t.bind.legend:"click",o=db(i)?HV(i,"view"):jv(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=R7(t.bind)&&t.bind.legend,o=e=>t=>{const n=e1(t);return n.markname=e,n};for(const e of t.project.items){if(!e.hasLegend)continue;const a=`${_1(e.field)}_legend`,s=`${r}_${a}`;if(0===n.filter((e=>e.name===s)).length){const e=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:s,...t.init?{}:{value:null},on:[{events:e,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${s}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find((e=>e.name===r+One)),a=r+Fte,s=i.items.filter((e=>e.hasLegend)).map((e=>_1(`${r}_${_1(e.field)}_legend`))),u=`${s.map((e=>`${e} !== null`)).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map((e=>({signal:e}))),update:u}):s.length>0&&(o.update=u,delete o.value,delete o.on);const l=n.find((e=>e.name===r+wne)),c=R7(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push({...l.on[0],events:c}):l.on[0].events=c),n}};const Sne="_translate_anchor",Ane="_translate_delta",Cne={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Tte.defined(t),o=r+Sne,{x:a,y:s}=t.project.hasChannel;let u=HV(t.translate,"scope");return i||(u=u.map((e=>(e.between[0].markname=r+Rte,e)))),n.push({name:o,value:{},on:[{events:u.map((e=>e.between[0])),update:"{x: x(unit), y: y(unit)"+(void 0!==a?`, extent_x: ${i?Ote(e,W1):`slice(${a.signals.visual})`}`:"")+(void 0!==s?`, extent_y: ${i?Ote(e,H1):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+Ane,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==a&&Dne(e,t,a,"width",n),void 0!==s&&Dne(e,t,s,"height",n),n}};function Dne(e,t,n,r,i){const o=t.name,a=o+Sne,s=o+Ane,u=n.channel,l=Tte.defined(t),c=i.filter((e=>e.name===n.signals[l?"data":"visual"]))[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d.get("type"),p=d.get("reverse"),m=`${a}.extent_${u}`,g=`${l?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${m}, ${`${l?u===W1?p?"":"-":p?"-":"":""}${s}.${u} / ${l?`${f}`:`span(${m})`}`}${l?"pow"===h?`, ${d.get("exponent")??1}`:"symlog"===h?`, ${d.get("constant")??1}`:"":""})`;c.on.push({events:{signal:s},update:l?g:`clampRange(${g}, 0, ${f})`})}const Mne="_zoom_anchor",Fne="_zoom_delta",Nne={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Tte.defined(t),o=r+Fne,{x:a,y:s}=t.project.hasChannel,u=xb(e.scaleName(W1)),l=xb(e.scaleName(H1));let c=HV(t.zoom,"scope");return i||(c=c.map((e=>(e.markname=r+Rte,e)))),n.push({name:r+Mne,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter((e=>!!e)).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==a&&$ne(e,t,a,"width",n),void 0!==s&&$ne(e,t,s,"height",n),n}};function $ne(e,t,n,r,i){const o=t.name,a=n.channel,s=Tte.defined(t),u=i.filter((e=>e.name===n.signals[s?"data":"visual"]))[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(a),f=c.get("type"),d=s?Ote(e,a):u.name,h=o+Fne,p=`${s?"log"===f?"zoomLog":"symlog"===f?"zoomSymlog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear"}(${d}, ${`${o}_zoom_anchor.${a}`}, ${h}${s?"pow"===f?`, ${c.get("exponent")??1}`:"symlog"===f?`, ${c.get("constant")??1}`:"":""})`;u.on.push({events:{signal:h},update:s?p:`clampRange(${p}, 0, ${l})`})}const Tne="_store",One="_tuple",zne="_modify",Rne="vlSelectionResolve",Pne=[Ite,Lte,$te,_ne,xne,Tte,Ene,kne,Cne,Nne,bne];function Lne(e,{escape:t}={escape:!0}){let n=t?xb(e.name):e.name;const r=function(e){let t=e.parent;for(;t&&!woe(t);)t=t.parent;return t}(e);if(r){const{facet:e}=r;for(const t of D2)e[t]&&(n+=` + '__facet_${t}_' + (facet[${xb(r.vgField(t))}])`)}return n}function Bne(e){return b1(e.component.selection??{}).reduce(((e,t)=>e||t.project.items.some((e=>e.field===T7))),!1)}function Ine(e,t){!db(t.select)&&t.select.on||delete e.events,!db(t.select)&&t.select.clear||delete e.clear,!db(t.select)&&t.select.toggle||delete e.toggle}function jne(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...jne(e.object)),t.push(...jne(e.property))),t)}function Une(e){return"MemberExpression"===e.object.type?Une(e.object):"datum"===e.object.name}function qne(e){const t=LW(e),n=new Set;return t.visit((e=>{"MemberExpression"===e.type&&Une(e)&&n.add(jne(e).slice(1).join("."))})),n}class Wne extends Cte{constructor(e,t,n){super(e),this.model=t,this.filter=n,this.expr=Gne(this.model,this.filter,this),this._dependentFields=qne(this.expr)}clone(){return new Wne(null,this.model,e1(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Hne(e,t,n,r="datum"){const i=db(t)?t:t.param,o=_1(i),a=xb(o+Tne);let s;try{s=e.getSelectionComponent(o,i)}catch(e){return`!!${o}`}if(s.project.timeUnit){const t=n??e.component.data.raw,r=s.project.timeUnit.clone();t.parent?r.insertAsParentOf(t):t.parent=r}const u=`vlSelectionTest(${a}, ${r}${"global"===s.resolve?")":`, ${xb(s.resolve)})`}`,l=`length(data(${a}))`;return!1===t.empty?`${l} && ${u}`:`!${l} || ${u}`}function Vne(e,t,n){const r=_1(t),i=n.encoding;let o,a=n.field;try{o=e.getSelectionComponent(r,t)}catch(e){return r}if(i||a){if(i&&!a){const e=o.project.items.filter((e=>e.channel===i));!e.length||e.length>1?(a=o.project.items[0].field,y5.warn((e.length?"Multiple ":"No ")+`matching ${xb(i)} encoding found for selection ${xb(n.param)}. `+`Using "field": ${xb(a)}.`)):a=e[0].field}}else a=o.project.items[0].field,o.project.items.length>1&&y5.warn(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${xb(a)}.`);return`${o.name}[${xb(M1(a))}]`}function Gne(e,t,n){return k1(t,(t=>db(t)?t:function(e){return e?.param}(t)?Hne(e,t,n):o4(t)))}function Yne(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Xne(e,t,n,r={header:!1}){const{disable:i,orient:o,scale:a,labelExpr:s,title:u,zindex:l,...c}=e.combine();if(!i){for(const e in c){const n=U9[e],r=c[e];if(n&&n!==t&&"both"!==n)delete c[e];else if(I9(r)){const{condition:t,...n}=r,i=jv(t),o=B9[e];if(o){const{vgProp:t,part:r}=o;Yne(c,r,t,[...i.map((e=>{const{test:t,...n}=e;return{test:Gne(null,t),...n}})),n]),delete c[e]}else if(null===o){const t={signal:i.map((e=>{const{test:t,...n}=e;return`${Gne(null,t)} ? ${o5(n)} : `})).join("")+o5(n)};c[e]=t}}else if(X3(r)){const t=B9[e];if(t){const{vgProp:n,part:i}=t;Yne(c,i,n,r),delete c[e]}}a1(["labelAlign","labelBaseline"],e)&&null===c[e]&&delete c[e]}if("grid"===t){if(!c.grid)return;if(c.encode){const{grid:e}=c.encode;c.encode={...e?{grid:e}:{}},y1(c.encode)&&delete c.encode}return{scale:a,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:T1(l,0)}}{if(!r.header&&e.mainExtracted)return;if(void 0!==s){let e=s;c.encode?.labels?.update&&X3(c.encode.labels.update.text)&&(e=F1(s,"datum.label",c.encode.labels.update.text.signal)),Yne(c,"labels","text",{signal:e})}if(null===c.labelAlign&&delete c.labelAlign,c.encode){for(const t of j9)e.hasAxisPart(t)||delete c.encode[t];y1(c.encode)&&delete c.encode}const t=function(e,t){if(e)return gv(e)&&!Y3(e)?e.map((e=>A9(e,t))).join(", "):e}(u,n);return{scale:a,orient:o,grid:!1,...t?{title:t}:{},...c,...!1===n.aria?{aria:!1}:{},zindex:T1(l,0)}}}}function Qne(e){const{axes:t}=e.component,n=[];for(const r of s3)if(t[r])for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const t="x"===r?"height":"width",i=e.getSizeSignalRef(t).signal;t!==i&&n.push({name:t,update:i})}return n}function Jne(e,t,n,r){return Object.assign.apply(null,[{},...e.map((e=>{if("axisOrient"===e){const e="x"===n?"bottom":"left",i=t["x"===n?"axisBottom":"axisLeft"]||{},o=t["x"===n?"axisTop":"axisRight"]||{},a=new Set([...v1(i),...v1(o)]),s={};for(const t of a.values())s[t]={signal:`${r.signal} === "${e}" ? ${a5(i[t])} : ${a5(o[t])}`};return s}return t[e]}))])}function Kne(e,t,n,r){const i="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:t in $4?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[];const o="x"===e?"axisX":"axisY",a=X3(n)?"axisOrient":`axis${S1(n)}`,s=[...i,...i.map((e=>o+e.substr(4)))],u=["axis",a,o];return{vlOnlyAxisConfig:Jne(s,r,e,n),vgAxisConfig:Jne(u,r,e,n),axisConfigStyle:Zne([...u,...s],r)}}function Zne(e,t){const n=[{}];for(const r of e){let e=t[r]?.style;if(e){e=jv(e);for(const r of e)n.push(t.style[r])}}return Object.assign.apply(null,n)}function ere(e,t,n,r={}){const i=d5(e,n,t);if(void 0!==i)return{configFrom:"style",configValue:i};for(const t of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==r[t]?.[e])return{configFrom:t,configValue:r[t][e]};return{}}const tre={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return P8(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return L8(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function(e,t){return!R4(e)&&a9(t)&&!I3(t?.bin)&&!j3(t?.bin)}(n,e),gridScale:({model:e,channel:t})=>function(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||ire(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||rre(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function(e,t){if("x"===t&&a1(["quantitative","temporal"],e))return!0;return}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function(e,t,n,r){if(n&&!yv(r)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy";return}(t.type,n,a9(t)&&!!t.timeUnit,a9(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o="x"===e?"width":"y"===e?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??function({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!R4(t)&&"log"!==t){if(a9(e)){if(I3(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&a1(["month","hours","day","quarter"],X6(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}return}({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const r=ore(t,n);if(void 0!==r)return r;const i=t.typedFieldDef(n),o="x"===n?"x2":"y2",a=t.fieldDef(o);return p5(i?[K8(i)]:[],a9(a)?[K8(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function(e,t){const n=e.values;if(gv(n))return P9(t,n);if(X3(n))return n;return}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function(e,t){if("rect"===e&&x9(t))return 1;return 0}(n,t)};function nre(e){return`(((${e.signal} % 360) + 360) % 360)`}function rre(e,t,n,r){if(void 0!==e){if("x"===n){if(X3(e)){const n=nre(e);return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${X3(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(X3(t)){const n=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${n} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(X3(e)){const n=nre(e);return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${X3(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(X3(t)){const n=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function ire(e,t,n){if(void 0===e)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(X3(e)){const n=nre(e);return{signal:`(${i?`(${n} + 90)`:n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${X3(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}if((e+i)%180==0)return r?null:"center";if(X3(t)){const n=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${n} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function ore(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?m5(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}class are extends Cte{constructor(e,t){super(e),this.transform=t,this._dependentFields=qne(this.transform.calculate)}clone(){return new are(null,e1(this.transform))}static parseAllForSortIndex(e,t){return t.forEachFieldDef(((t,n)=>{if(p9(t)&&Y8(t.sort)){const{field:r,timeUnit:i}=t,o=t.sort,a=o.map(((e,t)=>`${o4({field:r,timeUnit:i,equal:e})} ? ${t} : `)).join("")+o.length;e=new are(e,{calculate:a,as:sre(t,n,{forAs:!0})})}})),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${i1(this.transform)}`}}function sre(e,t,n){return b9(e,{prefix:t,suffix:"sort_index",...n??{}})}function ure(e,t){return a1(["top","bottom"],t)?"column":a1(["left","right"],t)||"row"===e?"row":"column"}function lre(e,t,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return T1((t||{})[e],i[e],n.header[e])}function cre(e,t,n,r){const i={};for(const o of e){const e=lre(o,t||{},n,r);void 0!==e&&(i[o]=e)}return i}const fre=["row","column"],dre=["header","footer"];function hre(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=cre(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=ure(t,s),l=B1(a);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",...mre(l,u),...pre(u,l,o),..._re(r,i,t,D7,A7)}}}function pre(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=ire(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function mre(e,t){const n=rre(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function gre(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of dre)if(n[i])for(const o of n[i]){const a=bre(e,t,i,n,o);null!=a&&r.push(a)}return r}function yre(e,t){const{sort:n}=e;return G8(n)?{field:b9(n,{expr:"datum"}),order:n.order??"ascending"}:gv(n)?{field:sre(e,t,{expr:"datum"}),order:"ascending"}:{field:b9(e,{expr:"datum"}),order:n??"ascending"}}function vre(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:u}=cre(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=O8({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=ure(t,s);return{text:{signal:u?F1(F1(u,"datum.label",l),"datum.value",b9(e,{expr:"parent"})):l},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",...mre(o,c),...pre(c,o,a),..._re(n,e,t,M7,C7)}}function bre(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:e}=cre(["labelOrient"],a.header,s,t);("row"===t&&!a1(["top","bottom"],e)||"column"===t&&!a1(["left","right"],e))&&(o=vre(a,t,s))}const u=woe(e)&&!X8(e.facet),l=i.axes,c=l?.length>0;if(o||c){const s="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:yre(a,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const xre={column:{start:0,end:1},row:{start:1,end:0}};function wre(e,t){return xre[t][e]}function _re(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const r=lre(a,t?.header,e,n);void 0!==r&&(o[i[a]]=r)}return o}function kre(e){return[...Ere(e,"width"),...Ere(e,"height"),...Ere(e,"childWidth"),...Ere(e,"childHeight")]}function Ere(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const t=e.getScaleComponent(n);if(t){const r=t.get("type"),o=t.get("range");if(R4(r)&&Q3(o)){const r=e.scaleName(n);if(woe(e.parent)){if("independent"===e.parent.component.resolve.scale[n])return[Sre(r,o)]}return[Sre(r,o),{name:i,update:Are(r,t,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const t=i.endsWith("width"),n=t?"containerSize()[0]":"containerSize()[1]",r=`isFinite(${n}) ? ${n} : ${H7(e.config.view,t?"width":"height")}`;return[{name:i,init:r,on:[{update:r,events:"window:resize"}]}]}return[{name:i,value:r}]}function Sre(e,t){return{name:`${e}_step`,value:t.step}}function Are(e,t,n){const r=t.get("type"),i=t.get("padding"),o=T1(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,`bandspace(${n}, ${a5(a)}, ${a5(o)}) * ${e}_step`}function Cre(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function Dre(e,t){return v1(e).reduce(((n,r)=>{const i=e[r];return{...n,...jte(t,i,r,(e=>i5(e.value)))}}),{})}function Mre(e,t){if(koe(t)||woe(t))return"shared";if(_oe(t))return u3(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function Fre(e,t){const n=e.scale[t],r=u3(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&y5.warn(v5.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}const Nre={...$7,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},$re=v1(Nre);class Tre extends ate{}const Ore={symbols:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if("symbol"!==o)return;const{markDef:a,encoding:s,config:u,mark:l}=n,c=a.filled&&"trail"!==l;let f={...s5({},n,y8),...Jte(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=void 0===d?zre(s.opacity)??a.opacity:void 0;if(f.fill)if("fill"===r||c&&r===n2)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=i5(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=i5(m??1));else if(gv(f.fill)){const e=Rre(s.fill??s.color)??a.fill??(c&&a.color);e&&(f.fill=i5(e))}if(f.stroke)if("stroke"===r||!c&&r===n2)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(gv(f.stroke)){const e=T1(Rre(s.stroke||s.color),a.stroke,c?a.color:void 0);e&&(f.stroke={value:e})}if(r!==u2){const e=a9(t)&&Lre(n,i,t);e?f.opacity=[{test:e,...i5(m??1)},i5(u.legend.unselectedOpacity)]:m&&(f.opacity=i5(m))}return f={...f,...e},y1(f)?void 0:f},gradient:function(e,{model:t,legendType:n,legendCmpt:r}){if("gradient"!==n)return;const{config:i,markDef:o,encoding:a}=t;let s={};const u=void 0===(r.get("gradientOpacity")??i.legend.gradientOpacity)?zre(a.opacity)||o.opacity:void 0;u&&(s.opacity=i5(u));return s={...s,...e},y1(s)?void 0:s},labels:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=a9(t)?Lre(n,i,t):void 0,u=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o,f=$8(c)?R8({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:a}):void 0,d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return y1(d)?void 0:d},entries:function(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}};function zre(e){return Pre(e,((e,t)=>Math.max(e,t.value)))}function Rre(e){return Pre(e,((e,t)=>T1(e,t.value)))}function Pre(e,t){return function(e){const t=e&&e.condition;return!!t&&(gv(t)||h9(t))}(e)?jv(e.condition).reduce(t,e.value):h9(e)?e.value:void 0}function Lre(e,t,n){const r=t.get("selections");if(!r?.length)return;const i=xb(n.field);return r.map((e=>`(!length(data(${xb(_1(e)+Tne)})) || (${e}[${i}] && indexof(${e}[${i}], datum.value) >= 0))`)).join(" || ")}const Bre={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return P8(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return L8(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:u}=e;if(L4(i))return"horizontal"===n?"top"===r||"bottom"===r?Ure(t,"width",a,o):a:Ure(t,"height",u,s);return}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function(e){if(a1(["quantile","threshold","log","symlog"],e))return"greedy";return}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??function(e,t,n,r){if("shape"!==t){const e=Rre(n)??r;if(e)return e}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>E9(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(A2(n)&&L4(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function(e,t){const n=e.values;if(gv(n))return P9(t,n);if(X3(n))return n;return}(t,e)};function Ire(e){const{legend:t}=e;return T1(t.type,function({channel:e,timeUnit:t,scaleType:n}){if(A2(e)){if(a1(["quarter","month","day"],t))return"symbol";if(L4(n))return"gradient"}return"symbol"}(e))}function jre({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}function Ure(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function qre(e){const t=xoe(e)?function(e){const{encoding:t}=e,n={};for(const r of[n2,...N7]){const i=M9(t[r]);i&&e.getScaleComponent(r)&&(r===o2&&a9(i)&&i.type===h4||(n[r]=Hre(e,r)))}return n}(e):function(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){qre(r);for(const i of v1(r.component.legends))n.legend[i]=Fre(e.component.resolve,i),"shared"===n.legend[i]&&(t[i]=Vre(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of v1(t))for(const t of e.children)t.component.legends[r]&&"shared"===n.legend[r]&&delete t.component.legends[r];return t}(e);return e.component.legends=t,t}function Wre(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!n?.values;case"title":if("title"===t&&e===r?.title)return!0}return e===(n||{})[t]}function Hre(e,t){let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new Tre({},function(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function(e,t,n){const r=e.fieldDef(t)?.field;for(const i of b1(e.component.selection??{})){const e=i.project.hasField[r]??i.project.hasChannel[t];if(e&&Ene.defined(i)){const t=n.get("selections")??[];t.push(i.name),n.set("selections",t,!1),e.hasLegend=!0}}}(e,t,s);const u=void 0!==n?!n:a.disable;if(s.set("disable",u,void 0!==n),u)return s;n=n||{};const l=e.getScaleComponent(t).get("type"),c=M9(i[t]),f=a9(c)?X6(c.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",h=Ire({legend:n,channel:t,timeUnit:f,scaleType:l}),p={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:a,config:o,scaleType:l,orient:d,legendType:h,direction:jre({legend:n,legendType:h,orient:d,legendConfig:a})};for(const r of $re){if("gradient"===h&&r.startsWith("symbol")||"symbol"===h&&r.startsWith("gradient"))continue;const i=r in Bre?Bre[r](p):n[r];if(void 0!==i){const a=Wre(i,r,n,e.fieldDef(t));(a||void 0===o.legend[r])&&s.set(r,i,a)}}const m=n?.encoding??{},g=s.get("selections"),y={},v={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:s,legendType:h};for(const t of["labels","legend","title","symbols","gradient","entries"]){const n=Dre(m[t]??{},e),r=t in Ore?Ore[t](n,v):n;void 0===r||y1(r)||(y[t]={...g?.length&&a9(c)?{name:`${_1(c.field)}_legend_${t}`}:{},...g?.length?{interactive:!!g}:{},update:r})}return y1(y)||s.set("encode",y,!!n?.encoding),s}function Vre(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const n of $re){const r=fte(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",((e,t)=>{switch(n){case"symbolType":return Gre(e,t);case"title":return g5(e,t);case"type":return i=!0,ute("symbol")}return cte(e,t,n,"legend")}));e.setWithExplicit(n,r)}return i&&(e.implicit?.encode?.gradient&&E1(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&E1(e.explicit,["encode","gradient"])),e}function Gre(e,t){return"circle"===t.value?t:e}function Yre(e){const t=e.component.legends,n={};for(const r of v1(t)){const i=e.getScaleComponent(r),o=r1(i.get("domains"));if(n[o])for(const e of n[o]){Vre(e,t[r])||n[o].push(t[r])}else n[o]=[t[r].clone()]}return b1(n).flat().map((t=>function(e,t){const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(n)return;!1===t.aria&&null==o.aria&&(o.aria=!1);if(o.encode?.symbols){const e=o.encode.symbols.update;!e.fill||"transparent"===e.fill.value||e.stroke||o.stroke||(e.stroke={value:"transparent"});for(const t of N7)o[t]&&delete e[t]}o.title||delete o.title;if(void 0!==r){let e=r;o.encode?.labels?.update&&X3(o.encode.labels.update.text)&&(e=F1(r,"datum.label",o.encode.labels.update.text.signal)),function(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}(o,"labels","text",{signal:e})}return o}(t,e.config))).filter((e=>void 0!==e))}function Xre(e){return koe(e)||_oe(e)?function(e){return e.children.reduce(((e,t)=>e.concat(t.assembleProjections())),Qre(e))}(e):Qre(e)}function Qre(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map((e=>e.signal)).join(", ")}]`},o=t.data.reduce(((t,n)=>{const r=X3(n)?n.signal:`data('${e.lookupDataSource(n)}')`;return a1(t,r)||t.push(r),t}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Jre=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Kre extends ate{constructor(e,t,n,r){super({...t},{name:e}),this.specifiedProjection=t,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function Zre(e){e.component.projection=xoe(e)?function(e){if(e.hasProjection){const t=V3(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?function(e){const t=[],{encoding:n}=e;for(const r of[[Z1,K1],[t2,e2]])(M9(n[r[0]])||M9(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});e.channelHasField(o2)&&e.typedFieldDef(o2).type===h4&&t.push({signal:e.getName(`geojson_${t.length}`)});0===t.length&&t.push(e.requestDataName(xte.Main));return t}(e):void 0,o=new Kre(e.projectionName(!0),{...V3(e.config.projection)??{},...t??{}},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}return}(e):function(e){if(0===e.children.length)return;let t;for(const t of e.children)Zre(t);const n=u1(e.children,(e=>{const n=e.component.projection;if(n){if(t){const e=function(e,t){const n=u1(Jre,(n=>!tb(e.explicit,n)&&!tb(t.explicit,n)||!!(tb(e.explicit,n)&&tb(t.explicit,n)&&Z0(e.get(n),t.get(n)))));if(Z0(e.size,t.size)){if(n)return e;if(Z0(e.explicit,{}))return t;if(Z0(t.explicit,{}))return e}return null}(t,n);return e&&(t=e),!!e}return t=n,!0}return!0}));if(t&&n){const n=e.projectionName(!0),r=new Kre(n,t.specifiedProjection,t.size,e1(t.data));for(const t of e.children){const e=t.component.projection;e&&(e.isFit&&r.data.push(...t.component.projection.data),t.renameProjection(e.get("name"),n),e.merged=!0)}return r}return}(e)}function eie(e,t,n,r){if(L9(t,n)){const i=xoe(e)?e.axis(n)??e.legend(n)??{}:{},o=b9(t,{expr:"datum"}),a=b9(t,{expr:"datum",binSuffix:"end"});return{formulaAs:b9(t,{binSuffix:"range",forAs:!0}),formula:U8(o,a,i.format,i.formatType,r)}}return{}}function tie(e,t){return`${B3(e)}_${t}`}function nie(e,t,n){const r=tie(T9(n,void 0)??{},t);return e.getName(`${r}_bins`)}function rie(e,t,n){let r,i;r=function(e){return"as"in e}(e)?db(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[b9(e,{forAs:!0}),b9(e,{binSuffix:"end",forAs:!0})];const o={...T9(t,void 0)},a=tie(o,e.field),{signal:s,extentSignal:u}=function(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,a);if(q3(o.extent)){const e=o.extent;i=Vne(n,e.param,e),delete o.extent}return{key:a,binComponent:{bin:o,field:e.field,as:[r],...s?{signal:s}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}}}}class iie extends Cte{constructor(e,t){super(e),this.bins=t}clone(){return new iie(null,e1(this.bins))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,n,r)=>{if(d9(n)&&I3(n.bin)){const{key:i,binComponent:o}=rie(n,n.bin,t);e[i]={...o,...e[i],...eie(t,n,r,t.config)}}return e}),{});return y1(n)?null:new iie(e,n)}static makeFromTransform(e,t,n){const{key:r,binComponent:i}=rie(t,t.bin,n);return new iie(e,{[r]:i})}merge(e,t){for(const n of v1(e.bins))n in this.bins?(t(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=f1([...this.bins[n].as,...e.bins[n].as],i1)):this.bins[n]=e.bins[n];for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}producedFields(){return new Set(b1(this.bins).map((e=>e.as)).flat(2))}dependentFields(){return new Set(b1(this.bins).map((e=>e.field)))}hash(){return`Bin ${i1(this.bins)}`}assemble(){return b1(this.bins).flatMap((e=>{const t=[],[n,...r]=e.as,{extent:i,...o}=e.bin,a={type:"bin",field:M1(e.field),as:n,signal:e.signal,...q3(i)?{extent:null}:{extent:i},...e.span?{span:{signal:`span(${e.span})`}}:{},...o};!i&&e.extentSignal&&(t.push({type:"extent",field:M1(e.field),signal:e.extentSignal}),a.extent={signal:e.extentSignal}),t.push(a);for(const e of r)for(let r=0;r<2;r++)t.push({type:"formula",expr:b9({field:n[r]},{expr:"datum"}),as:e[r]});return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}function oie(e,t,n,r){const i=xoe(r)?r.encoding[W2(t)]:void 0;if(d9(n)&&xoe(r)&&n9(n,i,r.markDef,r.config))e.add(b9(n,{})),e.add(b9(n,{suffix:"end"})),n.bin&&L9(n,t)&&e.add(b9(n,{binSuffix:"range"}));else if(t in k2){const n=function(e){switch(e){case K1:return"y";case e2:return"y2";case Z1:return"x";case t2:return"x2"}}(t);e.add(r.getName(n))}else e.add(b9(n));return e}class aie extends Cte{constructor(e,t,n){super(e),this.dimensions=t,this.measures=n}clone(){return new aie(null,new Set(this.dimensions),e1(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(e,t){let n=!1;t.forEachFieldDef((e=>{e.aggregate&&(n=!0)}));const r={},i=new Set;return n?(t.forEachFieldDef(((e,n)=>{const{aggregate:o,field:a}=e;if(o)if("count"===o)r["*"]??(r["*"]={}),r["*"].count=new Set([b9(e,{forAs:!0})]);else{if($3(o)||T3(o)){const e=$3(o)?"argmin":"argmax",t=o[e];r[t]??(r[t]={}),r[t][e]=new Set([b9({op:e,field:t},{forAs:!0})])}else r[a]??(r[a]={}),r[a][o]=new Set([b9(e,{forAs:!0})]);E3(n)&&"unaggregated"===t.scaleDomain(n)&&(r[a]??(r[a]={}),r[a].min=new Set([b9({field:a,aggregate:"min"},{forAs:!0})]),r[a].max=new Set([b9({field:a,aggregate:"max"},{forAs:!0})]))}else oie(i,n,e,t)})),i.size+v1(r).length===0?null:new aie(e,i,r)):null}static makeFromTransform(e,t){const n=new Set,r={};for(const e of t.aggregate){const{op:t,field:n,as:i}=e;t&&("count"===t?(r["*"]??(r["*"]={}),r["*"].count=new Set([i||b9(e,{forAs:!0})])):(r[n]??(r[n]={}),r[n][t]=new Set([i||b9(e,{forAs:!0})])))}for(const e of t.groupby??[])n.add(e);return n.size+v1(r).length===0?null:new aie(e,n,r)}merge(e){return h1(this.dimensions,e.dimensions)?(function(e,t){for(const n of v1(t)){const r=t[n];for(const t of v1(r))n in e?e[n][t]=new Set([...e[n][t]??[],...r[t]]):e[n]={[t]:r[t]}}}(this.measures,e.measures),!0):(y5.debug("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...v1(this.measures)])}producedFields(){const e=new Set;for(const t of v1(this.measures))for(const n of v1(this.measures[t])){const r=this.measures[t][n];0===r.size?e.add(`${n}_${t}`):r.forEach(e.add,e)}return e}hash(){return`Aggregate ${i1({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],t=[],n=[];for(const r of v1(this.measures))for(const i of v1(this.measures[r]))for(const o of this.measures[r][i])n.push(o),e.push(i),t.push("*"===r?null:M1(r));return{type:"aggregate",groupby:[...this.dimensions].map(M1),ops:e,fields:t,as:n}}}class sie extends Cte{constructor(e,t,n,r){super(e),this.model=t,this.name=n,this.data=r;for(const e of D2){const n=t.facet[e];if(n){const{bin:r,sort:i}=n;this[e]={name:t.getName(`${e}_domain`),fields:[b9(n),...I3(r)?[b9(n,{binSuffix:"end"})]:[]],...G8(i)?{sortField:i}:gv(i)?{sortIndexField:sre(n,e)}:{}}}}this.childModel=t.child}hash(){let e="Facet";for(const t of D2)this[t]&&(e+=` ${t.charAt(0)}:${i1(this[t])}`);return e}get fields(){const e=[];for(const t of D2)this[t]?.fields&&e.push(...this[t].fields);return e}dependentFields(){const e=new Set(this.fields);for(const t of D2)this[t]&&(this[t].sortField&&e.add(this[t].sortField.field),this[t].sortIndexField&&e.add(this[t].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const t of s3){const n=this.childModel.component.scales[t];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(R4(r)&&Q3(i)){const n=Zie(eoe(this.childModel,t));n?e[t]=n:y5.warn(v5.unknownField(t))}}}return e}assembleRowColumnHeaderData(e,t,n){const r={row:"y",column:"x",facet:void 0}[e],i=[],o=[],a=[];r&&n&&n[r]&&(t?(i.push(`distinct_${n[r]}`),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push(`distinct_${n[r]}`));const{sortField:s,sortIndexField:u}=this[e];if(s){const{op:e=q8,field:t}=s;i.push(t),o.push(e),a.push(b9(s,{forAs:!0}))}else u&&(i.push(u),o.push("max"),a.push(u));return{name:this[e].name,source:t??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...i.length?{fields:i,ops:o,as:a}:{}}]}}assembleFacetHeaderData(e){const{columns:t}=this.model.layout,{layoutHeaders:n}=this.model.component,r=[],i={};for(const e of fre){for(const t of dre){const r=(n[e]&&n[e][t])??[];for(const t of r)if(t.axes?.length>0){i[e]=!0;break}}if(i[e]){const n=`length(data("${this.facet.name}"))`,i="row"===e?t?{signal:`ceil(${n} / ${t})`}:1:t?{signal:`min(${n}, ${t})`}:{signal:n};r.push({name:`${this.facet.name}_${e}`,transform:[{type:"sequence",start:0,stop:i}]})}}const{row:o,column:a}=i;return(o||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,e)),r}assemble(){const e=[];let t=null;const n=this.getChildIndependentFieldsWithStep(),{column:r,row:i,facet:o}=this;if(r&&i&&(n.x||n.y)){t=`cross_${this.column.name}_${this.row.name}`;const r=[].concat(n.x??[],n.y??[]),i=r.map((()=>"distinct"));e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:r,ops:i}]})}for(const r of[U1,j1])this[r]&&e.push(this.assembleRowColumnHeaderData(r,t,n));if(o){const t=this.assembleFacetHeaderData(n);t&&e.push(...t)}return e}}function uie(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function lie(e){const t={};return J0(e.filter,(e=>{if(r4(e)){let n=null;Q6(e)?n=n5(e.equal):K6(e)?n=n5(e.lte):J6(e)?n=n5(e.lt):Z6(e)?n=n5(e.gt):e4(e)?n=n5(e.gte):t4(e)?n=e.range[0]:n4(e)&&(n=(e.oneOf??e.in)[0]),n&&(O6(n)?t[e.field]="date":cb(n)?t[e.field]="number":db(n)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function cie(e){const t={};function n(e){var n;z9(e)?t[e.field]="date":"quantitative"===e.type&&(db(n=e.aggregate)&&a1(["min","max"],n))?t[e.field]="number":$1(e.field)>1?e.field in t||(t[e.field]="flatten"):p9(e)&&G8(e.sort)&&$1(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((xoe(e)||woe(e))&&e.forEachFieldDef(((t,r)=>{if(d9(t))n(t);else{const i=U2(r),o=e.fieldDef(i);n({...t,type:o.type})}})),xoe(e)){const{mark:n,markDef:r,encoding:i}=e;if(h8(n)&&!e.encoding.order){const e=i["horizontal"===r.orient?"y":"x"];a9(e)&&"quantitative"===e.type&&!(e.field in t)&&(t[e.field]="number")}}return t}class fie extends Cte{constructor(e,t){super(e),this._parse=t}clone(){return new fie(null,e1(this._parse))}hash(){return`Parse ${i1(this._parse)}`}static makeExplicit(e,t,n){let r={};const i=t.data;return!gte(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(e,r,{},n)}static makeWithAncestors(e,t,n,r){for(const e of v1(n)){const t=r.getWithExplicit(e);void 0!==t.value&&(t.explicit||t.value===n[e]||"derived"===t.value||"flatten"===n[e]?delete n[e]:y5.warn(v5.differentParse(e,n[e],t.value)))}for(const e of v1(t)){const n=r.get(e);void 0!==n&&(n===t[e]?delete t[e]:y5.warn(v5.differentParse(e,t[e],n)))}const i=new ate(t,n);r.copyAll(i);const o={};for(const e of v1(i.combine())){const t=i.get(e);null!==t&&(o[e]=t)}return 0===v1(o).length||r.parseNothing?null:new fie(e,o)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){const e={};for(const t of v1(this._parse)){const n=this._parse[t];1===$1(t)&&(e[t]=n)}return e}producedFields(){return new Set(v1(this._parse))}dependentFields(){return new Set(v1(this._parse))}assembleTransforms(e=!1){return v1(this._parse).filter((t=>!e||$1(t)>1)).map((e=>{const t=function(e,t){const n=A1(e);if("number"===t)return`toNumber(${n})`;if("boolean"===t)return`toBoolean(${n})`;if("string"===t)return`toString(${n})`;if("date"===t)return`toDate(${n})`;if("flatten"===t)return n;if(t.startsWith("date:"))return`timeParse(${n},'${uie(t.slice(5,t.length))}')`;if(t.startsWith("utc:"))return`utcParse(${n},'${uie(t.slice(4,t.length))}')`;return y5.warn(v5.unrecognizedParse(t)),null}(e,this._parse[e]);if(!t)return null;return{type:"formula",expr:t,as:N1(e)}})).filter((e=>null!==e))}}class die extends Cte{clone(){return new die(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([T7])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:T7}}}var hie={};class pie extends Cte{constructor(e,t){super(e),this.params=t}clone(){return new pie(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${i1(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class mie extends Cte{constructor(e,t){super(e),this.params=t}clone(){return new mie(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${i1(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class gie extends Cte{constructor(e){let t;if(super(null),e??(e={name:"source"}),gte(e)||(t=e.format?{...n1(e.format,["parse"])}:{}),pte(e))this._data={values:e.values};else if(hte(e)){if(this._data={url:e.url},!t.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];a1(["json","csv","tsv","dsv","topojson"],n)||(n="json"),t.type=n}}else vte(e)?this._data={values:[{type:"Sphere"}]}:(mte(e)||gte(e))&&(this._data={});this._generator=gte(e),e.name&&(this._name=e.name),t&&!y1(t)&&(this._data.format=t)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var yie,vie=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},bie=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};function xie(e){return e instanceof gie||e instanceof pie||e instanceof mie}t(hie,"isDataSourceNode",(function(){return xie}));class wie{constructor(){yie.set(this,void 0),vie(this,yie,!1)}setModified(){vie(this,yie,!0)}get modifiedFlag(){return bie(this,yie)}}t(hie,"Optimizer",(function(){return wie})),yie=new WeakMap;class _ie extends wie{getNodeDepths(e,t,n){n.set(e,t);for(const r of e.children)this.getNodeDepths(r,t+1,n);return n}optimize(e){const t=[...this.getNodeDepths(e,0,new Map).entries()].sort(((e,t)=>t[1]-e[1]));for(const e of t)this.run(e[0]);return this.modifiedFlag}}t(hie,"BottomUpOptimizer",(function(){return _ie}));class kie extends wie{optimize(e){this.run(e);for(const t of e.children)this.optimize(t);return this.modifiedFlag}}t(hie,"TopDownOptimizer",(function(){return kie}));class Eie extends hie.TopDownOptimizer{mergeNodes(e,t){const n=t.shift();for(const r of t)e.removeChild(r),r.parent=n,r.remove()}run(e){const t=e.children.map((e=>e.hash())),n={};for(let r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);for(const t of v1(n))n[t].length>1&&(this.setModified(),this.mergeNodes(e,n[t]))}}class Sie extends hie.TopDownOptimizer{constructor(e){super(),this.requiresSelectionId=e&&Bne(e)}run(e){e instanceof die&&(this.requiresSelectionId&&(hie.isDataSourceNode(e.parent)||e.parent instanceof aie||e.parent instanceof fie)||(this.setModified(),e.remove()))}}class Aie extends hie.Optimizer{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,t){let n=new Set;e instanceof Mte&&(n=e.producedFields(),p1(n,t)&&(this.setModified(),e.removeFormulas(t),0===e.producedFields.length&&e.remove()));for(const r of e.children)this.run(r,new Set([...t,...n]))}}class Cie extends hie.TopDownOptimizer{constructor(){super()}run(e){e instanceof Dte&&!e.isRequired()&&(this.setModified(),e.remove())}}class Die extends hie.BottomUpOptimizer{run(e){if(!(hie.isDataSourceNode(e)||e.numChildren()>1))for(const t of e.children)if(t instanceof fie)if(e instanceof fie)this.setModified(),e.merge(t);else{if(g1(e.producedFields(),t.dependentFields()))continue;this.setModified(),t.swapWithParent()}}}class Mie extends hie.BottomUpOptimizer{run(e){const t=[...e.children],n=e.children.filter((e=>e instanceof fie));if(e.numChildren()>1&&n.length>=1){const r={},i=new Set;for(const e of n){const t=e.parse;for(const e of v1(t))e in r?r[e]!==t[e]&&i.add(e):r[e]=t[e]}for(const e of i)delete r[e];if(!y1(r)){this.setModified();const n=new fie(e,r);for(const i of t){if(i instanceof fie)for(const e of v1(r))delete i.parse[e];e.removeChild(i),i.parent=n,i instanceof fie&&0===v1(i.parse).length&&i.remove()}}}}}class Fie extends hie.BottomUpOptimizer{run(e){e instanceof Dte||e.numChildren()>0||e instanceof sie||e instanceof gie||(this.setModified(),e.remove())}}class Nie extends hie.BottomUpOptimizer{run(e){const t=e.children.filter((e=>e instanceof Mte)),n=t.pop();for(const e of t)this.setModified(),n.merge(e)}}class $ie extends hie.BottomUpOptimizer{run(e){const t=e.children.filter((e=>e instanceof aie)),n={};for(const e of t){const t=i1(e.groupBy);t in n||(n[t]=[]),n[t].push(e)}for(const t of v1(n)){const r=n[t];if(r.length>1){const t=r.pop();for(const n of r)t.merge(n)&&(e.removeChild(n),n.parent=t,n.remove(),this.setModified())}}}}class Tie extends hie.BottomUpOptimizer{constructor(e){super(),this.model=e}run(e){const t=!(hie.isDataSourceNode(e)||e instanceof Wne||e instanceof fie||e instanceof die),n=[],r=[];for(const i of e.children)i instanceof iie&&(t&&!g1(e.producedFields(),i.dependentFields())?n.push(i):r.push(i));if(n.length>0){const t=n.pop();for(const e of n)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof iie?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(r.length>1){const e=r.pop();for(const t of r)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified()}}}class Oie extends hie.BottomUpOptimizer{run(e){const t=[...e.children];if(!s1(t,(e=>e instanceof Dte))||e.numChildren()<=1)return;const n=[];let r;for(const i of t)if(i instanceof Dte){let t=i;for(;1===t.numChildren();){const[e]=t.children;if(!(e instanceof Dte))break;t=e}n.push(...t.children),r?(e.removeChild(i),i.parent=r.parent,r.parent.removeChild(r),r.parent=t,this.setModified()):r=t}else n.push(i);if(n.length){this.setModified();for(const e of n)e.parent.removeChild(e),e.parent=r}}}class zie extends Cte{constructor(e,t){super(e),this.transform=t}clone(){return new zie(null,e1(this.transform))}addDimensions(e){this.transform.groupby=f1(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??b9(e)}hash(){return`JoinAggregateTransform ${i1(this.transform)}`}assemble(){const e=[],t=[],n=[];for(const r of this.transform.joinaggregate)t.push(r.op),n.push(this.getDefaultName(r)),e.push(void 0===r.field?null:r.field);const r=this.transform.groupby;return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==r?{groupby:r}:{}}}}class Rie extends Cte{constructor(e,t){super(e),this._stack=t}clone(){return new Rie(null,e1(this._stack))}static makeFromTransform(e,t){const{stack:n,groupby:r,as:i,offset:o="zero"}=t,a=[],s=[];if(void 0!==t.sort)for(const e of t.sort)a.push(e.field),s.push(T1(e.order,"ascending"));const u={field:a,order:s};let l;return l=function(e){return gv(e)&&e.every((e=>db(e)))&&e.length>1}(i)?i:db(i)?[i,`${i}_end`]:[`${t.stack}_start`,`${t.stack}_end`],new Rie(e,{stackField:n,groupby:r,offset:o,sort:u,facetby:[],as:l})}static makeFromEncoding(e,t){const n=t.stack,{encoding:r}=t;if(!n)return null;const{groupbyChannel:i,fieldChannel:o,offset:a,impute:s}=n;let u;if(i){u=D9(r[i])}const l=function(e){return e.stack.stackBy.reduce(((e,t)=>{const n=b9(t.fieldDef);return n&&e.push(n),e}),[])}(t),c=t.encoding.order;let f;return f=gv(c)||a9(c)?h5(c):l.reduce(((e,t)=>(e.field.push(t),e.order.push("y"===o?"descending":"ascending"),e)),{field:[],order:[]}),new Rie(e,{dimensionFieldDef:u,stackField:t.vgField(o),facetby:[],stackby:l,sort:f,offset:a,impute:s,as:[t.vgField(o,{suffix:"start",forAs:!0}),t.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${i1(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:e,impute:t,groupby:n}=this._stack;return e?e.bin?t?[b9(e,{binSuffix:"mid"})]:[b9(e,{}),b9(e,{binSuffix:"end"})]:[b9(e)]:n??[]}assemble(){const e=[],{facetby:t,dimensionFieldDef:n,stackField:r,stackby:i,sort:o,offset:a,impute:s,as:u}=this._stack;if(s&&n){const{bandPosition:o=.5,bin:a}=n;a&&e.push({type:"formula",expr:`${o}*`+b9(n,{expr:"datum"})+`+${1-o}*`+b9(n,{expr:"datum",binSuffix:"end"}),as:b9(n,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:r,groupby:[...i,...t],key:b9(n,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...t],field:r,sort:o,as:u,offset:a}),e}}class Pie extends Cte{constructor(e,t){super(e),this.transform=t}clone(){return new Pie(null,e1(this.transform))}addDimensions(e){this.transform.groupby=f1(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach((t=>e.add(t.field))),this.transform.window.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??b9(e)}hash(){return`WindowTransform ${i1(this.transform)}`}assemble(){const e=[],t=[],n=[],r=[];for(const i of this.transform.window)t.push(i.op),n.push(this.getDefaultName(i)),r.push(void 0===i.param?null:i.param),e.push(void 0===i.field?null:i.field);const i=this.transform.frame,o=this.transform.groupby;if(i&&null===i[0]&&null===i[1]&&t.every((e=>O3(e))))return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==o?{groupby:o}:{}};const a=[],s=[];if(void 0!==this.transform.sort)for(const e of this.transform.sort)a.push(e.field),s.push(e.order??"ascending");const u={field:a,order:s},l=this.transform.ignorePeers;return{type:"window",params:r,as:n,ops:t,fields:e,sort:u,...void 0!==l?{ignorePeers:l}:{},...void 0!==o?{groupby:o}:{},...void 0!==i?{frame:i}:{}}}}function Lie(e){if(e instanceof sie)if(1!==e.numChildren()||e.children[0]instanceof Dte){const n=e.model.component.data.main;Bie(n);const r=(t=e,function e(n){if(!(n instanceof sie)){const r=n.clone();if(r instanceof Dte){const e=Iie+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof aie||r instanceof Rie||r instanceof Pie||r instanceof zie)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}),i=e.children.map(r).flat();for(const e of i)e.parent=n}else{const t=e.children[0];(t instanceof aie||t instanceof Rie||t instanceof Pie||t instanceof zie)&&t.addDimensions(e.fields),t.swapWithParent(),Lie(e)}else e.children.map(Lie);var t}function Bie(e){if(e instanceof Dte&&e.type===xte.Main&&1===e.numChildren()){const t=e.children[0];t instanceof sie||(t.swapWithParent(),Bie(e))}}const Iie="scale_";function jie(e){for(const t of e){for(const e of t.children)if(e.parent!==t)return!1;if(!jie(t.children))return!1}return!0}function Uie(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function qie(e,t,n){let r=e.sources,i=!1;return i=Uie(new Cie,r)||i,i=Uie(new Sie(t),r)||i,r=r.filter((e=>e.numChildren()>0)),i=Uie(new Fie,r)||i,r=r.filter((e=>e.numChildren()>0)),n||(i=Uie(new Die,r)||i,i=Uie(new Tie(t),r)||i,i=Uie(new Aie,r)||i,i=Uie(new Mie,r)||i,i=Uie(new $ie,r)||i,i=Uie(new Nie,r)||i,i=Uie(new Eie,r)||i,i=Uie(new Oie,r)||i),e.sources=r,i}class Wie{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,t){return new Wie((()=>e(t)))}}function Hie(e){xoe(e)?function(e){const t=e.component.scales;for(const n of v1(t)){const r=Vie(e,n);if(t[n].setWithExplicit("domains",r),Qie(e,n),e.component.data.isFaceted){let t=e;for(;!woe(t)&&t.parent;)t=t.parent;if("shared"===t.component.resolve.scale[n])for(const e of r.value)J3(e)&&(e.data=Iie+e.data.replace(Iie,""))}}}(e):function(e){for(const t of e.children)Hie(t);const t=e.component.scales;for(const n of v1(t)){let r,i=null;for(const t of e.children){const e=t.component.scales[n];if(e){r=void 0===r?e.getWithExplicit("domains"):fte(r,e.getWithExplicit("domains"),"domains","scale",Kie);const t=e.get("selectionExtent");i&&t&&i.param!==t.param&&y5.warn(v5.NEEDS_SAME_SELECTION),i=t}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}(e)}function Vie(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=function(e,t,n,r){if("unaggregated"===e){const{valid:e,reason:r}=Jie(t,n);if(!e)return void y5.warn(r)}else if(void 0===e&&r.useUnaggregatedDomain){const{valid:e}=Jie(t,n);if(e)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),"x"===t&&M9(r.x2)?M9(r.x)?fte(Yie(n,i,e,"x"),Yie(n,i,e,"x2"),"domain","scale",Kie):Yie(n,i,e,"x2"):"y"===t&&M9(r.y2)?M9(r.y)?fte(Yie(n,i,e,"y"),Yie(n,i,e,"y2"),"domain","scale",Kie):Yie(n,i,e,"y2"):Yie(n,i,e,t)}function Gie(e,t,n){const r=X6(n)?.unit;return"temporal"===t||r?function(e,t,n){return e.map((e=>({signal:`{data: ${R9(e,{timeUnit:n,type:t})}}`})))}(e,t,r):[e]}function Yie(e,t,n,r){const{encoding:i}=n,o=M9(i[r]),{type:a}=o,s=o.timeUnit;if(function(e){return e&&e.unionWith}(t)){const i=Yie(e,void 0,n,r),o=Gie(t.unionWith,a,s);return ste([...i.value,...o])}if(X3(t))return ste([t]);if(t&&"unaggregated"!==t&&!I4(t))return ste(Gie(t,a,s));const u=n.stack;if(u&&r===u.fieldChannel){if("normalize"===u.offset)return ute([[0,1]]);const e=n.requestDataName(xte.Main);return ute([{data:e,field:n.vgField(r,{suffix:"start"})},{data:e,field:n.vgField(r,{suffix:"end"})}])}const l=E3(r)&&a9(o)?function(e,t,n){if(!R4(n))return;const r=e.fieldDef(t),i=r.sort;if(Y8(i))return{op:"min",field:sre(r,t),order:"ascending"};const{stack:o}=e,a=o?[...o.groupbyField?[o.groupbyField]:[],...o.stackBy.map((e=>e.fieldDef.field))]:void 0;if(G8(i)){return Xie(i,o&&!a1(a,i.field))}if(V8(i)){const{encoding:t,order:n}=i,r=e.fieldDef(t),{aggregate:s,field:u}=r,l=o&&!a1(a,u);if($3(s)||T3(s))return Xie({field:b9(r),order:n},l);if(O3(s)||!s)return Xie({op:s,field:u,order:n},l)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(a1(["ascending",void 0],i))return!0}return}(n,r,e):void 0;if(u9(o)){return ute(Gie([o.datum],a,s))}const c=o;if("unaggregated"===t){const e=n.requestDataName(xte.Main),{field:t}=o;return ute([{data:e,field:b9({field:t,aggregate:"min"})},{data:e,field:b9({field:t,aggregate:"max"})}])}if(I3(c.bin)){if(R4(e))return ute("bin-ordinal"===e?[]:[{data:w1(l)?n.requestDataName(xte.Main):n.requestDataName(xte.Raw),field:n.vgField(r,L9(c,r)?{binSuffix:"range"}:{}),sort:!0!==l&&yv(l)?l:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:e}=c;if(I3(e)){const t=nie(n,c.field,e);return ute([new Wie((()=>{const e=n.getSignalName(t);return`[${e}.start, ${e}.stop]`}))])}return ute([{data:n.requestDataName(xte.Main),field:n.vgField(r,{})}])}}if(c.timeUnit&&a1(["time","utc"],e)&&n9(c,xoe(n)?n.encoding[W2(r)]:void 0,n.markDef,n.config)){const e=n.requestDataName(xte.Main);return ute([{data:e,field:n.vgField(r)},{data:e,field:n.vgField(r,{suffix:"end"})}])}return ute(l?[{data:w1(l)?n.requestDataName(xte.Main):n.requestDataName(xte.Raw),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(xte.Main),field:n.vgField(r)}])}function Xie(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":q8),...r?{field:M1(r)}:{},...i?{order:i}:{}}}function Qie(e,t){const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=I4(r)&&r,a=U3(i)&&q3(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function Jie(e,t){const{aggregate:n,type:r}=e;return n?db(n)&&!L3[n]?{valid:!1,reason:v5.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:v5.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:v5.unaggregateDomainHasNoEffectForRawField(e)}}function Kie(e,t,n,r){return e.explicit&&t.explicit&&y5.warn(v5.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Zie(e){if(J3(e)&&db(e.field))return e.field;if(function(e){return!gv(e)&&"fields"in e&&!("data"in e)}(e)){let t;for(const n of e.fields)if(J3(n)&&db(n.field))if(t){if(t!==n.field)return y5.warn(v5.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}else t=n.field;return y5.warn(v5.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}if(function(e){return!gv(e)&&"fields"in e&&"data"in e}(e)){y5.warn(v5.FACETED_INDEPENDENT_SAME_SOURCE);const t=e.fields[0];return db(t)?t:void 0}}function eoe(e,t){return function(e){const t=f1(e.map((e=>{if(J3(e)){const{sort:t,...n}=e;return n}return e})),i1),n=f1(e.map((e=>{if(J3(e)){const t=e.sort;return void 0===t||w1(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((e=>void 0!==e)),i1);if(0===t.length)return;if(1===t.length){const t=e[0];if(J3(t)&&n.length>0){let e=n[0];if(n.length>1)y5.warn(v5.MORE_THAN_ONE_SORT),e=!0;else if(yv(e)&&"field"in e){const n=e.field;t.field===n&&(e=!e.order||{order:e.order})}return{...t,sort:e}}return t}const r=f1(n.map((e=>w1(e)||!("op"in e)||db(e.op)&&e.op in N3?e:(y5.warn(v5.domainSortDropped(e)),!0))),i1);let i;1===r.length?i=r[0]:r.length>1&&(y5.warn(v5.MORE_THAN_ONE_SORT),i=!0);const o=f1(e.map((e=>J3(e)?e.data:null)),(e=>e));if(1===o.length&&null!==o[0])return{data:o[0],fields:t.map((e=>e.field)),...i?{sort:i}:{}};return{fields:t,...i?{sort:i}:{}}}(e.component.scales[t].get("domains").map((t=>(J3(t)&&(t.data=e.lookupDataSource(t.data)),t))))}function toe(e){return koe(e)||_oe(e)?e.children.reduce(((e,t)=>e.concat(toe(t))),noe(e)):noe(e)}function noe(e){return v1(e.component.scales).reduce(((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:u,range:l,reverse:c,...f}=i,d=function(e,t,n,r){if(u3(n)){if(Q3(e))return{step:{signal:`${t}_step`}}}else if(yv(e)&&J3(e))return{...e,data:r.lookupDataSource(e.data)};return e}(i.range,o,n,e),h=eoe(e,n),p=s?function(e,t,n,r){const i=Vne(e,t.param,t);return{signal:P4(n.get("type"))&&gv(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}(e,s,r,h):null;return t.push({name:o,type:a,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...void 0!==c?{reverse:c}:{},...f}),t}),[])}class roe extends ate{constructor(e,t){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",t)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||s1(this.get("domains"),(e=>gv(e)&&2===e.length&&e[0]<=0&&e[1]>=0))}}const ioe=["range","scheme"];function ooe(e){return"x"===e?"width":"y"===e?"height":void 0}function aoe(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:r,field:i}=n,o=ooe(t),a=e.getName(o);if(yv(r)&&r.binned&&void 0!==r.step)return new Wie((()=>{const n=e.scaleName(t),i=`(domain("${n}")[1] - domain("${n}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${i})`}));if(I3(r)){const t=nie(e,i,r);return new Wie((()=>{const n=e.getSignalName(t),r=`(${n}.stop - ${n}.start) / ${n}.step`;return`${e.getSignalName(a)} / (${r})`}))}}}function soe(e,t){const n=t.specifiedScales[e],{size:r}=t,i=t.getScaleComponent(e).get("type");for(const r of ioe)if(void 0!==n[r]){const o=Q4(i,r),a=J4(e,r);if(o)if(a)y5.warn(a);else switch(r){case"range":{const r=n.range;if(gv(r)){if(u3(e))return ste(r.map((e=>{if("width"===e||"height"===e){const n=t.getName(e),r=t.getSignalName.bind(t);return Wie.fromName(r,n)}return e})))}else if(yv(r))return ste({data:t.requestDataName(xte.Main),field:r.field,sort:{op:"min",field:t.vgField(e)}});return ste(r)}case"scheme":return ste(uoe(n[r]))}else y5.warn(v5.scalePropertyNotWorkWithScaleType(i,r,e))}if(e===W1||e===H1){const t=e===W1?"width":"height",n=r[t];if(U7(n)){if(R4(i))return ste({step:n.step});y5.warn(v5.stepDropped(t))}}const{rangeMin:o,rangeMax:a}=n,s=function(e,t){const{size:n,config:r,mark:i,encoding:o}=t,a=t.getSignalName.bind(t),{type:s}=M9(o[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case W1:case H1:{if(a1(["point","band"],u))if(e!==W1||n.width){if(e===H1&&!n.height){const e=G7(r.view,"height");if(U7(e))return e}}else{const e=G7(r.view,"width");if(U7(e))return e}const i=ooe(e),o=t.getName(i);return e===H1&&P4(u)?[Wie.fromName(a,o),0]:[0,Wie.fromName(a,o)]}case a2:{const o=loe(i,t.component.scales[e].get("zero"),r),a=function(e,t,n,r){const i={x:aoe(n,"x"),y:aoe(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const e=foe(t,i,r.view);return cb(e)?e-1:new Wie((()=>`${e.signal} - 1`))}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const e=foe(t,i,r.view);return cb(e)?Math.pow(coe*e,2):new Wie((()=>`pow(0.95 * ${e.signal}, 2)`))}}throw new Error(v5.incompatibleChannel("size",e))}(i,n,t,r);return B4(u)?function(e,t,n){const r=()=>{const r=a5(t),i=a5(e),o=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${o}, ${o})`};return X3(t)?new Wie(r):{signal:r()}}(o,a,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&gv(n)?n.length+1:(y5.warn(v5.domainRequiredForThresholdScale(r)),3)}}(u,r,l,e)):[o,a]}case Q1:return[0,2*Math.PI];case s2:return[0,360];case Y1:return[0,new Wie((()=>`min(${t.getSignalName("width")},${t.getSignalName("height")})/2`))];case f2:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case d2:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case o2:return"symbol";case n2:case r2:case i2:return"ordinal"===u?"nominal"===s?"category":"ordinal":void 0!==c?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case u2:case l2:case c2:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${e}`)}(e,t);return(void 0!==o||void 0!==a)&&Q4(i,"rangeMin")&&gv(s)&&2===s.length?ste([o??s[0],a??s[1]]):ute(s)}function uoe(e){return function(e){return!db(e)&&!!e.name}(e)?{scheme:e.name,...n1(e,["name"])}:{scheme:e}}function loe(e,t,n){if(t)return X3(t)?{signal:`${t.signal} ? 0 : ${loe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(v5.incompatibleChannel("size",e))}const coe=.95;function foe(e,t,n){const r=U7(e.width)?e.width.step:V7(n,"width"),i=U7(e.height)?e.height.step:V7(n,"height");return t.x||t.y?new Wie((()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`)):Math.min(r,i)}function doe(e,t){xoe(e)?function(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of v1(n)){const u=a[s],l=n[s],c=e.getScaleComponent(s),f=M9(i[s]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=Q4(h,t),y=J4(s,t);if(void 0!==d&&(g?y&&y5.warn(y):y5.warn(v5.scalePropertyNotWorkWithScaleType(h,t,s))),g&&void 0===y)if(void 0!==d){const e=f.timeUnit,n=f.type;switch(t){case"domainMax":case"domainMin":O6(u[t])||"temporal"===n||e?l.set(t,{signal:R9(u[t],{type:n,timeUnit:e})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const n=t in hoe?hoe[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,markDef:o,config:r}):r.scale[t];void 0!==n&&l.set(t,n,!1)}}}(e,t):moe(e,t)}const hoe={bins:({model:e,fieldOrDatumDef:t})=>a9(t)?function(e,t){const n=t.bin;if(I3(n)){const r=nie(e,t.field,n);return new Wie((()=>e.getSignalName(r)))}if(j3(n)&&U3(n)&&void 0!==n.step)return{step:n.step};return}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function(e,t){if(a1([n2,r2,i2],e)&&"nominal"!==t)return"hcl";return}(e,t.type),nice:({scaleType:e,channel:t,domain:n,fieldOrDatumDef:r})=>function(e,t,n,r){if(D9(r)?.bin||gv(n)||a1([b4,x4],e))return;return t in a3||void 0}(e,t,n,r),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>function(e,t,n,r,i,o){if(e in a3){if(L4(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:t,orient:a}=i;if("bar"===t&&(!a9(r)||!r.bin&&!r.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(t===E4)return n.pointPadding}return}(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,config:r})=>function(e,t,n,r){if(void 0!==e)return;if(t in a3){const{bandPaddingInner:e,barBandPaddingInner:t,rectBandPaddingInner:i}=r;return T1(e,"bar"===n?t:i)}return}(e,t,n.type,r.scale),paddingOuter:({scalePadding:e,channel:t,scaleType:n,markDef:r,scalePaddingInner:i,config:o})=>function(e,t,n,r,i,o){if(void 0!==e)return;if(t in a3&&n===S4){const{bandPaddingOuter:e}=o;return T1(e,X3(i)?{signal:`${i.signal}/2`}:i/2)}return}(e,t,n,r.type,i,o.scale),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return P4(e)&&"descending"===t?X3(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(P4(e)&&"descending"===t)return!0;return}(t,a9(e)?e.sort:void 0,n,r.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>function(e,t,n,r,i){if(n&&"unaggregated"!==n&&P4(i)){if(gv(n)){const e=n[0],t=n[n.length-1];if(e<=0&&t>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!B4(i))return!0;if((!a9(t)||!t.bin)&&a1([...s3,...c3],e)){const{orient:t,type:n}=r;return!a1(["bar","area","line","trail"],n)||!("horizontal"===t&&"y"===e||"vertical"===t&&"x"===e)}return!1}(e,t,n,r,i)};function poe(e){xoe(e)?function(e){const t=e.component.scales;for(const n of k3){const r=t[n];if(!r)continue;const i=soe(n,e);r.setWithExplicit("range",i)}}(e):moe(e,"range")}function moe(e,t){const n=e.component.scales;for(const n of e.children)"range"===t?poe(n):doe(n,t);for(const r of v1(n)){let i;for(const n of e.children){const e=n.component.scales[r];if(e){i=fte(i,e.getWithExplicit(t),t,"scale",lte(((e,n)=>{switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0})))}}n[r].setWithExplicit(t,i)}}function goe(e,t,n,r){const i=function(e,t,n){switch(t.type){case"nominal":case"ordinal":if(A2(e)||"discrete"===M3(e))return"shape"===e&&"ordinal"===t.type&&y5.warn(v5.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(e in a3){if(a1(["rect","bar","image","rule"],n.type))return"band"}else if("arc"===n.type&&e in l3)return"band";return x8(n[H2(e)])||m9(t)&&t.axis?.tickBand?"band":"point";case"temporal":return A2(e)?"time":"discrete"===M3(e)?(y5.warn(v5.discreteChannelCannotEncode(e,"temporal")),"ordinal"):a9(t)&&t.timeUnit&&X6(t.timeUnit).utc?"utc":"time";case"quantitative":return A2(e)?a9(t)&&I3(t.bin)?"bin-ordinal":"linear":"discrete"===M3(e)?(y5.warn(v5.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(v5.invalidFieldType(t.type))}(t,n,r),{type:o}=e;return E3(t)?void 0!==o?function(e,t){if(!E3(e))return!1;switch(e){case W1:case H1:case Q1:case Y1:return L4(t)||a1(["band","point"],t);case a2:case f2:case u2:case l2:case c2:case s2:return L4(t)||B4(t)||a1(["band","point","ordinal"],t);case n2:case r2:case i2:return"band"!==t;case d2:case o2:return"ordinal"===t||B4(t)}}(t,o)?a9(n)&&(a=o,s=n.type,!(a1([c4,d4],s)?void 0===a||R4(a):s===f4?a1([b4,x4,void 0],a):s!==l4||a1([m4,g4,y4,v4,w4,_4,k4,p4,void 0],a)))?(y5.warn(v5.scaleTypeNotWorkWithFieldDef(o,i)),i):o:(y5.warn(v5.scaleTypeNotWorkWithChannel(t,o,i)),i):i:null;var a,s}function yoe(e){xoe(e)?e.component.scales=function(e){const{encoding:t,mark:n,markDef:r}=e;return k3.reduce(((i,o)=>{const a=M9(t[o]);if(a&&n===d8&&o===o2&&a.type===h4)return i;let s=a&&a.scale;if(a&&null!==s&&!1!==s){s??(s={});const t=goe(s,o,a,r);i[o]=new roe(e.scaleName(`${o}`,!0),{value:t,explicit:s.type===t})}return i}),{})}(e):e.component.scales=function(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const n of e.children){yoe(n);for(const o of v1(n.component.scales))if((t=i.scale)[o]??(t[o]=Mre(o,e)),"shared"===i.scale[o]){const e=r[o],t=n.component.scales[o].getWithExplicit("type");e?C4(e.value,t.value)?r[o]=fte(e,t,"type","scale",voe):(i.scale[o]="independent",delete r[o]):r[o]=t}}for(const t of v1(r)){const i=e.scaleName(t,!0),o=r[t];n[t]=new roe(i,o);for(const n of e.children){const e=n.component.scales[t];e&&(n.renameScale(e.get("name"),i),e.merged=!0)}}return n}(e)}const voe=lte(((e,t)=>M4(e)-M4(t)));class boe{constructor(){this.nameMap={}}rename(e,t){this.nameMap[e]=t}has(e){return void 0!==this.nameMap[e]}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function xoe(e){return"unit"===e?.type}function woe(e){return"facet"===e?.type}function _oe(e){return"concat"===e?.type}function koe(e){return"layer"===e?.type}class Eoe{constructor(e,t,n,r,i,o,a){this.type=t,this.parent=n,this.config=i,this.correctDataNames=e=>(e.from&&e.from.data&&(e.from.data=this.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=this.lookupDataSource(e.from.facet.data)),e),this.parent=n,this.config=i,this.view=V3(a),this.name=e.name??r,this.title=Y3(e.title)?{text:e.title}:e.title?V3(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new boe,this.projectionNameMap=n?n.projectionNameMap:new boe,this.signalNameMap=n?n.signalNameMap:new boe,this.data=e.data,this.description=e.description,this.transforms=(e.transform??[]).map((e=>Mee(e)?{filter:K0(e.filter,s4)}:e)),this.layout="layer"===t||"unit"===t?{}:function(e,t,n){const r=n[t],i={},{spacing:o,columns:a}=r;void 0!==o&&(i.spacing=o),void 0!==a&&(J8(e)&&!X8(e.facet)||B7(e))&&(i.columns=a),I7(e)&&(i.columns=1);for(const t of W7)if(void 0!==e[t])if("spacing"===t){const n=e[t];i[t]=cb(n)?n:{row:n.row??o,column:n.column??o}}else i[t]=e[t];return i}(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:J8(e)||n&&n.component.data.isFaceted&&void 0===e.data},layoutSize:new ate,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?e1(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(e,{ignoreRange:t}={}){yoe(e),Hie(e);for(const t of X4)doe(e,t);t||poe(e)}(this)}parseProjection(){Zre(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){qre(this)}assembleGroupStyle(){if("unit"===this.type||"layer"===this.type)return this.view?.style??"cell"}assembleEncodeFromView(e){const{style:t,...n}=e,r={};for(const e of v1(n)){const t=n[e];void 0!==t&&(r[e]=i5(t))}return r}assembleGroupEncodeEntry(e){let t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=i5(this.description)),"unit"!==this.type&&"layer"!==this.type)?y1(t)?void 0:t:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...t??{}}}assembleLayout(){if(!this.layout)return;const{spacing:e,...t}=this.layout,{component:n,config:r}=this,i=function(e,t){const n={};for(const r of D2){const i=e[r];if(i?.facetFieldDef){const{titleAnchor:e,titleOrient:o}=cre(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=ure(r,o),s=wre(e,a);void 0!==s&&(n[a]=s)}}return y1(n)?void 0:n}(n.layoutHeaders,r);return{padding:e,...this.assembleDefaultLayout(),...t,...i?{titleBand:i}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let t=[];for(const n of D2)e[n].title&&t.push(hre(this,n));for(const e of fre)t=t.concat(gre(this,e));return t}assembleAxes(){return function(e,t){const{x:n=[],y:r=[]}=e;return[...n.map((e=>Xne(e,"grid",t))),...r.map((e=>Xne(e,"grid",t))),...n.map((e=>Xne(e,"main",t))),...r.map((e=>Xne(e,"main",t)))].filter((e=>e))}(this.component.axes,this.config)}assembleLegends(){return Yre(this)}assembleProjections(){return Xre(this)}assembleTitle(){const{encoding:e,...t}=this.title??{},n={...G3(this.config.title).nonMark,...t,...e?{encode:{update:e}}:{}};if(n.text)return a1(["unit","layer"],this.type)?a1(["middle",void 0],n.anchor)&&(n.frame??(n.frame="group")):n.anchor??(n.anchor="start"),y1(n)?void 0:n}assembleGroup(e=[]){const t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);const n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||woe(this.parent)?toe(this):[];r.length>0&&(t.scales=r);const i=this.assembleAxes();i.length>0&&(t.axes=i);const o=this.assembleLegends();return o.length>0&&(t.legends=o),t}getName(e){return _1((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(xte[e].toLowerCase())}requestDataName(e){const t=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t}getSizeSignalRef(e){if(woe(this.parent)){const t=f3(Cre(e)),n=this.component.scales[t];if(n&&!n.merged){const e=n.get("type"),r=n.get("range");if(R4(e)&&Q3(r)){const e=n.get("name"),r=Zie(eoe(this,t));if(r){return{signal:Are(e,n,b9({aggregate:"distinct",field:r},{expr:"datum"}))}}return y5.warn(v5.unknownField(t)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const t=this.component.data.outputNodes[e];return t?t.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,t){this.signalNameMap.rename(e,t)}renameScale(e,t){this.scaleNameMap.rename(e,t)}renameProjection(e,t){this.projectionNameMap.rename(e,t)}scaleName(e,t){return t?this.getName(e):B2(e)&&E3(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,t){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(v5.selectionNotFound(t));return n}hasAxisOrientSignalRef(){return this.component.axes.x?.some?.((e=>e.hasOrientSignalRef()))||this.component.axes.y?.some?.((e=>e.hasOrientSignalRef()))}}class Soe extends Eoe{vgField(e,t={}){const n=this.fieldDef(e);if(n)return b9(n,t)}reduceFieldDef(e,t){return function(e,t,n,r){return e?v1(e).reduce(((n,i)=>{const o=e[i];return gv(o)?o.reduce(((e,n)=>t.call(r,e,n,i)),n):t.call(r,n,o,i)}),n):n}(this.getMapping(),((t,n,r)=>{const i=D9(n);return i?e(t,i,r):t}),t)}forEachFieldDef(e,t){e7(this.getMapping(),((t,n)=>{const r=D9(t);r&&e(r,n)}),t)}}class Aoe extends Cte{constructor(e,t){super(e),this.transform=t,this.transform=e1(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"value",n[1]??"density"]}clone(){return new Aoe(null,e1(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${i1(this.transform)}`}assemble(){const{density:e,...t}=this.transform;return{type:"kde",field:e,...t}}}class Coe extends Cte{constructor(e,t){super(e),this.filter=t}clone(){return new Coe(null,{...this.filter})}static make(e,t){const{config:n,mark:r,markDef:i}=t;if("filter"!==l5("invalid",i,n))return null;const o=t.reduceFieldDef(((e,n,i)=>{const o=E3(i)&&t.getScaleComponent(i);if(o){P4(o.get("type"))&&"count"!==n.aggregate&&!h8(r)&&(e[n.field]=n)}return e}),{});return v1(o).length?new Coe(e,o):null}dependentFields(){return new Set(v1(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${i1(this.filter)}`}assemble(){const e=v1(this.filter).reduce(((e,t)=>{const n=this.filter[t],r=b9(n,{expr:"datum"});return null!==n&&("temporal"===n.type?e.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(e.push(`isValid(${r})`),e.push(`isFinite(+${r})`))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class Doe extends Cte{constructor(e,t){super(e),this.transform=t,this.transform=e1(t);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map(((e,t)=>r[t]??e))}clone(){return new Doe(this.parent,e1(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${i1(this.transform)}`}assemble(){const{flatten:e,as:t}=this.transform;return{type:"flatten",fields:e,as:t}}}class Moe extends Cte{constructor(e,t){super(e),this.transform=t,this.transform=e1(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"key",n[1]??"value"]}clone(){return new Moe(null,e1(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${i1(this.transform)}`}assemble(){const{fold:e,as:t}=this.transform;return{type:"fold",fields:e,as:t}}}class Foe extends Cte{constructor(e,t,n,r){super(e),this.fields=t,this.geojson=n,this.signal=r}clone(){return new Foe(null,e1(this.fields),this.geojson,this.signal)}static parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;let n=0;for(const r of[[Z1,K1],[t2,e2]]){const i=r.map((e=>{const n=M9(t.encoding[e]);return a9(n)?n.field:u9(n)?{expr:`${n.datum}`}:h9(n)?{expr:`${n.value}`}:void 0}));(i[0]||i[1])&&(e=new Foe(e,i,null,t.getName("geojson_"+n++)))}if(t.channelHasField(o2)){const r=t.typedFieldDef(o2);r.type===h4&&(e=new Foe(e,null,r.field,t.getName("geojson_"+n++)))}return e}dependentFields(){const e=(this.fields??[]).filter(db);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${i1(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Noe extends Cte{constructor(e,t,n,r){super(e),this.projection=t,this.fields=n,this.as=r}clone(){return new Noe(null,this.projection,e1(this.fields),e1(this.as))}static parseAll(e,t){if(!t.projectionName())return e;for(const n of[[Z1,K1],[t2,e2]]){const r=n.map((e=>{const n=M9(t.encoding[e]);return a9(n)?n.field:u9(n)?{expr:`${n.datum}`}:h9(n)?{expr:`${n.value}`}:void 0})),i=n[0]===t2?"2":"";(r[0]||r[1])&&(e=new Noe(e,t.projectionName(),r,[t.getName(`x${i}`),t.getName(`y${i}`)]))}return e}dependentFields(){return new Set(this.fields.filter(db))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${i1(this.fields)} ${i1(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class $oe extends Cte{constructor(e,t){super(e),this.transform=t}clone(){return new $oe(null,e1(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:t=0,stop:n,step:r}=e;return{signal:`sequence(${[t,n,...r?[r]:[]].join(",")})`}}static makeFromTransform(e,t){return new $oe(e,t)}static makeFromEncoding(e,t){const n=t.encoding,r=n.x,i=n.y;if(a9(r)&&a9(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,{method:s,value:u,frame:l,keyvals:c}=o.impute,f=t7(t.mark,n);return new $oe(e,{impute:o.field,key:a.field,...s?{method:s}:{},...void 0!==u?{value:u}:{},...l?{frame:l}:{},...void 0!==c?{keyvals:c}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${i1(this.transform)}`}assemble(){const{impute:e,key:t,keyvals:n,method:r,groupby:i,value:o,frame:a=[null,null]}=this.transform,s={type:"impute",field:e,key:t,...n?{keyvals:(u=n,void 0!==u?.stop?this.processSequence(n):n)}:{},method:"value",...i?{groupby:i}:{},value:r&&"value"!==r?null:o};var u;if(r&&"value"!==r){return[s,{type:"window",as:[`imputed_${e}_value`],ops:[r],fields:[e],frame:a,ignorePeers:!1,...i?{groupby:i}:{}},{type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e}]}return[s]}}class Toe extends Cte{constructor(e,t){super(e),this.transform=t,this.transform=e1(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.loess]}clone(){return new Toe(null,e1(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${i1(this.transform)}`}assemble(){const{loess:e,on:t,...n}=this.transform;return{type:"loess",x:t,y:e,...n}}}class Ooe extends Cte{constructor(e,t,n){super(e),this.transform=t,this.secondary=n}clone(){return new Ooe(null,e1(this.transform),this.secondary)}static make(e,t,n,r){const i=t.component.data.sources,{from:o}=n;let a=null;if(function(e){return"data"in e}(o)){let e=Yoe(o.data,i);e||(e=new gie(o.data),i.push(e));const n=t.getName(`lookup_${r}`);a=new Dte(e,n,xte.Lookup,t.component.data.outputNodeRefCounts),t.component.data.outputNodes[n]=a}else if(function(e){return"param"in e}(o)){const e=o.param;let r;n={as:e,...n};try{r=t.getSelectionComponent(_1(e),e)}catch(t){throw new Error(v5.cannotLookupVariableParameter(e))}if(a=r.materialized,!a)throw new Error(v5.noSameUnitLookup(e))}return new Ooe(e,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?jv(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${i1({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:jv(this.transform.as)}:{}};else{let t=this.transform.as;db(t)||(y5.warn(v5.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}}class zoe extends Cte{constructor(e,t){super(e),this.transform=t,this.transform=e1(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"prob",n[1]??"value"]}clone(){return new zoe(null,e1(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${i1(this.transform)}`}assemble(){const{quantile:e,...t}=this.transform;return{type:"quantile",field:e,...t}}}class Roe extends Cte{constructor(e,t){super(e),this.transform=t,this.transform=e1(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.regression]}clone(){return new Roe(null,e1(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${i1(this.transform)}`}assemble(){const{regression:e,on:t,...n}=this.transform;return{type:"regression",x:t,y:e,...n}}}class Poe extends Cte{constructor(e,t){super(e),this.transform=t}clone(){return new Poe(null,e1(this.transform))}addDimensions(e){this.transform.groupby=f1((this.transform.groupby??[]).concat(e),(e=>e))}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${i1(this.transform)}`}assemble(){const{pivot:e,value:t,groupby:n,limit:r,op:i}=this.transform;return{type:"pivot",field:e,value:t,...void 0!==r?{limit:r}:{},...void 0!==i?{op:i}:{},...void 0!==n?{groupby:n}:{}}}}class Loe extends Cte{constructor(e,t){super(e),this.transform=t}clone(){return new Loe(null,e1(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${i1(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Boe(e){let t=0;return function n(r,i){if(r instanceof gie&&!r.isGenerator&&!hte(r.data)){e.push(i);i={name:null,source:i.name,transform:[]}}if(r instanceof fie&&(r.parent instanceof gie&&!i.source?(i.format={...i.format??{},parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof sie)return i.name||(i.name="data_"+t++),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void e.push(...r.assemble());if((r instanceof pie||r instanceof mie||r instanceof Coe||r instanceof Wne||r instanceof are||r instanceof Noe||r instanceof aie||r instanceof Ooe||r instanceof Pie||r instanceof zie||r instanceof Moe||r instanceof Doe||r instanceof Aoe||r instanceof Toe||r instanceof zoe||r instanceof Roe||r instanceof die||r instanceof Loe||r instanceof Poe)&&i.transform.push(r.assemble()),(r instanceof iie||r instanceof Mte||r instanceof $oe||r instanceof Rie||r instanceof Foe)&&i.transform.push(...r.assemble()),r instanceof Dte)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof Dte)r.setSource(i.name);else if(i.name||(i.name="data_"+t++),r.setSource(i.name),1===r.numChildren()){e.push(i);i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof Dte&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+t++);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const e of r.children){n(e,{name:null,source:o,transform:[]})}break}}}}function Ioe(e,t){const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],s=lre("title",null,r,t);let u=E9(a,r,{allowDisabling:!0,includeDefault:void 0===s||!!s});i.component.layoutHeaders[t].title&&(u=gv(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const l=lre("labelOrient",a.header,r,t),c=null!==a.header&&T1(a.header?.labels,r.header.labels,!0),f=a1(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:null!==a.header?u:null,facetFieldDef:a,[f]:"facet"===t?[]:[joe(e,t,c)]}}}function joe(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Uoe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:o}=e.component;if(o.axis[t]=Fre(o,t),"shared"===o.axis[t]){const o="x"===t?"column":"row",a=i[o];for(const i of n.component.axes[t]){const t="top"===(r=i.get("orient"))||"left"===r||X3(r)?"header":"footer";a[t]??(a[t]=[joe(e,o,!1)]);const n=Xne(i,"main",e.config,{header:!0});n&&a[t][0].axes.push(n),i.mainExtracted=!0}}}var r}function qoe(e){for(const t of e.children)t.parseLayoutSize()}function Woe(e,t){const n=Cre(t),r=f3(n),i=e.component.resolve,o=e.component.layoutSize;let a;for(const t of e.children){const o=t.component.layoutSize.getWithExplicit(n),s=i.scale[r]??Mre(r,e);if("independent"===s&&"step"===o.value){a=void 0;break}if(a){if("independent"===s&&a.value!==o.value){a=void 0;break}a=fte(a,o,n,"")}else a=o}if(a){for(const r of e.children)e.renameSignal(r.getName(n),e.getName(t)),r.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Hoe(e,t){const n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const e=i.get("type"),n=i.get("range");if(R4(e)){const e=G7(r.view,t);return Q3(n)||U7(e)?"step":e}return H7(r.view,t)}if(e.hasProjection||"arc"===e.mark)return H7(r.view,t);{const e=G7(r.view,t);return U7(e)?e.step:e}}function Voe(e,t,n){return b9(t,{suffix:`by_${b9(e)}`,...n??{}})}class Goe extends Soe{constructor(e,t,n,r){super(e,"facet",t,n,r,e.resolve),this.child=bae(e.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!X8(e))return{facet:this.initFacetFieldDef(e,"facet")};const t=v1(e),n={};for(const r of t){if(![j1,U1].includes(r)){y5.warn(v5.incompatibleChannel(r,"facet"));break}const t=e[r];if(void 0===t.field){y5.warn(v5.emptyFieldDef(t,r));break}n[r]=this.initFacetFieldDef(t,r)}return n}initFacetFieldDef(e,t){const n=$9(e,t);return n.header?n.header=V3(n.header):null===n.header&&(n.header=null),n}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=Xoe(this),this.child.parseData()}parseLayoutSize(){qoe(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(e){for(const t of D2)Ioe(e,t);Uoe(e,"x"),Uoe(e,"y")}(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};for(const t of D2)for(const n of dre){const r=this.component.layoutHeaders[t],i=r[n],{facetFieldDef:o}=r;if(o){const n=lre("titleOrient",o.header,this.config,t);if(["right","bottom"].includes(n)){const r=ure(t,n);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[r]="end"}}if(i?.[0]){const i="row"===t?"height":"width",o="header"===n?"headerBand":"footerBand";"facet"===t||this.child.component.layoutSize.get(i)||(e[o]??(e[o]={}),e[o][t]=.5),r.title&&(e.offset??(e.offset={}),e.offset["row"===t?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){const{column:e,row:t}=this.facet,n=e?this.columnDistinctSignal():t?1:void 0;let r="all";return(t||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(r="none"),{...this.getHeaderLayoutMixins(),...n?{columns:n}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Goe)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroup(e){return this.parent&&this.parent instanceof Goe?{...this.channelHasField("column")?{encode:{update:{columns:{field:b9(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],t=[],n=[];if(this.child instanceof Goe){if(this.child.channelHasField("column")){const r=b9(this.child.facet.column);e.push(r),t.push("distinct"),n.push(`distinct_${r}`)}}else for(const r of s3){const i=this.child.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(R4(o)&&Q3(a)){const i=Zie(eoe(this.child,r));i?(e.push(i),t.push("distinct"),n.push(`distinct_${i}`)):y5.warn(v5.unknownField(r))}}}return{fields:e,ops:t,as:n}}assembleFacet(){const{name:e,data:t}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:o,as:a}=this.getCardinalityAggregateForChild(),s=[];for(const e of D2){const t=this.facet[e];if(t){s.push(b9(t));const{bin:u,sort:l}=t;if(I3(u)&&s.push(b9(t,{binSuffix:"end"})),G8(l)){const{field:e,op:s=q8}=l,u=Voe(t,l);n&&r?(i.push(u),o.push("max"),a.push(u)):(i.push(e),o.push(s),a.push(u))}else if(gv(l)){const n=sre(t,e);i.push(n),o.push("max"),a.push(n)}}}const u=!!n&&!!r;return{name:e,data:t,groupby:s,...u||i.length>0?{aggregate:{...u?{cross:u}:{},...i.length?{fields:i,ops:o,as:a}:{}}}:{}}}facetSortFields(e){const{facet:t}=this,n=t[e];return n?G8(n.sort)?[Voe(n,n.sort,{expr:"datum"})]:gv(n.sort)?[sre(n,e,{expr:"datum"})]:[b9(n,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:t}=this,n=t[e];if(n){const{sort:e}=n;return[(G8(e)?e.order:!gv(e)&&e)||"ascending"]}return[]}assembleLabelTitle(){const{facet:e,config:t}=this;if(e.facet)return vre(e.facet,"facet",t);const n={row:["top","bottom"],column:["left","right"]};for(const r of fre)if(e[r]){const i=lre("labelOrient",e[r]?.header,t,r);if(n[r].includes(i))return vre(e[r],r,t)}}assembleMarks(){const{child:e}=this,t=function(e){const t=[],n=Boe(t);for(const t of e.children)n(t,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),n=e.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||e.assembleTitle(),i=e.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...r?{title:r}:{},...i?{style:i}:{},from:{facet:this.assembleFacet()},sort:{field:D2.map((e=>this.facetSortFields(e))).flat(),order:D2.map((e=>this.facetSortOrder(e))).flat()},...t.length>0?{data:t}:{},...n?{encode:{update:n}}:{},...e.assembleGroup(Ete(this,[]))}]}getMapping(){return this.facet}}function Yoe(e,t){for(const n of t){const t=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,i=t.format?.feature;if(r&&i)continue;const o=e.format?.feature;if((o||i)&&o!==i)continue;const a=t.format?.mesh;if(!r&&!a||r===a)if(pte(e)&&pte(t)){if(Z0(e.values,t.values))return n}else if(hte(e)&&hte(t)){if(e.url===t.url)return n}else if(mte(e)&&e.name===n.dataName)return n}return null}function Xoe(e){let t=function(e,t){if(e.data||!e.parent){if(null===e.data){const e=new gie({values:[]});return t.push(e),e}const n=Yoe(e.data,t);if(n)return gte(e.data)||(n.data.format=l1({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const n=new gie(e.data);return t.push(n),n}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.parent?e.parent.component.data.ancestorParse.clone():new dte,o=e.data;gte(o)?(yte(o)?t=new mie(t,o.sequence):bte(o)&&(t=new pie(t,o.graticule)),i.parseNothing=!0):null===o?.format?.parse&&(i.parseNothing=!0),t=fie.makeExplicit(t,e,i)??t,t=new die(t);const a=e.parent&&koe(e.parent);(xoe(e)||woe(e))&&a&&(t=iie.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=function(e,t,n){let r=0;for(const i of t.transforms){let o,a;if(Iee(i))a=e=new are(e,i),o="derived";else if(Mee(i)){const r=lie(i);a=e=fie.makeWithAncestors(e,{},r,n)??e,e=new Wne(e,t,i.filter)}else if(jee(i))a=e=iie.makeFromTransform(e,i,t),o="number";else if(qee(i))o="date",void 0===n.getWithExplicit(i.field).value&&(e=new fie(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=Mte.makeFromTransform(e,i);else if(Wee(i))a=e=aie.makeFromTransform(e,i),o="number",Bne(t)&&(e=new die(e));else if(Fee(i))a=e=Ooe.make(e,t,i,r++),o="derived";else if(Pee(i))a=e=new Pie(e,i),o="number";else if(Lee(i))a=e=new zie(e,i),o="number";else if(Hee(i))a=e=Rie.makeFromTransform(e,i),o="derived";else if(Vee(i))a=e=new Moe(e,i),o="derived";else if(Bee(i))a=e=new Doe(e,i),o="derived";else if(Nee(i))a=e=new Poe(e,i),o="derived";else if(Ree(i))e=new Loe(e,i);else if(Uee(i))a=e=$oe.makeFromTransform(e,i),o="derived";else if($ee(i))a=e=new Aoe(e,i),o="derived";else if(Tee(i))a=e=new zoe(e,i),o="derived";else if(Oee(i))a=e=new Roe(e,i),o="derived";else{if(!zee(i)){y5.warn(v5.invalidTransformIgnored(i));continue}a=e=new Toe(e,i),o="derived"}if(a&&void 0!==o)for(const e of a.producedFields()??[])n.set(e,o,!1)}return e}(t,e,i));const s=function(e){const t={};if(xoe(e)&&e.component.selection)for(const n of v1(e.component.selection)){const r=e.component.selection[n];for(const e of r.project.items)!e.channel&&$1(e.field)>1&&(t[e.field]="flatten")}return t}(e),u=cie(e);t=fie.makeWithAncestors(t,{},{...s,...u},i)??t,xoe(e)&&(t=Foe.parseAll(t,e),t=Noe.parseAll(t,e)),(xoe(e)||woe(e))&&(a||(t=iie.makeFromEncoding(t,e)??t),t=Mte.makeFromEncoding(t,e)??t,t=are.parseAllForSortIndex(t,e));const l=e.getDataName(xte.Raw),c=new Dte(t,l,xte.Raw,r);if(n[l]=c,t=c,xoe(e)){const n=aie.makeFromEncoding(t,e);n&&(t=n,Bne(e)&&(t=new die(t))),t=$oe.makeFromEncoding(t,e)??t,t=Rie.makeFromEncoding(t,e)??t}xoe(e)&&(t=Coe.make(t,e)??t);const f=e.getDataName(xte.Main),d=new Dte(t,f,xte.Main,r);n[f]=d,t=d,xoe(e)&&function(e,t){for(const[n,r]of x1(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Dte(new Wne(t,e,{param:n}),i,xte.Lookup,e.component.data.outputNodeRefCounts)}}(e,d);let h=null;if(woe(e)){const r=e.getName("facet");t=function(e,t){const{row:n,column:r}=t;if(n&&r){let t=null;for(const i of[n,r])if(G8(i.sort)){const{field:n,op:r=q8}=i.sort;e=t=new zie(e,{joinaggregate:[{op:r,field:n,as:Voe(i,i.sort,{forAs:!0})}],groupby:[b9(i)]})}return t}return null}(t,e.facet)??t,h=new sie(t,e,r,d.getSource()),n[r]=h}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:d,facetRoot:h,ancestorParse:i}}class Qoe extends Eoe{constructor(e,t,n,r){super(e,"concat",t,n,r,e.resolve),"shared"!==e.resolve?.axis?.x&&"shared"!==e.resolve?.axis?.y||y5.warn(v5.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(e).map(((e,t)=>bae(e,this,this.getName(`concat_${t}`),void 0,r)))}parseData(){this.component.data=Xoe(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of v1(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return I7(e)?e.vconcat:j7(e)?e.hconcat:e.concat}parseLayoutSize(){!function(e){qoe(e);const t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";Woe(e,t),Woe(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.forEach((e=>e.assembleSignals())),[]}assembleLayoutSignals(){const e=kre(this);for(const t of this.children)e.push(...t.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleMarks(){return this.children.map((e=>{const t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...t?{title:t}:{},...n?{style:n}:{},...r?{encode:{update:r}}:{},...e.assembleGroup()}}))}assembleDefaultLayout(){const e=this.layout.columns;return{...null!=e?{columns:e}:{},bounds:"full",align:"each"}}}const Joe={disable:1,gridScale:1,scale:1,...q9,labelExpr:1,encode:1},Koe=v1(Joe);class Zoe extends ate{constructor(e={},t={},n=!1){super(),this.explicit=e,this.implicit=t,this.mainExtracted=n}clone(){return new Zoe(e1(this.explicit),e1(this.implicit),this.mainExtracted)}hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}hasOrientSignalRef(){return X3(this.explicit.orient)}}const eae={bottom:"top",top:"bottom",left:"right",right:"left"};function tae(e,t){if(!e)return t.map((e=>e.clone()));{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=t[r];if(!!n!=!!i)return;if(n&&i){const t=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(t.explicit&&o.explicit&&t.value!==o.value)return;e[r]=nae(n,i)}}}return e}function nae(e,t){for(const n of Koe){const r=fte(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",((e,t)=>{switch(n){case"title":return g5(e,t);case"gridScale":return{explicit:e.explicit,value:T1(e.value,t.value)}}return cte(e,t,n,"axis")}));e.setWithExplicit(n,r)}return e}function rae(e,t,n,r,i){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(X3(n.labelAngle)?n.labelAngle:B1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===ore(r,i))return!0}return e===n[t]}const iae=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function oae(e,t){let n=t.axis(e);const r=new Zoe,i=M9(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a["x"===e?"axisX":"axisY"]?.orient||a.axis?.orient||function(e){return"x"===e?"bottom":"left"}(e),u=t.getScaleComponent(e).get("type"),l=Kne(e,u,s,t.config),c=void 0!==n?!n:ere("disable",a.style,n?.style,l).configValue;if(r.set("disable",c,void 0!==n),c)return r;n=n||{};const f=function(e,t,n,r,i){const o=t?.labelAngle;if(void 0!==o)return X3(o)?o:B1(o);{const{configValue:o}=ere("labelAngle",r,t?.style,i);return void 0!==o?B1(o):n!==W1||!a1([d4,c4],e.type)||a9(e)&&e.timeUnit?void 0:270}}(i,n,e,a.style,l),d={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:s,labelAngle:f,mark:o,config:a};for(const i of Koe){const o=i in tre?tre[i](d):H9(i)?n[i]:void 0,s=void 0!==o,u=rae(o,i,n,t,e);if(s&&u)r.set(i,o,u);else{const{configValue:e,configFrom:t}=H9(i)&&"values"!==i?ere(i,a.style,n.style,l):{},c=void 0!==e;s&&!c?r.set(i,o,u):("vgAxisConfig"!==t||iae.has(i)&&c||I9(e)||X3(e))&&r.set(i,e,!1)}}const h=n.encoding??{},p=j9.reduce(((n,i)=>{if(!r.hasAxisPart(i))return n;const o=Dre(h[i]??{},t),a="labels"===i?function(e,t,n){const{encoding:r,config:i}=e,o=M9(r[t])??M9(r[W2(t)]),a=e.axis(t)||{},{format:s,formatType:u}=a;return $8(u)?{text:R8({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:u,config:i}),...n}:n}(t,e,o):o;return void 0===a||y1(a)||(n[i]={update:a}),n}),{});return y1(p)||r.set("encode",p,!!n.encoding||void 0!==n.labelAngle),r}function aae(e,t,n){const r=V3(e),i=l5("orient",r,n);if(r.orient=function(e,t,n){switch(e){case i8:case c8:case f8:case s8:case o8:case n8:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case t8:if(a9(r)&&(j3(r.bin)||a9(i)&&i.aggregate&&!r.aggregate))return"vertical";if(a9(i)&&(j3(i.bin)||a9(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(a9(r)&&r.type===l4&&!I3(r.bin)||c9(r)))return"horizontal";if(!a&&(a9(i)&&i.type===l4&&!I3(i.bin)||c9(i)))return"vertical"}case a8:if(o&&(!a9(r)||!j3(r.bin))&&a&&(!a9(i)||!j3(i.bin)))return;case e8:if(a)return a9(i)&&j3(i.bin)?"horizontal":"vertical";if(o)return a9(r)&&j3(r.bin)?"vertical":"horizontal";if(e===a8){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case r8:case u8:{const t=l9(r),o=l9(i);if(n)return n;if(t&&!o)return"tick"!==e?"horizontal":"vertical";if(!t&&o)return"tick"!==e?"vertical":"horizontal";if(t&&o){const t=r,n=i,o=t.type===f4,a=n.type===f4;return o&&!a?"tick"!==e?"vertical":"horizontal":!o&&a?"tick"!==e?"horizontal":"vertical":!t.aggregate&&n.aggregate?"tick"!==e?"vertical":"horizontal":t.aggregate&&!n.aggregate&&"tick"!==e?"horizontal":"vertical"}return}}return"vertical"}(r.type,t,i),void 0!==i&&i!==r.orient&&y5.warn(v5.orientOverridden(r.orient,i)),"bar"===r.type&&r.orient){const e=l5("cornerRadiusEnd",r,n);if(void 0!==e){const n="horizontal"===r.orient&&t.x2||"vertical"===r.orient&&t.y2?["cornerRadius"]:w8[r.orient];for(const t of n)r[t]=e;void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}void 0===l5("opacity",r,n)&&(r.opacity=function(e,t){if(a1([i8,u8,c8,f8],e)&&!Q9(t))return.7;return}(r.type,t));return void 0===l5("cursor",r,n)&&(r.cursor=function(e,t,n){if(t.href||e.href||l5("href",e,n))return"pointer";return e.cursor}(r,t,n)),r}function sae(e,t){const{config:n}=e;return{...hne(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ene("x",e,{defaultPos:"mid"}),...ene("y",e,{defaultPos:"mid"}),...Qte("size",e),...Qte("angle",e),...uae(e,n,t)}}function uae(e,t,n){return n?{shape:{value:n}}:Qte("shape",e)}function lae(e,t,n){if(void 0===l5("align",e,n))return"center"}function cae(e,t,n){if(void 0===l5("baseline",e,n))return"middle"}function fae(e){const{config:t,markDef:n}=e,{orient:r}=n,i="horizontal"===r?"width":"height",o=e.getScaleComponent("horizontal"===r?"x":"y"),a=l5("size",n,t,{vgChannel:i})??t.tick.bandSize;if(void 0!==a)return a;{const e=o?o.get("range"):void 0;if(e&&Q3(e)&&cb(e.step))return 3*e.step/4;return 3*V7(t.view,i)/4}}const dae={arc:{vgMark:"arc",encodeEntry:e=>({...hne(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ene("x",e,{defaultPos:"mid"}),...ene("y",e,{defaultPos:"mid"}),...une(e,"radius","arc"),...une(e,"theta","arc")})},area:{vgMark:"area",encodeEntry:e=>({...hne(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...one("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...one("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...gne(e)})},bar:{vgMark:"rect",encodeEntry:e=>({...hne(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...une(e,"x","bar"),...une(e,"y","bar")})},circle:{vgMark:"symbol",encodeEntry:e=>sae(e,"circle")},geoshape:{vgMark:"shape",encodeEntry:e=>({...hne(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&a9(n)&&n.type===h4?{field:b9(n,{expr:"datum"})}:{}}]}},image:{vgMark:"image",encodeEntry:e=>({...hne(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...une(e,"x","image"),...une(e,"y","image"),...Ute(e,"url")})},line:{vgMark:"line",encodeEntry:e=>({...hne(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ene("x",e,{defaultPos:"mid"}),...ene("y",e,{defaultPos:"mid"}),...Qte("size",e,{vgChannel:"strokeWidth"}),...gne(e)})},point:{vgMark:"symbol",encodeEntry:e=>sae(e)},rect:{vgMark:"rect",encodeEntry:e=>({...hne(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...une(e,"x","rect"),...une(e,"y","rect")})},rule:{vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...hne(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...one("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...one("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...Qte("size",e,{vgChannel:"strokeWidth"})}:{}}},square:{vgMark:"symbol",encodeEntry:e=>sae(e,"square")},text:{vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...hne(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ene("x",e,{defaultPos:"mid"}),...ene("y",e,{defaultPos:"mid"}),...Ute(e),...Qte("size",e,{vgChannel:"fontSize"}),...Qte("angle",e),...yne("align",lae(e.markDef,n,t)),...yne("baseline",cae(e.markDef,n,t)),...ene("radius",e,{defaultPos:null}),...ene("theta",e,{defaultPos:null})}}},tick:{vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return{...hne(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ene("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ene("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Qte("size",e,{defaultValue:fae(e),vgChannel:i}),[o]:i5(l5("thickness",n,t))}}},trail:{vgMark:"trail",encodeEntry:e=>({...hne(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ene("x",e,{defaultPos:"mid"}),...ene("y",e,{defaultPos:"mid"}),...Qte("size",e),...gne(e)})}};function hae(e){if(a1([r8,e8,l8],e.mark)){const t=t7(e.mark,e.encoding);if(t.length>0)return function(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:pae+e.requestDataName(xte.Main),data:e.requestDataName(xte.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:gae(e,{fromPrefix:pae})}]}(e,t)}else if(e.mark===t8){const t=e5.some((t=>l5(t,e.markDef,e.config)));if(e.stack&&!e.fieldDef("size")&&t)return function(e){const[t]=gae(e,{fromPrefix:mae}),n=e.scaleName(e.stack.fieldChannel),r=(t={})=>e.vgField(e.stack.fieldChannel,t),i=(e,t)=>`${e}(${[r({prefix:"min",suffix:"start",expr:t}),r({prefix:"max",suffix:"start",expr:t}),r({prefix:"min",suffix:"end",expr:t}),r({prefix:"max",suffix:"end",expr:t})].map((e=>`scale('${n}',${e})`)).join(",")})`;let o,a;"x"===e.stack.fieldChannel?(o={...t1(t.encode.update,["y","yc","y2","height",...e5]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...n1(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...t1(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...n1(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const n of e5){const r=c5(n,e.markDef,e.config);t.encode.update[n]?(o[n]=t.encode.update[n],delete t.encode.update[n]):r&&(o[n]=i5(r)),r&&(t.encode.update[n]={value:0})}const s=[];if(e.stack.groupbyChannel){const t=e.fieldDef(e.stack.groupbyChannel),n=b9(t);n&&s.push(n),(t?.bin||t?.timeUnit)&&s.push(b9(t,{binSuffix:"end"}))}o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce(((n,r)=>{if(t.encode.update[r])return{...n,[r]:t.encode.update[r]};{const t=c5(r,e.markDef,e.config);return void 0!==t?{...n,[r]:i5(t)}:n}}),o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0});return[{type:"group",from:{facet:{data:e.requestDataName(xte.Main),name:mae+e.requestDataName(xte.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}(e)}return gae(e)}const pae="faceted_path_";const mae="stack_group_";function gae(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=T1(r.clip,function(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}(e),function(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),s=u5(r),u=i.key,l=function(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!gv(a)&&h9(a)&&o1(a.value)||!a&&o1(l5("order",i,o)))){if((gv(a)||a9(a))&&!n)return h5(a,{expr:"datum"});if(h8(r)){const n="horizontal"===i.orient?"y":"x",r=t[n];if(a9(r)){const t=r.sort;return gv(t)?{field:b9(r,{prefix:n,suffix:"sort_index",expr:"datum"})}:G8(t)?{field:b9({aggregate:Q9(e.encoding)?t.op:void 0,field:t.field},{expr:"datum"})}:V8(t)?{field:b9(e.fieldDef(t.encoding),{expr:"datum"}),order:t.order}:null===t?void 0:{field:b9(r,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}}}(e),c=function(e){if(!e.component.selection)return null;const t=v1(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=v1(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}(e),f=l5("aria",r,o),d=dae[n].postEncodingTransform?dae[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:dae[n].vgMark,...a?{clip:!0}:{},...s?{style:s}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...!1===f?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(xte.Main)},encode:{update:dae[n].encodeEntry(e)},...d?{transform:d}:{}}]}class yae extends Soe{constructor(e,t,n,r={},i){super(e,"unit",t,n,i,void 0,q7(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=g8(e.mark)?{...e.mark}:{type:e.mark},a=o.type;void 0===o.filled&&(o.filled=function(e,t,{graticule:n}){if(n)return!1;const r=c5("filled",e,t),i=e.type;return T1(r,i!==i8&&i!==r8&&i!==a8)}(o,i,{graticule:e.data&&bte(e.data)}));const s=this.encoding=K9(e.encoding||{},a,o.filled,i);this.markDef=aae(o,s,i),this.size=function({encoding:e,size:t}){for(const n of s3){const r=H2(n);U7(t[r])&&l9(e[n])&&(delete t[r],y5.warn(v5.stepDropped(r)))}return t}({encoding:s,size:q7(e)?{...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:r}),this.stack=hee(a,s),this.specifiedScales=this.initScales(a,s),this.specifiedAxes=this.initAxes(s),this.specifiedLegends=this.initLegends(s),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter((e=>P7(e)))}get hasProjection(){const{encoding:e}=this,t=this.mark===d8,n=e&&E2.some((t=>f9(e[t])));return t||n}scaleDomain(e){const t=this.specifiedScales[e];return t?t.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,t){return k3.reduce(((e,n)=>{const r=M9(t[n]);return r&&(e[n]=this.initScale(r.scale??{})),e}),{})}initScale(e){const{domain:t,range:n}=e,r=V3(e);return gv(t)&&(r.domain=t.map(n5)),gv(n)&&(r.range=n.map(n5)),r}initAxes(e){return s3.reduce(((t,n)=>{const r=e[n];if(f9(r)||n===W1&&f9(e.x2)||n===H1&&f9(e.y2)){const e=f9(r)?r.axis:void 0;t[n]=e?this.initAxis({...e}):e}return t}),{})}initAxis(e){const t=v1(e),n={};for(const r of t){const t=e[r];n[r]=I9(t)?t5(t):n5(t)}return n}initLegends(e){return w3.reduce(((t,n)=>{const r=M9(e[n]);if(r&&function(e){switch(e){case n2:case r2:case i2:case a2:case o2:case u2:case f2:case d2:return!0;case l2:case c2:case s2:return!1}}(n)){const e=r.legend;t[n]=e?V3(e):e}return t}),{})}parseData(){this.component.data=Xoe(this)}parseLayoutSize(){!function(e){const{size:t,component:n}=e;for(const r of s3){const i=H2(r);if(t[i]){const e=t[i];n.layoutSize.set(i,U7(e)?"step":e,!0)}else{const t=Hoe(e,i);n.layoutSize.set(i,t,!1)}}}(this)}parseSelections(){this.component.selection=function(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const t=_1(i.name),o=i.select,a=db(o)?o:o.type,s=yv(o)?e1(o):{type:a},{fields:u,encodings:l,...c}=r[a];for(const e in c)"mark"===e&&(s[e]={...c[e],...s[e]}),void 0!==s[e]&&!0!==s[e]||(s[e]=c[e]??s[e]);const f=n[t]={...s,name:t,type:a,init:i.value,bind:i.bind,events:db(s.on)?HV(s.on,"scope"):jv(e1(s.on))};for(const t of Pne)t.defined(f)&&t.parse&&t.parse(e,f,i)}return n}(this,this.selection)}parseMarkGroup(){this.component.mark=hae(this)}parseAxesAndHeaders(){var e;this.component.axes=(e=this,s3.reduce(((t,n)=>(e.component.scales[n]&&(t[n]=[oae(n,e)]),t)),{}))}assembleSelectionTopLevelSignals(e){return function(e,t){let n=!1;for(const r of b1(e.component.selection??{})){const i=r.name,o=xb(i+Tne);if(0===t.filter((e=>e.name===i)).length){const e="global"===r.resolve?"union":r.resolve,n="point"===r.type?", true, true)":")";t.push({name:r.name,update:`${Rne}(${o}, ${xb(e)}${n}`})}n=!0;for(const n of Pne)n.defined(r)&&n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}n&&0===t.filter((e=>"unit"===e.name)).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]});return Ate(t)}(this,e)}assembleSignals(){return[...Qne(this),...kte(this,[])]}assembleSelectionData(e){return function(e,t){const n=[...t];for(const t of b1(e.component.selection??{})){const r={name:t.name+Tne};if(t.init){const n=t.project.items.map((e=>{const{signals:t,...n}=e;return n}));r.values=t.init.map((t=>({unit:Lne(e,{escape:!1}),fields:n,values:_te(t,!1)})))}n.filter((e=>e.name===t.name+Tne)).length||n.push(r)}return n}(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return kre(this)}assembleMarks(){let e=this.component.mark??[];return this.parent&&koe(this.parent)||(e=Ste(this,e)),e.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return X9(this.encoding,e)}fieldDef(e){return D9(this.encoding[e])}typedFieldDef(e){const t=this.fieldDef(e);return d9(t)?t:null}}class vae extends Eoe{constructor(e,t,n,r,i){super(e,"layer",t,n,i,e.resolve,e.view);const o={...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map(((e,t)=>{if(see(e))return new vae(e,this,this.getName(`layer_${t}`),o,i);if(G9(e))return new yae(e,this,this.getName(`layer_${t}`),o,i);throw new Error(v5.invalidSpec(e))}))}parseData(){this.component.data=Xoe(this);for(const e of this.children)e.parseData()}parseLayoutSize(){var e;qoe(e=this),Woe(e,"width"),Woe(e,"height")}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of v1(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){!function(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const i of v1(r.component.axes))n.axis[i]=Fre(e.component.resolve,i),"shared"===n.axis[i]&&(t[i]=tae(t[i],r.component.axes[i]),t[i]||(n.axis[i]="independent",delete t[i]))}for(const i of s3){for(const o of e.children)if(o.component.axes[i]){if("independent"===n.axis[i]){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const e of o.component.axes[i]){const{value:t,explicit:n}=e.getWithExplicit("orient");if(!X3(t)){if(r[t]>0&&!n){const n=eae[t];r[t]>r[n]&&e.set("orient",n,!1)}r[t]++}}}delete o.component.axes[i]}if("independent"===n.axis[i]&&t[i]&&t[i].length>1)for(const e of t[i])e.get("grid")&&!e.explicit.grid&&(e.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleSignals())),Qne(this))}assembleLayoutSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleLayoutSignals())),kre(this))}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const t of this.children)if(e=t.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return function(e,t){for(const n of e.children)xoe(n)&&(t=Ste(n,t));return t}(this,this.children.flatMap((e=>e.assembleMarks())))}assembleLegends(){return this.children.reduce(((e,t)=>e.concat(t.assembleLegends())),Yre(this))}}function bae(e,t,n,r,i){if(J8(e))return new Goe(e,t,n,i);if(see(e))return new vae(e,t,n,r,i);if(G9(e))return new yae(e,t,n,r,i);if(function(e){return I7(e)||j7(e)||B7(e)}(e))return new Qoe(e,t,n,i);throw new Error(v5.invalidSpec(e))}function xae(e,t={}){t.logger&&y5.set(t.logger),t.fieldTitle&&k9(t.fieldTitle);try{const n=tee(bv(t.config,e.config)),r=Zee(e,n),i=bae(r,null,"",void 0,n);i.parse(),function(e,t){jie(e.sources);let n=0,r=0;for(let r=0;r<5&&qie(e,t,!0);r++)n++;e.sources.map(Lie);for(let n=0;n<5&&qie(e,t,!1);n++)r++;jie(e.sources),5===Math.max(n,r)&&y5.warn("Maximum optimization runs(5) reached.")}(i.component.data,i);return{spec:function(e,t,n={},r){const i=e.config?oee(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function(e,t){const n=[],r=Boe(n);let i=0;for(const t of e.sources){t.hasName()||(t.dataName="source_"+i++);const e=t.assemble();r(t,e)}for(const e of n)0===e.transform.length&&delete e.transform;let o=0;for(const[e,t]of n.entries())0!==(t.transform??[]).length||t.source||n.splice(o++,0,n.splice(e,1)[0]);for(const t of n)for(const n of t.transform??[])"lookup"===n.type&&(n.from=e.outputNodes[n.from].getSource());for(const e of n)e.name in t&&(e.values=t[e.name]);return n}(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter((e=>"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)));const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...s?{title:s}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...L7(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}(i,function(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):db(t)&&(t={type:t});if(i&&o&&(a=t.type,"fit"===a||"fit-x"===a||"fit-y"===a))if("step"===i&&"step"===o)y5.warn(v5.droppingFit()),t.type="pad";else if("step"===i||"step"===o){const e="step"===i?"width":"height";y5.warn(v5.droppingFit(f3(e)));const n="width"===e?"height":"width";t.type=function(e){return e?`fit-${f3(e)}`:"fit"}(n)}var a;return{...1===v1(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...ote(n,!1),...ote(e,!0)}}(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&y5.reset(),t.fieldTitle&&k9(w9)}}n(B0,j0);const wae=I0.version;t(B0,"version",(function(){return wae})),t(B0,"compile",(function(){return xae})),t(B0,"normalize",(function(){return Zee}));var _ae={};const kae="#fff",Eae={background:"#333",title:{color:kae,subtitleColor:kae},style:{"guide-label":{fill:kae},"guide-title":{fill:kae}},axis:{domainColor:kae,gridColor:"#888",tickColor:kae}},Sae="#4572a7",Aae={background:"#fff",arc:{fill:Sae},area:{fill:Sae},line:{stroke:Sae,strokeWidth:2},path:{stroke:Sae},rect:{fill:Sae},shape:{stroke:Sae},symbol:{fill:Sae,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Cae="#30a2da",Dae="#cbcbcb",Mae="#f0f0f0",Fae="#333",Nae={arc:{fill:Cae},area:{fill:Cae},axis:{domainColor:Dae,grid:!0,gridColor:Dae,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:Dae,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Mae,group:{fill:Mae},legend:{labelColor:Fae,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Fae,titleFontSize:14,titlePadding:10},line:{stroke:Cae,strokeWidth:2},path:{stroke:Cae,strokeWidth:.5},rect:{fill:Cae},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Cae},bar:{binSpacing:2,fill:Cae,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},$ae="#000",Tae={group:{fill:"#e5e5e5"},arc:{fill:$ae},area:{fill:$ae},line:{stroke:$ae},path:{stroke:$ae},rect:{fill:$ae},shape:{stroke:$ae},symbol:{fill:$ae,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Oae="Benton Gothic, sans-serif",zae="#82c6df",Rae="Benton Gothic Bold, sans-serif",Pae="normal",Lae={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Bae={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Rae,fontSize:22,fontWeight:"normal"},arc:{fill:zae},area:{fill:zae},line:{stroke:zae,strokeWidth:2},path:{stroke:zae},rect:{fill:zae},shape:{stroke:zae},symbol:{fill:zae,size:30},axis:{labelFont:Oae,labelFontSize:11.5,labelFontWeight:"normal",titleFont:Rae,titleFontSize:13,titleFontWeight:Pae},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Oae,labelFontSize:11.5,symbolType:"square",titleFont:Rae,titleFontSize:13,titleFontWeight:Pae},range:{category:Lae["category-6"],diverging:Lae["fireandice-6"],heatmap:Lae["fire-7"],ordinal:Lae["fire-7"],ramp:Lae["fire-7"]}},Iae="#ab5787",jae="#979797",Uae={background:"#f9f9f9",arc:{fill:Iae},area:{fill:Iae},line:{stroke:Iae},path:{stroke:Iae},rect:{fill:Iae},shape:{stroke:Iae},symbol:{fill:Iae,size:30},axis:{domainColor:jae,domainWidth:.5,gridWidth:.2,labelColor:jae,tickColor:jae,tickWidth:.2,titleColor:jae},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},qae="#3e5c69",Wae={background:"#fff",arc:{fill:qae},area:{fill:qae},line:{stroke:qae},path:{stroke:qae},rect:{fill:qae},shape:{stroke:qae},symbol:{fill:qae},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Hae="#1696d2",Vae="#000000",Gae="Lato",Yae="Lato",Xae={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Qae={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:Gae},axisX:{domain:!0,domainColor:Vae,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Yae,labelAngle:0,tickColor:Vae,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Gae},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:Yae,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Gae,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Yae,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Gae,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Xae["six-groups-cat-1"],diverging:Xae["diverging-colors"],heatmap:Xae["diverging-colors"],ordinal:Xae["six-groups-seq"],ramp:Xae["shades-blue"]},area:{fill:Hae},rect:{fill:Hae},line:{color:Hae,stroke:Hae,strokeWidth:5},trail:{color:Hae,stroke:Hae,strokeWidth:0,size:1},path:{stroke:Hae,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Hae,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Hae,stroke:null}},arc:{fill:Hae},shape:{stroke:Hae},symbol:{fill:Hae,size:30}},Jae="#3366CC",Kae="#ccc",Zae="Arial, sans-serif",ese={arc:{fill:Jae},area:{fill:Jae},path:{stroke:Jae},rect:{fill:Jae},shape:{stroke:Jae},symbol:{stroke:Jae},circle:{fill:Jae},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Zae,fontSize:12},"guide-title":{font:Zae,fontSize:12},"group-title":{font:Zae,fontSize:12}},title:{font:Zae,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Kae,tickColor:Kae,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},tse="2.10.0";t(_ae,"vox",(function(){return Wae})),t(_ae,"version",(function(){return tse})),t(_ae,"urbaninstitute",(function(){return Qae})),t(_ae,"quartz",(function(){return Uae})),t(_ae,"latimes",(function(){return Bae})),t(_ae,"googlecharts",(function(){return ese})),t(_ae,"ggplot2",(function(){return Tae})),t(_ae,"fivethirtyeight",(function(){return Nae})),t(_ae,"excel",(function(){return Aae})),t(_ae,"dark",(function(){return Eae}));var nse;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});const rse=Jy;let ise=B0;const ose="undefined"!=typeof window?window:void 0;void 0===ise&&(null===(nse=null==ose?void 0:ose.vl)||void 0===nse?void 0:nse.compile)&&(ise=ose.vl);rse.version,ise&&ise.version;xe();var ase=function(e){return function(){return this.matches(e)}};function sse(e){return function(t){return t.matches(e)}}var use="http://www.w3.org/1999/xhtml",lse={svg:"http://www.w3.org/2000/svg",xhtml:use,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},cse=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),lse.hasOwnProperty(t)?{space:lse[t],local:e}:e};function fse(){}var dse=function(e){return null==e?fse:function(){return this.querySelector(e)}},hse=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function pse(){return[]}var mse=function(e){return null==e?pse:function(){return this.querySelectorAll(e)}};var gse=Array.prototype.find;function yse(){return this.firstElementChild}var vse=Array.prototype.filter;function bse(){return this.children}var xse=function(e){return new Array(e.length)};function wse(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}wse.prototype={constructor:wse,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var _se=function(e){return function(){return e}};function kse(e,t,n,r,i,o){for(var a,s=0,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new wse(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function Ese(e,t,n,r,i,o,a){var s,u,l,c=new Map,f=t.length,d=o.length,h=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(h[s]=l=a.call(u,u.__data__,s,t)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<d;++s)l=a.call(e,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new wse(e,o[s]);for(s=0;s<f;++s)(u=t[s])&&c.get(h[s])===u&&(i[s]=u)}function Sse(e){return e.__data__}function Ase(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Cse(e){return function(){this.removeAttribute(e)}}function Dse(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mse(e,t){return function(){this.setAttribute(e,t)}}function Fse(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Nse(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function $se(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var Tse=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Ose(e){return function(){this.style.removeProperty(e)}}function zse(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Rse(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Pse(e,t){return e.style.getPropertyValue(t)||Tse(e).getComputedStyle(e,null).getPropertyValue(t)}function Lse(e){return function(){delete this[e]}}function Bse(e,t){return function(){this[e]=t}}function Ise(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function jse(e){return e.trim().split(/^|\s+/)}function Use(e){return e.classList||new qse(e)}function qse(e){this._node=e,this._names=jse(e.getAttribute("class")||"")}function Wse(e,t){for(var n=Use(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Hse(e,t){for(var n=Use(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Vse(e){return function(){Wse(this,e)}}function Gse(e){return function(){Hse(this,e)}}function Yse(e,t){return function(){(t.apply(this,arguments)?Wse:Hse)(this,e)}}qse.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Xse(){this.textContent=""}function Qse(e){return function(){this.textContent=e}}function Jse(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Kse(){this.innerHTML=""}function Zse(e){return function(){this.innerHTML=e}}function eue(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function tue(){this.nextSibling&&this.parentNode.appendChild(this)}function nue(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rue(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===use&&t.documentElement.namespaceURI===use?t.createElement(e):t.createElementNS(n,e)}}function iue(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var oue=function(e){var t=cse(e);return(t.local?iue:rue)(t)};function aue(){return null}function sue(){var e=this.parentNode;e&&e.removeChild(this)}function uue(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lue(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cue(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function fue(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function due(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function hue(e,t,n){var r=Tse(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function pue(e,t){return function(){return hue(this,e,t)}}function mue(e,t){return function(){return hue(this,e,t.apply(this,arguments))}}var gue=[null];function yue(e,t){this._groups=e,this._parents=t}function vue(){return new yue([[document.documentElement]],gue)}yue.prototype=vue.prototype={constructor:yue,select:function(e){"function"!=typeof e&&(e=dse(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new yue(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:hse(t)}}(e):mse(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),i.push(a));return new yue(r,i)},selectChild:function(e){return this.select(null==e?yse:function(e){return function(){return gse.call(this.children,e)}}("function"==typeof e?e:sse(e)))},selectChildren:function(e){return this.selectAll(null==e?bse:function(e){return function(){return vse.call(this.children,e)}}("function"==typeof e?e:sse(e)))},filter:function(e){"function"!=typeof e&&(e=ase(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new yue(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Sse);var n=t?Ese:kse,r=this._parents,i=this._groups;"function"!=typeof e&&(e=_se(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,h=hse(e.call(c,c&&c.__data__,l,r)),p=h.length,m=s[l]=new Array(p),g=a[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v,b,x=0,w=0;x<p;++x)if(v=m[x]){for(x>=w&&(w=x+1);!(b=g[w])&&++w<p;);v._next=b||null}}return(a=new yue(a,r))._enter=s,a._exit=u,a},enter:function(){return new yue(this._enter||this._groups.map(xse),this._parents)},exit:function(){return new yue(this._exit||this._groups.map(xse),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof yue))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],f=l.length,d=a[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)a[s]=t[s];return new yue(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Ase);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new yue(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=cse(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Dse:Cse:"function"==typeof t?n.local?$se:Nse:n.local?Fse:Mse)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Ose:"function"==typeof t?Rse:zse)(e,t,null==n?"":n)):Pse(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Lse:"function"==typeof t?Ise:Bse)(e,t)):this.node()[e]},classed:function(e,t){var n=jse(e+"");if(arguments.length<2){for(var r=Use(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Yse:t?Vse:Gse)(n,t))},text:function(e){return arguments.length?this.each(null==e?Xse:("function"==typeof e?Jse:Qse)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Kse:("function"==typeof e?eue:Zse)(e)):this.node().innerHTML},raise:function(){return this.each(tue)},lower:function(){return this.each(nue)},append:function(e){var t="function"==typeof e?e:oue(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:oue(e),r=null==t?aue:"function"==typeof t?t:dse(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(sue)},clone:function(e){return this.select(e?lue:uue)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=cue(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?due:fue,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?mue:pue)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var bue=nI("start","end","cancel","interrupt"),xue=[],wue=function(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var l,c,f,d;if(1!==n.state)return u();for(l in i)if((d=i[l]).name===n.name){if(3===d.state)return EI(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(EI((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=xI(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:bue,tween:xue,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function _ue(e,t){var n=Eue(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function kue(e,t){var n=Eue(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Eue(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var Sue=function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}};function Aue(e,t){var n,r;return function(){var i=kue(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function Cue(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=kue(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function Due(e,t,n){var r=e._id;return e.each((function(){var e=kue(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Eue(e,r).value[t]}}var Mue=function(e,t){var n;return("number"==typeof t?tp:t instanceof Xd?Vh:(n=Xd(t))?(t=n,Vh):ap)(e,t)};function Fue(e){return function(){this.removeAttribute(e)}}function Nue(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $ue(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function Tue(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Oue(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttribute(e)}}function zue(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttributeNS(e.space,e.local)}}function Rue(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Pue(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Lue(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Pue(e,i)),n}return i._value=t,i}function Bue(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Rue(e,i)),n}return i._value=t,i}function Iue(e,t){return function(){_ue(this,e).delay=+t.apply(this,arguments)}}function jue(e,t){return t=+t,function(){_ue(this,e).delay=t}}function Uue(e,t){return function(){kue(this,e).duration=+t.apply(this,arguments)}}function que(e,t){return t=+t,function(){kue(this,e).duration=t}}function Wue(e,t){if("function"!=typeof t)throw new Error;return function(){kue(this,e).ease=t}}function Hue(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?_ue:kue;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var Vue=vue.prototype.constructor;function Gue(e){return function(){this.style.removeProperty(e)}}function Yue(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Xue(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Yue(e,o,n)),r}return o._value=t,o}function Que(e){return function(t){this.textContent=e.call(this,t)}}function Jue(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Que(r)),t}return r._value=e,r}var Kue=0;function Zue(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ele(){return++Kue}var tle=vue.prototype;Zue.prototype=function(e){return vue().transition(e)}.prototype={constructor:Zue,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=dse(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=l[d])&&(u=e.call(s,s.__data__,d,l))&&("__data__"in s&&(u.__data__=s.__data__),f[d]=u,wue(f[d],t,n,d,f,Eue(s,n)));return new Zue(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=mse(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var d,h=e.call(u,u.__data__,f,l),p=Eue(u,n),m=0,g=h.length;m<g;++m)(d=h[m])&&wue(d,t,n,m,h,p);o.push(h),a.push(u)}return new Zue(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=ase(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new Zue(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],f=l.length,d=a[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)a[s]=t[s];return new Zue(a,this._parents,this._name,this._id)},selection:function(){return new Vue(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=ele(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=Eue(a,t);wue(a,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Zue(r,this._parents,e,n)},call:tle.call,nodes:tle.nodes,node:tle.node,size:tle.size,empty:tle.empty,each:tle.each,on:function(e,t){var n=this._id;return arguments.length<2?Eue(this.node(),n).on.on(e):this.each(Hue(n,e,t))},attr:function(e,t){var n=cse(e),r="transform"===n?gp:Mue;return this.attrTween(e,"function"==typeof t?(n.local?zue:Oue)(n,r,Due(this,"attr."+e,t)):null==t?(n.local?Nue:Fue)(n):(n.local?Tue:$ue)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=cse(e);return this.tween(n,(r.local?Lue:Bue)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?mp:Mue;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=Pse(this,e),a=(this.style.removeProperty(e),Pse(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,Gue(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=Pse(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=Pse(this,e)),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}(e,r,Due(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var u=kue(this,e),l=u.on,c=null==u.value[a]?o||(o=Gue(t)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=Pse(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Xue(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Due(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Jue(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Eue(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Aue:Cue)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Iue:jue)(t,e)):Eue(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Uue:que)(t,e)):Eue(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(Wue(t,e)):Eue(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;kue(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=kue(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:tle[Symbol.iterator]};var nle={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function rle(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}vue.prototype.interrupt=function(e){return this.each((function(){Sue(this,e)}))},vue.prototype.transition=function(e){var t,n;e instanceof Zue?(t=e._id,e=e._name):(t=ele(),(n=nle).time=yI(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&wue(a,e,t,l,s,n||rle(a,t));return new Zue(r,this._parents,e,t)};const{abs:ile,max:ole,min:ale}=Math;["w","e"].map(sle),["n","s"].map(sle),["n","w","e","s","nw","ne","sw","se"].map(sle);function sle(e){return{type:e}}function ule(e,t,n){this.k=e,this.x=t,this.y=n}ule.prototype={constructor:ule,scale:function(e){return 1===e?this:new ule(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new ule(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new ule(1,0,0);ule.prototype;function lle(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}var cle=function(e,t){return fetch(e,t).then(lle)};function fle(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),cle(t,n).then((function(t){return e(t,r)}))}}var dle=fle(Zb);fle(tx);xe();const hle=e=>{const[t,n]=xe().useState([]),[r,i]=xe().useState(!0);return xe().useEffect((()=>{!async function(){const t=await dle(e);n(t),i(!1)}()}),[]),[t,r]};function ple(){const[e,t]=hle("https://raw.githubusercontent.com/Cnovotn/Info474Assignment2/main/data/MLBStats.csv"),n=e.slice(0,300),r=ad(n,(e=>+e.salary));um().domain(r).range([480,150]);return _bins=bd(),salaryBins=_bins(n.map((e=>+e.salary))),console.log(salaryBins.map(((e,t)=>{console.log(t,e)}))),ve.createElement("div",null,ve.createElement("div",{id:"team-salary"},ve.createElement("p",null,t&&"Loading the data!!!")),ve.createElement("p",{className:"vis-description"},"Description for the team salarys of 2001"))}xe();class mle extends xe().Component{render(){return ve.createElement("div",null,ve.createElement("h1",null,"Clayton Novotney"),ve.createElement("h2",null,"Info 474"),ve.createElement("h2",null,"April 20th, 2021"),ve.createElement("h3",null,"Exploratory Data Analysis, Assignment 2"),ve.createElement("br",null),ve.createElement("h2",null,"Step 1: Data Selection"),ve.createElement("h4",null,"Data Selected: MLB Statitistics"),ve.createElement("p",null,"In this data set, there are roughly ~28,000 rows of data including information about individuals players and statistics on each of their seasons from 1985-2016."),ve.createElement("p",null,"Since I am a big Seattle Mariners fan, and have been my entire life. I am curious about the statistics of the historic 2001 season where they were able to break the all time win record and set a new one at 116 wins in a single season."),ve.createElement("p",null,"I am also very interested to look at the statistics of the Arizona Diamondbacks who won the world series that season, as well as the New York Yankees who beat us 4-1 in the series to end our playoff run."),ve.createElement("p",null,"Unfortunately, the 2021 season underway right now is a promising season for the Los Angeles Dodgers and it is speculated that they might be able to take the throne away from the Mariners and beat the record of 116 wins."),ve.createElement("p",null,"The columns I am most interested in are:"),ve.createElement("p",null,"Bats, Franchise, Throws, Season, Hits (H), Homeruns (HR), RBI, Salary"),ve.createElement("br",null),ve.createElement("h4",null,"Questions: "),ve.createElement("p",null,"1) How has the avg salary per player on each team progressed as the years have gone on?"),ve.createElement("p",null,"2) What is the correlation between the number of wins each franchise has in comparison to the amount of money they spend on players?"),ve.createElement("p",null,"3) What is the cost effectiveness of certain teams per hit/homerun"),ve.createElement("br",null),ve.createElement("h2",null,"Step 2: Exploratory Visual Analysis"),ve.createElement("p",null,"While using tableau, I was able to put together the following visualizations that allowed me to draw more insightful conclusions about the data that I have been working with"))}}const gle=()=>ve.createElement("div",null,ve.createElement(mle,null),ve.createElement(ple,null));Zf.render(ve.createElement(gle,null),document.querySelector("#root"))}();
//# sourceMappingURL=index.45e28683.js.map
